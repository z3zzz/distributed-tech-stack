"use strict";var tN=Object.create;var Cv=Object.defineProperty;var rN=Object.getOwnPropertyDescriptor;var nN=Object.getOwnPropertyNames;var iN=Object.getPrototypeOf,sN=Object.prototype.hasOwnProperty;var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var oN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nN(t))!sN.call(e,i)&&i!==r&&Cv(e,i,{get:()=>t[i],enumerable:!(n=rN(t,i))||n.enumerable});return e};var Wi=(e,t,r)=>(r=e!=null?tN(iN(e)):{},oN(t||!e||!e.__esModule?Cv(r,"default",{value:e,enumerable:!0}):r,e));var z=(e,t,r)=>new Promise((n,i)=>{var s=u=>{try{a(r.next(u))}catch(l){i(l)}},o=u=>{try{a(r.throw(u))}catch(l){i(l)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);a((r=r.apply(e,t)).next())});var xv=w((BZ,kv)=>{"use strict";function aN(e){var t=new e,r=t;function n(){var s=t;return s.next?t=s.next:(t=new e,r=t),s.next=null,s}function i(s){r.next=s,r=s}return{get:n,release:i}}kv.exports=aN});var Hc=w((GZ,zc)=>{"use strict";var uN=xv();function qv(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),r<1)throw new Error("fastqueue concurrency must be greater than 1");var n=uN(lN),i=null,s=null,o=0,a=null,u={push:m,drain:qr,saturated:qr,pause:f,paused:!1,concurrency:r,running:l,resume:d,idle:p,length:c,getQueue:h,unshift:v,empty:qr,kill:P,killAndDrain:g,error:y};return u;function l(){return o}function f(){u.paused=!0}function c(){for(var R=i,$=0;R;)R=R.next,$++;return $}function h(){for(var R=i,$=[];R;)$.push(R.value),R=R.next;return $}function d(){if(!!u.paused){u.paused=!1;for(var R=0;R<u.concurrency;R++)o++,b()}}function p(){return o===0&&u.length()===0}function m(R,$){var _=n.get();_.context=e,_.release=b,_.value=R,_.callback=$||qr,_.errorHandler=a,o===u.concurrency||u.paused?s?(s.next=_,s=_):(i=_,s=_,u.saturated()):(o++,t.call(e,_.value,_.worked))}function v(R,$){var _=n.get();_.context=e,_.release=b,_.value=R,_.callback=$||qr,o===u.concurrency||u.paused?i?(_.next=i,i=_):(i=_,s=_,u.saturated()):(o++,t.call(e,_.value,_.worked))}function b(R){R&&n.release(R);var $=i;$?u.paused?o--:(s===i&&(s=null),i=$.next,$.next=null,t.call(e,$.value,$.worked),s===null&&u.empty()):--o===0&&u.drain()}function P(){i=null,s=null,u.drain=qr}function g(){i=null,s=null,u.drain(),u.drain=qr}function y(R){a=R}}function qr(){}function lN(){this.value=null,this.callback=qr,this.next=null,this.release=qr,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var i=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=qr,e.errorHandler&&s(r,o),i.call(e.context,r,n),e.release(e)}}function fN(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(f,c){t.call(this,f).then(function(h){c(null,h)},c)}var i=qv(e,n,r),s=i.push,o=i.unshift;return i.push=a,i.unshift=u,i.drained=l,i;function a(f){var c=new Promise(function(h,d){s(f,function(p,m){if(p){d(p);return}h(m)})});return c.catch(qr),c}function u(f){var c=new Promise(function(h,d){o(f,function(p,m){if(p){d(p);return}h(m)})});return c.catch(qr),c}function l(){var f=i.drain,c=new Promise(function(h){i.drain=function(){f(),h()}});return c}}zc.exports=qv;zc.exports.promise=fN});var Vc=w((KZ,Nv)=>{"use strict";var{inherits:cN,format:Uc}=require("util");function Ji(e,t,r=Error){if(!e)throw new Error("Avvio error code must not be empty");if(!t)throw new Error("Avvio base error message must not be empty");function n(i,s,o){if(!(this instanceof n))return new n(i,s,o);Error.captureStackTrace(this,n),this.code=e,this.message=t,this.name="AvvioError",i&&s&&o?this.message=Uc(t,i,s,o):i&&s?this.message=Uc(t,i,s):i?this.message=Uc(t,i):this.message=t}return n.prototype[Symbol.toStringTag]="Error",n.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},cN(n,r),n}Nv.exports={createError:Ji,AVV_ERR_EXPOSE_ALREADY_DEFINED:Ji("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' () is already defined, specify an expose option"),AVV_ERR_CALLBACK_NOT_FN:Ji("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:Ji("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:Ji("AVV_ERR_PLUGIN_NOT_VALID","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:Ji("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:Ji("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var jv=w((QZ,Dv)=>{Dv.exports=function e(t,r,n){r===void 0&&(r=""),n||(n={});var i=function(u){var l={"\u2502":"|","\u2514":"`","\u251C":"+","\u2500":"-","\u252C":"-"};return n.unicode===!1?l[u]:u};typeof t=="string"&&(t={label:t});var s=t.nodes||[],o=(t.label||"").split(`
`),a=`
`+r+(s.length?i("\u2502"):" ")+" ";return r+o.join(a)+`
`+s.map(function(u,l){var f=l===s.length-1,c=u.nodes&&u.nodes.length,h=r+(f?" ":i("\u2502"))+" ";return r+i(f?"\u2514":"\u251C")+i("\u2500")+i(c?"\u252C":"\u2500")+" "+e(u,h,n).slice(r.length+2)}).join("")}});var Uv=w((WZ,Hv)=>{"use strict";var hN=jv(),Lv=Symbol("avvio.TimeTree.untrackNode"),Bc=Symbol("avvio.TimeTree.trackNode"),Fv=Symbol("avvio.TimeTree.getParent"),Mv=Symbol("avvio.TimeTree.getNode"),zv=Symbol("avvio.TimeTree.addNode"),Gc=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[Bc](t){this.tableId.set(t.id,t),this.tableLabel.has(t.label)?this.tableLabel.get(t.label).push(t):this.tableLabel.set(t.label,[t])}[Lv](t){this.tableId.delete(t.id);let r=this.tableLabel.get(t.label);if(r.id){this.tableLabel.delete(t.label);return}r.pop(),r.length===0&&this.tableLabel.delete(t.label)}[Fv](t){if(t===null)return this.root;let r=this.tableLabel.get(t);return r.id?r:r[r.length-1]}[Mv](t){return this.tableId.get(t)}[zv](t,r,n){if(t===null)return this.root={id:"root",label:r,start:n,nodes:[]},this[Bc](this.root),this.root.id;let s=this[Fv](t),o=`${r}-${Math.random()}`,a={id:o,parent:t,start:n,label:r,nodes:[]};return s.nodes.push(a),this[Bc](a),o}start(t,r,n=Date.now()){return this[zv](t,r,n)}stop(t,r=Date.now()){let n=this[Mv](t);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[Lv](n))}toJSON(){return Object.assign({},this.root)}prittyPrint(){let t=n=>(n.label=`${n.label} ${n.diff} ms`,n.nodes.length>0&&(n.nodes=n.nodes.map(i=>t(i))),n),r=t(this.toJSON());return hN(r)}};Hv.exports=Gc});var Bv=w((JZ,Vv)=>{var Ls=1e3,Fs=Ls*60,Ms=Fs*60,Yi=Ms*24,dN=Yi*7,pN=Yi*365.25;Vv.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return mN(e);if(r==="number"&&isFinite(e))return t.long?gN(e):yN(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function mN(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*pN;case"weeks":case"week":case"w":return r*dN;case"days":case"day":case"d":return r*Yi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ms;case"minutes":case"minute":case"mins":case"min":case"m":return r*Fs;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ls;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function yN(e){var t=Math.abs(e);return t>=Yi?Math.round(e/Yi)+"d":t>=Ms?Math.round(e/Ms)+"h":t>=Fs?Math.round(e/Fs)+"m":t>=Ls?Math.round(e/Ls)+"s":e+"ms"}function gN(e){var t=Math.abs(e);return t>=Yi?Wu(e,t,Yi,"day"):t>=Ms?Wu(e,t,Ms,"hour"):t>=Fs?Wu(e,t,Fs,"minute"):t>=Ls?Wu(e,t,Ls,"second"):e+" ms"}function Wu(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Kc=w((YZ,Gv)=>{function vN(e){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Bv(),r.destroy=l,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let c=0;for(let h=0;h<f.length;h++)c=(c<<5)-c+f.charCodeAt(h),c|=0;return r.colors[Math.abs(c)%r.colors.length]}r.selectColor=t;function r(f){let c,h=null,d,p;function m(...v){if(!m.enabled)return;let b=m,P=Number(new Date),g=P-(c||P);b.diff=g,b.prev=c,b.curr=P,c=P,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let y=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,($,_)=>{if($==="%%")return"%";y++;let I=r.formatters[_];if(typeof I=="function"){let x=v[y];$=I.call(b,x),v.splice(y,1),y--}return $}),r.formatArgs.call(b,v),(b.log||r.log).apply(b,v)}return m.namespace=f,m.useColors=r.useColors(),m.color=r.selectColor(f),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(f)),p),set:v=>{h=v}}),typeof r.init=="function"&&r.init(m),m}function n(f,c){let h=r(this.namespace+(typeof c>"u"?":":c)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let c,h=(typeof f=="string"?f:"").split(/[\s,]+/),d=h.length;for(c=0;c<d;c++)!h[c]||(f=h[c].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(c=>"-"+c)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let c,h;for(c=0,h=r.skips.length;c<h;c++)if(r.skips[c].test(f))return!1;for(c=0,h=r.names.length;c<h;c++)if(r.names[c].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Gv.exports=vN});var Kv=w((_r,Ju)=>{_r.formatArgs=bN;_r.save=EN;_r.load=_N;_r.useColors=wN;_r.storage=SN();_r.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();_r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function wN(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bN(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ju.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}_r.log=console.debug||console.log||(()=>{});function EN(e){try{e?_r.storage.setItem("debug",e):_r.storage.removeItem("debug")}catch{}}function _N(){let e;try{e=_r.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function SN(){try{return localStorage}catch{}}Ju.exports=Kc()(_r);var{formatters:PN}=Ju.exports;PN.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Wv=w((XZ,Qv)=>{"use strict";Qv.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Xv=w((ZZ,Yv)=>{"use strict";var RN=require("os"),Jv=require("tty"),Nr=Wv(),{env:_t}=process,ci;Nr("no-color")||Nr("no-colors")||Nr("color=false")||Nr("color=never")?ci=0:(Nr("color")||Nr("colors")||Nr("color=true")||Nr("color=always"))&&(ci=1);"FORCE_COLOR"in _t&&(_t.FORCE_COLOR==="true"?ci=1:_t.FORCE_COLOR==="false"?ci=0:ci=_t.FORCE_COLOR.length===0?1:Math.min(parseInt(_t.FORCE_COLOR,10),3));function Qc(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Wc(e,t){if(ci===0)return 0;if(Nr("color=16m")||Nr("color=full")||Nr("color=truecolor"))return 3;if(Nr("color=256"))return 2;if(e&&!t&&ci===void 0)return 0;let r=ci||0;if(_t.TERM==="dumb")return r;if(process.platform==="win32"){let n=RN.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in _t)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in _t)||_t.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in _t)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(_t.TEAMCITY_VERSION)?1:0;if(_t.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in _t){let n=parseInt((_t.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(_t.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(_t.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(_t.TERM)||"COLORTERM"in _t?1:r}function TN(e){let t=Wc(e,e&&e.isTTY);return Qc(t)}Yv.exports={supportsColor:TN,stdout:Qc(Wc(!0,Jv.isatty(1))),stderr:Qc(Wc(!0,Jv.isatty(2)))}});var ew=w((xt,Xu)=>{var AN=require("tty"),Yu=require("util");xt.init=qN;xt.log=CN;xt.formatArgs=IN;xt.save=kN;xt.load=xN;xt.useColors=$N;xt.destroy=Yu.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");xt.colors=[6,2,3,4,5,1];try{let e=Xv();e&&(e.stderr||e).level>=2&&(xt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}xt.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function $N(){return"colors"in xt.inspectOpts?Boolean(xt.inspectOpts.colors):AN.isatty(process.stderr.fd)}function IN(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Xu.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=ON()+t+" "+e[0]}function ON(){return xt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function CN(...e){return process.stderr.write(Yu.format(...e)+`
`)}function kN(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function xN(){return process.env.DEBUG}function qN(e){e.inspectOpts={};let t=Object.keys(xt.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=xt.inspectOpts[t[r]]}Xu.exports=Kc()(xt);var{formatters:Zv}=Xu.exports;Zv.o=function(e){return this.inspectOpts.colors=this.useColors,Yu.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Zv.O=function(e){return this.inspectOpts.colors=this.useColors,Yu.inspect(e,this.inspectOpts)}});var Yc=w((eee,Jc)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Jc.exports=Kv():Jc.exports=ew()});var tw=w((tee,eh)=>{"use strict";var NN=Hc(),DN=require("events").EventEmitter,jN=require("util").inherits,St=Yc()("avvio"),{AVV_ERR_READY_TIMEOUT:LN}=Vc(),Xc=Symbol.for("plugin-meta");function FN(e,t){return e[Xc]&&e[Xc].name?e[Xc].name:typeof t<"u"&&typeof t!="function"&&t.name?t.name:e.name?e.name:e.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}function MN(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}function zs(e,t,r,n,i){this.started=!1,this.func=t,this.opts=r,this.onFinish=null,this.parent=e,this.timeout=i===void 0?e._timeout:i,this.name=FN(t,r),this.isAfter=n,this.q=NN(e,zN,1),this.q.pause(),this._error=null,this.loaded=!1,this._promise=null}jN(zs,DN);zs.prototype.exec=function(e,t){let r=this.func,n=!1,i=this.name;if(this.parent._error&&!this.isAfter){St("skipping loading of plugin as parent errored and it is not an after",i),process.nextTick(t);return}if(this.isAfter)this.server=e;else try{this.server=this.parent.override(e,r,this.opts)}catch(u){return St("override errored",i),t(u)}this.opts=typeof this.opts=="function"?this.opts(this.server):this.opts,St("exec",i);let s,o=u=>{if(n){St("loading complete",i);return}this._error=u,St(u?"exec errored":"exec completed",i),n=!0,s&&clearTimeout(s),t(u)};this.timeout>0&&(St("setting up timeout",i,this.timeout),s=setTimeout(function(){St("timed out",i),s=null;let u=new LN(i);u.fn=r,o(u)},this.timeout)),this.started=!0,this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.opts,o);a&&typeof a.then=="function"&&(St("exec: resolving promise",i),a.then(()=>process.nextTick(o),u=>process.nextTick(o,u)))};zs.prototype.loadedSoFar=function(){if(this.loaded)return Promise.resolve();let e=()=>{this.server.after((r,n)=>{this._error=r,this.q.pause(),r?(St("rejecting promise",this.name,r),this._promise.reject(r)):(St("resolving promise",this.name),this._promise.resolve()),this._promise=null,process.nextTick(n,r)}),this.q.resume()},t;return this._promise?t=Promise.resolve():(this._promise=MN(),t=this._promise.promise,this.server?e():this.on("start",e)),t};zs.prototype.enqueue=function(e,t){St("enqueue",this.name,e.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.q.push(e,t)};zs.prototype.finish=function(e,t){St("finish",this.name,e);let r=()=>{this.loaded||(St("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,t(e))};if(e){this._promise&&(this._promise.reject(e),this._promise=null),r();return}let n=()=>{if(St("check",this.name,this.q.length(),this.q.running(),this._promise),this.q.length()===0&&this.q.running()===0)if(this._promise){let i=()=>{St("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(i,i),this._promise=null}else r();else St("delayed",this.name),this.q.drain=()=>{St("drain",this.name),this.q.drain=HN,queueMicrotask(n)}};queueMicrotask(n),this.q.resume()};function zN(e,t){let r=this;process.nextTick(Zc.bind(r),e,t)}function Zc(e,t){if(typeof e.func.then=="function"){e.func.then(n=>{typeof n.default=="function"&&(n=n.default),e.func=n,Zc.call(this,e,t)},t);return}let r=this._current[0];this._current.unshift(e),e.exec(r&&r.server||this._server,n=>{e.finish(n,i=>{this._current.shift(),t(i)})})}function HN(){}eh.exports=zs;eh.exports.loadPlugin=Zc});var ow=w((ree,sh)=>{"use strict";var rw=Hc(),UN=require("events").EventEmitter,VN=require("util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:th,AVV_ERR_CALLBACK_NOT_FN:sa,AVV_ERR_PLUGIN_NOT_VALID:BN,AVV_ERR_ROOT_PLG_BOOTED:GN,AVV_ERR_READY_TIMEOUT:KN}=Vc(),QN=Uv(),ih=tw(),Hs=Yc()("avvio"),Zu=Symbol("kAvvio"),rh=Symbol("kThenifyDoNotWrap");function WN(e,t,r){let n=t.expose||{},i=n.use||"use",s=n.after||"after",o=n.ready||"ready",a=n.onClose||"onClose",u=n.close||"close";if(e[i])throw new th(i);if(e[s])throw new th(s);if(e[o])throw new th(o);e[i]=function(l,f){return r.use(l,f),this},Object.defineProperty(e,"then",{get:iw.bind(r)}),e[Zu]=!0,e[s]=function(l){return typeof l!="function"?r._loadRegistered():(r.after(nh(l,this)),this)},e[o]=function(l){if(l&&typeof l!="function")throw new sa(o,typeof l);return r.ready(l?nh(l,this):void 0)},e[a]=function(l){if(typeof l!="function")throw new sa(a,typeof l);return r.onClose(eD(l,this)),this},e[u]=function(l){if(l&&typeof l!="function")throw new sa(u,typeof l);return l?(r.close(nh(l,this)),this):r.close()}}function Pt(e,t,r){if(typeof e=="function"&&arguments.length===1&&(r=e,t={},e=null),typeof t=="function"&&(r=t,t={}),t=t||{},!(this instanceof Pt)){let n=new Pt(e,t,r);return e&&WN(e,t,n),n}t.autostart!==!1&&(t.autostart=!0),e=e||this,this._timeout=Number(t.timeout)||0,this._server=e,this._current=[],this._error=null,this._isOnCloseHandlerKey=Symbol("isOnCloseHandler"),this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new QN,this._readyQ=rw(this,sw,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=nw},this._closeQ=rw(this,ZN,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=nw},this._doStart=null,this._root=new ih(this,JN.bind(this),t,!1,0),this._root.once("start",(n,i,s)=>{let o=this.pluginTree.start(null,i,s);this._root.once("loaded",(a,u,l)=>{this.pluginTree.stop(o,l)})}),ih.loadPlugin.call(this,this._root,n=>{Hs("root plugin ready");try{this.emit("preReady"),this._root=null}catch(i){n=n||this._error||i}if(n){if(this._error=n,this._readyQ.length()===0)throw n}else this.booted=!0;this._readyQ.resume()})}function JN(e,t,r){this._doStart=r,t.autostart&&this.start()}VN(Pt,UN);Pt.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};Pt.prototype.override=function(e,t,r){return e};function YN(e){if(e&&typeof e=="object"&&typeof e.default=="function"&&(e=e.default),!(e&&(typeof e=="function"||typeof e.then=="function")))throw new BN(typeof e);return e}Pt.prototype[Zu]=!0;Pt.prototype.use=function(e,t){return this._lastUsed=this._addPlugin(e,t,!1),this};Pt.prototype._loadRegistered=function(){let e=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.q.resume()),e?e.loadedSoFar():Promise.resolve()};Object.defineProperty(Pt.prototype,"then",{get:iw});Pt.prototype._addPlugin=function(e,t,r){if(e=YN(e),t=t||{},this.booted)throw new GN;let n=this._current[0],i=new ih(this,e,t,r);if(i.once("start",(s,o,a)=>{let u=this.pluginTree.start(n.name,o,a);i.once("loaded",(l,f,c)=>{this.pluginTree.stop(u,c)})}),n.loaded)throw new Error(i.name,n.name);return n.enqueue(i,s=>{s&&(this._error=s)}),i};Pt.prototype.after=function(e){if(!e)return this._loadRegistered();this._addPlugin(t.bind(this),{},!0);function t(r,n,i){sw.call(this,e,i)}return this};Pt.prototype.onClose=function(e){if(typeof e!="function")throw new Error("not a function");e[this._isOnCloseHandlerKey]=!0,this._closeQ.unshift(e,t.bind(this));function t(r){r&&(this._error=r)}return this};Pt.prototype.close=function(e){let t;if(e){if(typeof e!="function")throw new sa("close",typeof e)}else t=new Promise(function(r,n){e=function(i){if(i)return n(i);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(e),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),t};Pt.prototype.ready=function(e){if(e){if(typeof e!="function")throw new sa("ready",typeof e);this._readyQ.push(e),queueMicrotask(this.start.bind(this));return}return new Promise((t,r)=>{this._readyQ.push(i),this.start();let n=this._current[0].server;function i(s,o,a){s?r(s):t(n),process.nextTick(a)}})};Pt.prototype.prettyPrint=function(){return this.pluginTree.prittyPrint()};Pt.prototype.toJSON=function(){return this.pluginTree.toJSON()};function nw(){}function iw(){if(this.booted){Hs("thenify returning null because we are already booted");return}if(this[rh]){this[rh]=!1;return}return Hs("thenify"),(e,t)=>this._loadRegistered().then(()=>(this[rh]=!0,e(this._server)),t)}function sw(e,t,r){r=this._server;let n=this._error,i;this._error=null,e.length===0?(this._error=n,i=e(),i&&!i[Zu]&&typeof i.then=="function"?i.then(()=>process.nextTick(t),s=>process.nextTick(t,s)):process.nextTick(t)):e.length===1?(i=e(n),i&&!i[Zu]&&typeof i.then=="function"?i.then(()=>process.nextTick(t),s=>process.nextTick(t,s)):process.nextTick(t)):this._timeout===0?e.length===2?e(n,t):e(n,r,t):XN.call(this,e,n,r,t)}function XN(e,t,r,n){let i=e.name;Hs("setting up ready timeout",i,this._timeout);let s=setTimeout(()=>{Hs("timed out",i),s=null;let a=new KN(i);a.fn=e,this._error=a,n(a)},this._timeout);e.length===2?e(t,o.bind(this)):e(t,r,o.bind(this));function o(a){s&&(clearTimeout(s),this._error=a,n(this._error))}}function ZN(e,t,r){r=this._server;let n=e[this._isOnCloseHandlerKey];if(e.length===0||e.length===1){let i;n?i=e(r):i=e(this._error),i&&typeof i.then=="function"?(Hs("resolving close/onClose promise"),i.then(()=>process.nextTick(t),s=>process.nextTick(t,s))):process.nextTick(t)}else e.length===2?e(n?r:this._error,t):n?e(r,t):e(this._error,r,t)}function eD(e,t){return r.bind(t);function r(n,i){let s;e.length===0?(s=e(),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):e.length===1?(s=e(this),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):e(this,i)}}function nh(e,t){return r.bind(t);function r(n,i){let s;e?e.length===0?(s=e(),s&&s.then?s.then(function(){process.nextTick(i,n)},i):process.nextTick(i,n)):e.length===1?(s=e(n),s&&s.then?s.then(function(){process.nextTick(i)},i):process.nextTick(i)):e.length===2?e(n,i):e(n,this,i):process.nextTick(i)}}sh.exports=Pt;sh.exports.express=function(e){return Pt(e,{expose:{use:"load"}})}});var ht=w((nee,aw)=>{"use strict";var tD={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplySerializeWeakMap:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};aw.exports=tD});var ah=w((iee,uw)=>{"use strict";var{format:oh}=require("util");function rD(){let e={},t=new Map;function r(i,s,o){if(!i)throw new Error("Warning name must not be empty");if(!s)throw new Error("Warning code must not be empty");if(!o)throw new Error("Warning message must not be empty");if(s=s.toUpperCase(),e[s]!==void 0)throw new Error(`The code '${s}' already exist`);function a(u,l,f){let c;return u&&l&&f?c=oh(o,u,l,f):u&&l?c=oh(o,u,l):u?c=oh(o,u):c=o,{code:s,name:i,message:c}}return t.set(s,!1),e[s]=a,e[s]}function n(i,s,o,a){if(e[i]===void 0)throw new Error(`The code '${i}' does not exist`);if(t.get(i)===!0)return;t.set(i,!0);let u=e[i](s,o,a);process.emitWarning(u.message,u.name,u.code)}return{create:r,emit:n,emitted:t}}uw.exports=rD});var Xi=w((see,lw)=>{"use strict";var hi=ah()();hi.create("FastifyDeprecation","FSTDEP005",'You are accessing the deprecated "request.connection" property. Use "request.socket" instead.');hi.create("FastifyDeprecation","FSTDEP006","You are decorating Request/Reply with a reference type. This reference is shared amongst all requests. Use onRequest hook instead. Property: %s");hi.create("FastifyDeprecation","FSTDEP007",'You are trying to set a HEAD route using "exposeHeadRoute" route flag when a sibling route is already set. See documentation for more info.');hi.create("FastifyDeprecation","FSTDEP008",'You are using route constraints via the route { version: "..." } option, use { constraints: { version: "..." } } option instead.');hi.create("FastifyDeprecation","FSTDEP009",'You are using a custom route versioning strategy via the server { versioning: "..." } option, use { constraints: { version: "..." } } option instead.');hi.create("FastifyDeprecation","FSTDEP010",'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.');hi.create("FastifyDeprecation","FSTDEP011",'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.');lw.exports=hi});var cw=w((oee,fw)=>{"use strict";var{inherits:nD,format:el}=require("util");function iD(e,t,r=500,n=Error){if(!e)throw new Error("Fastify error code must not be empty");if(!t)throw new Error("Fastify error message must not be empty");e=e.toUpperCase();function i(s,o,a){if(!new.target)return new i(...arguments);switch(Error.captureStackTrace(this,i),this.name="FastifyError",this.code=e,arguments.length){case 3:this.message=el(t,s,o,a);break;case 2:this.message=el(t,s,o);break;case 1:this.message=el(t,s);break;case 0:this.message=t;break;default:this.message=el(t,...arguments)}this.statusCode=r||void 0}return i.prototype[Symbol.toStringTag]="Error",i.prototype.toString=function(){return`${this.name} [${this.code}]: ${this.message}`},nD(i,n),i}fw.exports=iD});var sr=w((aee,hw)=>{"use strict";var Z=cw(),sD={FST_ERR_NOT_FOUND:Z("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_CTP_ALREADY_PRESENT:Z("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:Z("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:Z("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:Z("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:Z("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:Z("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:Z("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:Z("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:Z("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_DEC_ALREADY_PRESENT:Z("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:Z("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array."),FST_ERR_DEC_MISSING_DEPENDENCY:Z("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:Z("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_HOOK_INVALID_TYPE:Z("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:Z("FST_ERR_HOOK_INVALID_HANDLER","The hook callback must be a function",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:Z("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.io/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:Z("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:Z("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_REP_INVALID_PAYLOAD_TYPE:Z("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_ALREADY_SENT:Z("FST_ERR_REP_ALREADY_SENT","Reply was already sent."),FST_ERR_REP_SENT_VALUE:Z("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true."),FST_ERR_SEND_INSIDE_ONERR:Z("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:Z("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:Z("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:Z("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:Z("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_MISSING_SERIALIZATION_FN:Z("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:Z("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:Z("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:Z("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_DUPLICATE:Z("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:Z("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:Z("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_HTTP2_INVALID_VERSION:Z("FST_ERR_HTTP2_INVALID_VERSION","HTTP2 is available only from node >= 8.8.1"),FST_ERR_INIT_OPTS_INVALID:Z("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:Z("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:Z("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:Z("FST_ERR_BAD_URL","'%s' is not a valid url component",400),FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:Z("FST_ERR_DEFAULT_ROUTE_INVALID_TYPE","The defaultRoute type should be a function",500,TypeError),FST_ERR_INVALID_URL:Z("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400),FST_ERR_REOPENED_CLOSE_SERVER:Z("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:Z("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_PLUGIN_VERSION_MISMATCH:Z("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),AVVIO_ERRORS_MAP:{AVV_ERR_CALLBACK_NOT_FN:Z("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s"),AVV_ERR_PLUGIN_NOT_VALID:Z("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),AVV_ERR_ROOT_PLG_BOOTED:Z("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),AVV_ERR_PARENT_PLG_LOADED:Z("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),AVV_ERR_READY_TIMEOUT:Z("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")},appendStackTrace(e,t){return t.cause=e,t}};hw.exports=sD});var Ew=w((uee,lh)=>{"use strict";var oD=require("http"),aD=require("https"),uD=require("dns"),dw=Xi(),{kState:Sr,kOptions:lD,kServerBindings:fD}=ht(),{FST_ERR_HTTP2_INVALID_VERSION:cD,FST_ERR_REOPENED_CLOSE_SERVER:yw,FST_ERR_REOPENED_SERVER:gw}=sr();lh.exports.createServer=hD;lh.exports.compileValidateHTTPVersion=pD;function hD(e,t){let r=ww(e,t);return{server:r,listen:n};function n(i,...s){let o=s.slice(-1).pop(),a=Object.prototype.toString.call(arguments[0]);if(arguments.length===0)i=uh([]);else if(arguments.length>0&&a!=="[object Object]"&&a!=="[object Function]")dw.emit("FSTDEP011"),i=uh(Array.from(arguments)),o=i.cb;else if(s.length>1){dw.emit("FSTDEP011");let l=i.path?[i.path]:[i.port??0,i.host??"localhost"];Object.assign(i,uh([...l,...s]))}else i.cb=o;let u;if(i.path==null?u=i.host??"localhost":u=i.host,Object.prototype.hasOwnProperty.call(i,"host")===!1&&(i.host=u),u==="localhost"&&(i.cb=(l,f)=>{if(l){o(l,f);return}pw.call(this,r,t,e,i,()=>{this[Sr].listening=!0,o(null,f)})}),o===void 0){let l=dD.call(this,r,i);return u==="localhost"?l.then(f=>new Promise((c,h)=>{pw.call(this,r,t,e,i,()=>{this[Sr].listening=!0,c(f)})})):l}this.ready(vw.call(this,r,i))}}function pw(e,t,r,n,i){this[Sr].listening=!1,uD.lookup(n.host,{all:!0},(s,o)=>{if(s){i();return}let a=0,u=0,l=e.address();for(let c of o)if(c.address!==l.address){a++;let h=Object.assign({},n,{host:c.address,port:l.port,cb:m=>{u++,m||this[fD].push(d),u===a&&i()}}),d=ww(r,t),p=()=>{d.close(()=>{})};e.on("unref",p),e.on("close",p),e.on("error",p),vw.call(this,d,h)()}if(a===0){i();return}let f=e.unref;e.unref=function(){f.call(e),e.emit("unref")}})}function vw(e,t){let r=n=>{if(e.removeListener("error",r),n)this[Sr].listening=!1,t.cb(n,null);else{let i=bw.call(this,e);t.cb(null,i)}};return n=>{if(n!=null)return t.cb(n);if(this[Sr].listening&&this[Sr].closing)return t.cb(new yw,null);if(this[Sr].listening)return t.cb(new gw,null);e.once("error",r),e.listen(t,r),this[Sr].listening=!0}}function dD(e,t){return this[Sr].listening&&this[Sr].closing?Promise.reject(new yw):this[Sr].listening?Promise.reject(new gw):this.ready().then(()=>{let r,n=new Promise((s,o)=>{r=a=>{this[Sr].listening=!1,o(a)},e.once("error",r)}),i=new Promise((s,o)=>{e.listen(t,()=>{e.removeListener("error",r),s(bw.call(this,e))}),this[Sr].listening=!0});return Promise.race([n,i])})}function pD(e){let t=!1,r=new Map;return e.serverFactory&&(t=!0),e.http2?(r.set("2.0",!0),e.https&&e.https.allowHTTP1===!0&&(r.set("1.1",!0),r.set("1.0",!0))):(r.set("1.1",!0),r.set("1.0",!0)),function(i){return t||r.has(i)}}function ww(e,t){let r=null;return e.serverFactory?r=e.serverFactory(t,e):e.http2?(e.https?r=mw().createSecureServer(e.https,t):r=mw().createServer(t),r.on("session",mD(e.http2SessionTimeout))):(e.https?r=aD.createServer(e.https,t):r=oD.createServer(t),r.keepAliveTimeout=e.keepAliveTimeout,r.requestTimeout=e.requestTimeout,e.maxRequestsPerSocket>0&&(r.maxRequestsPerSocket=e.maxRequestsPerSocket)),e.serverFactory||r.setTimeout(e.connectionTimeout),r}function uh(e){if(e.length===0)return{port:0,host:"localhost"};let r={cb:typeof e[e.length-1]=="function"?e.pop():void 0},n=e[0],i=e.length,s=e[i-1];return typeof n=="string"&&isNaN(n)?(r.path=n,r.backlog=i>1?s:void 0):(r.port=i>=1&&Number.isInteger(n)?n:0,r.host=i>=2&&e[1]?e[1]:"localhost",r.backlog=i>=3?e[2]:void 0),r}function bw(e){let t=e.address(),r=typeof t=="string";return r||(t.address.indexOf(":")===-1?t=t.address+":"+t.port:t="["+t.address+"]:"+t.port),t=(r?"":"http"+(this[lD].https?"s":"")+"://")+t,this.log.info("Server listening at "+t),t}function mw(){try{return require("http2")}catch{throw new cD}}function mD(e){return function(t){t.setTimeout(e,yD)}}function yD(){this.close()}});var Zi=w((lee,$w)=>{"use strict";var gD=["onRoute","onRegister","onReady","onClose"],Pw=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError"],Rw=Pw.concat(gD),{FST_ERR_HOOK_INVALID_TYPE:vD,FST_ERR_HOOK_INVALID_HANDLER:wD,FST_ERR_SEND_UNDEFINED_ERR:Tw,FST_ERR_HOOK_TIMEOUT:bD,AVVIO_ERRORS_MAP:_w,appendStackTrace:Sw}=sr(),{kChildren:fh,kHooks:ED}=ht();function tl(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onTimeout=[]}tl.prototype.validate=function(e,t){if(typeof e!="string")throw new vD;if(typeof t!="function")throw new wD;if(Rw.indexOf(e)===-1)throw new Error(`${e} hook not supported!`)};tl.prototype.add=function(e,t){this.validate(e,t),this[e].push(t)};function _D(e){let t=new tl;return t.onRequest=e.onRequest.slice(),t.preParsing=e.preParsing.slice(),t.preValidation=e.preValidation.slice(),t.preSerialization=e.preSerialization.slice(),t.preHandler=e.preHandler.slice(),t.onSend=e.onSend.slice(),t.onResponse=e.onResponse.slice(),t.onError=e.onError.slice(),t.onRoute=e.onRoute.slice(),t.onRegister=e.onRegister.slice(),t.onTimeout=e.onTimeout.slice(),t.onReady=[],t}function Aw(e,t,r,n){let i=r[ED][e],s=0,o=0;u();function a(f){if(f){f.code==="AVV_ERR_READY_TIMEOUT"?f=Sw(f,new bD(e)):f=_w[f.code]!=null?Sw(f,new _w[f.code](f.message)):f,n(f);return}n()}function u(f){if(f){a(f);return}if(s===i.length&&o===r[fh].length){s===0&&o===0?a():t(function(h,d){a(h),d(h)});return}if(s===i.length&&o<r[fh].length){let c=r[fh][o++];Aw(e,t,c,u);return}t(l(i[s++],r)),u()}function l(f,c){return function(h,d){if(h){d(h);return}if(f.length===1){try{f.call(c,d)}catch(m){d(m)}return}let p=f.call(c);if(p&&typeof p.then=="function"){p.then(d,d);return}d(h)}}}function SD(e,t,r,n,i){let s=0;function o(l){if(l||s===e.length){i(l,r,n);return}let f;try{f=t(e[s++],r,n,o)}catch(c){o(c);return}f&&typeof f.then=="function"&&f.then(a,u)}function a(){o()}function u(l){l||(l=new Tw),i(l,r,n)}o()}function PD(e,t,r,n,i){let s=0;function o(l,f){if(l){i(l,t,r,n);return}if(f!==void 0&&(n=f),s===e.length){i(null,t,r,n);return}let c;try{c=e[s++](t,r,n,o)}catch(h){o(h);return}c&&typeof c.then=="function"&&c.then(a,u)}function a(l){o(null,l)}function u(l){l||(l=new Tw),i(l,t,r,n)}o()}function RD(e,t,r,n){if(r.sent!==!0)return e(t,r,n)}$w.exports={Hooks:tl,buildHooks:_D,hookRunner:SD,onSendHookRunner:PD,hookIterator:RD,hookRunnerApplication:Aw,lifecycleHooks:Pw,supportedHooks:Rw}});var ph=w((fee,Ow)=>{"use strict";var{kSchemaHeaders:il,kSchemaParams:ch,kSchemaQuerystring:hh,kSchemaBody:dh,kSchemaResponse:Iw}=ht(),TD=/^[1-5]{1}[0-9]{2}$|^[1-5]xx$|^default$/;function AD(e,t){if(!e.schema||!e.schema.response)return;let{method:r,url:n}=e.config||{};e[Iw]=Object.keys(e.schema.response).reduce(function(i,s){let o=e.schema.response[s];if(s=s.toLowerCase(),!TD.exec(s))throw new Error('response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }');return i[s]=t({schema:o,url:n,method:r,httpStatus:s}),i},{})}function $D(e,t){let{schema:r}=e;if(!r)return;let{method:n,url:i}=e.config||{},s=r.headers;if(s&&Object.getPrototypeOf(s)!==Object.prototype)e[il]=t({schema:s,method:n,url:i,httpPart:"headers"});else if(s){let o={};Object.keys(s).forEach(a=>{o[a]=s[a]}),o.required instanceof Array&&(o.required=o.required.map(a=>a.toLowerCase())),s.properties&&(o.properties={},Object.keys(s.properties).forEach(a=>{o.properties[a.toLowerCase()]=s.properties[a]})),e[il]=t({schema:o,method:n,url:i,httpPart:"headers"})}r.body&&(e[dh]=t({schema:r.body,method:n,url:i,httpPart:"body"})),r.querystring&&(e[hh]=t({schema:r.querystring,method:n,url:i,httpPart:"querystring"})),r.params&&(e[ch]=t({schema:r.params,method:n,url:i,httpPart:"params"}))}function rl(e,t,r){let n=t[r]===void 0,i=e&&e(n?null:t[r]);return i===!1?e.errors:i&&i.error?i.error:(i&&i.value&&(t[r]=i.value),!1)}function ID(e,t){let r=rl(e[ch],t,"params");if(r)return nl(r,"params",e.schemaErrorFormatter);let n=rl(e[dh],t,"body");if(n)return nl(n,"body",e.schemaErrorFormatter);let i=rl(e[hh],t,"query");if(i)return nl(i,"querystring",e.schemaErrorFormatter);let s=rl(e[il],t,"headers");return s?nl(s,"headers",e.schemaErrorFormatter):null}function nl(e,t,r){if(e instanceof Error)return e.statusCode=e.statusCode||400,e.validationContext=e.validationContext||t,e;let n=r(e,t);return n.statusCode=n.statusCode||400,n.validation=e,n.validationContext=t,n}Ow.exports={symbols:{bodySchema:dh,querystringSchema:hh,responseSchema:Iw,paramsSchema:ch,headersSchema:il},compileSchemasForValidation:$D,compileSchemasForSerialization:AD,validate:ID}});var mh=w((cee,kw)=>{"use strict";var{kReplyIsError:Cw,kReplyHijacked:OD}=ht();function CD(e,t){e.then(function(r){if(t[OD]!==!0&&(r!==void 0||t.sent===!1&&t.raw.headersSent===!1&&t.request.raw.aborted===!1))try{t.send(r)}catch(n){t[Cw]=!0,t.send(n)}},function(r){if(t.sent===!0){t.log.error({err:r},"Promise errored, but reply.sent = true was set");return}t[Cw]=!0,t.send(r)})}kw.exports=CD});var wh=w((hee,vh)=>{"use strict";var{validate:kD}=ph(),{hookRunner:xw,hookIterator:qw}=Zi(),xD=mh(),{kReplyIsError:sl}=ht();function qD(e,t,r){if(r.sent===!0)return;if(e!=null){r[sl]=!0,r.send(e);return}let n=t.raw.method,i=t.headers;if(n==="GET"||n==="HEAD"||n==="SEARCH"){di(t,r);return}let s=i["content-type"];if(n==="POST"||n==="PUT"||n==="PATCH"||n==="TRACE"){s===void 0?i["transfer-encoding"]===void 0&&(i["content-length"]==="0"||i["content-length"]===void 0)?di(t,r):r.context.contentTypeParser.run("",di,t,r):r.context.contentTypeParser.run(s,di,t,r);return}if(n==="OPTIONS"||n==="DELETE"){s!==void 0&&(i["transfer-encoding"]!==void 0||i["content-length"]!==void 0)?r.context.contentTypeParser.run(s,di,t,r):di(t,r);return}di(t,r)}function di(e,t){try{t.context.preValidation!==null?xw(t.context.preValidation,qw,e,t,yh):yh(null,e,t)}catch(r){yh(r,e,t)}}function yh(e,t,r){if(r.sent===!0)return;if(e!=null){r[sl]=!0,r.send(e);return}let n=kD(r.context,t);if(n){if(r.context.attachValidation===!1){r.send(n);return}r.request.validationError=n}r.context.preHandler!==null?xw(r.context.preHandler,qw,t,r,gh):gh(null,t,r)}function gh(e,t,r){if(r.sent)return;if(e!=null){r[sl]=!0,r.send(e);return}let n;try{n=r.context.handler(t,r)}catch(i){r[sl]=!0,r.send(i);return}n!==void 0&&(n!==null&&typeof n.then=="function"?xD(n,r):r.send(n))}vh.exports=qD;vh.exports[Symbol.for("internals")]={handler:di,preHandlerCallback:gh}});var Dw=w((dee,Nw)=>{"use strict";function Us(){}var ND={fatal:Us,error:Us,warn:Us,info:Us,debug:Us,trace:Us};Object.defineProperty(Nw,"exports",{get(){return Object.create(ND)}})});var Mw=w((pee,Fw)=>{"use strict";var bh=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return r instanceof Error?r:void 0}else return t instanceof Error?t:void 0},jw=(e,t)=>{if(!(e instanceof Error))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=bh(e);return n?(t.add(e),r+`
caused by: `+jw(n,t)):r},DD=e=>jw(e,new Set),Lw=(e,t,r)=>{if(!(e instanceof Error))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=bh(e);if(i){t.add(e);let s=typeof e.cause=="function";return n+(s?"":": ")+Lw(i,t,s)}else return n},jD=e=>Lw(e,new Set);Fw.exports={getErrorCause:bh,stackWithCauses:DD,messageWithCauses:jD}});var Uw=w((mee,Hw)=>{"use strict";Hw.exports=Sh;var{messageWithCauses:LD,stackWithCauses:FD}=Mw(),{toString:MD}=Object.prototype,Eh=Symbol("circular-ref-tag"),_h=Symbol("pino-raw-err-ref"),zw=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[_h]},set:function(e){this[_h]=e}}});Object.defineProperty(zw,_h,{writable:!0,value:{}});function Sh(e){if(!(e instanceof Error))return e;e[Eh]=void 0;let t=Object.create(zw);t.type=MD.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=LD(e),t.stack=FD(e),global.AggregateError!==void 0&&e instanceof global.AggregateError&&Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Sh(r)));for(let r in e)if(t[r]===void 0){let n=e[r];n instanceof Error?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Eh)&&(t[r]=Sh(n)):t[r]=n}return delete e[Eh],t.raw=e,t}});var Kw=w((yee,Gw)=>{"use strict";Gw.exports={mapHttpRequest:zD,reqSerializer:Bw};var Ph=Symbol("pino-raw-req-ref"),Vw=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Ph]},set:function(e){this[Ph]=e}}});Object.defineProperty(Vw,Ph,{writable:!0,value:{}});function Bw(e){let t=e.info||e.socket,r=Object.create(Vw);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function zD(e){return{req:Bw(e)}}});var Yw=w((gee,Jw)=>{"use strict";Jw.exports={mapHttpResponse:HD,resSerializer:Ww};var Rh=Symbol("pino-raw-res-ref"),Qw=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Rh]},set:function(e){this[Rh]=e}}});Object.defineProperty(Qw,Rh,{writable:!0,value:{}});function Ww(e){let t=Object.create(Qw);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function HD(e){return{res:Ww(e)}}});var Ah=w((vee,Xw)=>{"use strict";var Th=Uw(),ol=Kw(),al=Yw();Xw.exports={err:Th,mapHttpRequest:ol.mapHttpRequest,mapHttpResponse:al.mapHttpResponse,req:ol.reqSerializer,res:al.resSerializer,wrapErrorSerializer:function(t){return t===Th?t:function(n){return t(Th(n))}},wrapRequestSerializer:function(t){return t===ol.reqSerializer?t:function(n){return t(ol.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===al.resSerializer?t:function(n){return t(al.resSerializer(n))}}}});var $h=w((wee,Zw)=>{"use strict";function UD(e,t){return t}Zw.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=UD;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let s of n)!s||i.push(s.getFileName());return i}});var tb=w((bee,eb)=>{"use strict";var{createContext:VD,runInContext:BD}=require("vm");eb.exports=GD;function GD(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(s=>{if(typeof s!="string")throw Error(t());try{if(/〇/.test(s))throw Error();let o=new Proxy({},{get:()=>o,set:()=>{throw Error()}}),a=(s[0]==="["?"":".")+s.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(a)||/\/\*/.test(a))throw Error();BD(`
          (function () {
            'use strict'
            o${a}
            if ([o${a}].length !== 1) throw Error()
          })()
        `,VD({o,"\u3007":null}),{codeGeneration:{strings:!1,wasm:!1}})}catch{throw Error(r(s))}})}}});var ul=w((Eee,rb)=>{"use strict";rb.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var ib=w((_ee,nb)=>{"use strict";var KD=ul();nb.exports=QD;function QD({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,s,o){var a=s.match(KD).map(f=>f.replace(/'|"|`/g,""));let u=s[0]==="[";a=a.map(f=>f[0]==="["?f.substr(1,f.length-2):f);let l=a.indexOf("*");if(l>-1){let f=a.slice(0,l),c=f.join("."),h=a.slice(l+1,a.length),d=h.length>0;r++,t.push({before:f,beforeStr:c,after:h,nested:d})}else i[s]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(s),leadingBracket:u};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var ob=w((See,sb)=>{"use strict";var WD=ul();sb.exports=JD;function JD({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:s},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${ej(n,t)}
    }
    const { censor, secret } = this
    ${YD(e,i,s)}
    this.compileRestore()
    ${XD(r>0,i,s)}
    ${ZD(t)}
  `).bind(o);return t===!1&&(a.restore=u=>o.restore(u)),a}function YD(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:s,path:o}=e[n],a=s?1:0,u=s?"":".",l=[];for(var f;(f=WD.exec(n))!==null;){let[,p]=f,{index:m,input:v}=f;m>a&&l.push(v.substring(0,m-(p?0:1)))}var c=l.map(p=>`o${u}${p}`).join(" && ");c.length===0?c+=`o${u}${n} != null`:c+=` && o${u}${n} != null`;let h=`
      switch (true) {
        ${l.reverse().map(p=>`
          case o${u}${p} === censor:
            secret[${i}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,d=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${c}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${u}${n} = ${t?`censor(${d})`:"censor"}
          ${h}
        }
      }
    `}).join(`
`)}function XD(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function ZD(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function ej(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Ih=w((Pee,ub)=>{"use strict";ub.exports={groupRedact:rj,groupRestore:tj,nestedRedact:ij,nestedRestore:nj};function tj({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let s=e[i];r[s]=t[i]}}function rj(e,t,r,n,i){let s=ab(e,t);if(s==null)return{keys:null,values:null,target:null,flat:!0};let o=Object.keys(s),a=o.length,u=t.length,l=i?[...t]:void 0,f=new Array(a);for(var c=0;c<a;c++){let h=o[c];f[c]=s[h],i?(l[u]=h,s[h]=r(s[h],l)):n?s[h]=r(s[h]):s[h]=r}return{keys:o,values:f,target:s,flat:!0}}function nj(e){let t=e.length;for(var r=0;r<t;r++){let{key:i,target:s,value:o}=e[r];if(ll(s,i)&&(s[i]=o),typeof s=="object"){let a=Object.keys(s);for(var n=0;n<a.length;n++){let u=a[n],l=s[u];ll(l,i)&&(l[i]=o)}}}}function ij(e,t,r,n,i,s,o){let a=ab(t,r);if(a==null)return;let u=Object.keys(a),l=u.length;for(var f=0;f<l;f++){let c=u[f],{value:h,parent:d,exists:p}=sj(a,c,r,n,i,s,o);p===!0&&d!==null&&e.push({key:n[n.length-1],target:d,value:h})}return e}function ll(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function sj(e,t,r,n,i,s,o){let a=n.length,u=a-1,l=t;var f=-1,c,h,d,p=null,m=!0,v=null;if(d=c=e[t],typeof c!="object")return{value:null,parent:null,exists:m};for(;c!=null&&++f<a;){if(t=n[f],p=d,t!=="*"&&!v&&!(typeof c=="object"&&t in c)){m=!1;break}if(!(t==="*"&&(v=t,f!==u))){if(v){let P=Object.keys(c);for(var b=0;b<P.length;b++){let g=P[b],y=c[g],R=t==="*";(R||typeof y=="object"&&y!==null&&t in y)&&(R?d=y:d=y[t],h=f!==u?d:s?o?i(d,[...r,l,...n]):i(d):i,R?c[g]=h:y[t]=h===void 0&&i!==void 0||ll(y,t)&&h===d?y[t]:h)}v=null}else d=c[t],h=f!==u?d:s?o?i(d,[...r,l,...n]):i(d):i,c[t]=ll(c,t)&&h===d||h===void 0&&i!==void 0?c[t]:h,c=c[t];if(typeof c!="object")break}}return{value:d,parent:p,exists:m}}function ab(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}});var fb=w((Ree,lb)=>{"use strict";var{groupRestore:oj,nestedRestore:aj}=Ih();lb.exports=uj;function uj({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),i=lj(e,n),s=t>0,o=s?{secret:e,groupRestore:oj,nestedRestore:aj}:{secret:e};this.restore=Function("o",fj(i,n,s)).bind(o)}}function lj(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:s}=e[r],a=n?`o.${n} = secret[${i}].val`:`o${s?"":"."}${r} = secret[${i}].val`,u=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function fj(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var hb=w((Tee,cb)=>{"use strict";cb.exports=cj;function cj(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:s,nestedRedact:o,wildcards:a,wcLen:u}=e,l=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&l.push({serialize:i}),u>0&&l.push({groupRedact:s,nestedRedact:o,wildcards:a,wcLen:u}),Object.assign(...l)}});var mb=w((Aee,pb)=>{"use strict";var db=tb(),hj=ib(),dj=ob(),pj=fb(),{groupRedact:mj,nestedRedact:yj}=Ih(),gj=hb(),vj=ul(),wj=db(),Oh=e=>e;Oh.restore=Oh;var bj="[REDACTED]";Ch.rx=vj;Ch.validator=db;pb.exports=Ch;function Ch(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:bj,s=typeof i=="function",o=s&&i.length>1;if(t.length===0)return r||Oh;wj({paths:t,serialize:r,censor:i});let{wildcards:a,wcLen:u,secret:l}=hj({paths:t,censor:i}),f=pj({secret:l,wcLen:u}),c="strict"in e?e.strict:!0;return dj({secret:l,wcLen:u,serialize:r,strict:c,isCensorFct:s,censorFctTakesPath:o},gj({secret:l,censor:i,compileRestore:f,serialize:r,groupRedact:mj,nestedRedact:yj,wildcards:a,wcLen:u}))}});var Vs=w(($ee,yb)=>{"use strict";var Ej=Symbol("pino.setLevel"),_j=Symbol("pino.getLevel"),Sj=Symbol("pino.levelVal"),Pj=Symbol("pino.useLevelLabels"),Rj=Symbol("pino.useOnlyCustomLevels"),Tj=Symbol("pino.mixin"),Aj=Symbol("pino.lsCache"),$j=Symbol("pino.chindings"),Ij=Symbol("pino.asJson"),Oj=Symbol("pino.write"),Cj=Symbol("pino.redactFmt"),kj=Symbol("pino.time"),xj=Symbol("pino.timeSliceIndex"),qj=Symbol("pino.stream"),Nj=Symbol("pino.stringify"),Dj=Symbol("pino.stringifySafe"),jj=Symbol("pino.stringifiers"),Lj=Symbol("pino.end"),Fj=Symbol("pino.formatOpts"),Mj=Symbol("pino.messageKey"),zj=Symbol("pino.errorKey"),Hj=Symbol("pino.nestedKey"),Uj=Symbol("pino.nestedKeyStr"),Vj=Symbol("pino.mixinMergeStrategy"),Bj=Symbol("pino.wildcardFirst"),Gj=Symbol.for("pino.serializers"),Kj=Symbol.for("pino.formatters"),Qj=Symbol.for("pino.hooks"),Wj=Symbol.for("pino.metadata");yb.exports={setLevelSym:Ej,getLevelSym:_j,levelValSym:Sj,useLevelLabelsSym:Pj,mixinSym:Tj,lsCacheSym:Aj,chindingsSym:$j,asJsonSym:Ij,writeSym:Oj,serializersSym:Gj,redactFmtSym:Cj,timeSym:kj,timeSliceIndexSym:xj,streamSym:qj,stringifySym:Nj,stringifySafeSym:Dj,stringifiersSym:jj,endSym:Lj,formatOptsSym:Fj,messageKeySym:Mj,errorKeySym:zj,nestedKeySym:Hj,wildcardFirstSym:Bj,needsMetadataGsym:Wj,useOnlyCustomLevelsSym:Rj,formattersSym:Kj,hooksSym:Qj,nestedKeyStrSym:Uj,mixinMergeStrategySym:Vj}});var qh=w((Iee,bb)=>{"use strict";var xh=mb(),{redactFmtSym:Jj,wildcardFirstSym:fl}=Vs(),{rx:kh,validator:Yj}=xh,gb=Yj({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),vb="[Redacted]",wb=!1;function Xj(e,t){let{paths:r,censor:n}=Zj(e),i=r.reduce((a,u)=>{kh.lastIndex=0;let l=kh.exec(u),f=kh.exec(u),c=l[1]!==void 0?l[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):l[0];if(c==="*"&&(c=fl),f===null)return a[c]=null,a;if(a[c]===null)return a;let{index:h}=f,d=`${u.substr(h,u.length-1)}`;return a[c]=a[c]||[],c!==fl&&a[c].length===0&&a[c].push(...a[fl]||[]),c===fl&&Object.keys(a).forEach(function(p){a[p]&&a[p].push(d)}),a[c].push(d),a},{}),s={[Jj]:xh({paths:r,censor:n,serialize:t,strict:wb})},o=(...a)=>t(typeof n=="function"?n(...a):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((a,u)=>{if(i[u]===null)a[u]=l=>o(l,[u]);else{let l=typeof n=="function"?(f,c)=>n(f,[u,...c]):n;a[u]=xh({paths:i[u],censor:l,serialize:t,strict:wb})}return a},s)}function Zj(e){if(Array.isArray(e))return e={paths:e,censor:vb},gb(e),e;let{paths:t,censor:r=vb,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),gb({paths:t,censor:r}),{paths:t,censor:r}}bb.exports=Xj});var _b=w((Oee,Eb)=>{"use strict";var eL=()=>"",tL=()=>`,"time":${Date.now()}`,rL=()=>`,"time":${Math.round(Date.now()/1e3)}`,nL=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;Eb.exports={nullTime:eL,epochTime:tL,unixTime:rL,isoTime:nL}});var Pb=w((Cee,Sb)=>{"use strict";function iL(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Sb.exports=sL;function sL(e,t,r){var n=r&&r.stringify||iL,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var o=new Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(t[a]);return o.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var l="",f=1-i,c=-1,h=e&&e.length||0,d=0;d<h;){if(e.charCodeAt(d)===37&&d+1<h){switch(c=c>-1?c:0,e.charCodeAt(d+1)){case 100:case 102:if(f>=u||t[f]==null)break;c<d&&(l+=e.slice(c,d)),l+=Number(t[f]),c=d+2,d++;break;case 105:if(f>=u||t[f]==null)break;c<d&&(l+=e.slice(c,d)),l+=Math.floor(Number(t[f])),c=d+2,d++;break;case 79:case 111:case 106:if(f>=u||t[f]===void 0)break;c<d&&(l+=e.slice(c,d));var p=typeof t[f];if(p==="string"){l+="'"+t[f]+"'",c=d+2,d++;break}if(p==="function"){l+=t[f].name||"<anonymous>",c=d+2,d++;break}l+=n(t[f]),c=d+2,d++;break;case 115:if(f>=u)break;c<d&&(l+=e.slice(c,d)),l+=String(t[f]),c=d+2,d++;break;case 37:c<d&&(l+=e.slice(c,d)),l+="%",c=d+2,d++,f--;break}++f}++d}return c===-1?e:(c<h&&(l+=e.slice(c)),l)}});var Dh=w((kee,Nh)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));Nh.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};Nh.exports=e}});var Ib=w((xee,$b)=>{"use strict";var or=require("fs"),oL=require("events"),aL=require("util").inherits,Rb=require("path"),Tb=Dh(),jh=100,uL=16*1024;function Ab(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(s,o){if(s){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",s)}):t.emit("error",s);return}t.fd=o,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t._reopening&&!t._writing&&t._len>t.minLength&&!t.destroyed&&Bs(t)}let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&or.mkdirSync(Rb.dirname(e),{recursive:!0});let s=or.openSync(e,n,i);r(null,s)}catch(s){throw r(s),s}else t.mkdir?or.mkdir(Rb.dirname(e),{recursive:!0},s=>{if(s)return r(s);or.open(e,n,i,r)}):or.open(e,n,i,r)}function ar(e){if(!(this instanceof ar))return new ar(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:s,sync:o,append:a=!0,mode:u,mkdir:l,retryEAGAIN:f,fsync:c}=e||{};if(t=t||r,this._bufs=[],this._len=0,this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=s||uL,this.sync=o||!1,this._fsync=c||!1,this.append=a||!1,this.mode=u,this.retryEAGAIN=f||(()=>!0),this.mkdir=l||!1,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")Ab(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(h,d)=>{if(h){if(h.code==="EAGAIN"&&this.retryEAGAIN(h,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{Tb(jh),this.release(void 0,0)}catch(m){this.release(m)}else setTimeout(()=>{or.write(this.fd,this._writingBuf,"utf8",this.release)},jh);else this._writing=!1,this.emit("error",h);return}if(this.emit("write",d),this._len-=d,this._len<0&&(this._len=0),this._writingBuf=this._writingBuf.slice(d),this._writingBuf.length){if(!this.sync){or.write(this.fd,this._writingBuf,"utf8",this.release);return}try{do{let m=or.writeSync(this.fd,this._writingBuf,"utf8");this._len-=m,this._writingBuf=this._writingBuf.slice(m)}while(this._writingBuf)}catch(m){this.release(m);return}}this._fsync&&or.fsyncSync(this.fd);let p=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):p>this.minLength?Bs(this):this._ending?p>0?Bs(this):(this._writing=!1,cl(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(lL,this)):this.emit("drain"))},this.on("newListener",function(h){h==="drain"&&(this._asyncDrainScheduled=!1)})}function lL(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}aL(ar,oL);ar.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&Bs(this),this._len<this._hwm)};ar.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||(this._bufs.length===0&&this._bufs.push(""),Bs(this))};ar.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&or.close(t,r=>{if(r)return this.emit("error",r)})}),Ab(e||this.file,this)};ar.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?Bs(this):cl(this)))};ar.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");for(!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");this._bufs.length;){let e=this._bufs[0];try{this._len-=or.writeSync(this.fd,e,"utf8"),this._bufs.shift()}catch(t){if(t.code!=="EAGAIN"||!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Tb(jh)}}};ar.prototype.destroy=function(){this.destroyed||cl(this)};function Bs(e){let t=e.release;if(e._writing=!0,e._writingBuf=e._writingBuf||e._bufs.shift()||"",e.sync)try{let r=or.writeSync(e.fd,e._writingBuf,"utf8");t(null,r)}catch(r){t(r)}else or.write(e.fd,e._writingBuf,"utf8",t)}function cl(e){if(e.fd===-1){e.once("ready",cl.bind(null,e));return}e.destroyed=!0,e._bufs=[],e.fd!==1&&e.fd!==2?or.close(e.fd,t):setImmediate(t);function t(r){if(r){e.emit("error",r);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}ar.SonicBoom=ar;ar.default=ar;$b.exports=ar});var Lh=w((qee,Nb)=>{"use strict";var pi={exit:[],beforeExit:[]},Ob={exit:cL,beforeExit:hL},Cb=new FinalizationRegistry(dL);function fL(e){pi[e].length>0||process.on(e,Ob[e])}function kb(e){pi[e].length>0||process.removeListener(e,Ob[e])}function cL(){xb("exit")}function hL(){xb("beforeExit")}function xb(e){for(let t of pi[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}}function dL(e){for(let t of["exit","beforeExit"]){let r=pi[t].indexOf(e);pi[t].splice(r,r+1),kb(t)}}function qb(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");fL(e);let n=new WeakRef(t);n.fn=r,Cb.register(t,n),pi[e].push(n)}function pL(e,t){qb("exit",e,t)}function mL(e,t){qb("beforeExit",e,t)}function yL(e){Cb.unregister(e);for(let t of["exit","beforeExit"])pi[t]=pi[t].filter(r=>{let n=r.deref();return n&&n!==e}),kb(t)}Nb.exports={register:pL,registerBeforeExit:mL,unregister:yL}});var jb=w((Nee,Db)=>{"use strict";function gL(e,t,r,n,i){let s=Date.now()+n,o=Atomics.load(e,t);if(o===r){i(null,"ok");return}let a=o,u=l=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(e,t),o===a?u(l>=1e3?1e3:l*2):o===r?i(null,"ok"):i(null,"not-equal")},l)};u(1)}function vL(e,t,r,n,i){let s=Date.now()+n,o=Atomics.load(e,t);if(o!==r){i(null,"ok");return}let a=u=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{o=Atomics.load(e,t),o!==r?i(null,"ok"):a(u>=1e3?1e3:u*2)},u)};a(1)}Db.exports={wait:gL,waitDiff:vL}});var Fb=w((Dee,Lb)=>{"use strict";Lb.exports={WRITE_INDEX:4,READ_INDEX:8}});var Vb=w((Lee,Ub)=>{"use strict";var{EventEmitter:wL}=require("events"),{Worker:bL}=require("worker_threads"),{join:EL}=require("path"),{pathToFileURL:_L}=require("url"),{wait:SL}=jb(),{WRITE_INDEX:ur,READ_INDEX:vn}=Fb(),PL=require("buffer"),RL=require("assert"),N=Symbol("kImpl"),TL=PL.constants.MAX_STRING_LENGTH,dl=class{constructor(t){this._value=t}deref(){return this._value}},AL=global.FinalizationRegistry||class{register(){}unregister(){}},$L=global.WeakRef||dl,Mb=new AL(e=>{e.exited||e.terminate()});function IL(e,t){let{filename:r,workerData:n}=t,s=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||EL(__dirname,"lib","worker.js"),o=new bL(s,{...t.workerOpts,workerData:{filename:r.indexOf("file://")===0?r:_L(r).href,dataBuf:e[N].dataBuf,stateBuf:e[N].stateBuf,workerData:n}});return o.stream=new dl(e),o.on("message",OL),o.on("exit",Hb),Mb.register(e,o),o}function zb(e){RL(!e[N].sync),e[N].needDrain&&(e[N].needDrain=!1,e.emit("drain"))}function hl(e){let t=Atomics.load(e[N].state,ur),r=e[N].data.length-t;if(r>0){if(e[N].buf.length===0){e[N].flushing=!1,e[N].ending?Uh(e):e[N].needDrain&&process.nextTick(zb,e);return}let n=e[N].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[N].buf=e[N].buf.slice(r),pl(e,n,hl.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[N].state,vn,0),Atomics.store(e[N].state,ur,0);i>e[N].data.length;)r=r/2,n=e[N].buf.slice(0,r),i=Buffer.byteLength(n);e[N].buf=e[N].buf.slice(r),pl(e,n,hl.bind(null,e))}})}else if(r===0){if(t===0&&e[N].buf.length===0)return;e.flush(()=>{Atomics.store(e[N].state,vn,0),Atomics.store(e[N].state,ur,0),hl(e)})}else wn(e,new Error("overwritten"))}function OL(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new $L(t),t.flush(()=>{t[N].ready=!0,t.emit("ready")});break;case"ERROR":wn(t,e.err);break;default:wn(t,new Error("this should not happen: "+e.code))}}function Hb(e){let t=this.stream.deref();t!==void 0&&(Mb.unregister(t),t.worker.exited=!0,t.worker.off("exit",Hb),wn(t,e!==0?new Error("the worker thread exited"):null))}var Mh=class extends wL{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[N]={},this[N].stateBuf=new SharedArrayBuffer(128),this[N].state=new Int32Array(this[N].stateBuf),this[N].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[N].data=Buffer.from(this[N].dataBuf),this[N].sync=t.sync||!1,this[N].ending=!1,this[N].ended=!1,this[N].needDrain=!1,this[N].destroyed=!1,this[N].flushing=!1,this[N].ready=!1,this[N].finished=!1,this[N].errored=null,this[N].closed=!1,this[N].buf="",this.worker=IL(this,t)}write(t){if(this[N].destroyed)return zh(this,new Error("the worker has exited")),!1;if(this[N].ending)return zh(this,new Error("the worker is ending")),!1;if(this[N].flushing&&this[N].buf.length+t.length>=TL)try{Fh(this),this[N].flushing=!0}catch(r){return wn(this,r),!1}if(this[N].buf+=t,this[N].sync)try{return Fh(this),!0}catch(r){return wn(this,r),!1}return this[N].flushing||(this[N].flushing=!0,setImmediate(hl,this)),this[N].needDrain=this[N].data.length-this[N].buf.length-Atomics.load(this[N].state,ur)<=0,!this[N].needDrain}end(){this[N].destroyed||(this[N].ending=!0,Uh(this))}flush(t){if(this[N].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[N].state,ur);SL(this[N].state,vn,r,1/0,(n,i)=>{if(n){wn(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[N].destroyed||(Fh(this),Hh(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[N].ready}get destroyed(){return this[N].destroyed}get closed(){return this[N].closed}get writable(){return!this[N].destroyed&&!this[N].ending}get writableEnded(){return this[N].ending}get writableFinished(){return this[N].finished}get writableNeedDrain(){return this[N].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[N].errored}};function zh(e,t){setImmediate(()=>{e.emit("error",t)})}function wn(e,t){e[N].destroyed||(e[N].destroyed=!0,t&&(e[N].errored=t,zh(e,t)),e.worker.exited?setImmediate(()=>{e[N].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[N].closed=!0,e.emit("close")}))}function pl(e,t,r){let n=Atomics.load(e[N].state,ur),i=Buffer.byteLength(t);return e[N].data.write(t,n),Atomics.store(e[N].state,ur,n+i),Atomics.notify(e[N].state,ur),r(),!0}function Uh(e){if(!(e[N].ended||!e[N].ending||e[N].flushing)){e[N].ended=!0;try{e.flushSync();let t=Atomics.load(e[N].state,vn);Atomics.store(e[N].state,ur,-1),Atomics.notify(e[N].state,ur);let r=0;for(;t!==-1;){if(Atomics.wait(e[N].state,vn,t,1e3),t=Atomics.load(e[N].state,vn),t===-2){wn(e,new Error("end() failed"));return}if(++r===10){wn(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[N].finished=!0,e.emit("finish")})}catch(t){wn(e,t)}}}function Fh(e){let t=()=>{e[N].ending?Uh(e):e[N].needDrain&&process.nextTick(zb,e)};for(e[N].flushing=!1;e[N].buf.length!==0;){let r=Atomics.load(e[N].state,ur),n=e[N].data.length-r;if(n===0){Hh(e),Atomics.store(e[N].state,vn,0),Atomics.store(e[N].state,ur,0);continue}else if(n<0)throw new Error("overwritten");let i=e[N].buf.slice(0,n),s=Buffer.byteLength(i);if(s<=n)e[N].buf=e[N].buf.slice(n),pl(e,i,t);else{for(Hh(e),Atomics.store(e[N].state,vn,0),Atomics.store(e[N].state,ur,0);s>e[N].buf.length;)n=n/2,i=e[N].buf.slice(0,n),s=Buffer.byteLength(i);e[N].buf=e[N].buf.slice(n),pl(e,i,t)}}}function Hh(e){if(e[N].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[N].state,ur),r=0;for(;;){let n=Atomics.load(e[N].state,vn);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[N].state,vn,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}Ub.exports=Mh});var Gh=w((Fee,Bb)=>{"use strict";var{createRequire:CL}=require("module"),kL=$h(),{join:Vh,isAbsolute:xL}=require("path"),qL=Dh(),Bh=Lh(),NL=Vb();function DL(e){Bh.register(e,LL),Bh.registerBeforeExit(e,FL),e.on("close",function(){Bh.unregister(e)})}function jL(e,t,r){let n=new NL({filename:e,workerData:t,workerOpts:r});n.on("ready",i),n.on("close",function(){process.removeListener("exit",s)}),process.on("exit",s);function i(){process.removeListener("exit",s),n.unref(),r.autoEnd!==!1&&DL(n)}function s(){n.closed||(n.flushSync(),qL(100),n.end())}return n}function LL(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function FL(e){e.flushSync()}function ML(e){let{pipeline:t,targets:r,levels:n,options:i={},worker:s={},caller:o=kL()}=e,a=typeof o=="string"?[o]:o,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},l=e.target;if(l&&r)throw new Error("only one of target or targets can be specified");return r?(l=u["pino-worker"]||Vh(__dirname,"worker.js"),i.targets=r.map(c=>({...c,target:f(c.target)}))):t&&(l=u["pino-pipeline-worker"]||Vh(__dirname,"worker-pipeline.js"),i.targets=t.map(c=>({...c,target:f(c.target)}))),n&&(i.levels=n),jL(f(l),i,s);function f(c){if(c=u[c]||c,xL(c)||c.indexOf("file://")===0)return c;if(c==="pino/file")return Vh(__dirname,"..","file.js");let h;for(let d of a)try{h=CL(d).resolve(c);break}catch{continue}if(!h)throw new Error(`unable to determine transport target for "${c}"`);return h}}Bb.exports=ML});var yl=w((Mee,nE)=>{"use strict";var Gb=Pb(),{mapHttpRequest:zL,mapHttpResponse:HL}=Ah(),Kh=Ib(),Kb=Lh(),{lsCacheSym:UL,chindingsSym:Yb,writeSym:Qb,serializersSym:Xb,formatOptsSym:Wb,endSym:VL,stringifiersSym:Zb,stringifySym:eE,stringifySafeSym:Qh,wildcardFirstSym:tE,nestedKeySym:BL,formattersSym:rE,messageKeySym:GL,nestedKeyStrSym:KL}=Vs(),{isMainThread:QL}=require("worker_threads"),WL=Gh();function oa(){}function JL(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let s=n;n!==null&&(n.method&&n.headers&&n.socket?n=zL(n):typeof n.setHeader=="function"&&(n=HL(n)));let o;s===null&&i.length===0?o=[null]:(s=i.shift(),o=i),this[Qb](n,Gb(s,o,this[Wb]),e)}else this[Qb](null,Gb(n,i,this[Wb]),e)}}function Jb(e){let t="",r=0,n=!1,i=255,s=e.length;if(s>100)return JSON.stringify(e);for(var o=0;o<s&&i>=32;o++)i=e.charCodeAt(o),(i===34||i===92)&&(t+=e.slice(r,o)+"\\",r=o,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function YL(e,t,r,n){let i=this[eE],s=this[Qh],o=this[Zb],a=this[VL],u=this[Yb],l=this[Xb],f=this[rE],c=this[GL],h=this[UL][r]+n;h=h+u;let d;f.log&&(e=f.log(e));let p=o[tE],m="";for(let b in e)if(d=e[b],Object.prototype.hasOwnProperty.call(e,b)&&d!==void 0){d=l[b]?l[b](d):d;let P=o[b]||p;switch(typeof d){case"undefined":case"function":continue;case"number":Number.isFinite(d)===!1&&(d=null);case"boolean":P&&(d=P(d));break;case"string":d=(P||Jb)(d);break;default:d=(P||i)(d,s)}if(d===void 0)continue;m+=',"'+b+'":'+d}let v="";if(t!==void 0){d=l[c]?l[c](t):t;let b=o[c]||p;switch(typeof d){case"function":break;case"number":Number.isFinite(d)===!1&&(d=null);case"boolean":b&&(d=b(d)),v=',"'+c+'":'+d;break;case"string":d=(b||Jb)(d),v=',"'+c+'":'+d;break;default:d=(b||i)(d,s),v=',"'+c+'":'+d}}return this[BL]&&m?h+this[KL]+m.slice(1)+"}"+v+a:h+m+v+a}function XL(e,t){let r,n=e[Yb],i=e[eE],s=e[Qh],o=e[Zb],a=o[tE],u=e[Xb],l=e[rE].bindings;t=l(t);for(let f in t)if(r=t[f],(f!=="level"&&f!=="serializers"&&f!=="formatters"&&f!=="customLevels"&&t.hasOwnProperty(f)&&r!==void 0)===!0){if(r=u[f]?u[f](r):r,r=(o[f]||a||i)(r,s),r===void 0)continue;n+=',"'+f+'":'+r}return n}function ZL(e){return e.write!==e.constructor.prototype.write}function ml(e){let t=new Kh(e);return t.on("error",r),!e.sync&&QL&&(Kb.register(t,e2),t.on("close",function(){Kb.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=oa,t.end=oa,t.flushSync=oa,t.destroy=oa;return}t.removeListener("error",r),t.emit("error",n)}}function e2(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function t2(e){return function(r,n,i={},s){if(typeof i=="string")s=ml({dest:i}),i={};else if(typeof s=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");s=ml({dest:s})}else if(i instanceof Kh||i.writable||i._writableState)s=i,i={};else if(i.transport){if(i.transport instanceof Kh||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let a;i.customLevels&&(a=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),s=WL({caller:n,...i.transport,levels:a})}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");if("onTerminated"in i)throw Error("The onTerminated option has been removed, use pino.final instead");let{enabled:o}=i;return o===!1&&(i.level="silent"),s||(ZL(process.stdout)?s=process.stdout:s=ml({fd:process.stdout.fd||1})),{opts:i,stream:s}}}function r2(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[Qh])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function n2(e,t,r){return{level:e,bindings:t,log:r}}function i2(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}nE.exports={noop:oa,buildSafeSonicBoom:ml,asChindings:XL,asJson:YL,genLog:JL,createArgsNormalizer:t2,stringify:r2,buildFormatters:n2,normalizeDestFileDescriptor:i2}});var gl=w((zee,sE)=>{"use strict";var{lsCacheSym:s2,levelValSym:Wh,useOnlyCustomLevelsSym:o2,streamSym:a2,formattersSym:u2,hooksSym:l2}=Vs(),{noop:f2,genLog:es}=yl(),Xr={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},iE={fatal:e=>{let t=es(Xr.fatal,e);return function(...r){let n=this[a2];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>es(Xr.error,e),warn:e=>es(Xr.warn,e),info:e=>es(Xr.info,e),debug:e=>es(Xr.debug,e),trace:e=>es(Xr.trace,e)},Jh=Object.keys(Xr).reduce((e,t)=>(e[Xr[t]]=t,e),{}),c2=Object.keys(Jh).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function h2(e){let t=e[u2].level,{labels:r}=e.levels,n={};for(let i in r){let s=t(r[i],Number(i));n[i]=JSON.stringify(s).slice(0,-1)}return e[s2]=n,e}function d2(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function p2(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Wh],i=this[Wh]=r[e],s=this[o2],o=this[l2].logMethod;for(let a in r){if(i>r[a]){this[a]=f2;continue}this[a]=d2(a,s)?iE[a](o):es(r[a],o)}this.emit("level-change",e,i,t[n],n)}function m2(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function y2(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[Wh]}function g2(e=null,t=!1){let r=e?Object.keys(e).reduce((s,o)=>(s[e[o]]=o,s),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Jh,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:Xr,e);return{labels:n,values:i}}function v2(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(s=>t[s]),r?[]:Object.keys(Jh).map(s=>+s),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:Xr,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function w2(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}sE.exports={initialLsCache:c2,genLsCache:h2,levelMethods:iE,getLevel:m2,setLevel:p2,isLevelEnabled:y2,mappings:g2,levels:Xr,assertNoLevelCollisions:w2,assertDefaultLevelFound:v2}});var Yh=w((Hee,oE)=>{"use strict";oE.exports={version:"8.4.1"}});var yE=w((Vee,mE)=>{"use strict";var{EventEmitter:b2}=require("events"),{lsCacheSym:E2,levelValSym:_2,setLevelSym:Zh,getLevelSym:aE,chindingsSym:ed,parsedChindingsSym:S2,mixinSym:P2,asJsonSym:cE,writeSym:R2,mixinMergeStrategySym:T2,timeSym:A2,timeSliceIndexSym:$2,streamSym:hE,serializersSym:ts,formattersSym:Xh,errorKeySym:I2,useOnlyCustomLevelsSym:O2,needsMetadataGsym:C2,redactFmtSym:k2,stringifySym:x2,formatOptsSym:q2,stringifiersSym:N2}=Vs(),{getLevel:D2,setLevel:j2,isLevelEnabled:L2,mappings:F2,initialLsCache:M2,genLsCache:z2,assertNoLevelCollisions:H2}=gl(),{asChindings:dE,asJson:U2,buildFormatters:uE,stringify:lE}=yl(),{version:V2}=Yh(),B2=qh(),G2=class{},pE={constructor:G2,child:K2,bindings:Q2,setBindings:W2,flush:Z2,isLevelEnabled:L2,version:V2,get level(){return this[aE]()},set level(e){this[Zh](e)},get levelVal(){return this[_2]},set levelVal(e){throw Error("levelVal is read-only")},[E2]:M2,[R2]:Y2,[cE]:U2,[aE]:D2,[Zh]:j2};Object.setPrototypeOf(pE,b2.prototype);mE.exports=function(){return Object.create(pE)};var fE=e=>e;function K2(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[ts],n=this[Xh],i=Object.create(this);if(t.hasOwnProperty("serializers")===!0){i[ts]=Object.create(null);for(let f in r)i[ts][f]=r[f];let u=Object.getOwnPropertySymbols(r);for(var s=0;s<u.length;s++){let f=u[s];i[ts][f]=r[f]}for(let f in t.serializers)i[ts][f]=t.serializers[f];let l=Object.getOwnPropertySymbols(t.serializers);for(var o=0;o<l.length;o++){let f=l[o];i[ts][f]=t.serializers[f]}}else i[ts]=r;if(t.hasOwnProperty("formatters")){let{level:u,bindings:l,log:f}=t.formatters;i[Xh]=uE(u||n.level,l||fE,f||n.log)}else i[Xh]=uE(n.level,fE,n.log);if(t.hasOwnProperty("customLevels")===!0&&(H2(this.levels,t.customLevels),i.levels=F2(t.customLevels,i[O2]),z2(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let u=B2(i.redact,lE),l={stringify:u[k2]};i[x2]=lE,i[N2]=u,i[q2]=l}i[ed]=dE(i,e);let a=t.level||this.level;return i[Zh](a),i}function Q2(){let t=`{${this[ed].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function W2(e){let t=dE(this,e);this[ed]=t,delete this[S2]}function J2(e,t){return Object.assign(t,e)}function Y2(e,t,r){let n=this[A2](),i=this[P2],s=this[I2],o=this[T2]||J2,a;e==null?a={}:e instanceof Error?(a={[s]:e},t===void 0&&(t=e.message)):(a=e,t===void 0&&e[s]&&(t=e[s].message)),i&&(a=o(a,i(a,r)));let u=this[cE](a,t,r,n),l=this[hE];l[C2]===!0&&(l.lastLevel=r,l.lastObj=a,l.lastMsg=t,l.lastTime=n.slice(this[$2]),l.lastLogger=this),l.write(u)}function X2(){}function Z2(){let e=this[hE];"flush"in e&&e.flush(X2)}});var bE=w((od,wE)=>{"use strict";var ns=sd();ns.configure=sd;ns.stringify=ns;ns.default=ns;od.stringify=ns;od.configure=sd;wE.exports=ns;var eF=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/,tF=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/g,id=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\"];function rF(e){if(e.length===2){let r=e.charCodeAt(1);return`${e[0]}\\u${r.toString(16)}`}let t=e.charCodeAt(0);return id.length>t?id[t]:`\\u${t.toString(16)}`}function mi(e){if(e.length<5e3&&!eF.test(e))return e;if(e.length>100)return e.replace(tF,rF);let t="",r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i===34||i===92||i<32)t+=`${e.slice(r,n)}${id[i]}`,r=n+1;else if(i>=55296&&i<=57343){if(i<=56319&&n+1<e.length){let s=e.charCodeAt(n+1);if(s>=56320&&s<=57343){n++;continue}}t+=`${e.slice(r,n)}${`\\u${i.toString(16)}`}`,r=n+1}}return t+=e.slice(r),t}function td(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}var nF=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)),Symbol.toStringTag).get;function rd(e){return nF.call(e)!==void 0&&e.length!==0}function nd(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++)i+=`${t}"${s}":${n}${e[s]}`;return i}function iF(e){if(e&&Object.prototype.hasOwnProperty.call(e,"circularValue")){var t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function gE(e,t){if(e&&Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(typeof r!="boolean")throw new TypeError(`The "${t}" argument must be of type boolean`)}return r===void 0?!0:r}function vE(e,t){if(e&&Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function rs(e){return e===1?"1 item":`${e} items`}function sF(e){let t=new Set;for(let r of e)typeof r=="string"?t.add(r):typeof r=="number"&&t.add(String(r));return t}function sd(e){let t=iF(e),r=gE(e,"bigint"),n=gE(e,"deterministic"),i=vE(e,"maximumDepth"),s=vE(e,"maximumBreadth");function o(c,h,d,p,m,v){let b=h[c];switch(typeof b=="object"&&b!==null&&typeof b.toJSON=="function"&&(b=b.toJSON(c)),b=p.call(h,c,b),typeof b){case"string":return`"${mi(b)}"`;case"object":{if(b===null)return"null";if(d.indexOf(b)!==-1)return t;let P="",g=",",y=v;if(Array.isArray(b)){if(b.length===0)return"[]";if(i<d.length+1)return'"[Array]"';d.push(b),m!==""&&(v+=m,P+=`
${v}`,g=`,
${v}`);let A=Math.min(b.length,s),D=0;for(;D<A-1;D++){let j=o(D,b,d,p,m,v);P+=j!==void 0?j:"null",P+=g}let q=o(D,b,d,p,m,v);if(P+=q!==void 0?q:"null",b.length-1>s){let j=b.length-s-1;P+=`${g}"... ${rs(j)} not stringified"`}return m!==""&&(P+=`
${y}`),d.pop(),`[${P}]`}let R=Object.keys(b),$=R.length;if($===0)return"{}";if(i<d.length+1)return'"[Object]"';let _="",I="";m!==""&&(v+=m,g=`,
${v}`,_=" ");let x=Math.min($,s);rd(b)&&(P+=nd(b,g,s),R=R.slice(b.length),x-=b.length,I=g),n&&(R=td(R)),d.push(b);for(let A=0;A<x;A++){let D=R[A],q=o(D,b,d,p,m,v);q!==void 0&&(P+=`${I}"${mi(D)}":${_}${q}`,I=g)}if($>s){let A=$-s;P+=`${I}"...":${_}"${rs(A)} not stringified"`,I=g}return m!==""&&I.length>1&&(P=`
${v}${P}
${y}`),d.pop(),`{${P}}`}case"number":return isFinite(b)?String(b):"null";case"boolean":return b===!0?"true":"false";case"bigint":return r?String(b):void 0}}function a(c,h,d,p,m,v){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(c)),typeof h){case"string":return`"${mi(h)}"`;case"object":{if(h===null)return"null";if(d.indexOf(h)!==-1)return t;let b=v,P="",g=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(i<d.length+1)return'"[Array]"';d.push(h),m!==""&&(v+=m,P+=`
${v}`,g=`,
${v}`);let $=Math.min(h.length,s),_=0;for(;_<$-1;_++){let x=a(_,h[_],d,p,m,v);P+=x!==void 0?x:"null",P+=g}let I=a(_,h[_],d,p,m,v);if(P+=I!==void 0?I:"null",h.length-1>s){let x=h.length-s-1;P+=`${g}"... ${rs(x)} not stringified"`}return m!==""&&(P+=`
${b}`),d.pop(),`[${P}]`}if(p.size===0)return"{}";d.push(h);let y="";m!==""&&(v+=m,g=`,
${v}`,y=" ");let R="";for(let $ of p){let _=a($,h[$],d,p,m,v);_!==void 0&&(P+=`${R}"${mi($)}":${y}${_}`,R=g)}return m!==""&&R.length>1&&(P=`
${v}${P}
${b}`),d.pop(),`{${P}}`}case"number":return isFinite(h)?String(h):"null";case"boolean":return h===!0?"true":"false";case"bigint":return r?String(h):void 0}}function u(c,h,d,p,m){switch(typeof h){case"string":return`"${mi(h)}"`;case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(c),typeof h!="object")return u(c,h,d,p,m);if(h===null)return"null"}if(d.indexOf(h)!==-1)return t;let v=m;if(Array.isArray(h)){if(h.length===0)return"[]";if(i<d.length+1)return'"[Array]"';d.push(h),m+=p;let _=`
${m}`,I=`,
${m}`,x=Math.min(h.length,s),A=0;for(;A<x-1;A++){let q=u(A,h[A],d,p,m);_+=q!==void 0?q:"null",_+=I}let D=u(A,h[A],d,p,m);if(_+=D!==void 0?D:"null",h.length-1>s){let q=h.length-s-1;_+=`${I}"... ${rs(q)} not stringified"`}return _+=`
${v}`,d.pop(),`[${_}]`}let b=Object.keys(h),P=b.length;if(P===0)return"{}";if(i<d.length+1)return'"[Object]"';m+=p;let g=`,
${m}`,y="",R="",$=Math.min(P,s);rd(h)&&(y+=nd(h,g,s),b=b.slice(h.length),$-=h.length,R=g),n&&(b=td(b)),d.push(h);for(let _=0;_<$;_++){let I=b[_],x=u(I,h[I],d,p,m);x!==void 0&&(y+=`${R}"${mi(I)}": ${x}`,R=g)}if(P>s){let _=P-s;y+=`${R}"...": "${rs(_)} not stringified"`,R=g}return R!==""&&(y=`
${m}${y}
${v}`),d.pop(),`{${y}}`}case"number":return isFinite(h)?String(h):"null";case"boolean":return h===!0?"true":"false";case"bigint":return r?String(h):void 0}}function l(c,h,d){switch(typeof h){case"string":return`"${mi(h)}"`;case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(c),typeof h!="object")return l(c,h,d);if(h===null)return"null"}if(d.indexOf(h)!==-1)return t;let p="";if(Array.isArray(h)){if(h.length===0)return"[]";if(i<d.length+1)return'"[Array]"';d.push(h);let g=Math.min(h.length,s),y=0;for(;y<g-1;y++){let $=l(y,h[y],d);p+=$!==void 0?$:"null",p+=","}let R=l(y,h[y],d);if(p+=R!==void 0?R:"null",h.length-1>s){let $=h.length-s-1;p+=`,"... ${rs($)} not stringified"`}return d.pop(),`[${p}]`}let m=Object.keys(h),v=m.length;if(v===0)return"{}";if(i<d.length+1)return'"[Object]"';let b="",P=Math.min(v,s);rd(h)&&(p+=nd(h,",",s),m=m.slice(h.length),P-=h.length,b=","),n&&(m=td(m)),d.push(h);for(let g=0;g<P;g++){let y=m[g],R=l(y,h[y],d);R!==void 0&&(p+=`${b}"${mi(y)}":${R}`,b=",")}if(v>s){let g=v-s;p+=`${b}"...":"${rs(g)} not stringified"`}return d.pop(),`{${p}}`}case"number":return isFinite(h)?String(h):"null";case"boolean":return h===!0?"true":"false";case"bigint":return r?String(h):void 0}}function f(c,h,d){if(arguments.length>1){let p="";if(typeof d=="number"?p=" ".repeat(Math.min(d,10)):typeof d=="string"&&(p=d.slice(0,10)),h!=null){if(typeof h=="function")return o("",{"":c},[],h,p,"");if(Array.isArray(h))return a("",c,[],sF(h),p,"")}if(p.length!==0)return u("",c,[],p,"")}return l("",c,[])}return f}});var PE=w((Bee,SE)=>{"use strict";var ad=Symbol.for("pino.metadata"),{levels:EE}=gl(),_E=Object.create(EE);_E.silent=1/0;var oF=EE.info;function aF(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=_E;t.levels&&typeof t.levels=="object"&&(n=t.levels);let i={write:s,add:a,flushSync:o,end:u,minLevel:0,streams:[],clone:l,[ad]:!0};return Array.isArray(e)?e.forEach(a,i):a.call(i,e),e=null,i;function s(f){let c,h=this.lastLevel,{streams:d}=this,p=0,m;for(let v=lF(d.length,t.dedupe);cF(v,d.length,t.dedupe);v=fF(v,t.dedupe))if(c=d[v],c.level<=h){if(p!==0&&p!==c.level)break;if(m=c.stream,m[ad]){let{lastTime:b,lastMsg:P,lastObj:g,lastLogger:y}=this;m.lastLevel=h,m.lastTime=b,m.lastMsg=P,m.lastObj=g,m.lastLogger=y}m.write(f),t.dedupe&&(p=c.level)}else if(!t.dedupe)break}function o(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync()}function a(f){if(!f)return i;let c=typeof f.write=="function"||f.stream,h=f.write?f:f.stream;if(!c)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:d}=this,p;typeof f.levelVal=="number"?p=f.levelVal:typeof f.level=="string"?p=n[f.level]:typeof f.level=="number"?p=f.level:p=oF;let m={stream:h,level:p,levelVal:void 0,id:r++};return d.unshift(m),d.sort(uF),this.minLevel=d[0].level,i}function u(){for(let{stream:f}of this.streams)typeof f.flushSync=="function"&&f.flushSync(),f.end()}function l(f){let c=new Array(this.streams.length);for(let h=0;h<c.length;h++)c[h]={level:f,stream:this.streams[h].stream};return{write:s,add:a,minLevel:f,streams:c,clone:l,flushSync:o,[ad]:!0}}}function uF(e,t){return e.level-t.level}function lF(e,t){return t?e-1:0}function fF(e,t){return t?e-1:e+1}function cF(e,t,r){return r?e>=0:e<t}SE.exports=aF});var jE=w((Gee,Dr)=>{function aa(e){try{return require("path").join(`${process.cwd()}${require("path").sep}dist`.replace(/\\/g,"/"),e)}catch{return new Function("p","return new URL(p, import.meta.url).pathname")(e)}}globalThis.__bundlerPathsOverrides={...globalThis.__bundlerPathsOverrides||{},"thread-stream-worker":aa("./thread-stream-worker.js"),"pino-worker":aa("./pino-worker.js"),"pino-pipeline-worker":aa("./pino-pipeline-worker.js"),"pino/file":aa("./pino-file.js"),"pino-pretty":aa("./pino-pretty.js")};var hF=require("os"),kE=Ah(),dF=$h(),pF=qh(),xE=_b(),mF=yE(),qE=Vs(),{configure:yF}=bE(),{assertDefaultLevelFound:gF,mappings:NE,genLsCache:vF,levels:wF}=gl(),{createArgsNormalizer:bF,asChindings:EF,buildSafeSonicBoom:RE,buildFormatters:_F,stringify:vl,normalizeDestFileDescriptor:TE,noop:SF}=yl(),{version:PF}=Yh(),{chindingsSym:AE,redactFmtSym:RF,serializersSym:$E,timeSym:TF,timeSliceIndexSym:AF,streamSym:$F,stringifySym:IE,stringifySafeSym:ud,stringifiersSym:OE,setLevelSym:IF,endSym:OF,formatOptsSym:CF,messageKeySym:kF,errorKeySym:xF,nestedKeySym:qF,mixinSym:NF,useOnlyCustomLevelsSym:DF,formattersSym:CE,hooksSym:jF,nestedKeyStrSym:LF,mixinMergeStrategySym:FF}=qE,{epochTime:DE,nullTime:MF}=xE,{pid:zF}=process,HF=hF.hostname(),UF=kE.err,VF={level:"info",levels:wF,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:zF,hostname:HF},serializers:Object.assign(Object.create(null),{err:UF}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:DE,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},BF=bF(VF),GF=Object.assign(Object.create(null),kE);function ld(...e){let t={},{opts:r,stream:n}=BF(t,dF(),...e),{redact:i,crlf:s,serializers:o,timestamp:a,messageKey:u,errorKey:l,nestedKey:f,base:c,name:h,level:d,customLevels:p,mixin:m,mixinMergeStrategy:v,useOnlyCustomLevels:b,formatters:P,hooks:g,depthLimit:y,edgeLimit:R}=r,$=yF({maximumDepth:y,maximumBreadth:R}),_=_F(P.level,P.bindings,P.log),I=i?pF(i,vl):{},x=vl.bind({[ud]:$}),A=i?{stringify:I[RF]}:{stringify:x},D="}"+(s?`\r
`:`
`),q=EF.bind(null,{[AE]:"",[$E]:o,[OE]:I,[IE]:vl,[ud]:$,[CE]:_}),j="";c!==null&&(h===void 0?j=q(c):j=q(Object.assign({},c,{name:h})));let ue=a instanceof Function?a:a?DE:MF,ee=ue().indexOf(":")+1;if(b&&!p)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(m&&typeof m!="function")throw Error(`Unknown mixin type "${typeof m}" - expected "function"`);gF(d,p,b);let W=NE(p,b);return Object.assign(t,{levels:W,[DF]:b,[$F]:n,[TF]:ue,[AF]:ee,[IE]:vl,[ud]:$,[OE]:I,[OF]:D,[CF]:A,[kF]:u,[xF]:l,[qF]:f,[LF]:f?`,${JSON.stringify(f)}:{`:"",[$E]:o,[NF]:m,[FF]:v,[AE]:j,[CE]:_,[jF]:g,silent:SF}),Object.setPrototypeOf(t,mF()),vF(t),t[IF](d),t}Dr.exports=ld;Dr.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=TE(e.dest||process.stdout.fd),RE(e)):RE({dest:TE(e),minLength:0});Dr.exports.transport=Gh();Dr.exports.multistream=PE();Dr.exports.levels=NE();Dr.exports.stdSerializers=GF;Dr.exports.stdTimeFunctions=Object.assign({},xE);Dr.exports.symbols=qE;Dr.exports.version=PF;Dr.exports.default=ld;Dr.exports.pino=ld});var cd=w((Kee,ME)=>{"use strict";var KF=Dw(),wl=jE(),{serializersSym:LE}=wl.symbols,{FST_ERR_LOG_INVALID_DESTINATION:QF}=sr();function FE(e,t){if(t=t||e.stream,delete e.stream,t&&e.file)throw new QF;e.file&&(t=wl.destination(e.file),delete e.file);let r=e.logger,n=e.genReqId,i=null;return r?(e.logger=void 0,e.genReqId=void 0,r[LE]&&(e.serializers=Object.assign({},e.serializers,r[LE])),i=r.child({},e),e.logger=r,e.genReqId=n):i=wl(e,t),i}var fd={req:function(t){return{method:t.method,url:t.url,version:t.headers&&t.headers["accept-version"],hostname:t.hostname,remoteAddress:t.ip,remotePort:t.socket?t.socket.remotePort:void 0}},err:wl.stdSerializers.err,res:function(t){return{statusCode:t.statusCode}}};function WF(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}function JF(e){if(YF(e.logger))return{logger:FE({logger:e.logger,serializers:Object.assign({},fd,e.logger.serializers)}),hasLogger:!0};if(e.logger){let t={};return Object.prototype.toString.call(e.logger)==="[object Object]"&&Reflect.ownKeys(e.logger).forEach(n=>{Object.defineProperty(t,n,{value:e.logger[n],writable:!0,enumerable:!0,configurable:!0})}),t.level=t.level||"info",t.serializers=Object.assign({},fd,t.serializers),e.logger=t,{logger:FE(e.logger),hasLogger:!0}}else{let t=KF;return t.child=()=>t,{logger:t,hasLogger:!1}}}function YF(e){if(!e)return!1;let t=!0,r=["info","error","debug","fatal","warn","trace","child"];for(let n=0;n<r.length;n+=1)if(!e[r[n]]||typeof e[r[n]]!="function"){t=!1;break}return t}ME.exports={createLogger:JF,serializers:fd,now:WF}});var bl=w((Qee,zE)=>{"use strict";zE.exports=XF;function Gs(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function XF(e){if(e=e||{},e.circles)return ZF(e);return e.proto?n:r;function t(i,s){for(var o=Object.keys(i),a=new Array(o.length),u=0;u<o.length;u++){var l=o[u],f=i[l];typeof f!="object"||f===null?a[l]=f:f instanceof Date?a[l]=new Date(f):ArrayBuffer.isView(f)?a[l]=Gs(f):a[l]=s(f)}return a}function r(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,r);if(i instanceof Map)return new Map(t(Array.from(i),r));if(i instanceof Set)return new Set(t(Array.from(i),r));var s={};for(var o in i)if(Object.hasOwnProperty.call(i,o)!==!1){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(t(Array.from(a),r)):a instanceof Set?s[o]=new Set(t(Array.from(a),r)):ArrayBuffer.isView(a)?s[o]=Gs(a):s[o]=r(a)}return s}function n(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,n);if(i instanceof Map)return new Map(t(Array.from(i),n));if(i instanceof Set)return new Set(t(Array.from(i),n));var s={};for(var o in i){var a=i[o];typeof a!="object"||a===null?s[o]=a:a instanceof Date?s[o]=new Date(a):a instanceof Map?s[o]=new Map(t(Array.from(a),n)):a instanceof Set?s[o]=new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?s[o]=Gs(a):s[o]=n(a)}return s}}function ZF(e){var t=[],r=[];return e.proto?s:i;function n(o,a){for(var u=Object.keys(o),l=new Array(u.length),f=0;f<u.length;f++){var c=u[f],h=o[c];if(typeof h!="object"||h===null)l[c]=h;else if(h instanceof Date)l[c]=new Date(h);else if(ArrayBuffer.isView(h))l[c]=Gs(h);else{var d=t.indexOf(h);d!==-1?l[c]=r[d]:l[c]=a(h)}}return l}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,i);if(o instanceof Map)return new Map(n(Array.from(o),i));if(o instanceof Set)return new Set(n(Array.from(o),i));var a={};t.push(o),r.push(a);for(var u in o)if(Object.hasOwnProperty.call(o,u)!==!1){var l=o[u];if(typeof l!="object"||l===null)a[u]=l;else if(l instanceof Date)a[u]=new Date(l);else if(l instanceof Map)a[u]=new Map(n(Array.from(l),i));else if(l instanceof Set)a[u]=new Set(n(Array.from(l),i));else if(ArrayBuffer.isView(l))a[u]=Gs(l);else{var f=t.indexOf(l);f!==-1?a[u]=r[f]:a[u]=i(l)}}return t.pop(),r.pop(),a}function s(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,s);if(o instanceof Map)return new Map(n(Array.from(o),s));if(o instanceof Set)return new Set(n(Array.from(o),s));var a={};t.push(o),r.push(a);for(var u in o){var l=o[u];if(typeof l!="object"||l===null)a[u]=l;else if(l instanceof Date)a[u]=new Date(l);else if(l instanceof Map)a[u]=new Map(n(Array.from(l),s));else if(l instanceof Set)a[u]=new Set(n(Array.from(l),s));else if(ArrayBuffer.isView(l))a[u]=Gs(l);else{var f=t.indexOf(l);f!==-1?a[u]=r[f]:a[u]=s(l)}}return t.pop(),r.pop(),a}}});var la=w((Wee,UE)=>{"use strict";var eM=bl()({circles:!1,proto:!0}),{kSchemaVisited:HE,kSchemaResponse:tM}=ht(),hd=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:rM,FST_ERR_SCH_ALREADY_PRESENT:nM,FST_ERR_SCH_DUPLICATE:iM}=sr(),sM=["params","body","querystring","query","headers"];function El(e){this.store=e||{}}El.prototype.add=function(e){let t=eM(e.isFluentSchema||e.isFluentJSONSchema||e[hd]?e.valueOf():e),r=t.$id;if(!r)throw new rM;if(this.store[r])throw new nM(r);this.store[r]=t};El.prototype.getSchemas=function(){return Object.assign({},this.store)};El.prototype.getSchema=function(e){return this.store[e]};function oM(e,t){if(e[HE])return e;if(e.query){if(e.querystring)throw new iM("querystring");e.querystring=e.query}aM(e);for(let r of["headers","querystring","params","body"])if(typeof e[r]=="object"&&Object.getPrototypeOf(e[r])!==Object.prototype)return e;if(e.body&&(e.body=ua(e.body,t.jsonShorthand)),e.headers&&(e.headers=ua(e.headers,t.jsonShorthand)),e.querystring&&(e.querystring=ua(e.querystring,t.jsonShorthand)),e.params&&(e.params=ua(e.params,t.jsonShorthand)),e.response){let r=Object.keys(e.response);for(let n of r)e.response[n]=ua(e.response[n],t.jsonShorthand)}return e[HE]=!0,e}function aM(e){for(let t of sM)e[t]&&(e[t].isFluentSchema||e[t][hd])&&(e[t]=e[t].valueOf());if(e.response){let t=Object.keys(e.response);for(let r of t)(e.response[r].isFluentSchema||e.response[r][hd])&&(e.response[r]=e.response[r].valueOf())}}function ua(e,t){return!t||e.$ref||e.oneOf||e.allOf||e.anyOf||e.$merge||e.$patch?e:!e.type&&!e.properties?{type:"object",properties:e}:e}function uM(e,t){let r=e[tM];if(!r)return!1;if(r[t])return r[t];let n=(t+"")[0]+"xx";return r[n]?r[n]:r.default?r.default:!1}UE.exports={buildSchemas(e){return new El(e)},getSchemaSerializer:uM,normalizeSchema:oM}});var BE=w((Jee,VE)=>{"use strict";var dd=class{constructor(t={}){switch(t.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;default:this.parseInteger=Math.trunc;break}}asAny(t){return JSON.stringify(t)}asNull(){return"null"}asInteger(t){if(typeof t=="bigint")return t.toString();if(Number.isInteger(t))return""+t;{let r=this.parseInteger(t);if(Number.isNaN(r)||!Number.isFinite(r))throw new Error(`The value "${t}" cannot be converted to an integer.`);return""+r}}asIntegerNullable(t){return t===null?"null":this.asInteger(t)}asNumber(t){let r=Number(t);if(Number.isNaN(r))throw new Error(`The value "${t}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:null}asNumberNullable(t){return t===null?"null":this.asNumber(t)}asBoolean(t){return t&&"true"||"false"}asBooleanNullable(t){return t===null?"null":this.asBoolean(t)}asDateTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';throw new Error(`The value "${t}" cannot be converted to a date-time.`)}asDateTimeNullable(t){return t===null?"null":this.asDateTime(t)}asDate(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';throw new Error(`The value "${t}" cannot be converted to a date.`)}asDateNullable(t){return t===null?"null":this.asDate(t)}asTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';throw new Error(`The value "${t}" cannot be converted to a time.`)}asTimeNullable(t){return t===null?"null":this.asTime(t)}asString(t){let r='"';return t instanceof Date?r+t.toISOString()+r:t===null?r+r:(t instanceof RegExp?t=t.source:typeof t!="string"&&(t=t.toString()),t.length<42?this.asStringSmall(t):JSON.stringify(t))}asStringNullable(t){return t===null?"null":this.asString(t)}asStringSmall(t){let r=t.length,n="",i=0,s=!1,o=!1,a=255;for(var u=0;u<r&&a>=32;u++)a=t.charCodeAt(u),a>=55296&&a<=57343&&(o=!0),(a===34||a===92)&&(n+=t.slice(i,u)+"\\",i=u,s=!0);return s?n+=t.slice(i):n=t,a<32||o===!0?JSON.stringify(t):'"'+n+'"'}},yi=new dd({mode:"standalone"});function lM(e){let t="";return t+=fM(e),t}function fM(e){var t=e&&typeof e.toJSON=="function"?e.toJSON():e,r="{",n=!1;return t.statusCode!==void 0&&(n?r+=",":n=!0,r+='"statusCode":',r+=yi.asNumber.bind(yi)(t.statusCode)),t.code!==void 0&&(n?r+=",":n=!0,r+='"code":',r+=yi.asString.bind(yi)(t.code)),t.error!==void 0&&(n?r+=",":n=!0,r+='"error":',r+=yi.asString.bind(yi)(t.error)),t.message!==void 0&&(n?r+=",":n=!0,r+='"message":',r+=yi.asString.bind(yi)(t.message)),r+="}",r}VE.exports=lM});var fa=w((Yee,KE)=>{"use strict";var pd=require("http").STATUS_CODES,cM=mh(),{kReplyHeaders:Sl,kReplyNextErrorHandler:_l,kReplyIsRunningOnErrorHook:hM,kReplyHasStatusCode:dM}=ht(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:pM}=sr(),{getSchemaSerializer:mM}=la(),md=BE(),yM={func:vM,toJSON(){return this.func.name.toString()+"()"}};function gM(e,t,r){e[hM]=!1;let n=e.context;if(e[_l]===!1){GE(t,e,function(a,u){try{a.raw.writeHead(a.raw.statusCode,a[Sl])}catch(l){a.log.warn({req:a.request,res:a,err:l},l&&l.message),a.raw.writeHead(a.raw.statusCode)}a.raw.end(u)});return}let i=e[_l]||n.errorHandler;e[_l]=Object.getPrototypeOf(i),delete e[Sl]["content-length"];let s=i.func;if(!s){e[_l]=!1,GE(t,e,r);return}let o=s(t,e.request,e);o!==void 0&&(o!==null&&typeof o.then=="function"?cM(o,e):e.send(o))}function vM(e,t,r){if(bM(e,r),!r[dM]||r.statusCode===200){let n=e.statusCode||e.status;r.code(n>=400?n:500)}r.statusCode<500?r.log.info({res:r,err:e},e&&e.message):r.log.error({req:t,res:r,err:e},e&&e.message),r.send(e)}function GE(e,t,r){let n=t.raw,i=t.statusCode,s;try{let o=mM(t.context,i);s=o===!1?md({error:pd[i+""],code:e.code,message:e.message,statusCode:i}):o(Object.create(e,{error:{value:pd[i+""]},message:{value:e.message},statusCode:{value:i}}))}catch(o){t.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),t.code(500),s=md({error:pd[500],message:o.message,statusCode:500})}typeof s!="string"&&!Buffer.isBuffer(s)&&(s=md(new pM(typeof s))),t[Sl]["content-type"]="application/json; charset=utf-8",t[Sl]["content-length"]=""+Buffer.byteLength(s),r(t,s)}function wM(e=yM,t){if(!t)return e;let r=Object.create(e);return r.func=t,r}function bM(e,t){let r=t.raw,n=r.statusCode;n=n>=400?n:500,e!=null&&(e.headers!==void 0&&t.headers(e.headers),e.status>=400?n=e.status:e.statusCode>=400&&(n=e.statusCode)),r.statusCode=n}KE.exports={buildErrorHandler:wM,handleError:gM}});var Al=w((Xee,Tl)=>{"use strict";var vd=require("stream").finished,{kFourOhFourContext:QE,kReplyErrorHandlerCalled:t_,kReplyHijacked:ca,kReplyStartTime:ha,kReplyEndTime:Ed,kReplySerializer:Bn,kReplySerializerDefault:Pl,kReplyIsError:Rl,kReplyHeaders:Ne,kReplyTrailers:Rt,kReplyHasStatusCode:_d,kReplyIsRunningOnErrorHook:Sd,kReplyNextErrorHandler:EM,kDisableRequestLogging:r_,kSchemaResponse:n_,kReplySerializeWeakMap:gi,kSchemaController:yd,kOptions:_M}=ht(),{hookRunner:i_,hookIterator:SM,onSendHookRunner:Pd}=Zi(),WE=wh()[Symbol.for("internals")],PM=cd(),wd=PM.now,{handleError:JE}=fa(),{getSchemaSerializer:RM}=la(),gd={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:TM,FST_ERR_REP_ALREADY_SENT:s_,FST_ERR_REP_SENT_VALUE:AM,FST_ERR_SEND_INSIDE_ONERR:$M,FST_ERR_BAD_STATUS_CODE:IM,FST_ERR_BAD_TRAILER_NAME:OM,FST_ERR_BAD_TRAILER_VALUE:CM,FST_ERR_MISSING_SERIALIZATION_FN:kM}=sr(),xM=Xi();function xe(e,t,r){this.raw=e,this[Bn]=null,this[t_]=!1,this[Rl]=!1,this[Sd]=!1,this.request=t,this[Ne]={},this[Rt]=null,this[_d]=!1,this[ha]=void 0,this.log=r}xe.props=[];Object.defineProperties(xe.prototype,{context:{get(){return this.request.context}},server:{get(){return this.request.context.server}},sent:{enumerable:!0,get(){return(this[ca]||this.raw.writableEnded)===!0},set(e){if(xM.emit("FSTDEP010"),e!==!0)throw new AM;if(this.sent&&this[ca])throw new s_;this[ca]=!0}},statusCode:{get(){return this.raw.statusCode},set(e){this.code(e)}}});xe.prototype.hijack=function(){return this[ca]=!0,this};xe.prototype.send=function(e){if(this[Sd]===!0)throw new $M;if(this.sent)return this.log.warn({err:new s_},"Reply already sent"),this;if(e instanceof Error||this[Rl]===!0)return this[Rl]=!1,da(this,e,is),this;if(e===void 0)return is(this,e),this;let t=this.getHeader("content-type"),r=t!==void 0;if(e!==null){if(typeof e.pipe=="function")return is(this,e),this;if(Buffer.isBuffer(e))return r===!1&&(this[Ne]["content-type"]=gd.OCTET),is(this,e),this;if(r===!1&&typeof e=="string")return this[Ne]["content-type"]=gd.PLAIN,is(this,e),this}if(this[Bn]!==null){if(typeof e!="string")return YE(this,e),this;e=this[Bn](e)}else if(r===!1||t.indexOf("json")>-1){if(r===!1)this[Ne]["content-type"]=gd.JSON;else if(t.indexOf("charset")===-1){let n=t.trim();n.endsWith(";")?this[Ne]["content-type"]=`${n} charset=utf-8`:this[Ne]["content-type"]=`${n}; charset=utf-8`}if(typeof e!="string")return YE(this,e),this}return is(this,e),this};xe.prototype.getHeader=function(e){e=e.toLowerCase();let t=this.raw,r=this[Ne][e];return r===void 0&&t.hasHeader(e)&&(r=t.getHeader(e)),r};xe.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[Ne]}};xe.prototype.hasHeader=function(e){return e=e.toLowerCase(),this[Ne][e]!==void 0||this.raw.hasHeader(e)};xe.prototype.removeHeader=function(e){return delete this[Ne][e.toLowerCase()],this};xe.prototype.header=function(e,t=""){return e=e.toLowerCase(),this[Ne][e]&&e==="set-cookie"?(typeof this[Ne][e]=="string"&&(this[Ne][e]=[this[Ne][e]]),Array.isArray(t)?this[Ne][e].push(...t):this[Ne][e].push(t)):this[Ne][e]=t,this};xe.prototype.headers=function(e){let t=Object.keys(e);for(var r=0;r!==t.length;++r){let n=t[r];this.header(n,e[n])}return this};var qM=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);xe.prototype.trailer=function(e,t){if(e=e.toLowerCase(),qM.has(e))throw new OM(e);if(typeof t!="function")throw new CM(e,typeof t);return this[Rt]===null&&(this[Rt]={}),this[Rt][e]=t,this};xe.prototype.hasTrailer=function(e){return this[Rt]?.[e.toLowerCase()]!==void 0};xe.prototype.removeTrailer=function(e){return this[Rt]===null?this:(this[Rt][e.toLowerCase()]=void 0,this)};xe.prototype.code=function(e){let t=parseInt(e);if(isNaN(t)||t<100||t>599)throw new IM(e||String(e));return this.raw.statusCode=t,this[_d]=!0,this};xe.prototype.status=xe.prototype.code;xe.prototype.getSerializationFunction=function(e){let t;return typeof e=="string"||typeof e=="number"?t=this.context[n_]?.[e]:typeof e=="object"&&(t=this.context[gi]?.get(e)),t};xe.prototype.compileSerializationSchema=function(e,t=null){let{request:r}=this,{method:n,url:i}=r;if(this.context[gi]?.has(e))return this.context[gi].get(e);let o=(this.context.serializerCompiler||this.server[yd].serializerCompiler||this.server[yd].setupSerializer(this.server[_M])||this.server[yd].serializerCompiler)({schema:e,method:n,url:i,httpStatus:t});return this.context[gi]==null&&(this.context[gi]=new WeakMap),this.context[gi].set(e,o),o};xe.prototype.serializeInput=function(e,t,r){let n;if(r=typeof t=="string"||typeof t=="number"?t:r,r!=null){if(n=this.context[n_]?.[r],n==null)throw new kM(r)}else this.context[gi]?.has(t)?n=this.context[gi].get(t):n=this.compileSerializationSchema(t,r);return n(e)};xe.prototype.serialize=function(e){return this[Bn]!==null?this[Bn](e):this.context&&this.context[Pl]?this.context[Pl](e,this.raw.statusCode):a_(this.context,e,this.raw.statusCode)};xe.prototype.serializer=function(e){return this[Bn]=e,this};xe.prototype.type=function(e){return this[Ne]["content-type"]=e,this};xe.prototype.redirect=function(e,t){return typeof e=="string"&&(t=e,e=this[_d]?this.raw.statusCode:302),this.header("location",t).code(e).send()};xe.prototype.callNotFound=function(){return HM(this),this};xe.prototype.getResponseTime=function(){let e=0;return this[ha]!==void 0&&(e=(this[Ed]||wd())-this[ha]),e};xe.prototype.then=function(e,t){if(this.sent){e();return}vd(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?t?t(r):this.log&&this.log.warn("unhandled rejection on reply.then"):e()})};function YE(e,t){e.context.preSerialization!==null?Pd(e.context.preSerialization,e.request,e,t,XE):XE(null,e.request,e,t)}function XE(e,t,r,n){if(e!=null){da(r,e);return}try{r[Bn]!==null?n=r[Bn](n):r.context&&r.context[Pl]?n=r.context[Pl](n,r.raw.statusCode):n=a_(r.context,n,r.raw.statusCode)}catch(i){NM(i,r),da(r,i);return}is(r,n)}function NM(e,t){e.serialization=t.context.config}function is(e,t){e.context.onSend!==null?Pd(e.context.onSend,e.request,e,t,DM):o_(e,t)}function DM(e,t,r,n){e!=null?da(r,e):o_(r,n)}function o_(e,t){let r=e.raw,n=e.request,i=r.statusCode;if(e[Rt]!==null){let s=Object.keys(e[Rt]),o="";for(let a of s)typeof e[Rt][a]=="function"&&(o+=" ",o+=a);e.header("Transfer-Encoding","chunked"),e.header("Trailer",o.trim())}if(t==null){i>=200&&i!==204&&i!==304&&n.method!=="HEAD"&&e[Rt]===null&&(e[Ne]["content-length"]="0"),r.writeHead(i,e[Ne]),bd(t,r,e),r.end(null,null,null);return}if(typeof t.pipe=="function"){jM(t,r,e);return}if(typeof t!="string"&&!Buffer.isBuffer(t))throw new TM(typeof t);if(e[Rt]===null){let s=e[Ne]["content-length"];(!s||n.raw.method!=="HEAD"&&parseInt(s,10)!==Buffer.byteLength(t))&&(e[Ne]["content-length"]=""+Buffer.byteLength(t))}r.writeHead(i,e[Ne]),r.write(t),bd(t,r,e),r.end(null,null,null)}function ZE(e,t,r){t.code==="ERR_STREAM_PREMATURE_CLOSE"?e[r_]||e.info({res:r},"stream closed prematurely"):e.warn({err:t},"response terminated with an error with headers already sent")}function jM(e,t,r){let n=!0,i=!1;if(LM(e,t,r),vd(e,{readable:!0,writable:!1},function(s){n=!1,s!=null&&(t.headersSent||r.request.raw.aborted===!0?(i||(i=!0,ZE(r.log,s,t)),t.destroy()):da(r,s))}),vd(t,function(s){n&&(s!=null&&t.headersSent&&!i&&(i=!0,ZE(r.log,s,t)),typeof e.destroy=="function"?e.destroy():typeof e.close=="function"?e.close(UM):typeof e.abort=="function"?e.abort():r.log.warn("stream payload does not end properly"))}),t.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let s in r[Ne])t.setHeader(s,r[Ne][s]);e.pipe(t)}function bd(e,t,r){if(r[Rt]===null)return;let n=Object.keys(r[Rt]),i={};for(let s of n)typeof r[Rt][s]=="function"&&(i[s]=r[Rt][s](r,e));t.addTrailers(i)}function LM(e,t,r){r[Rt]!==null&&e.on("end",()=>bd(null,t,r))}function da(e,t,r){e.context.onError!==null&&!e[EM]?(e[Sd]=!0,Pd(e.context.onError,e.request,e,t,()=>JE(e,t,r))):JE(e,t,r)}function FM(e){e[ha]=wd();let t=r=>{e[Ed]=wd(),e.raw.removeListener("finish",t),e.raw.removeListener("error",t);let n=e.context;n&&n.onResponse!==null?i_(n.onResponse,MM,e.request,e,e_):e_(r,e.request,e)};e.raw.on("finish",t),e.raw.on("error",t)}function MM(e,t,r,n){return e(t,r,n)}function e_(e,t,r){if(r.log[r_])return;let n=r.getResponseTime();if(e!=null){r.log.error({res:r,err:e,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function zM(e){let t=[...e.props];function r(n,i,s){this.raw=n,this[Rl]=!1,this[t_]=!1,this[ca]=!1,this[Bn]=null,this.request=i,this[Ne]={},this[Rt]=null,this[ha]=void 0,this[Ed]=void 0,this.log=s;for(var o,a=0;a<t.length;a++)o=t[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.parent=e,r.props=t,r}function HM(e){if(e.context[QE]===null){e.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),e.code(404).send("404 Not Found");return}e.request.context=e.context[QE],e.context.preHandler!==null?i_(e.context.preHandler,SM,e.request,e,WE.preHandlerCallback):WE.preHandlerCallback(null,e.request,e)}function a_(e,t,r){let n=RM(e,r);return n?n(t):JSON.stringify(t)}function UM(){}Tl.exports=xe;Tl.exports.buildReply=zM;Tl.exports.setupResponseListeners=FM});var l_=w((Zee,u_)=>{"use strict";u_.exports=VM;function VM(e){if(!e)throw new TypeError("argument req is required");var t=GM(e.headers["x-forwarded-for"]||""),r=BM(e),n=[r].concat(t);return n}function BM(e){return e.socket?e.socket.remoteAddress:e.connection.remoteAddress}function GM(e){for(var t=e.length,r=[],n=e.length,i=e.length-1;i>=0;i--)switch(e.charCodeAt(i)){case 32:n===t&&(n=t=i);break;case 44:n!==t&&r.push(e.substring(n,t)),n=t=i;break;default:n=i;break}return n!==t&&r.push(e.substring(n,t)),r}});var c_=w((f_,pa)=>{(function(){var e,t,r,n,i,s,o,a,u;t={},a=this,typeof pa<"u"&&pa!==null&&pa.exports?pa.exports=t:a.ipaddr=t,o=function(l,f,c,h){var d,p;if(l.length!==f.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");for(d=0;h>0;){if(p=c-h,p<0&&(p=0),l[d]>>p!==f[d]>>p)return!1;h-=c,d+=1}return!0},t.subnetMatch=function(l,f,c){var h,d,p,m,v;c==null&&(c="unicast");for(p in f)for(m=f[p],m[0]&&!(m[0]instanceof Array)&&(m=[m]),h=0,d=m.length;h<d;h++)if(v=m[h],l.kind()===v[0].kind()&&l.match.apply(l,v))return p;return c},t.IPv4=function(){function l(f){var c,h,d;if(f.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");for(c=0,h=f.length;c<h;c++)if(d=f[c],!(0<=d&&d<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=f}return l.prototype.kind=function(){return"ipv4"},l.prototype.toString=function(){return this.octets.join(".")},l.prototype.toNormalizedString=function(){return this.toString()},l.prototype.toByteArray=function(){return this.octets.slice(0)},l.prototype.match=function(f,c){var h;if(c===void 0&&(h=f,f=h[0],c=h[1]),f.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return o(this.octets,f.octets,8,c)},l.prototype.SpecialRanges={unspecified:[[new l([0,0,0,0]),8]],broadcast:[[new l([255,255,255,255]),32]],multicast:[[new l([224,0,0,0]),4]],linkLocal:[[new l([169,254,0,0]),16]],loopback:[[new l([127,0,0,0]),8]],carrierGradeNat:[[new l([100,64,0,0]),10]],private:[[new l([10,0,0,0]),8],[new l([172,16,0,0]),12],[new l([192,168,0,0]),16]],reserved:[[new l([192,0,0,0]),24],[new l([192,0,2,0]),24],[new l([192,88,99,0]),24],[new l([198,51,100,0]),24],[new l([203,0,113,0]),24],[new l([240,0,0,0]),4]]},l.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},l.prototype.toIPv4MappedAddress=function(){return t.IPv6.parse("::ffff:"+this.toString())},l.prototype.prefixLengthFromSubnetMask=function(){var f,c,h,d,p,m,v;for(v={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},f=0,p=!1,c=h=3;h>=0;c=h+=-1)if(d=this.octets[c],d in v){if(m=v[d],p&&m!==0)return null;m!==8&&(p=!0),f+=m}else return null;return 32-f},l}(),r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^"+r+"\\."+r+"\\."+r+"\\."+r+"$","i"),longValue:new RegExp("^"+r+"$","i")},t.IPv4.parser=function(l){var f,c,h,d,p;if(c=function(m){return m[0]==="0"&&m[1]!=="x"?parseInt(m,8):parseInt(m)},f=l.match(n.fourOctet))return function(){var m,v,b,P;for(b=f.slice(1,6),P=[],m=0,v=b.length;m<v;m++)h=b[m],P.push(c(h));return P}();if(f=l.match(n.longValue)){if(p=c(f[1]),p>4294967295||p<0)throw new Error("ipaddr: address outside defined range");return function(){var m,v;for(v=[],d=m=0;m<=24;d=m+=8)v.push(p>>d&255);return v}().reverse()}else return null},t.IPv6=function(){function l(f,c){var h,d,p,m,v,b;if(f.length===16)for(this.parts=[],h=d=0;d<=14;h=d+=2)this.parts.push(f[h]<<8|f[h+1]);else if(f.length===8)this.parts=f;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(b=this.parts,p=0,m=b.length;p<m;p++)if(v=b[p],!(0<=v&&v<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");c&&(this.zoneId=c)}return l.prototype.kind=function(){return"ipv6"},l.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},l.prototype.toRFC5952String=function(){var f,c,h,d,p;for(d=/((^|:)(0(:|$)){2,})/g,p=this.toNormalizedString(),f=0,c=-1;h=d.exec(p);)h[0].length>c&&(f=h.index,c=h[0].length);return c<0?p:p.substring(0,f)+"::"+p.substring(f+c)},l.prototype.toByteArray=function(){var f,c,h,d,p;for(f=[],p=this.parts,c=0,h=p.length;c<h;c++)d=p[c],f.push(d>>8),f.push(d&255);return f},l.prototype.toNormalizedString=function(){var f,c,h;return f=function(){var d,p,m,v;for(m=this.parts,v=[],d=0,p=m.length;d<p;d++)c=m[d],v.push(c.toString(16));return v}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),f+h},l.prototype.toFixedLengthString=function(){var f,c,h;return f=function(){var d,p,m,v;for(m=this.parts,v=[],d=0,p=m.length;d<p;d++)c=m[d],v.push(c.toString(16).padStart(4,"0"));return v}.call(this).join(":"),h="",this.zoneId&&(h="%"+this.zoneId),f+h},l.prototype.match=function(f,c){var h;if(c===void 0&&(h=f,f=h[0],c=h[1]),f.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return o(this.parts,f.parts,16,c)},l.prototype.SpecialRanges={unspecified:[new l([0,0,0,0,0,0,0,0]),128],linkLocal:[new l([65152,0,0,0,0,0,0,0]),10],multicast:[new l([65280,0,0,0,0,0,0,0]),8],loopback:[new l([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new l([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new l([0,0,0,0,0,65535,0,0]),96],rfc6145:[new l([0,0,0,0,65535,0,0,0]),96],rfc6052:[new l([100,65435,0,0,0,0,0,0]),96],"6to4":[new l([8194,0,0,0,0,0,0,0]),16],teredo:[new l([8193,0,0,0,0,0,0,0]),32],reserved:[[new l([8193,3512,0,0,0,0,0,0]),32]]},l.prototype.range=function(){return t.subnetMatch(this,this.SpecialRanges)},l.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},l.prototype.toIPv4Address=function(){var f,c,h;if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");return h=this.parts.slice(-2),f=h[0],c=h[1],new t.IPv4([f>>8,f&255,c>>8,c&255])},l.prototype.prefixLengthFromSubnetMask=function(){var f,c,h,d,p,m,v;for(v={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},f=0,p=!1,c=h=7;h>=0;c=h+=-1)if(d=this.parts[c],d in v){if(m=v[d],p&&m!==0)return null;m!==16&&(p=!0),f+=m}else return null;return 128-f},l}(),i="(?:[0-9a-f]+::?)+",u="%[0-9a-z]{1,}",s={zoneIndex:new RegExp(u,"i"),native:new RegExp("^(::)?("+i+")?([0-9a-f]+)?(::)?("+u+")?$","i"),transitional:new RegExp("^((?:"+i+")|(?:::)(?:"+i+")?)"+(r+"\\."+r+"\\."+r+"\\."+r)+("("+u+")?$"),"i")},e=function(l,f){var c,h,d,p,m,v;if(l.indexOf("::")!==l.lastIndexOf("::"))return null;for(v=(l.match(s.zoneIndex)||[])[0],v&&(v=v.substring(1),l=l.replace(/%.+$/,"")),c=0,h=-1;(h=l.indexOf(":",h+1))>=0;)c++;if(l.substr(0,2)==="::"&&c--,l.substr(-2,2)==="::"&&c--,c>f)return null;for(m=f-c,p=":";m--;)p+="0:";return l=l.replace("::",p),l[0]===":"&&(l=l.slice(1)),l[l.length-1]===":"&&(l=l.slice(0,-1)),f=function(){var b,P,g,y;for(g=l.split(":"),y=[],b=0,P=g.length;b<P;b++)d=g[b],y.push(parseInt(d,16));return y}(),{parts:f,zoneId:v}},t.IPv6.parser=function(l){var f,c,h,d,p,m,v;if(s.native.test(l))return e(l,8);if((d=l.match(s.transitional))&&(v=d[6]||"",f=e(d[1].slice(0,-1)+v,6),f.parts)){for(m=[parseInt(d[2]),parseInt(d[3]),parseInt(d[4]),parseInt(d[5])],c=0,h=m.length;c<h;c++)if(p=m[c],!(0<=p&&p<=255))return null;return f.parts.push(m[0]<<8|m[1]),f.parts.push(m[2]<<8|m[3]),{parts:f.parts,zoneId:f.zoneId}}return null},t.IPv4.isIPv4=t.IPv6.isIPv6=function(l){return this.parser(l)!==null},t.IPv4.isValid=function(l){var f;try{return new this(this.parser(l)),!0}catch(c){return f=c,!1}},t.IPv4.isValidFourPartDecimal=function(l){return!!(t.IPv4.isValid(l)&&l.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},t.IPv6.isValid=function(l){var f,c;if(typeof l=="string"&&l.indexOf(":")===-1)return!1;try{return f=this.parser(l),new this(f.parts,f.zoneId),!0}catch(h){return c=h,!1}},t.IPv4.parse=function(l){var f;if(f=this.parser(l),f===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(f)},t.IPv6.parse=function(l){var f;if(f=this.parser(l),f.parts===null)throw new Error("ipaddr: string is not formatted like ip address");return new this(f.parts,f.zoneId)},t.IPv4.parseCIDR=function(l){var f,c,h;if((c=l.match(/^(.+)\/(\d+)$/))&&(f=parseInt(c[2]),f>=0&&f<=32))return h=[this.parse(c[1]),f],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},t.IPv4.subnetMaskFromPrefixLength=function(l){var f,c,h;if(l=parseInt(l),l<0||l>32)throw new Error("ipaddr: invalid IPv4 prefix length");for(h=[0,0,0,0],c=0,f=Math.floor(l/8);c<f;)h[c]=255,c++;return f<4&&(h[f]=Math.pow(2,l%8)-1<<8-l%8),new this(h)},t.IPv4.broadcastAddressFromCIDR=function(l){var f,c,h,d,p,m;try{for(f=this.parseCIDR(l),d=f[0].toByteArray(),m=this.subnetMaskFromPrefixLength(f[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)|parseInt(m[h],10)^255),h++;return new this(p)}catch(v){throw c=v,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv4.networkAddressFromCIDR=function(l){var f,c,h,d,p,m;try{for(f=this.parseCIDR(l),d=f[0].toByteArray(),m=this.subnetMaskFromPrefixLength(f[1]).toByteArray(),p=[],h=0;h<4;)p.push(parseInt(d[h],10)&parseInt(m[h],10)),h++;return new this(p)}catch(v){throw c=v,new Error("ipaddr: the address does not have IPv4 CIDR format")}},t.IPv6.parseCIDR=function(l){var f,c,h;if((c=l.match(/^(.+)\/(\d+)$/))&&(f=parseInt(c[2]),f>=0&&f<=128))return h=[this.parse(c[1]),f],Object.defineProperty(h,"toString",{value:function(){return this.join("/")}}),h;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},t.isValid=function(l){return t.IPv6.isValid(l)||t.IPv4.isValid(l)},t.parse=function(l){if(t.IPv6.isValid(l))return t.IPv6.parse(l);if(t.IPv4.isValid(l))return t.IPv4.parse(l);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},t.parseCIDR=function(l){var f;try{return t.IPv6.parseCIDR(l)}catch(c){f=c;try{return t.IPv4.parseCIDR(l)}catch(h){throw f=h,new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},t.fromByteArray=function(l){var f;if(f=l.length,f===4)return new t.IPv4(l);if(f===16)return new t.IPv6(l);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},t.process=function(l){var f;return f=this.parse(l),f.kind()==="ipv6"&&f.isIPv4MappedAddress()?f.toIPv4Address():f}}).call(f_)});var y_=w((ete,Ol)=>{"use strict";Ol.exports=ZM;Ol.exports.all=p_;Ol.exports.compile=m_;var KM=l_(),d_=c_(),QM=/^[0-9]+$/,$l=d_.isValid,Il=d_.parse,h_={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function p_(e,t){var r=KM(e);if(!t)return r;typeof t!="function"&&(t=m_(t));for(var n=0;n<r.length-1;n++)t(r[n],n)||(r.length=n+1);return r}function m_(e){if(!e)throw new TypeError("argument is required");var t;if(typeof e=="string")t=[e];else if(Array.isArray(e))t=e.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<t.length;r++)e=t[r],Object.prototype.hasOwnProperty.call(h_,e)&&(e=h_[e],t.splice.apply(t,[r,1].concat(e)),r+=e.length-1);return JM(WM(t))}function WM(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=YM(e[r]);return t}function JM(e){var t=e.length;return t===0?ez:t===1?rz(e[0]):tz(e)}function YM(e){var t=e.lastIndexOf("/"),r=t!==-1?e.substring(0,t):e;if(!$l(r))throw new TypeError("invalid IP address: "+r);var n=Il(r);t===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());var i=n.kind()==="ipv6"?128:32,s=t!==-1?e.substring(t+1,e.length):null;if(s===null?s=i:QM.test(s)?s=parseInt(s,10):n.kind()==="ipv4"&&$l(s)?s=XM(s):s=null,s<=0||s>i)throw new TypeError("invalid range on address: "+e);return[n,s]}function XM(e){var t=Il(e),r=t.kind();return r==="ipv4"?t.prefixLengthFromSubnetMask():null}function ZM(e,t){if(!e)throw new TypeError("req argument is required");if(!t)throw new TypeError("trust argument is required");var r=p_(e,t),n=r[r.length-1];return n}function ez(){return!1}function tz(e){return function(r){if(!$l(r))return!1;for(var n=Il(r),i,s=n.kind(),o=0;o<e.length;o++){var a=e[o],u=a[0],l=u.kind(),f=a[1],c=n;if(s!==l){if(l==="ipv4"&&!n.isIPv4MappedAddress())continue;i||(i=l==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),c=i}if(c.match(u,f))return!0}return!1}}function rz(e){var t=e[0],r=t.kind(),n=r==="ipv4",i=e[1];return function(o){if(!$l(o))return!1;var a=Il(o),u=a.kind();if(u!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(t,i)}}});var ma=w((tte,g_)=>{var nz="2.0.0",iz=Number.MAX_SAFE_INTEGER||9007199254740991,sz=16;g_.exports={SEMVER_SPEC_VERSION:nz,MAX_LENGTH:256,MAX_SAFE_INTEGER:iz,MAX_SAFE_COMPONENT_LENGTH:sz}});var ya=w((rte,v_)=>{var oz=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};v_.exports=oz});var ss=w((vi,w_)=>{var{MAX_SAFE_COMPONENT_LENGTH:Rd}=ma(),az=ya();vi=w_.exports={};var uz=vi.re=[],U=vi.src=[],V=vi.t={},lz=0,oe=(e,t,r)=>{let n=lz++;az(e,n,t),V[e]=n,U[n]=t,uz[n]=new RegExp(t,r?"g":void 0)};oe("NUMERICIDENTIFIER","0|[1-9]\\d*");oe("NUMERICIDENTIFIERLOOSE","[0-9]+");oe("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");oe("MAINVERSION",`(${U[V.NUMERICIDENTIFIER]})\\.(${U[V.NUMERICIDENTIFIER]})\\.(${U[V.NUMERICIDENTIFIER]})`);oe("MAINVERSIONLOOSE",`(${U[V.NUMERICIDENTIFIERLOOSE]})\\.(${U[V.NUMERICIDENTIFIERLOOSE]})\\.(${U[V.NUMERICIDENTIFIERLOOSE]})`);oe("PRERELEASEIDENTIFIER",`(?:${U[V.NUMERICIDENTIFIER]}|${U[V.NONNUMERICIDENTIFIER]})`);oe("PRERELEASEIDENTIFIERLOOSE",`(?:${U[V.NUMERICIDENTIFIERLOOSE]}|${U[V.NONNUMERICIDENTIFIER]})`);oe("PRERELEASE",`(?:-(${U[V.PRERELEASEIDENTIFIER]}(?:\\.${U[V.PRERELEASEIDENTIFIER]})*))`);oe("PRERELEASELOOSE",`(?:-?(${U[V.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${U[V.PRERELEASEIDENTIFIERLOOSE]})*))`);oe("BUILDIDENTIFIER","[0-9A-Za-z-]+");oe("BUILD",`(?:\\+(${U[V.BUILDIDENTIFIER]}(?:\\.${U[V.BUILDIDENTIFIER]})*))`);oe("FULLPLAIN",`v?${U[V.MAINVERSION]}${U[V.PRERELEASE]}?${U[V.BUILD]}?`);oe("FULL",`^${U[V.FULLPLAIN]}$`);oe("LOOSEPLAIN",`[v=\\s]*${U[V.MAINVERSIONLOOSE]}${U[V.PRERELEASELOOSE]}?${U[V.BUILD]}?`);oe("LOOSE",`^${U[V.LOOSEPLAIN]}$`);oe("GTLT","((?:<|>)?=?)");oe("XRANGEIDENTIFIERLOOSE",`${U[V.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);oe("XRANGEIDENTIFIER",`${U[V.NUMERICIDENTIFIER]}|x|X|\\*`);oe("XRANGEPLAIN",`[v=\\s]*(${U[V.XRANGEIDENTIFIER]})(?:\\.(${U[V.XRANGEIDENTIFIER]})(?:\\.(${U[V.XRANGEIDENTIFIER]})(?:${U[V.PRERELEASE]})?${U[V.BUILD]}?)?)?`);oe("XRANGEPLAINLOOSE",`[v=\\s]*(${U[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[V.XRANGEIDENTIFIERLOOSE]})(?:${U[V.PRERELEASELOOSE]})?${U[V.BUILD]}?)?)?`);oe("XRANGE",`^${U[V.GTLT]}\\s*${U[V.XRANGEPLAIN]}$`);oe("XRANGELOOSE",`^${U[V.GTLT]}\\s*${U[V.XRANGEPLAINLOOSE]}$`);oe("COERCE",`(^|[^\\d])(\\d{1,${Rd}})(?:\\.(\\d{1,${Rd}}))?(?:\\.(\\d{1,${Rd}}))?(?:$|[^\\d])`);oe("COERCERTL",U[V.COERCE],!0);oe("LONETILDE","(?:~>?)");oe("TILDETRIM",`(\\s*)${U[V.LONETILDE]}\\s+`,!0);vi.tildeTrimReplace="$1~";oe("TILDE",`^${U[V.LONETILDE]}${U[V.XRANGEPLAIN]}$`);oe("TILDELOOSE",`^${U[V.LONETILDE]}${U[V.XRANGEPLAINLOOSE]}$`);oe("LONECARET","(?:\\^)");oe("CARETTRIM",`(\\s*)${U[V.LONECARET]}\\s+`,!0);vi.caretTrimReplace="$1^";oe("CARET",`^${U[V.LONECARET]}${U[V.XRANGEPLAIN]}$`);oe("CARETLOOSE",`^${U[V.LONECARET]}${U[V.XRANGEPLAINLOOSE]}$`);oe("COMPARATORLOOSE",`^${U[V.GTLT]}\\s*(${U[V.LOOSEPLAIN]})$|^$`);oe("COMPARATOR",`^${U[V.GTLT]}\\s*(${U[V.FULLPLAIN]})$|^$`);oe("COMPARATORTRIM",`(\\s*)${U[V.GTLT]}\\s*(${U[V.LOOSEPLAIN]}|${U[V.XRANGEPLAIN]})`,!0);vi.comparatorTrimReplace="$1$2$3";oe("HYPHENRANGE",`^\\s*(${U[V.XRANGEPLAIN]})\\s+-\\s+(${U[V.XRANGEPLAIN]})\\s*$`);oe("HYPHENRANGELOOSE",`^\\s*(${U[V.XRANGEPLAINLOOSE]})\\s+-\\s+(${U[V.XRANGEPLAINLOOSE]})\\s*$`);oe("STAR","(<|>)?=?\\s*\\*");oe("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");oe("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ga=w((nte,b_)=>{var fz=["includePrerelease","loose","rtl"],cz=e=>e?typeof e!="object"?{loose:!0}:fz.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};b_.exports=cz});var Cl=w((ite,S_)=>{var E_=/^[0-9]+$/,__=(e,t)=>{let r=E_.test(e),n=E_.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},hz=(e,t)=>__(t,e);S_.exports={compareIdentifiers:__,rcompareIdentifiers:hz}});var zt=w((ste,A_)=>{var kl=ya(),{MAX_LENGTH:P_,MAX_SAFE_INTEGER:xl}=ma(),{re:R_,t:T_}=ss(),dz=ga(),{compareIdentifiers:Ks}=Cl(),Pr=class{constructor(t,r){if(r=dz(r),t instanceof Pr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>P_)throw new TypeError(`version is longer than ${P_} characters`);kl("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?R_[T_.LOOSE]:R_[T_.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>xl||this.major<0)throw new TypeError("Invalid major version");if(this.minor>xl||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>xl||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<xl)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(kl("SemVer.compare",this.version,this.options,t),!(t instanceof Pr)){if(typeof t=="string"&&t===this.version)return 0;t=new Pr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Pr||(t=new Pr(t,this.options)),Ks(this.major,t.major)||Ks(this.minor,t.minor)||Ks(this.patch,t.patch)}comparePre(t){if(t instanceof Pr||(t=new Pr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(kl("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ks(n,i)}while(++r)}compareBuild(t){t instanceof Pr||(t=new Pr(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(kl("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ks(n,i)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(Ks(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};A_.exports=Pr});var os=w((ote,C_)=>{var{MAX_LENGTH:pz}=ma(),{re:$_,t:I_}=ss(),O_=zt(),mz=ga(),yz=(e,t)=>{if(t=mz(t),e instanceof O_)return e;if(typeof e!="string"||e.length>pz||!(t.loose?$_[I_.LOOSE]:$_[I_.FULL]).test(e))return null;try{return new O_(e,t)}catch{return null}};C_.exports=yz});var x_=w((ate,k_)=>{var gz=os(),vz=(e,t)=>{let r=gz(e,t);return r?r.version:null};k_.exports=vz});var N_=w((ute,q_)=>{var wz=os(),bz=(e,t)=>{let r=wz(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};q_.exports=bz});var L_=w((lte,j_)=>{var D_=zt(),Ez=(e,t,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new D_(e instanceof D_?e.version:e,r).inc(t,n).version}catch{return null}};j_.exports=Ez});var jr=w((fte,M_)=>{var F_=zt(),_z=(e,t,r)=>new F_(e,r).compare(new F_(t,r));M_.exports=_z});var ql=w((cte,z_)=>{var Sz=jr(),Pz=(e,t,r)=>Sz(e,t,r)===0;z_.exports=Pz});var V_=w((hte,U_)=>{var H_=os(),Rz=ql(),Tz=(e,t)=>{if(Rz(e,t))return null;{let r=H_(e),n=H_(t),i=r.prerelease.length||n.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return s+a;return o}};U_.exports=Tz});var G_=w((dte,B_)=>{var Az=zt(),$z=(e,t)=>new Az(e,t).major;B_.exports=$z});var Q_=w((pte,K_)=>{var Iz=zt(),Oz=(e,t)=>new Iz(e,t).minor;K_.exports=Oz});var J_=w((mte,W_)=>{var Cz=zt(),kz=(e,t)=>new Cz(e,t).patch;W_.exports=kz});var X_=w((yte,Y_)=>{var xz=os(),qz=(e,t)=>{let r=xz(e,t);return r&&r.prerelease.length?r.prerelease:null};Y_.exports=qz});var eS=w((gte,Z_)=>{var Nz=jr(),Dz=(e,t,r)=>Nz(t,e,r);Z_.exports=Dz});var rS=w((vte,tS)=>{var jz=jr(),Lz=(e,t)=>jz(e,t,!0);tS.exports=Lz});var Nl=w((wte,iS)=>{var nS=zt(),Fz=(e,t,r)=>{let n=new nS(e,r),i=new nS(t,r);return n.compare(i)||n.compareBuild(i)};iS.exports=Fz});var oS=w((bte,sS)=>{var Mz=Nl(),zz=(e,t)=>e.sort((r,n)=>Mz(r,n,t));sS.exports=zz});var uS=w((Ete,aS)=>{var Hz=Nl(),Uz=(e,t)=>e.sort((r,n)=>Hz(n,r,t));aS.exports=Uz});var va=w((_te,lS)=>{var Vz=jr(),Bz=(e,t,r)=>Vz(e,t,r)>0;lS.exports=Bz});var Dl=w((Ste,fS)=>{var Gz=jr(),Kz=(e,t,r)=>Gz(e,t,r)<0;fS.exports=Kz});var Td=w((Pte,cS)=>{var Qz=jr(),Wz=(e,t,r)=>Qz(e,t,r)!==0;cS.exports=Wz});var jl=w((Rte,hS)=>{var Jz=jr(),Yz=(e,t,r)=>Jz(e,t,r)>=0;hS.exports=Yz});var Ll=w((Tte,dS)=>{var Xz=jr(),Zz=(e,t,r)=>Xz(e,t,r)<=0;dS.exports=Zz});var Ad=w((Ate,pS)=>{var e3=ql(),t3=Td(),r3=va(),n3=jl(),i3=Dl(),s3=Ll(),o3=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return e3(e,r,n);case"!=":return t3(e,r,n);case">":return r3(e,r,n);case">=":return n3(e,r,n);case"<":return i3(e,r,n);case"<=":return s3(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};pS.exports=o3});var yS=w(($te,mS)=>{var a3=zt(),u3=os(),{re:Fl,t:Ml}=ss(),l3=(e,t)=>{if(e instanceof a3)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Fl[Ml.COERCE]);else{let n;for(;(n=Fl[Ml.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Fl[Ml.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Fl[Ml.COERCERTL].lastIndex=-1}return r===null?null:u3(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};mS.exports=l3});var vS=w((Ite,gS)=>{"use strict";gS.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var bS=w((Ote,wS)=>{"use strict";wS.exports=Ee;Ee.Node=as;Ee.create=Ee;function Ee(e){var t=this;if(t instanceof Ee||(t=new Ee),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Ee.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Ee.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Ee.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Ee.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)c3(this,arguments[e]);return this.length};Ee.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)h3(this,arguments[e]);return this.length};Ee.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Ee.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Ee.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Ee.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Ee.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Ee.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Ee.prototype.map=function(e,t){t=t||this;for(var r=new Ee,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Ee.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Ee,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Ee.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r};Ee.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r};Ee.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Ee.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Ee.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Ee;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r};Ee.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Ee;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r};Ee.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var s=[],n=0;i&&n<t;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=f3(this,i,r[n]);return s};Ee.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function f3(e,t,r){var n=t===e.head?new as(r,null,t,e):new as(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function c3(e,t){e.tail=new as(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function h3(e,t){e.head=new as(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function as(e,t,r,n){if(!(this instanceof as))return new as(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{vS()(Ee)}catch{}});var RS=w((Cte,PS)=>{"use strict";var d3=bS(),us=Symbol("max"),Kn=Symbol("length"),Qs=Symbol("lengthCalculator"),ba=Symbol("allowStale"),ls=Symbol("maxAge"),Gn=Symbol("dispose"),ES=Symbol("noDisposeOnSet"),Tt=Symbol("lruList"),Zr=Symbol("cache"),SS=Symbol("updateAgeOnGet"),$d=()=>1,Od=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[us]=t.max||1/0,n=t.length||$d;if(this[Qs]=typeof n!="function"?$d:n,this[ba]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[ls]=t.maxAge||0,this[Gn]=t.dispose,this[ES]=t.noDisposeOnSet||!1,this[SS]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[us]=t||1/0,wa(this)}get max(){return this[us]}set allowStale(t){this[ba]=!!t}get allowStale(){return this[ba]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[ls]=t,wa(this)}get maxAge(){return this[ls]}set lengthCalculator(t){typeof t!="function"&&(t=$d),t!==this[Qs]&&(this[Qs]=t,this[Kn]=0,this[Tt].forEach(r=>{r.length=this[Qs](r.value,r.key),this[Kn]+=r.length})),wa(this)}get lengthCalculator(){return this[Qs]}get length(){return this[Kn]}get itemCount(){return this[Tt].length}rforEach(t,r){r=r||this;for(let n=this[Tt].tail;n!==null;){let i=n.prev;_S(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[Tt].head;n!==null;){let i=n.next;_S(this,t,n,r),n=i}}keys(){return this[Tt].toArray().map(t=>t.key)}values(){return this[Tt].toArray().map(t=>t.value)}reset(){this[Gn]&&this[Tt]&&this[Tt].length&&this[Tt].forEach(t=>this[Gn](t.key,t.value)),this[Zr]=new Map,this[Tt]=new d3,this[Kn]=0}dump(){return this[Tt].map(t=>zl(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Tt]}set(t,r,n){if(n=n||this[ls],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[Qs](r,t);if(this[Zr].has(t)){if(s>this[us])return Ws(this,this[Zr].get(t)),!1;let u=this[Zr].get(t).value;return this[Gn]&&(this[ES]||this[Gn](t,u.value)),u.now=i,u.maxAge=n,u.value=r,this[Kn]+=s-u.length,u.length=s,this.get(t),wa(this),!0}let o=new Cd(t,r,s,i,n);return o.length>this[us]?(this[Gn]&&this[Gn](t,r),!1):(this[Kn]+=o.length,this[Tt].unshift(o),this[Zr].set(t,this[Tt].head),wa(this),!0)}has(t){if(!this[Zr].has(t))return!1;let r=this[Zr].get(t).value;return!zl(this,r)}get(t){return Id(this,t,!0)}peek(t){return Id(this,t,!1)}pop(){let t=this[Tt].tail;return t?(Ws(this,t),t.value):null}del(t){Ws(this,this[Zr].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let i=t[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Zr].forEach((t,r)=>Id(this,r,!1))}},Id=(e,t,r)=>{let n=e[Zr].get(t);if(n){let i=n.value;if(zl(e,i)){if(Ws(e,n),!e[ba])return}else r&&(e[SS]&&(n.value.now=Date.now()),e[Tt].unshiftNode(n));return i.value}},zl=(e,t)=>{if(!t||!t.maxAge&&!e[ls])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[ls]&&r>e[ls]},wa=e=>{if(e[Kn]>e[us])for(let t=e[Tt].tail;e[Kn]>e[us]&&t!==null;){let r=t.prev;Ws(e,t),t=r}},Ws=(e,t)=>{if(t){let r=t.value;e[Gn]&&e[Gn](r.key,r.value),e[Kn]-=r.length,e[Zr].delete(r.key),e[Tt].removeNode(t)}},Cd=class{constructor(t,r,n,i,s){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}},_S=(e,t,r,n)=>{let i=r.value;zl(e,i)&&(Ws(e,r),e[ba]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};PS.exports=Od});var Lr=w((kte,IS)=>{var fs=class{constructor(t,r){if(r=m3(r),t instanceof fs)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new fs(t.raw,r);if(t instanceof kd)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!AS(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&b3(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${t}`,i=TS.get(n);if(i)return i;let s=this.options.loose,o=s?lr[Wt.HYPHENRANGELOOSE]:lr[Wt.HYPHENRANGE];t=t.replace(o,O3(this.options.includePrerelease)),Be("hyphen replace",t),t=t.replace(lr[Wt.COMPARATORTRIM],g3),Be("comparator trim",t),t=t.replace(lr[Wt.TILDETRIM],v3),t=t.replace(lr[Wt.CARETTRIM],w3),t=t.split(/\s+/).join(" ");let a=t.split(" ").map(c=>E3(c,this.options)).join(" ").split(/\s+/).map(c=>I3(c,this.options));s&&(a=a.filter(c=>(Be("loose invalid filter",c,this.options),!!c.match(lr[Wt.COMPARATORLOOSE])))),Be("range list",a);let u=new Map,l=a.map(c=>new kd(c,this.options));for(let c of l){if(AS(c))return[c];u.set(c.value,c)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return TS.set(n,f),f}intersects(t,r){if(!(t instanceof fs))throw new TypeError("a Range is required");return this.set.some(n=>$S(n,r)&&t.set.some(i=>$S(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new y3(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(C3(this.set[r],t,this.options))return!0;return!1}};IS.exports=fs;var p3=RS(),TS=new p3({max:1e3}),m3=ga(),kd=Ea(),Be=ya(),y3=zt(),{re:lr,t:Wt,comparatorTrimReplace:g3,tildeTrimReplace:v3,caretTrimReplace:w3}=ss(),AS=e=>e.value==="<0.0.0-0",b3=e=>e.value==="",$S=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,t)),i=n.pop();return r},E3=(e,t)=>(Be("comp",e,t),e=P3(e,t),Be("caret",e),e=_3(e,t),Be("tildes",e),e=T3(e,t),Be("xrange",e),e=$3(e,t),Be("stars",e),e),Jt=e=>!e||e.toLowerCase()==="x"||e==="*",_3=(e,t)=>e.trim().split(/\s+/).map(r=>S3(r,t)).join(" "),S3=(e,t)=>{let r=t.loose?lr[Wt.TILDELOOSE]:lr[Wt.TILDE];return e.replace(r,(n,i,s,o,a)=>{Be("tilde",e,n,i,s,o,a);let u;return Jt(i)?u="":Jt(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Jt(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Be("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Be("tilde return",u),u})},P3=(e,t)=>e.trim().split(/\s+/).map(r=>R3(r,t)).join(" "),R3=(e,t)=>{Be("caret",e,t);let r=t.loose?lr[Wt.CARETLOOSE]:lr[Wt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(i,s,o,a,u)=>{Be("caret",e,i,s,o,a,u);let l;return Jt(s)?l="":Jt(o)?l=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Jt(a)?s==="0"?l=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(Be("replaceCaret pr",u),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(Be("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Be("caret return",l),l})},T3=(e,t)=>(Be("replaceXRanges",e,t),e.split(/\s+/).map(r=>A3(r,t)).join(" ")),A3=(e,t)=>{e=e.trim();let r=t.loose?lr[Wt.XRANGELOOSE]:lr[Wt.XRANGE];return e.replace(r,(n,i,s,o,a,u)=>{Be("xRange",e,n,i,s,o,a,u);let l=Jt(s),f=l||Jt(o),c=f||Jt(a),h=c;return i==="="&&h&&(i=""),u=t.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&h?(f&&(o=0),a=0,i===">"?(i=">=",f?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",f?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):f?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:c&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),Be("xRange return",n),n})},$3=(e,t)=>(Be("replaceStars",e,t),e.trim().replace(lr[Wt.STAR],"")),I3=(e,t)=>(Be("replaceGTE0",e,t),e.trim().replace(lr[t.includePrerelease?Wt.GTE0PRE:Wt.GTE0],"")),O3=e=>(t,r,n,i,s,o,a,u,l,f,c,h,d)=>(Jt(n)?r="":Jt(i)?r=`>=${n}.0.0${e?"-0":""}`:Jt(s)?r=`>=${n}.${i}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Jt(l)?u="":Jt(f)?u=`<${+l+1}.0.0-0`:Jt(c)?u=`<${l}.${+f+1}.0-0`:h?u=`<=${l}.${f}.${c}-${h}`:e?u=`<${l}.${f}.${+c+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),C3=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Be(e[n].semver),e[n].semver!==kd.ANY&&e[n].semver.prerelease.length>0){let i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var Ea=w((xte,qS)=>{var _a=Symbol("SemVer ANY"),Js=class{static get ANY(){return _a}constructor(t,r){if(r=k3(r),t instanceof Js){if(t.loose===!!r.loose)return t;t=t.value}qd("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===_a?this.value="":this.value=this.operator+this.semver.version,qd("comp",this)}parse(t){let r=this.options.loose?OS[CS.COMPARATORLOOSE]:OS[CS.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new kS(n[2],this.options.loose):this.semver=_a}toString(){return this.value}test(t){if(qd("Comparator.test",t,this.options.loose),this.semver===_a||t===_a)return!0;if(typeof t=="string")try{t=new kS(t,this.options)}catch{return!1}return xd(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof Js))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new xS(t.value,r).test(this.value);if(t.operator==="")return t.value===""?!0:new xS(this.value,r).test(t.semver);let n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,o=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=xd(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),u=xd(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||s&&o||a||u}};qS.exports=Js;var k3=ga(),{re:OS,t:CS}=ss(),xd=Ad(),qd=ya(),kS=zt(),xS=Lr()});var Sa=w((qte,NS)=>{var x3=Lr(),q3=(e,t,r)=>{try{t=new x3(t,r)}catch{return!1}return t.test(e)};NS.exports=q3});var jS=w((Nte,DS)=>{var N3=Lr(),D3=(e,t)=>new N3(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));DS.exports=D3});var FS=w((Dte,LS)=>{var j3=zt(),L3=Lr(),F3=(e,t,r)=>{let n=null,i=null,s=null;try{s=new L3(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new j3(n,r))}),n};LS.exports=F3});var zS=w((jte,MS)=>{var M3=zt(),z3=Lr(),H3=(e,t,r)=>{let n=null,i=null,s=null;try{s=new z3(t,r)}catch{return null}return e.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new M3(n,r))}),n};MS.exports=H3});var VS=w((Lte,US)=>{var Nd=zt(),U3=Lr(),HS=va(),V3=(e,t)=>{e=new U3(e,t);let r=new Nd("0.0.0");if(e.test(r)||(r=new Nd("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let i=e.set[n],s=null;i.forEach(o=>{let a=new Nd(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||HS(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||HS(r,s))&&(r=s)}return r&&e.test(r)?r:null};US.exports=V3});var GS=w((Fte,BS)=>{var B3=Lr(),G3=(e,t)=>{try{return new B3(e,t).range||"*"}catch{return null}};BS.exports=G3});var Hl=w((Mte,JS)=>{var K3=zt(),WS=Ea(),{ANY:Q3}=WS,W3=Lr(),J3=Sa(),KS=va(),QS=Dl(),Y3=Ll(),X3=jl(),Z3=(e,t,r,n)=>{e=new K3(e,n),t=new W3(t,n);let i,s,o,a,u;switch(r){case">":i=KS,s=Y3,o=QS,a=">",u=">=";break;case"<":i=QS,s=X3,o=KS,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(J3(e,t,n))return!1;for(let l=0;l<t.set.length;++l){let f=t.set[l],c=null,h=null;if(f.forEach(d=>{d.semver===Q3&&(d=new WS(">=0.0.0")),c=c||d,h=h||d,i(d.semver,c.semver,n)?c=d:o(d.semver,h.semver,n)&&(h=d)}),c.operator===a||c.operator===u||(!h.operator||h.operator===a)&&s(e,h.semver))return!1;if(h.operator===u&&o(e,h.semver))return!1}return!0};JS.exports=Z3});var XS=w((zte,YS)=>{var e4=Hl(),t4=(e,t,r)=>e4(e,t,">",r);YS.exports=t4});var e1=w((Hte,ZS)=>{var r4=Hl(),n4=(e,t,r)=>r4(e,t,"<",r);ZS.exports=n4});var n1=w((Ute,r1)=>{var t1=Lr(),i4=(e,t,r)=>(e=new t1(e,r),t=new t1(t,r),e.intersects(t));r1.exports=i4});var s1=w((Vte,i1)=>{var s4=Sa(),o4=jr();i1.exports=(e,t,r)=>{let n=[],i=null,s=null,o=e.sort((f,c)=>o4(f,c,r));for(let f of o)s4(f,t,r)?(s=f,i||(i=f)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[f,c]of n)f===c?a.push(f):!c&&f===o[0]?a.push("*"):c?f===o[0]?a.push(`<=${c}`):a.push(`${f} - ${c}`):a.push(`>=${f}`);let u=a.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return u.length<l.length?u:t}});var f1=w((Bte,l1)=>{var o1=Lr(),Ul=Ea(),{ANY:Dd}=Ul,Pa=Sa(),jd=jr(),a4=(e,t,r={})=>{if(e===t)return!0;e=new o1(e,r),t=new o1(t,r);let n=!1;e:for(let i of e.set){for(let s of t.set){let o=u4(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},u4=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Dd){if(t.length===1&&t[0].semver===Dd)return!0;r.includePrerelease?e=[new Ul(">=0.0.0-0")]:e=[new Ul(">=0.0.0")]}if(t.length===1&&t[0].semver===Dd){if(r.includePrerelease)return!0;t=[new Ul(">=0.0.0")]}let n=new Set,i,s;for(let d of e)d.operator===">"||d.operator===">="?i=a1(i,d,r):d.operator==="<"||d.operator==="<="?s=u1(s,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(i&&s){if(o=jd(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let d of n){if(i&&!Pa(d,String(i),r)||s&&!Pa(d,String(s),r))return null;for(let p of t)if(!Pa(d,String(p),r))return!1;return!0}let a,u,l,f,c=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;c&&c.prerelease.length===1&&s.operator==="<"&&c.prerelease[0]===0&&(c=!1);for(let d of t){if(f=f||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=a1(i,d,r),a===d&&a!==i)return!1}else if(i.operator===">="&&!Pa(i.semver,String(d),r))return!1}if(s){if(c&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===c.major&&d.semver.minor===c.minor&&d.semver.patch===c.patch&&(c=!1),d.operator==="<"||d.operator==="<="){if(u=u1(s,d,r),u===d&&u!==s)return!1}else if(s.operator==="<="&&!Pa(s.semver,String(d),r))return!1}if(!d.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&f&&!i&&o!==0||h||c)},a1=(e,t,r)=>{if(!e)return t;let n=jd(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},u1=(e,t,r)=>{if(!e)return t;let n=jd(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};l1.exports=a4});var Fd=w((Gte,c1)=>{var Ld=ss();c1.exports={re:Ld.re,src:Ld.src,tokens:Ld.t,SEMVER_SPEC_VERSION:ma().SEMVER_SPEC_VERSION,SemVer:zt(),compareIdentifiers:Cl().compareIdentifiers,rcompareIdentifiers:Cl().rcompareIdentifiers,parse:os(),valid:x_(),clean:N_(),inc:L_(),diff:V_(),major:G_(),minor:Q_(),patch:J_(),prerelease:X_(),compare:jr(),rcompare:eS(),compareLoose:rS(),compareBuild:Nl(),sort:oS(),rsort:uS(),gt:va(),lt:Dl(),eq:ql(),neq:Td(),gte:jl(),lte:Ll(),cmp:Ad(),coerce:yS(),Comparator:Ea(),Range:Lr(),satisfies:Sa(),toComparators:jS(),maxSatisfying:FS(),minSatisfying:zS(),minVersion:VS(),validRange:GS(),outside:Hl(),gtr:XS(),ltr:e1(),intersects:n1(),simplifyRange:s1(),subset:f1()}});var Bl=w((Kte,Hd)=>{"use strict";var Vl=y_(),l4=Fd(),f4=Xi(),{kHasBeenDecorated:c4,kSchemaBody:h4,kSchemaHeaders:d4,kSchemaParams:p4,kSchemaQuerystring:h1,kSchemaController:Md,kOptions:m4,kRequestValidateWeakMap:wi}=ht(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:y4}=sr(),d1={body:h4,headers:d4,params:p4,querystring:h1,query:h1};function zd(e,t,r,n,i,s){this.id=e,this.context=s,this.params=t,this.raw=r,this.query=n,this.log=i,this.body=void 0}zd.props=[];function g4(e){if(typeof e=="function")return e;if(e===!0)return function(){return!0};if(typeof e=="number")return function(t,r){return r<e};if(typeof e=="string"){let t=e.split(",").map(r=>r.trim());return Vl.compile(t)}return Vl.compile(e)}function v4(e,t){return t?w4(e,t):m1(e)}function m1(e){let t=[...e.props];function r(n,i,s,o,a,u){this.id=n,this.context=u,this.params=i,this.raw=s,this.query=o,this.log=a,this.body=void 0;for(var l,f=0;f<t.length;f++)l=t[f],this[l.key]=l.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.props=t,r.parent=e,r}function p1(e){let t=e.lastIndexOf(",");return t===-1?e.trim():e.slice(t+1).trim()}function w4(e,t){let r=m1(e),n=g4(t);return r[c4]=!0,Object.defineProperties(r.prototype,{ip:{get(){return Vl(this.raw,n)}},ips:{get(){return Vl.all(this.raw,n)}},hostname:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?p1(this.headers["x-forwarded-host"]):this.headers.host||this.headers[":authority"]}},protocol:{get(){if(this.headers["x-forwarded-proto"])return p1(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}Object.defineProperties(zd.prototype,{server:{get(){return this.context.server}},url:{get(){return this.raw.url}},method:{get(){return this.raw.method}},routerPath:{get(){return this.context.config.url}},routerMethod:{get(){return this.context.config.method}},is404:{get(){return this.context.config.url===void 0}},connection:{get(){return l4.gte(process.versions.node,"13.0.0")&&f4.emit("FSTDEP005"),this.raw.connection}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},hostname:{get(){return this.raw.headers.host||this.raw.headers[":authority"]}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(e){this.additionalHeaders=e}},getValidationFunction:{value:function(e){if(typeof e=="string"){let t=d1[e];return this.context[t]}else if(typeof e=="object")return this.context[wi]?.get(e)}},compileValidationSchema:{value:function(e,t=null){let{method:r,url:n}=this;if(this.context[wi]?.has(e))return this.context[wi].get(e);let s=(this.context.validatorCompiler||this.server[Md].validatorCompiler||this.server[Md].setupValidator(this.server[m4])||this.server[Md].validatorCompiler)({schema:e,method:r,url:n,httpPart:t});return this.context[wi]==null&&(this.context[wi]=new WeakMap),this.context[wi].set(e,s),s}},validateInput:{value:function(e,t,r){r=typeof t=="string"?t:r;let n=r!=null&&typeof r=="string"&&d1[r],i;if(n&&(i=this.context[n]),i==null&&(t==null||typeof t!="object"||Array.isArray(t)))throw new y4(r);return i==null&&(this.context[wi]?.has(t)?i=this.context[wi].get(t):i=this.compileValidationSchema(t,r)),i(e)}}});Hd.exports=zd;Hd.exports.buildRequest=v4});var Ud=w((Qte,y1)=>{"use strict";y1.exports={supportedMethods:["DELETE","GET","HEAD","PATCH","POST","PUT","OPTIONS","PROPFIND","PROPPATCH","MKCOL","COPY","MOVE","LOCK","UNLOCK","TRACE","SEARCH"]}});var Qd=w((Wte,b1)=>{"use strict";var{kReply:Vd,kRequest:Bd,kState:b4,kHasBeenDecorated:E4}=ht(),{FST_ERR_DEC_ALREADY_PRESENT:g1,FST_ERR_DEC_MISSING_DEPENDENCY:_4,FST_ERR_DEC_AFTER_START:S4,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:P4}=sr(),R4=Xi();function T4(e,t,r,n){if(e.hasOwnProperty(t))throw new g1(t);Gd(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(e,t,{get:r.getter,set:r.setter}):e[t]=r}function v1(e,t,r,n){let i=e.prototype;if(i.hasOwnProperty(t)||Kl(e,t))throw new g1(t);e[E4]=!0,Gd(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(i,t,{get:r.getter,set:r.setter}):typeof r=="function"?i[t]=r:e.props.push({key:t,value:r})}function w1(e,t){typeof t=="object"&&t&&!(typeof t.getter=="function"||typeof t.setter=="function")&&R4.emit("FSTDEP006",e)}function A4(e,t,r){return Kd(this,e),T4(this,e,t,r),this}function Gl(e,t){return t?t in e||e.prototype&&t in e.prototype||Kl(e,t):e in this}function Kl(e,t){return e.props?e.props.find(({key:r})=>r===t):!1}function $4(e){return e&&Kl(this[Bd],e)?!0:Gl(this[Bd].prototype,e)}function I4(e){return e&&Kl(this[Vd],e)?!0:Gl(this[Vd].prototype,e)}function Gd(e,t,r){if(r!=null){if(!Array.isArray(r))throw new P4(t);for(var n=0;n!==r.length;++n)if(!Gl(e,r[n]))throw new _4(r[n])}}function O4(e,t,r){return Kd(this,e),w1(e,t),v1(this[Vd],e,t,r),this}function C4(e,t,r){return Kd(this,e),w1(e,t),v1(this[Bd],e,t,r),this}function Kd(e,t){if(e[b4].started)throw new S4(t)}b1.exports={add:A4,exist:Gl,existRequest:$4,existReply:I4,dependencies:Gd,decorateReply:O4,decorateRequest:C4}});var _1=w((Jte,E1)=>{"use strict";var Wd=class{constructor(t=0,r=0){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.size=0,this.ttl=r}has(t){return t in this.items}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){let r=this.items[t];delete this.items[t],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}return this}evict(t=!1){if(t||this.size>0){let r=this.first;delete this.items[r.key],this.size--,this.size===0?(this.first=null,this.last=null):(this.first=r.next,this.first.prev=null)}return this}get(t){let r;if(this.has(t)){let n=this.items[t];this.ttl>0&&n.expiry<=new Date().getTime()?this.delete(t):(r=n.value,this.set(t,r,!0))}return r}keys(){return Object.keys(this.items)}set(t,r,n=!1){let i;if(n||this.has(t)){if(i=this.items[t],i.value=r,this.last!==i){let s=this.last,o=i.next,a=i.prev;this.first===i&&(this.first=i.next),i.next=null,i.prev=this.last,s.next=i,a!==null&&(a.next=o),o!==null&&(o.prev=a)}}else this.max>0&&this.size===this.max&&this.evict(!0),i=this.items[t]={expiry:this.ttl>0?new Date().getTime()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r},++this.size===1?this.first=i:this.last.next=i;return this.last=i,this}};function k4(e=1e3,t=0){if(isNaN(e)||e<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");return new Wd(e,t)}E1.exports=k4});var $1=w((Yte,A1)=>{"use strict";var x4=typeof Buffer<"u",S1=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,P1=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function R1(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),x4&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let i=r&&r.protoAction||"error",s=r&&r.constructorAction||"error";if(i==="ignore"&&s==="ignore")return n;if(i!=="ignore"&&s!=="ignore"){if(S1.test(e)===!1&&P1.test(e)===!1)return n}else if(i!=="ignore"&&s==="ignore"){if(S1.test(e)===!1)return n}else if(P1.test(e)===!1)return n;return T1(n,{protoAction:i,constructorAction:s,safe:r&&r.safe})}function T1(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let i=[e];for(;i.length;){let s=i;i=[];for(let o of s){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let u=o[a];u&&typeof u=="object"&&i.push(u)}}}return e}function q4(e,t){try{return R1(e,t,{safe:!0})}catch{return null}}A1.exports={parse:R1,scan:T1,safeParse:q4}});var Zd=w((Xte,Ta)=>{"use strict";var{AsyncResource:N4}=require("async_hooks"),Ys=_1();Ys=typeof Ys=="function"?Ys:Ys.default;var D4=$1(),{kDefaultJsonParse:Ra,kContentTypeParser:Xs,kBodyLimit:j4,kRequestPayloadStream:O1,kState:Yd,kTestInternals:L4,kReplyIsError:C1}=ht(),{FST_ERR_CTP_INVALID_TYPE:k1,FST_ERR_CTP_EMPTY_TYPE:F4,FST_ERR_CTP_ALREADY_PRESENT:M4,FST_ERR_CTP_INVALID_HANDLER:z4,FST_ERR_CTP_INVALID_PARSE_TYPE:H4,FST_ERR_CTP_BODY_TOO_LARGE:I1,FST_ERR_CTP_INVALID_MEDIA_TYPE:U4,FST_ERR_CTP_INVALID_CONTENT_LENGTH:V4,FST_ERR_CTP_EMPTY_JSON_BODY:B4}=sr();function Qn(e,t,r){this[Ra]=q1(t,r),this.customParsers={},this.customParsers["application/json"]=new Jd(!0,!1,e,this[Ra]),this.customParsers["text/plain"]=new Jd(!0,!1,e,Xd),this.parserList=["application/json","text/plain"],this.parserRegExpList=[],this.cache=Ys(100)}Qn.prototype.add=function(e,t,r){let n=typeof e=="string";if(!n&&!(e instanceof RegExp))throw new k1;if(n&&e.length===0)throw new F4;if(typeof r!="function")throw new z4;if(this.existingParser(e))throw new M4(e);if(t.parseAs!==void 0&&t.parseAs!=="string"&&t.parseAs!=="buffer")throw new H4(t.parseAs);let i=new Jd(t.parseAs==="string",t.parseAs==="buffer",t.bodyLimit,r);n&&e==="*"?this.customParsers[""]=i:(n?this.parserList.unshift(e):this.parserRegExpList.unshift(e),this.customParsers[e]=i)};Qn.prototype.hasParser=function(e){return e in this.customParsers};Qn.prototype.existingParser=function(e){return e==="application/json"?this.customParsers["application/json"]&&this.customParsers["application/json"].fn!==this[Ra]:e==="text/plain"?this.customParsers["text/plain"]&&this.customParsers["text/plain"].fn!==Xd:e in this.customParsers};Qn.prototype.getParser=function(e){if(e in this.customParsers)return this.customParsers[e];if(this.cache.has(e))return this.cache.get(e);for(var t=0;t!==this.parserList.length;++t){let n=this.parserList[t];if(e.indexOf(n)!==-1){let i=this.customParsers[n];return this.cache.set(e,i),i}}for(var r=0;r!==this.parserRegExpList.length;++r){let n=this.parserRegExpList[r];if(n.test(e)){let i=this.customParsers[n];return this.cache.set(e,i),i}}return this.customParsers[""]};Qn.prototype.removeAll=function(){this.customParsers={},this.parserRegExpList=[],this.parserList=[],this.cache=Ys(100)};Qn.prototype.remove=function(e){if(!(typeof e=="string"||e instanceof RegExp))throw new k1;delete this.customParsers[e];let t=typeof e=="string"?this.parserList:this.parserRegExpList,r=t.findIndex(n=>n.toString()===e.toString());r>-1&&t.splice(r,1)};Qn.prototype.run=function(e,t,r,n){let i=this.getParser(e),s=new N4("content-type-parser:run",r);if(i===void 0)n.send(new U4(e||void 0));else if(i.asString===!0||i.asBuffer===!0)x1(r,n,n.context._parserOptions,i,o);else{let a=i.fn(r,r[O1],o);a&&typeof a.then=="function"&&a.then(u=>o(null,u),o)}function o(a,u){s.runInAsyncScope(()=>{a?(n[C1]=!0,n.send(a)):(r.body=u,t(r,n))})}};function x1(e,t,r,n,i){let s=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=e.headers["content-length"]===void 0?NaN:Number.parseInt(e.headers["content-length"],10);if(a>o){t.send(new I1);return}let u=0,l=s===!0?"":[],f=e[O1]||e.raw;s===!0&&f.setEncoding("utf8"),f.on("data",c),f.on("end",h),f.on("error",h),f.resume();function c(d){if(u+=d.length,(f.receivedEncodedLength||u)>o){f.removeListener("data",c),f.removeListener("end",h),f.removeListener("error",h),t.send(new I1);return}s===!0?l+=d:l.push(d)}function h(d){if(f.removeListener("data",c),f.removeListener("end",h),f.removeListener("error",h),d!==void 0){d.statusCode=400,t[C1]=!0,t.code(d.statusCode).send(d);return}if(s===!0&&(u=Buffer.byteLength(l)),!Number.isNaN(a)&&(f.receivedEncodedLength||u)!==a){t.send(new V4);return}s===!1&&(l=Buffer.concat(l));let p=n.fn(e,l,i);p&&typeof p.then=="function"&&p.then(m=>i(null,m),i)}}function q1(e,t){return r;function r(n,i,s){if(i===""||i==null)return s(new B4,void 0);let o;try{o=D4.parse(i,{protoAction:e,constructorAction:t})}catch(a){return a.statusCode=400,s(a,void 0)}s(null,o)}}function Xd(e,t,r){r(null,t)}function Jd(e,t,r,n){this.asString=e,this.asBuffer=t,this.bodyLimit=r,this.fn=n}function G4(e){let t=new Qn;return t[Ra]=e[Ra],Object.assign(t.customParsers,e.customParsers),t.parserList=e.parserList.slice(),t}function K4(e,t,r){if(this[Yd].started)throw new Error('Cannot call "addContentTypeParser" when fastify instance is already started!');return typeof t=="function"&&(r=t,t={}),t||(t={}),t.bodyLimit||(t.bodyLimit=this[j4]),Array.isArray(e)?e.forEach(n=>this[Xs].add(n,t,r)):this[Xs].add(e,t,r),this}function Q4(e){return this[Xs].hasParser(e)}function W4(e){if(this[Yd].started)throw new Error('Cannot call "removeContentTypeParser" when fastify instance is already started!');if(Array.isArray(e))for(let t of e)this[Xs].remove(t);else this[Xs].remove(e)}function J4(){if(this[Yd].started)throw new Error('Cannot call "removeAllContentTypeParsers" when fastify instance is already started!');this[Xs].removeAll()}Ta.exports=Qn;Ta.exports.helpers={buildContentTypeParser:G4,addContentTypeParser:K4,hasContentTypeParser:Q4,removeContentTypeParser:W4,removeAllContentTypeParsers:J4};Ta.exports.defaultParsers={getDefaultJsonParser:q1,defaultTextParser:Xd};Ta.exports[L4]={rawBody:x1}});var N1=w((Zte,Ql)=>{"use strict";function ep(e){function t(v){return v!=="constructor"&&v!=="prototype"&&v!=="__proto__"}function r(v){let b=0,P=v.length,g=new Array(P);for(b=0;b<P;++b)g[b]=h(v[b]);return g}function n(v){let b={},P=a(v),g,y,R;for(g=0,y=P.length;g<y;++g)t(R=P[g])&&(b[R]=h(v[R]));return b}function i(v,b){let P=v.length,g=b.length,y=0,R=new Array(P+g);for(y=0;y<P;++y)R[y]=h(v[y]);for(y=0;y<g;++y)R[y+P]=h(b[y]);return R}let s=Object.prototype.propertyIsEnumerable;function o(v){let b=Object.keys(v),P=Object.getOwnPropertySymbols(v);for(let g=0,y=P.length;g<y;++g)s.call(v,P[g])&&b.push(P[g]);return b}let a=e&&e.symbols?o:Object.keys;function u(v){return typeof v=="object"&&v!==null&&!(v instanceof RegExp)&&!(v instanceof Date)}function l(v){return typeof v!="object"||v===null}function f(v){return typeof v!="object"||v===null||v instanceof RegExp||v instanceof Date}let c=e&&typeof e.mergeArray=="function"?e.mergeArray({clone:h,deepmerge:p,getKeys:a,isMergeableObject:u}):i;function h(v){return u(v)?Array.isArray(v)?r(v):n(v):v}function d(v,b){let P={},g=a(v),y=a(b),R,$,_;for(R=0,$=g.length;R<$;++R)t(_=g[R])&&y.indexOf(_)===-1&&(P[_]=h(v[_]));for(R=0,$=y.length;R<$;++R)t(_=y[R])&&(_ in v&&(g.indexOf(_)!==-1&&(P[_]=p(v[_],b[_])),!0)||(P[_]=h(b[_])));return P}function p(v,b){let P=Array.isArray(b),g=Array.isArray(v);return l(b)?b:f(v)?h(b):P&&g?c(v,b):P!==g?h(b):d(v,b)}function m(){switch(arguments.length){case 0:return{};case 1:return h(arguments[0]);case 2:return p(arguments[0],arguments[1])}let v;for(let b=0,P=arguments.length;b<P;++b)v=p(v,arguments[b]);return v}return e&&e.all?m:p}Ql.exports=ep;Ql.exports.default=ep;Ql.exports.deepmerge=ep});var Wl=w(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.formatNames=bn.fastFormats=bn.fullFormats=void 0;function Zs(e,t){return{validate:e,compare:t}}bn.fullFormats={date:Zs(L1,np),time:Zs(F1,ip),"date-time":Zs(eH,M1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:nH,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:fH,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:iH,int32:{type:"number",validate:aH},int64:{type:"number",validate:uH},float:{type:"number",validate:j1},double:{type:"number",validate:j1},password:!0,binary:!0};bn.fastFormats={...bn.fullFormats,date:Zs(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,np),time:Zs(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,ip),"date-time":Zs(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,M1),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};bn.formatNames=Object.keys(bn.fullFormats);function Y4(e){return e%4===0&&(e%100!==0||e%400===0)}var X4=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Z4=[0,31,28,31,30,31,30,31,31,30,31,30,31];function L1(e){let t=X4.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(n===2&&Y4(r)?29:Z4[n])}function np(e,t){if(!!(e&&t))return e>t?1:e<t?-1:0}var tp=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function F1(e,t){let r=tp.exec(e);if(!r)return!1;let n=+r[1],i=+r[2],s=+r[3],o=r[5];return(n<=23&&i<=59&&s<=59||n===23&&i===59&&s===60)&&(!t||o!=="")}function ip(e,t){if(!(e&&t))return;let r=tp.exec(e),n=tp.exec(t);if(!!(r&&n))return e=r[1]+r[2]+r[3]+(r[4]||""),t=n[1]+n[2]+n[3]+(n[4]||""),e>t?1:e<t?-1:0}var rp=/t|\s/i;function eH(e){let t=e.split(rp);return t.length===2&&L1(t[0])&&F1(t[1],!0)}function M1(e,t){if(!(e&&t))return;let[r,n]=e.split(rp),[i,s]=t.split(rp),o=np(r,i);if(o!==void 0)return o||ip(n,s)}var tH=/\/|:/,rH=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function nH(e){return tH.test(e)&&rH.test(e)}var D1=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function iH(e){return D1.lastIndex=0,D1.test(e)}var sH=-(2**31),oH=2**31-1;function aH(e){return Number.isInteger(e)&&e<=oH&&e>=sH}function uH(e){return Number.isInteger(e)}function j1(){return!0}var lH=/[^\\]\\Z/;function fH(e){if(lH.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var Jl=w((tre,z1)=>{"use strict";z1.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}});var Aa=w(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});var H1=Jl();H1.code='require("ajv/dist/runtime/equal").default';sp.default=H1});var K1=w((nre,ap)=>{"use strict";ap.exports=L;ap.exports.default=L;var cH={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},U1={enum:["array","boolean","integer","null","number","object","string"]},V1=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,hH=Wl().fullFormats.uri,B1=Wl().fullFormats.regex;function Fr(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0,a=o;return typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)?o===a&&typeof e=="number"&&isFinite(e)&&(e<0||isNaN(e))?(Fr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Fr.errors=s,o===0):(Fr.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var op={validate:L};function Yt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0;if(o===0)if(Array.isArray(e)){if(e.length<1)return Yt.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=e.length;for(let l=0;l<u;l++){let f=o;op.validate(e[l],{instancePath:t+"/"+l,parentData:e,parentDataProperty:l,rootData:i})||(s=s===null?op.validate.errors:s.concat(op.validate.errors),o=s.length);var a=f===o;if(!a)break}}}else return Yt.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Yt.errors=s,o===0}var G1=Aa().default;function L(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))&&typeof e!="boolean")return L.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:cH.type},message:"must be object,boolean"}],!1;if(o===0&&e&&typeof e=="object"&&!Array.isArray(e)){if(e.$id!==void 0){let g=e.$id,y=o;if(o===y&&o===y)if(typeof g=="string"){if(!V1.test(g))return L.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return L.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(e.$schema!==void 0){let g=e.$schema,y=o;if(o===y&&o===y)if(typeof g=="string"){if(!hH(g))return L.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return L.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(e.$ref!==void 0){let g=e.$ref,y=o;if(o===y&&o===y)if(typeof g=="string"){if(!V1.test(g))return L.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return L.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(e.$comment!==void 0){let g=o;if(typeof e.$comment!="string")return L.errors=[{instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.title!==void 0){let g=o;if(typeof e.title!="string")return L.errors=[{instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.description!==void 0){let g=o;if(typeof e.description!="string")return L.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.readOnly!==void 0){let g=o;if(typeof e.readOnly!="boolean")return L.errors=[{instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.examples!==void 0){let g=o;if(o===g&&!Array.isArray(e.examples))return L.errors=[{instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=g===o}else var a=!0;if(a){if(e.multipleOf!==void 0){let g=e.multipleOf,y=o;if(o===y)if(typeof g=="number"&&isFinite(g)){if(g<=0||isNaN(g))return L.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return L.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(e.maximum!==void 0){let g=e.maximum,y=o;if(!(typeof g=="number"&&isFinite(g)))return L.errors=[{instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(e.exclusiveMaximum!==void 0){let g=e.exclusiveMaximum,y=o;if(!(typeof g=="number"&&isFinite(g)))return L.errors=[{instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(e.minimum!==void 0){let g=e.minimum,y=o;if(!(typeof g=="number"&&isFinite(g)))return L.errors=[{instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(e.exclusiveMinimum!==void 0){let g=e.exclusiveMinimum,y=o;if(!(typeof g=="number"&&isFinite(g)))return L.errors=[{instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=y===o}else var a=!0;if(a){if(e.maxLength!==void 0){let g=e.maxLength,y=o,R=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return L.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===R&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return L.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(e.minLength!==void 0){let g=o;Fr(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:i})||(s=s===null?Fr.errors:s.concat(Fr.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.pattern!==void 0){let g=e.pattern,y=o;if(o===y&&o===y)if(typeof g=="string"){if(!B1(g))return L.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return L.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(e.additionalItems!==void 0){let g=o;L(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.items!==void 0){let g=e.items,y=o,R=o,$=!1,_=o;L(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var u=_===o;if($=$||u,!$){let x=o;Yt(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:i})||(s=s===null?Yt.errors:s.concat(Yt.errors),o=s.length);var u=x===o;$=$||u}if($)o=R,s!==null&&(R?s.length=R:s=null);else{let x={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[x]:s.push(x),o++,L.errors=s,!1}var a=y===o}else var a=!0;if(a){if(e.maxItems!==void 0){let g=e.maxItems,y=o,R=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return L.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===R&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return L.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(e.minItems!==void 0){let g=o;Fr(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:i})||(s=s===null?Fr.errors:s.concat(Fr.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.uniqueItems!==void 0){let g=o;if(typeof e.uniqueItems!="boolean")return L.errors=[{instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.contains!==void 0){let g=o;L(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.maxProperties!==void 0){let g=e.maxProperties,y=o,R=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return L.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===R&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return L.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=y===o}else var a=!0;if(a){if(e.minProperties!==void 0){let g=o;Fr(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:i})||(s=s===null?Fr.errors:s.concat(Fr.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.required!==void 0){let g=e.required,y=o;if(o===o)if(Array.isArray(g)){var l=!0;let _=g.length;for(let I=0;I<_;I++){let x=o;if(typeof g[I]!="string")return L.errors=[{instancePath:t+"/required/"+I,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=x===o;if(!l)break}if(l){let I=g.length,x;if(I>1){let A={};for(;I--;){let D=g[I];if(typeof D=="string"){if(typeof A[D]=="number"){return x=A[D],L.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:I,j:x},message:"must NOT have duplicate items (items ## "+x+" and "+I+" are identical)"}],!1;break}A[D]=I}}}}}else return L.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(e.additionalProperties!==void 0){let g=o;L(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.definitions!==void 0){let g=e.definitions,y=o;if(o===y)if(g&&typeof g=="object"&&!Array.isArray(g))for(let $ in g){let _=o;L(g[$],{instancePath:t+"/definitions/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var f=_===o;if(!f)break}else return L.errors=[{instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(e.properties!==void 0){let g=e.properties,y=o;if(o===y)if(g&&typeof g=="object"&&!Array.isArray(g))for(let $ in g){let _=o;L(g[$],{instancePath:t+"/properties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var c=_===o;if(!c)break}else return L.errors=[{instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(e.patternProperties!==void 0){let g=e.patternProperties,y=o;if(o===y)if(g&&typeof g=="object"&&!Array.isArray(g)){for(let $ in g){let _=o;if(o===_&&typeof $=="string"&&!B1($)){let I={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:$};s===null?s=[I]:s.push(I),o++}var h=_===o;if(!h){let I={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:$},message:"property name must be valid"};return s===null?s=[I]:s.push(I),o++,L.errors=s,!1;break}}if(h)for(let $ in g){let _=o;L(g[$],{instancePath:t+"/patternProperties/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var d=_===o;if(!d)break}}else return L.errors=[{instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(e.dependencies!==void 0){let g=e.dependencies,y=o;if(o===y)if(g&&typeof g=="object"&&!Array.isArray(g))for(let $ in g){let _=g[$],I=o,x=o,A=!1,D=o;L(_,{instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:$,rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var p=D===o;if(A=A||p,!A){let q=o;if(o===o)if(Array.isArray(_)){var m=!0;let ee=_.length;for(let W=0;W<ee;W++){let le=o;if(typeof _[W]!="string"){let Ie={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+W,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[Ie]:s.push(Ie),o++}var m=le===o;if(!m)break}if(m){let W=_.length,le;if(W>1){let M={};for(;W--;){let Ie=_[W];if(typeof Ie=="string"){if(typeof M[Ie]=="number"){le=M[Ie];let bt={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:W,j:le},message:"must NOT have duplicate items (items ## "+le+" and "+W+" are identical)"};s===null?s=[bt]:s.push(bt),o++;break}M[Ie]=W}}}}}else{let ee={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[ee]:s.push(ee),o++}var p=q===o;A=A||p}if(A)o=x,s!==null&&(x?s.length=x:s=null);else{let q={instancePath:t+"/dependencies/"+$.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[q]:s.push(q),o++,L.errors=s,!1}var v=I===o;if(!v)break}else return L.errors=[{instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=y===o}else var a=!0;if(a){if(e.propertyNames!==void 0){let g=o;L(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.enum!==void 0){let g=e.enum,y=o;if(o===y)if(Array.isArray(g)){if(g.length<1)return L.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let $=g.length,_;if($>1){e:for(;$--;)for(_=$;_--;)if(G1(g[$],g[_])){return L.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:$,j:_},message:"must NOT have duplicate items (items ## "+_+" and "+$+" are identical)"}],!1;break e}}}}else return L.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=y===o}else var a=!0;if(a){if(e.type!==void 0){let g=e.type,y=o,R=o,$=!1,_=o;if(!(g==="array"||g==="boolean"||g==="integer"||g==="null"||g==="number"||g==="object"||g==="string")){let x={instancePath:t+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:U1.enum},message:"must be equal to one of the allowed values"};s===null?s=[x]:s.push(x),o++}var b=_===o;if($=$||b,!$){let x=o;if(o===x)if(Array.isArray(g))if(g.length<1){let D={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};s===null?s=[D]:s.push(D),o++}else{var P=!0;let D=g.length;for(let q=0;q<D;q++){let j=g[q],ue=o;if(!(j==="array"||j==="boolean"||j==="integer"||j==="null"||j==="number"||j==="object"||j==="string")){let W={instancePath:t+"/type/"+q,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:U1.enum},message:"must be equal to one of the allowed values"};s===null?s=[W]:s.push(W),o++}var P=ue===o;if(!P)break}if(P){let q=g.length,j;if(q>1){e:for(;q--;)for(j=q;j--;)if(G1(g[q],g[j])){let ue={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:q,j},message:"must NOT have duplicate items (items ## "+j+" and "+q+" are identical)"};s===null?s=[ue]:s.push(ue),o++;break e}}}}else{let D={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[D]:s.push(D),o++}var b=x===o;$=$||b}if($)o=R,s!==null&&(R?s.length=R:s=null);else{let x={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[x]:s.push(x),o++,L.errors=s,!1}var a=y===o}else var a=!0;if(a){if(e.format!==void 0){let g=o;if(typeof e.format!="string")return L.errors=[{instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentMediaType!==void 0){let g=o;if(typeof e.contentMediaType!="string")return L.errors=[{instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentEncoding!==void 0){let g=o;if(typeof e.contentEncoding!="string")return L.errors=[{instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.if!==void 0){let g=o;L(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.then!==void 0){let g=o;L(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.else!==void 0){let g=o;L(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.allOf!==void 0){let g=o;Yt(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:i})||(s=s===null?Yt.errors:s.concat(Yt.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.anyOf!==void 0){let g=o;Yt(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:i})||(s=s===null?Yt.errors:s.concat(Yt.errors),o=s.length);var a=g===o}else var a=!0;if(a){if(e.oneOf!==void 0){let g=o;Yt(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:i})||(s=s===null?Yt.errors:s.concat(Yt.errors),o=s.length);var a=g===o}else var a=!0;if(a)if(e.not!==void 0){let g=o;L(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:i})||(s=s===null?L.errors:s.concat(L.errors),o=s.length);var a=g===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return L.errors=s,o===0}});var W1=w((sre,Q1)=>{"use strict";Q1.exports=class{constructor(t={}){switch(t.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;default:this.parseInteger=Math.trunc;break}}asAny(t){return JSON.stringify(t)}asNull(){return"null"}asInteger(t){if(typeof t=="bigint")return t.toString();if(Number.isInteger(t))return""+t;{let r=this.parseInteger(t);if(Number.isNaN(r)||!Number.isFinite(r))throw new Error(`The value "${t}" cannot be converted to an integer.`);return""+r}}asIntegerNullable(t){return t===null?"null":this.asInteger(t)}asNumber(t){let r=Number(t);if(Number.isNaN(r))throw new Error(`The value "${t}" cannot be converted to a number.`);return Number.isFinite(r)?""+r:null}asNumberNullable(t){return t===null?"null":this.asNumber(t)}asBoolean(t){return t&&"true"||"false"}asBooleanNullable(t){return t===null?"null":this.asBoolean(t)}asDateTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';throw new Error(`The value "${t}" cannot be converted to a date-time.`)}asDateTimeNullable(t){return t===null?"null":this.asDateTime(t)}asDate(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';throw new Error(`The value "${t}" cannot be converted to a date.`)}asDateNullable(t){return t===null?"null":this.asDate(t)}asTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';throw new Error(`The value "${t}" cannot be converted to a time.`)}asTimeNullable(t){return t===null?"null":this.asTime(t)}asString(t){let r='"';return t instanceof Date?r+t.toISOString()+r:t===null?r+r:(t instanceof RegExp?t=t.source:typeof t!="string"&&(t=t.toString()),t.length<42?this.asStringSmall(t):JSON.stringify(t))}asStringNullable(t){return t===null?"null":this.asString(t)}asStringSmall(t){let r=t.length,n="",i=0,s=!1,o=!1,a=255;for(var u=0;u<r&&a>=32;u++)a=t.charCodeAt(u),a>=55296&&a<=57343&&(o=!0),(a===34||a===92)&&(n+=t.slice(i,u)+"\\",i=u,s=!0);return s?n+=t.slice(i):n=t,a<32||o===!0?JSON.stringify(t):'"'+n+'"'}}});var Oa=w(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.regexpCode=we.getEsmExportName=we.getProperty=we.safeStringify=we.stringify=we.strConcat=we.addCodeArg=we.str=we._=we.nil=we._Code=we.Name=we.IDENTIFIER=we._CodeOrName=void 0;var $a=class{};we._CodeOrName=$a;we.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var cs=class extends $a{constructor(t){if(super(),!we.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};we.Name=cs;var Mr=class extends $a{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof cs&&(r[n.str]=(r[n.str]||0)+1),r),{})}};we._Code=Mr;we.nil=new Mr("");function J1(e,...t){let r=[e[0]],n=0;for(;n<t.length;)lp(r,t[n]),r.push(e[++n]);return new Mr(r)}we._=J1;var up=new Mr("+");function Y1(e,...t){let r=[Ia(e[0])],n=0;for(;n<t.length;)r.push(up),lp(r,t[n]),r.push(up,Ia(e[++n]));return dH(r),new Mr(r)}we.str=Y1;function lp(e,t){t instanceof Mr?e.push(...t._items):t instanceof cs?e.push(t):e.push(yH(t))}we.addCodeArg=lp;function dH(e){let t=1;for(;t<e.length-1;){if(e[t]===up){let r=pH(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function pH(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof cs||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof cs))return`"${e}${t.slice(1)}`}function mH(e,t){return t.emptyStr()?e:e.emptyStr()?t:Y1`${e}${t}`}we.strConcat=mH;function yH(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:Ia(Array.isArray(e)?e.join(","):e)}function gH(e){return new Mr(Ia(e))}we.stringify=gH;function Ia(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}we.safeStringify=Ia;function vH(e){return typeof e=="string"&&we.IDENTIFIER.test(e)?new Mr(`.${e}`):J1`[${e}]`}we.getProperty=vH;function wH(e){if(typeof e=="string"&&we.IDENTIFIER.test(e))return new Mr(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}we.getEsmExportName=wH;function bH(e){return new Mr(e.toString())}we.regexpCode=bH});var dp=w(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.ValueScope=Xt.ValueScopeName=Xt.Scope=Xt.varKinds=Xt.UsedValueState=void 0;var fr=Oa(),fp=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},cp;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(cp=Xt.UsedValueState||(Xt.UsedValueState={}));Xt.varKinds={const:new fr.Name("const"),let:new fr.Name("let"),var:new fr.Name("var")};var Yl=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof fr.Name?t:this.name(t)}name(t){return new fr.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0?void 0:n.has(t))||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};Xt.Scope=Yl;var Xl=class extends fr.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,fr._)`.${new fr.Name(r)}[${n}]`}};Xt.ValueScopeName=Xl;var EH=(0,fr._)`\n`,hp=class extends Yl{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?EH:fr.nil}}get(){return this._scope}name(t){return new Xl(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:s}=i,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[s];if(a){let f=a.get(o);if(f)return f}else a=this._values[s]=new Map;a.set(o,i);let u=this._scope[s]||(this._scope[s]=[]),l=u.length;return u[l]=r.ref,i.setValue(r,{property:s,itemIndex:l}),i}getValue(t,r){let n=this._values[t];if(!!n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,fr._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(t,r,n={},i){let s=fr.nil;for(let o in t){let a=t[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(l=>{if(u.has(l))return;u.set(l,cp.Started);let f=r(l);if(f){let c=this.opts.es5?Xt.varKinds.var:Xt.varKinds.const;s=(0,fr._)`${s}${c} ${l} = ${f};${this.opts._n}`}else if(f=i?.(l))s=(0,fr._)`${s}${f}${this.opts._n}`;else throw new fp(l);u.set(l,cp.Completed)})}return s}};Xt.ValueScope=hp});var X=w(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.or=fe.and=fe.not=fe.CodeGen=fe.operators=fe.varKinds=fe.ValueScopeName=fe.ValueScope=fe.Scope=fe.Name=fe.regexpCode=fe.stringify=fe.getProperty=fe.nil=fe.strConcat=fe.str=fe._=void 0;var de=Oa(),en=dp(),bi=Oa();Object.defineProperty(fe,"_",{enumerable:!0,get:function(){return bi._}});Object.defineProperty(fe,"str",{enumerable:!0,get:function(){return bi.str}});Object.defineProperty(fe,"strConcat",{enumerable:!0,get:function(){return bi.strConcat}});Object.defineProperty(fe,"nil",{enumerable:!0,get:function(){return bi.nil}});Object.defineProperty(fe,"getProperty",{enumerable:!0,get:function(){return bi.getProperty}});Object.defineProperty(fe,"stringify",{enumerable:!0,get:function(){return bi.stringify}});Object.defineProperty(fe,"regexpCode",{enumerable:!0,get:function(){return bi.regexpCode}});Object.defineProperty(fe,"Name",{enumerable:!0,get:function(){return bi.Name}});var rf=dp();Object.defineProperty(fe,"Scope",{enumerable:!0,get:function(){return rf.Scope}});Object.defineProperty(fe,"ValueScope",{enumerable:!0,get:function(){return rf.ValueScope}});Object.defineProperty(fe,"ValueScopeName",{enumerable:!0,get:function(){return rf.ValueScopeName}});Object.defineProperty(fe,"varKinds",{enumerable:!0,get:function(){return rf.varKinds}});fe.operators={GT:new de._Code(">"),GTE:new de._Code(">="),LT:new de._Code("<"),LTE:new de._Code("<="),EQ:new de._Code("==="),NEQ:new de._Code("!=="),NOT:new de._Code("!"),OR:new de._Code("||"),AND:new de._Code("&&"),ADD:new de._Code("+")};var Wn=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},pp=class extends Wn{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?en.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(t,r){if(!!t[this.name.str])return this.rhs&&(this.rhs=to(this.rhs,t,r)),this}get names(){return this.rhs instanceof de._CodeOrName?this.rhs.names:{}}},Zl=class extends Wn{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof de.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=to(this.rhs,t,r),this}get names(){let t=this.lhs instanceof de.Name?{}:{...this.lhs.names};return tf(t,this.rhs)}},mp=class extends Zl{constructor(t,r,n,i){super(t,n,i),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},yp=class extends Wn{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},gp=class extends Wn{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},vp=class extends Wn{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},wp=class extends Wn{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=to(this.code,t,r),this}get names(){return this.code instanceof de._CodeOrName?this.code.names:{}}},Ca=class extends Wn{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,i=n.length;for(;i--;){let s=n[i];s.optimizeNames(t,r)||(_H(t,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>ds(t,r.names),{})}},Jn=class extends Ca{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},bp=class extends Ca{},eo=class extends Jn{};eo.kind="else";var tn=class extends Jn{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new eo(n):n}if(r)return t===!1?r instanceof tn?r:r.nodes:this.nodes.length?this:new tn(X1(t),r instanceof tn?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=to(this.condition,t,r),this}get names(){let t=super.names;return tf(t,this.condition),this.else&&ds(t,this.else.names),t}};tn.kind="if";var hs=class extends Jn{};hs.kind="for";var Ep=class extends hs{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(!!super.optimizeNames(t,r))return this.iteration=to(this.iteration,t,r),this}get names(){return ds(super.names,this.iteration.names)}},_p=class extends hs{constructor(t,r,n,i){super(),this.varKind=t,this.name=r,this.from=n,this.to=i}render(t){let r=t.es5?en.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${r} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(t)}get names(){let t=tf(super.names,this.from);return tf(t,this.to)}},ef=class extends hs{constructor(t,r,n,i){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(!!super.optimizeNames(t,r))return this.iterable=to(this.iterable,t,r),this}get names(){return ds(super.names,this.iterable.names)}},ka=class extends Jn{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};ka.kind="func";var xa=class extends Ca{render(t){return"return "+super.render(t)}};xa.kind="return";var Sp=class extends Jn{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,i;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(i=this.finally)===null||i===void 0||i.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&ds(t,this.catch.names),this.finally&&ds(t,this.finally.names),t}},qa=class extends Jn{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};qa.kind="catch";var Na=class extends Jn{render(t){return"finally"+super.render(t)}};Na.kind="finally";var Pp=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new en.Scope({parent:t}),this._nodes=[new bp]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,i){let s=this._scope.toName(r);return n!==void 0&&i&&(this._constants[s.str]=n),this._leafNode(new pp(t,s,n)),s}const(t,r,n){return this._def(en.varKinds.const,t,r,n)}let(t,r,n){return this._def(en.varKinds.let,t,r,n)}var(t,r,n){return this._def(en.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new Zl(t,r,n))}add(t,r){return this._leafNode(new mp(t,fe.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==de.nil&&this._leafNode(new wp(t)),this}object(...t){let r=["{"];for(let[n,i]of t)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,de.addCodeArg)(r,i));return r.push("}"),new de._Code(r)}if(t,r,n){if(this._blockNode(new tn(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new tn(t))}else(){return this._elseNode(new eo)}endIf(){return this._endBlockNode(tn,eo)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new Ep(t),r)}forRange(t,r,n,i,s=this.opts.es5?en.varKinds.var:en.varKinds.let){let o=this._scope.toName(t);return this._for(new _p(s,o,r,n),()=>i(o))}forOf(t,r,n,i=en.varKinds.const){let s=this._scope.toName(t);if(this.opts.es5){let o=r instanceof de.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,de._)`${o}.length`,a=>{this.var(s,(0,de._)`${o}[${a}]`),n(s)})}return this._for(new ef("of",i,s,r),()=>n(s))}forIn(t,r,n,i=this.opts.es5?en.varKinds.var:en.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,de._)`Object.keys(${r})`,n);let s=this._scope.toName(t);return this._for(new ef("in",i,s,r),()=>n(s))}endFor(){return this._endBlockNode(hs)}label(t){return this._leafNode(new yp(t))}break(t){return this._leafNode(new gp(t))}return(t){let r=new xa;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(xa)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new Sp;if(this._blockNode(i),this.code(t),r){let s=this.name("e");this._currNode=i.catch=new qa(s),r(s)}return n&&(this._currNode=i.finally=new Na,this.code(n)),this._endBlockNode(qa,Na)}throw(t){return this._leafNode(new vp(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=de.nil,n,i){return this._blockNode(new ka(t,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(ka)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof tn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};fe.CodeGen=Pp;function ds(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function tf(e,t){return t instanceof de._CodeOrName?ds(e,t.names):e}function to(e,t,r){if(e instanceof de.Name)return n(e);if(!i(e))return e;return new de._Code(e._items.reduce((s,o)=>(o instanceof de.Name&&(o=n(o)),o instanceof de._Code?s.push(...o._items):s.push(o),s),[]));function n(s){let o=r[s.str];return o===void 0||t[s.str]!==1?s:(delete t[s.str],o)}function i(s){return s instanceof de._Code&&s._items.some(o=>o instanceof de.Name&&t[o.str]===1&&r[o.str]!==void 0)}}function _H(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function X1(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,de._)`!${Rp(e)}`}fe.not=X1;var SH=Z1(fe.operators.AND);function PH(...e){return e.reduce(SH)}fe.and=PH;var RH=Z1(fe.operators.OR);function TH(...e){return e.reduce(RH)}fe.or=TH;function Z1(e){return(t,r)=>t===de.nil?r:r===de.nil?t:(0,de._)`${Rp(t)} ${e} ${Rp(r)}`}function Rp(e){return e instanceof de.Name?e:(0,de._)`(${e})`}});var ae=w(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.checkStrictMode=ce.getErrorPath=ce.Type=ce.useFunc=ce.setEvaluated=ce.evaluatedPropsToName=ce.mergeEvaluated=ce.eachItem=ce.unescapeJsonPointer=ce.escapeJsonPointer=ce.escapeFragment=ce.unescapeFragment=ce.schemaRefOrVal=ce.schemaHasRulesButRef=ce.schemaHasRules=ce.checkUnknownRules=ce.alwaysValidSchema=ce.toHash=void 0;var qe=X(),AH=Oa();function $H(e){let t={};for(let r of e)t[r]=!0;return t}ce.toHash=$H;function IH(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(rP(e,t),!nP(t,e.self.RULES.all))}ce.alwaysValidSchema=IH;function rP(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let i=n.RULES.keywords;for(let s in t)i[s]||aP(e,`unknown keyword: "${s}"`)}ce.checkUnknownRules=rP;function nP(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}ce.schemaHasRules=nP;function OH(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}ce.schemaHasRulesButRef=OH;function CH({topSchemaRef:e,schemaPath:t},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,qe._)`${r}`}return(0,qe._)`${e}${t}${(0,qe.getProperty)(n)}`}ce.schemaRefOrVal=CH;function kH(e){return iP(decodeURIComponent(e))}ce.unescapeFragment=kH;function xH(e){return encodeURIComponent(Tp(e))}ce.escapeFragment=xH;function Tp(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}ce.escapeJsonPointer=Tp;function iP(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}ce.unescapeJsonPointer=iP;function qH(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}ce.eachItem=qH;function eP({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{let u=o===void 0?s:o instanceof qe.Name?(s instanceof qe.Name?e(i,s,o):t(i,s,o),o):s instanceof qe.Name?(t(i,o,s),s):r(s,o);return a===qe.Name&&!(u instanceof qe.Name)?n(i,u):u}}ce.mergeEvaluated={props:eP({mergeNames:(e,t,r)=>e.if((0,qe._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,qe._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,qe._)`${r} || {}`).code((0,qe._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,qe._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,qe._)`${r} || {}`),Ap(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:sP}),items:eP({mergeNames:(e,t,r)=>e.if((0,qe._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,qe._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,qe._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,qe._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function sP(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,qe._)`{}`);return t!==void 0&&Ap(e,r,t),r}ce.evaluatedPropsToName=sP;function Ap(e,t,r){Object.keys(r).forEach(n=>e.assign((0,qe._)`${t}${(0,qe.getProperty)(n)}`,!0))}ce.setEvaluated=Ap;var tP={};function NH(e,t){return e.scopeValue("func",{ref:t,code:tP[t.code]||(tP[t.code]=new AH._Code(t.code))})}ce.useFunc=NH;var oP;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(oP=ce.Type||(ce.Type={}));function DH(e,t,r){if(e instanceof qe.Name){let n=t===oP.Num;return r?n?(0,qe._)`"[" + ${e} + "]"`:(0,qe._)`"['" + ${e} + "']"`:n?(0,qe._)`"/" + ${e}`:(0,qe._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,qe.getProperty)(e).toString():"/"+Tp(e)}ce.getErrorPath=DH;function aP(e,t,r=e.opts.strictSchema){if(!!r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}ce.checkStrictMode=aP});var zr=w($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});var Ht=X(),jH={data:new Ht.Name("data"),valCxt:new Ht.Name("valCxt"),instancePath:new Ht.Name("instancePath"),parentData:new Ht.Name("parentData"),parentDataProperty:new Ht.Name("parentDataProperty"),rootData:new Ht.Name("rootData"),dynamicAnchors:new Ht.Name("dynamicAnchors"),vErrors:new Ht.Name("vErrors"),errors:new Ht.Name("errors"),this:new Ht.Name("this"),self:new Ht.Name("self"),scope:new Ht.Name("scope"),json:new Ht.Name("json"),jsonPos:new Ht.Name("jsonPos"),jsonLen:new Ht.Name("jsonLen"),jsonPart:new Ht.Name("jsonPart")};$p.default=jH});var Da=w(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.extendErrors=Ut.resetErrorsCount=Ut.reportExtraError=Ut.reportError=Ut.keyword$DataError=Ut.keywordError=void 0;var ye=X(),nf=ae(),Zt=zr();Ut.keywordError={message:({keyword:e})=>(0,ye.str)`must pass "${e}" keyword validation`};Ut.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,ye.str)`"${e}" keyword must be ${t} ($data)`:(0,ye.str)`"${e}" keyword is invalid ($data)`};function LH(e,t=Ut.keywordError,r,n){let{it:i}=e,{gen:s,compositeRule:o,allErrors:a}=i,u=fP(e,t,r);n??(o||a)?uP(s,u):lP(i,(0,ye._)`[${u}]`)}Ut.reportError=LH;function FH(e,t=Ut.keywordError,r){let{it:n}=e,{gen:i,compositeRule:s,allErrors:o}=n,a=fP(e,t,r);uP(i,a),s||o||lP(n,Zt.default.vErrors)}Ut.reportExtraError=FH;function MH(e,t){e.assign(Zt.default.errors,t),e.if((0,ye._)`${Zt.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,ye._)`${Zt.default.vErrors}.length`,t),()=>e.assign(Zt.default.vErrors,null)))}Ut.resetErrorsCount=MH;function zH({gen:e,keyword:t,schemaValue:r,data:n,errsCount:i,it:s}){if(i===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",i,Zt.default.errors,a=>{e.const(o,(0,ye._)`${Zt.default.vErrors}[${a}]`),e.if((0,ye._)`${o}.instancePath === undefined`,()=>e.assign((0,ye._)`${o}.instancePath`,(0,ye.strConcat)(Zt.default.instancePath,s.errorPath))),e.assign((0,ye._)`${o}.schemaPath`,(0,ye.str)`${s.errSchemaPath}/${t}`),s.opts.verbose&&(e.assign((0,ye._)`${o}.schema`,r),e.assign((0,ye._)`${o}.data`,n))})}Ut.extendErrors=zH;function uP(e,t){let r=e.const("err",t);e.if((0,ye._)`${Zt.default.vErrors} === null`,()=>e.assign(Zt.default.vErrors,(0,ye._)`[${r}]`),(0,ye._)`${Zt.default.vErrors}.push(${r})`),e.code((0,ye._)`${Zt.default.errors}++`)}function lP(e,t){let{gen:r,validateName:n,schemaEnv:i}=e;i.$async?r.throw((0,ye._)`new ${e.ValidationError}(${t})`):(r.assign((0,ye._)`${n}.errors`,t),r.return(!1))}var ps={keyword:new ye.Name("keyword"),schemaPath:new ye.Name("schemaPath"),params:new ye.Name("params"),propertyName:new ye.Name("propertyName"),message:new ye.Name("message"),schema:new ye.Name("schema"),parentSchema:new ye.Name("parentSchema")};function fP(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,ye._)`{}`:HH(e,t,r)}function HH(e,t,r={}){let{gen:n,it:i}=e,s=[UH(i,r),VH(e,r)];return BH(e,t,s),n.object(...s)}function UH({errorPath:e},{instancePath:t}){let r=t?(0,ye.str)`${e}${(0,nf.getErrorPath)(t,nf.Type.Str)}`:e;return[Zt.default.instancePath,(0,ye.strConcat)(Zt.default.instancePath,r)]}function VH({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let i=n?t:(0,ye.str)`${t}/${e}`;return r&&(i=(0,ye.str)`${i}${(0,nf.getErrorPath)(r,nf.Type.Str)}`),[ps.schemaPath,i]}function BH(e,{params:t,message:r},n){let{keyword:i,data:s,schemaValue:o,it:a}=e,{opts:u,propertyName:l,topSchemaRef:f,schemaPath:c}=a;n.push([ps.keyword,i],[ps.params,typeof t=="function"?t(e):t||(0,ye._)`{}`]),u.messages&&n.push([ps.message,typeof r=="function"?r(e):r]),u.verbose&&n.push([ps.schema,o],[ps.parentSchema,(0,ye._)`${f}${c}`],[Zt.default.data,s]),l&&n.push([ps.propertyName,l])}});var hP=w(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.boolOrEmptySchema=ro.topBoolOrEmptySchema=void 0;var GH=Da(),KH=X(),QH=zr(),WH={message:"boolean schema is false"};function JH(e){let{gen:t,schema:r,validateName:n}=e;r===!1?cP(e,!1):typeof r=="object"&&r.$async===!0?t.return(QH.default.data):(t.assign((0,KH._)`${n}.errors`,null),t.return(!0))}ro.topBoolOrEmptySchema=JH;function YH(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),cP(e)):r.var(t,!0)}ro.boolOrEmptySchema=YH;function cP(e,t){let{gen:r,data:n}=e,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,GH.reportError)(i,WH,void 0,t)}});var Ip=w(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.getRules=no.isJSONType=void 0;var XH=["string","number","integer","boolean","null","object","array"],ZH=new Set(XH);function eU(e){return typeof e=="string"&&ZH.has(e)}no.isJSONType=eU;function tU(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}no.getRules=tU});var Op=w(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.shouldUseRule=Ei.shouldUseGroup=Ei.schemaHasRulesForType=void 0;function rU({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&dP(e,n)}Ei.schemaHasRulesForType=rU;function dP(e,t){return t.rules.some(r=>pP(e,r))}Ei.shouldUseGroup=dP;function pP(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Ei.shouldUseRule=pP});var La=w(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.reportTypeError=qt.checkDataTypes=qt.checkDataType=qt.coerceAndCheckDataType=qt.getJSONTypes=qt.getSchemaTypes=qt.DataType=void 0;var nU=Ip(),iU=Op(),sU=Da(),se=X(),mP=ae(),ja;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(ja=qt.DataType||(qt.DataType={}));function oU(e){let t=yP(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}qt.getSchemaTypes=oU;function yP(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(nU.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}qt.getJSONTypes=yP;function aU(e,t){let{gen:r,data:n,opts:i}=e,s=uU(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,iU.schemaHasRulesForType)(e,t[0]));if(o){let a=kp(t,n,i.strictNumbers,ja.Wrong);r.if(a,()=>{s.length?lU(e,t,s):xp(e)})}return o}qt.coerceAndCheckDataType=aU;var gP=new Set(["string","number","integer","boolean","null"]);function uU(e,t){return t?e.filter(r=>gP.has(r)||t==="array"&&r==="array"):[]}function lU(e,t,r){let{gen:n,data:i,opts:s}=e,o=n.let("dataType",(0,se._)`typeof ${i}`),a=n.let("coerced",(0,se._)`undefined`);s.coerceTypes==="array"&&n.if((0,se._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,se._)`${i}[0]`).assign(o,(0,se._)`typeof ${i}`).if(kp(t,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,se._)`${a} !== undefined`);for(let l of r)(gP.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);n.else(),xp(e),n.endIf(),n.if((0,se._)`${a} !== undefined`,()=>{n.assign(i,a),fU(e,a)});function u(l){switch(l){case"string":n.elseIf((0,se._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,se._)`"" + ${i}`).elseIf((0,se._)`${i} === null`).assign(a,(0,se._)`""`);return;case"number":n.elseIf((0,se._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,se._)`+${i}`);return;case"integer":n.elseIf((0,se._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,se._)`+${i}`);return;case"boolean":n.elseIf((0,se._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,se._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,se._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,se._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,se._)`[${i}]`)}}}function fU({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,se._)`${t} !== undefined`,()=>e.assign((0,se._)`${t}[${r}]`,n))}function Cp(e,t,r,n=ja.Correct){let i=n===ja.Correct?se.operators.EQ:se.operators.NEQ,s;switch(e){case"null":return(0,se._)`${t} ${i} null`;case"array":s=(0,se._)`Array.isArray(${t})`;break;case"object":s=(0,se._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,se._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,se._)`typeof ${t} ${i} ${e}`}return n===ja.Correct?s:(0,se.not)(s);function o(a=se.nil){return(0,se.and)((0,se._)`typeof ${t} == "number"`,a,r?(0,se._)`isFinite(${t})`:se.nil)}}qt.checkDataType=Cp;function kp(e,t,r,n){if(e.length===1)return Cp(e[0],t,r,n);let i,s=(0,mP.toHash)(e);if(s.array&&s.object){let o=(0,se._)`typeof ${t} != "object"`;i=s.null?o:(0,se._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=se.nil;s.number&&delete s.integer;for(let o in s)i=(0,se.and)(i,Cp(o,t,r,n));return i}qt.checkDataTypes=kp;var cU={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,se._)`{type: ${e}}`:(0,se._)`{type: ${t}}`};function xp(e){let t=hU(e);(0,sU.reportError)(t,cU)}qt.reportTypeError=xp;function hU(e){let{gen:t,data:r,schema:n}=e,i=(0,mP.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}});var wP=w(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.assignDefaults=void 0;var io=X(),dU=ae();function pU(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let i in r)vP(e,i,r[i].default);else t==="array"&&Array.isArray(n)&&n.forEach((i,s)=>vP(e,s,i.default))}sf.assignDefaults=pU;function vP(e,t,r){let{gen:n,compositeRule:i,data:s,opts:o}=e;if(r===void 0)return;let a=(0,io._)`${s}${(0,io.getProperty)(t)}`;if(i){(0,dU.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,io._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,io._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,io._)`${a} = ${(0,io.stringify)(r)}`)}});var Nt=w(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.validateUnion=Ce.validateArray=Ce.usePattern=Ce.callValidateCode=Ce.schemaProperties=Ce.allSchemaProperties=Ce.noPropertyInData=Ce.propertyInData=Ce.isOwnProperty=Ce.hasPropFunc=Ce.reportMissingProp=Ce.checkMissingProp=Ce.checkReportMissingProp=void 0;var je=X(),qp=ae(),_i=zr(),mU=ae();function yU(e,t){let{gen:r,data:n,it:i}=e;r.if(Dp(r,n,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,je._)`${t}`},!0),e.error()})}Ce.checkReportMissingProp=yU;function gU({gen:e,data:t,it:{opts:r}},n,i){return(0,je.or)(...n.map(s=>(0,je.and)(Dp(e,t,s,r.ownProperties),(0,je._)`${i} = ${s}`)))}Ce.checkMissingProp=gU;function vU(e,t){e.setParams({missingProperty:t},!0),e.error()}Ce.reportMissingProp=vU;function bP(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,je._)`Object.prototype.hasOwnProperty`})}Ce.hasPropFunc=bP;function Np(e,t,r){return(0,je._)`${bP(e)}.call(${t}, ${r})`}Ce.isOwnProperty=Np;function wU(e,t,r,n){let i=(0,je._)`${t}${(0,je.getProperty)(r)} !== undefined`;return n?(0,je._)`${i} && ${Np(e,t,r)}`:i}Ce.propertyInData=wU;function Dp(e,t,r,n){let i=(0,je._)`${t}${(0,je.getProperty)(r)} === undefined`;return n?(0,je.or)(i,(0,je.not)(Np(e,t,r))):i}Ce.noPropertyInData=Dp;function EP(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Ce.allSchemaProperties=EP;function bU(e,t){return EP(t).filter(r=>!(0,qp.alwaysValidSchema)(e,t[r]))}Ce.schemaProperties=bU;function EU({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:o},a,u,l){let f=l?(0,je._)`${e}, ${t}, ${n}${i}`:t,c=[[_i.default.instancePath,(0,je.strConcat)(_i.default.instancePath,s)],[_i.default.parentData,o.parentData],[_i.default.parentDataProperty,o.parentDataProperty],[_i.default.rootData,_i.default.rootData]];o.opts.dynamicRef&&c.push([_i.default.dynamicAnchors,_i.default.dynamicAnchors]);let h=(0,je._)`${f}, ${r.object(...c)}`;return u!==je.nil?(0,je._)`${a}.call(${u}, ${h})`:(0,je._)`${a}(${h})`}Ce.callValidateCode=EU;var _U=(0,je._)`new RegExp`;function SU({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(r,n);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,je._)`${i.code==="new RegExp"?_U:(0,mU.useFunc)(e,i)}(${r}, ${n})`})}Ce.usePattern=SU;function PU(e){let{gen:t,data:r,keyword:n,it:i}=e,s=t.name("valid");if(i.allErrors){let a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){let u=t.const("len",(0,je._)`${r}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:n,dataProp:l,dataPropType:qp.Type.Num},s),t.if((0,je.not)(s),a)})}}Ce.validateArray=PU;function RU(e){let{gen:t,schema:r,keyword:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,qp.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;let o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((u,l)=>{let f=e.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,je._)`${o} || ${a}`),e.mergeValidEvaluated(f,a)||t.if((0,je.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Ce.validateUnion=RU});var PP=w(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.validateKeywordUsage=En.validSchemaType=En.funcKeywordCode=En.macroKeywordCode=void 0;var er=X(),ms=zr(),TU=Nt(),AU=Da();function $U(e,t){let{gen:r,keyword:n,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=SP(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");e.subschema({schema:a,schemaPath:er.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}En.macroKeywordCode=$U;function IU(e,t){var r;let{gen:n,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;CU(u,t);let l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,f=SP(n,i,l),c=n.let("valid");e.block$data(c,h),e.ok((r=t.valid)!==null&&r!==void 0?r:c);function h(){if(t.errors===!1)m(),t.modifying&&_P(e),v(()=>e.error());else{let b=t.async?d():p();t.modifying&&_P(e),v(()=>OU(e,b))}}function d(){let b=n.let("ruleErrs",null);return n.try(()=>m((0,er._)`await `),P=>n.assign(c,!1).if((0,er._)`${P} instanceof ${u.ValidationError}`,()=>n.assign(b,(0,er._)`${P}.errors`),()=>n.throw(P))),b}function p(){let b=(0,er._)`${f}.errors`;return n.assign(b,null),m(er.nil),b}function m(b=t.async?(0,er._)`await `:er.nil){let P=u.opts.passContext?ms.default.this:ms.default.self,g=!("compile"in t&&!a||t.schema===!1);n.assign(c,(0,er._)`${b}${(0,TU.callValidateCode)(e,f,P,g)}`,t.modifying)}function v(b){var P;n.if((0,er.not)((P=t.valid)!==null&&P!==void 0?P:c),b)}}En.funcKeywordCode=IU;function _P(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,er._)`${n.parentData}[${n.parentDataProperty}]`))}function OU(e,t){let{gen:r}=e;r.if((0,er._)`Array.isArray(${t})`,()=>{r.assign(ms.default.vErrors,(0,er._)`${ms.default.vErrors} === null ? ${t} : ${ms.default.vErrors}.concat(${t})`).assign(ms.default.errors,(0,er._)`${ms.default.vErrors}.length`),(0,AU.extendErrors)(e)},()=>e.error())}function CU({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function SP(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,er.stringify)(r)})}function kU(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}En.validSchemaType=kU;function xU({schema:e,opts:t,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");let o=i.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){let u=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}En.validateKeywordUsage=xU});var TP=w(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.extendSubschemaMode=Si.extendSubschemaData=Si.getSubschema=void 0;var _n=X(),RP=ae();function qU(e,{keyword:t,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,_n._)`${e.schemaPath}${(0,_n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,_n._)`${e.schemaPath}${(0,_n.getProperty)(t)}${(0,_n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,RP.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Si.getSubschema=qU;function NU(e,t,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:l,dataPathArr:f,opts:c}=t,h=a.let("data",(0,_n._)`${t.data}${(0,_n.getProperty)(r)}`,!0);u(h),e.errorPath=(0,_n.str)`${l}${(0,RP.getErrorPath)(r,n,c.jsPropertySyntax)}`,e.parentDataProperty=(0,_n._)`${r}`,e.dataPathArr=[...f,e.parentDataProperty]}if(i!==void 0){let l=i instanceof _n.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Si.extendSubschemaData=NU;function DU(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(e.compositeRule=n),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=r}Si.extendSubschemaMode=DU});var $P=w((bre,AP)=>{"use strict";var Pi=AP.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};of(t,n,i,e,"",e)};Pi.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Pi.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Pi.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Pi.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function of(e,t,r,n,i,s,o,a,u,l){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,i,s,o,a,u,l);for(var f in n){var c=n[f];if(Array.isArray(c)){if(f in Pi.arrayKeywords)for(var h=0;h<c.length;h++)of(e,t,r,c[h],i+"/"+f+"/"+h,s,i,f,n,h)}else if(f in Pi.propsKeywords){if(c&&typeof c=="object")for(var d in c)of(e,t,r,c[d],i+"/"+f+"/"+jU(d),s,i,f,n,d)}else(f in Pi.keywords||e.allKeys&&!(f in Pi.skipKeywords))&&of(e,t,r,c,i+"/"+f,s,i,f,n)}r(n,i,s,o,a,u,l)}}function jU(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Fa=w(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.getSchemaRefs=cr.resolveUrl=cr.normalizeId=cr._getFullPath=cr.getFullPath=cr.inlineRef=void 0;var LU=ae(),FU=Jl(),MU=$P(),zU=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function HU(e,t=!0){return typeof e=="boolean"?!0:t===!0?!jp(e):t?IP(e)<=t:!1}cr.inlineRef=HU;var UU=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jp(e){for(let t in e){if(UU.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(jp)||typeof r=="object"&&jp(r))return!0}return!1}function IP(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!zU.has(r)&&(typeof e[r]=="object"&&(0,LU.eachItem)(e[r],n=>t+=IP(n)),t===1/0))return 1/0}return t}function OP(e,t="",r){r!==!1&&(t=so(t));let n=e.parse(t);return CP(e,n)}cr.getFullPath=OP;function CP(e,t){return e.serialize(t).split("#")[0]+"#"}cr._getFullPath=CP;var VU=/#\/?$/;function so(e){return e?e.replace(VU,""):""}cr.normalizeId=so;function BU(e,t,r){return r=so(r),e.resolve(t,r)}cr.resolveUrl=BU;var GU=/^[a-z_][-a-z0-9._]*$/i;function KU(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=so(e[r]||t),s={"":i},o=OP(n,i,!1),a={},u=new Set;return MU(e,{allKeys:!0},(c,h,d,p)=>{if(p===void 0)return;let m=o+h,v=s[p];typeof c[r]=="string"&&(v=b.call(this,c[r])),P.call(this,c.$anchor),P.call(this,c.$dynamicAnchor),s[h]=v;function b(g){let y=this.opts.uriResolver.resolve;if(g=so(v?y(v,g):g),u.has(g))throw f(g);u.add(g);let R=this.refs[g];return typeof R=="string"&&(R=this.refs[R]),typeof R=="object"?l(c,R.schema,g):g!==so(m)&&(g[0]==="#"?(l(c,a[g],g),a[g]=c):this.refs[g]=m),g}function P(g){if(typeof g=="string"){if(!GU.test(g))throw new Error(`invalid anchor "${g}"`);b.call(this,`#${g}`)}}}),a;function l(c,h,d){if(h!==void 0&&!FU(c,h))throw f(d)}function f(c){return new Error(`reference "${c}" resolves to more than one schema`)}}cr.getSchemaRefs=KU});var oo=w(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.getData=Ri.KeywordCxt=Ri.validateFunctionCode=void 0;var jP=hP(),kP=La(),Fp=Op(),af=La(),QU=wP(),za=PP(),Lp=TP(),Q=X(),re=zr(),WU=Fa(),Yn=ae(),Ma=Da();function JU(e){if(MP(e)&&(zP(e),FP(e))){ZU(e);return}LP(e,()=>(0,jP.topBoolOrEmptySchema)(e))}Ri.validateFunctionCode=JU;function LP({gen:e,validateName:t,schema:r,schemaEnv:n,opts:i},s){i.code.es5?e.func(t,(0,Q._)`${re.default.data}, ${re.default.valCxt}`,n.$async,()=>{e.code((0,Q._)`"use strict"; ${xP(r,i)}`),XU(e,i),e.code(s)}):e.func(t,(0,Q._)`${re.default.data}, ${YU(i)}`,n.$async,()=>e.code(xP(r,i)).code(s))}function YU(e){return(0,Q._)`{${re.default.instancePath}="", ${re.default.parentData}, ${re.default.parentDataProperty}, ${re.default.rootData}=${re.default.data}${e.dynamicRef?(0,Q._)`, ${re.default.dynamicAnchors}={}`:Q.nil}}={}`}function XU(e,t){e.if(re.default.valCxt,()=>{e.var(re.default.instancePath,(0,Q._)`${re.default.valCxt}.${re.default.instancePath}`),e.var(re.default.parentData,(0,Q._)`${re.default.valCxt}.${re.default.parentData}`),e.var(re.default.parentDataProperty,(0,Q._)`${re.default.valCxt}.${re.default.parentDataProperty}`),e.var(re.default.rootData,(0,Q._)`${re.default.valCxt}.${re.default.rootData}`),t.dynamicRef&&e.var(re.default.dynamicAnchors,(0,Q._)`${re.default.valCxt}.${re.default.dynamicAnchors}`)},()=>{e.var(re.default.instancePath,(0,Q._)`""`),e.var(re.default.parentData,(0,Q._)`undefined`),e.var(re.default.parentDataProperty,(0,Q._)`undefined`),e.var(re.default.rootData,re.default.data),t.dynamicRef&&e.var(re.default.dynamicAnchors,(0,Q._)`{}`)})}function ZU(e){let{schema:t,opts:r,gen:n}=e;LP(e,()=>{r.$comment&&t.$comment&&UP(e),iV(e),n.let(re.default.vErrors,null),n.let(re.default.errors,0),r.unevaluated&&eV(e),HP(e),aV(e)})}function eV(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,Q._)`${r}.evaluated`),t.if((0,Q._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Q._)`${e.evaluated}.props`,(0,Q._)`undefined`)),t.if((0,Q._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Q._)`${e.evaluated}.items`,(0,Q._)`undefined`))}function xP(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,Q._)`/*# sourceURL=${r} */`:Q.nil}function tV(e,t){if(MP(e)&&(zP(e),FP(e))){rV(e,t);return}(0,jP.boolOrEmptySchema)(e,t)}function FP({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function MP(e){return typeof e.schema!="boolean"}function rV(e,t){let{schema:r,gen:n,opts:i}=e;i.$comment&&r.$comment&&UP(e),sV(e),oV(e);let s=n.const("_errs",re.default.errors);HP(e,s),n.var(t,(0,Q._)`${s} === ${re.default.errors}`)}function zP(e){(0,Yn.checkUnknownRules)(e),nV(e)}function HP(e,t){if(e.opts.jtd)return qP(e,[],!1,t);let r=(0,kP.getSchemaTypes)(e.schema),n=(0,kP.coerceAndCheckDataType)(e,r);qP(e,r,!n,t)}function nV(e){let{schema:t,errSchemaPath:r,opts:n,self:i}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Yn.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function iV(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Yn.checkStrictMode)(e,"default is ignored in the schema root")}function sV(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,WU.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function oV(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function UP({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){let s=r.$comment;if(i.$comment===!0)e.code((0,Q._)`${re.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){let o=(0,Q.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Q._)`${re.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function aV(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=e;r.$async?t.if((0,Q._)`${re.default.errors} === 0`,()=>t.return(re.default.data),()=>t.throw((0,Q._)`new ${i}(${re.default.vErrors})`)):(t.assign((0,Q._)`${n}.errors`,re.default.vErrors),s.unevaluated&&uV(e),t.return((0,Q._)`${re.default.errors} === 0`))}function uV({gen:e,evaluated:t,props:r,items:n}){r instanceof Q.Name&&e.assign((0,Q._)`${t}.props`,r),n instanceof Q.Name&&e.assign((0,Q._)`${t}.items`,n)}function qP(e,t,r,n){let{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:f}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Yn.schemaHasRulesButRef)(s,f))){i.block(()=>VP(e,"$ref",f.all.$ref.definition));return}u.jtd||lV(e,t),i.block(()=>{for(let h of f.rules)c(h);c(f.post)});function c(h){!(0,Fp.shouldUseGroup)(s,h)||(h.type?(i.if((0,af.checkDataType)(h.type,o,u.strictNumbers)),NP(e,h),t.length===1&&t[0]===h.type&&r&&(i.else(),(0,af.reportTypeError)(e)),i.endIf()):NP(e,h),a||i.if((0,Q._)`${re.default.errors} === ${n||0}`))}}function NP(e,t){let{gen:r,schema:n,opts:{useDefaults:i}}=e;i&&(0,QU.assignDefaults)(e,t.type),r.block(()=>{for(let s of t.rules)(0,Fp.shouldUseRule)(n,s)&&VP(e,s.keyword,s.definition,t.type)})}function lV(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(fV(e,t),e.opts.allowUnionTypes||cV(e,t),hV(e,e.dataTypes))}function fV(e,t){if(!!t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{DP(e.dataTypes,r)||Mp(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),e.dataTypes=e.dataTypes.filter(r=>DP(t,r))}}function cV(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Mp(e,"use allowUnionTypes to allow union type keyword")}function hV(e,t){let r=e.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,Fp.shouldUseRule)(e.schema,i)){let{type:s}=i.definition;s.length&&!s.some(o=>dV(t,o))&&Mp(e,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function dV(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function DP(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Mp(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,Yn.checkStrictMode)(e,t,e.opts.strictTypes)}var uf=class{constructor(t,r,n){if((0,za.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Yn.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",BP(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,za.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",re.default.errors))}result(t,r,n){this.failResult((0,Q.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,Q.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,Q._)`${r} !== undefined && (${(0,Q.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Ma.reportExtraError:Ma.reportError)(this,this.def.error,r)}$dataError(){(0,Ma.reportError)(this,this.def.$dataError||Ma.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ma.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=Q.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=Q.nil,r=Q.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:s,def:o}=this;n.if((0,Q.or)((0,Q._)`${i} === undefined`,r)),t!==Q.nil&&n.assign(t,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==Q.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,Q.or)(o(),a());function o(){if(n.length){if(!(r instanceof Q.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,Q._)`${(0,af.checkDataTypes)(u,r,s.opts.strictNumbers,af.DataType.Wrong)}`}return Q.nil}function a(){if(i.validateSchema){let u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Q._)`!${u}(${r})`}return Q.nil}}subschema(t,r){let n=(0,Lp.getSubschema)(this.it,t);(0,Lp.extendSubschemaData)(n,this.it,t),(0,Lp.extendSubschemaMode)(n,t);let i={...this.it,...n,items:void 0,props:void 0};return tV(i,r),i}mergeEvaluated(t,r){let{it:n,gen:i}=this;!n.opts.unevaluated||(n.props!==!0&&t.props!==void 0&&(n.props=Yn.mergeEvaluated.props(i,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Yn.mergeEvaluated.items(i,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,Q.Name)),!0}};Ri.KeywordCxt=uf;function VP(e,t,r,n){let i=new uf(e,r,t);"code"in r?r.code(i,n):i.$data&&r.validate?(0,za.funcKeywordCode)(i,r):"macro"in r?(0,za.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,za.funcKeywordCode)(i,r)}var pV=/^\/(?:[^~]|~0|~1)*$/,mV=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function BP(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let i,s;if(e==="")return re.default.rootData;if(e[0]==="/"){if(!pV.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=re.default.rootData}else{let l=mV.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);let f=+l[1];if(i=l[2],i==="#"){if(f>=t)throw new Error(u("property/index",f));return n[t-f]}if(f>t)throw new Error(u("data",f));if(s=r[t-f],!i)return s}let o=s,a=i.split("/");for(let l of a)l&&(s=(0,Q._)`${s}${(0,Q.getProperty)((0,Yn.unescapeJsonPointer)(l))}`,o=(0,Q._)`${o} && ${s}`);return o;function u(l,f){return`Cannot access ${l} ${f} levels up, current level is ${t}`}}Ri.getData=BP});var Up=w(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});var zp=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};Hp.default=zp});var ao=w(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});var Vp=Fa(),Bp=class extends Error{constructor(t,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Vp.resolveUrl)(t,r,n),this.missingSchema=(0,Vp.normalizeId)((0,Vp.getFullPath)(t,this.missingRef))}};Gp.default=Bp});var gs=w(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.resolveSchema=Hr.getCompilingSchema=Hr.resolveRef=Hr.compileSchema=Hr.SchemaEnv=void 0;var rn=X(),yV=Up(),ys=zr(),nn=Fa(),GP=ae(),gV=oo(),uo=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,nn.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}};Hr.SchemaEnv=uo;function Qp(e){let t=KP.call(this,e);if(t)return t;let r=(0,nn.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new rn.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a;e.$async&&(a=o.scopeValue("Error",{ref:yV.default,code:(0,rn._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");e.validateName=u;let l={gen:o,allErrors:this.opts.allErrors,data:ys.default.data,parentData:ys.default.parentData,parentDataProperty:ys.default.parentDataProperty,dataNames:[ys.default.data],dataPathArr:[rn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,rn.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:rn.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,rn._)`""`,opts:this.opts,self:this},f;try{this._compilations.add(e),(0,gV.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let c=o.toString();f=`${o.scopeRefs(ys.default.scope)}return ${c}`,this.opts.code.process&&(f=this.opts.code.process(f,e));let d=new Function(`${ys.default.self}`,`${ys.default.scope}`,f)(this,this.scope.get());if(this.scope.value(u,{ref:d}),d.errors=null,d.schema=e.schema,d.schemaEnv=e,e.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:u,validateCode:c,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:m}=l;d.evaluated={props:p instanceof rn.Name?void 0:p,items:m instanceof rn.Name?void 0:m,dynamicProps:p instanceof rn.Name,dynamicItems:m instanceof rn.Name},d.source&&(d.source.evaluated=(0,rn.stringify)(d.evaluated))}return e.validate=d,e}catch(c){throw delete e.validate,delete e.validateName,f&&this.logger.error("Error compiling schema, function code:",f),c}finally{this._compilations.delete(e)}}Hr.compileSchema=Qp;function vV(e,t,r){var n;r=(0,nn.resolveUrl)(this.opts.uriResolver,t,r);let i=e.refs[r];if(i)return i;let s=EV.call(this,e,r);if(s===void 0){let o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new uo({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[r]=wV.call(this,s)}Hr.resolveRef=vV;function wV(e){return(0,nn.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Qp.call(this,e)}function KP(e){for(let t of this._compilations)if(bV(t,e))return t}Hr.getCompilingSchema=KP;function bV(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function EV(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||lf.call(this,e,t)}function lf(e,t){let r=this.opts.uriResolver.parse(t),n=(0,nn._getFullPath)(this.opts.uriResolver,r),i=(0,nn.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===i)return Kp.call(this,r,e);let s=(0,nn.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){let a=lf.call(this,e,o);return typeof a?.schema!="object"?void 0:Kp.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Qp.call(this,o),s===(0,nn.normalizeId)(t)){let{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,nn.resolveUrl)(this.opts.uriResolver,i,l)),new uo({schema:a,schemaId:u,root:e,baseId:i})}return Kp.call(this,r,o)}}Hr.resolveSchema=lf;var _V=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Kp(e,{baseId:t,schema:r,root:n}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,GP.unescapeFragment)(a)];if(u===void 0)return;r=u;let l=typeof r=="object"&&r[this.opts.schemaId];!_V.has(a)&&l&&(t=(0,nn.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,GP.schemaHasRulesButRef)(r,this.RULES)){let a=(0,nn.resolveUrl)(this.opts.uriResolver,t,r.$ref);s=lf.call(this,n,a)}let{schemaId:o}=this.opts;if(s=s||new uo({schema:r,schemaId:o,root:n,baseId:t}),s.schema!==s.root.schema)return s}});var QP=w((Tre,SV)=>{SV.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var JP=w((ff,WP)=>{(function(e,t){typeof ff=="object"&&typeof WP<"u"?t(ff):typeof define=="function"&&define.amd?define(["exports"],t):t(e.URI=e.URI||{})})(ff,function(e){"use strict";function t(){for(var S=arguments.length,E=Array(S),T=0;T<S;T++)E[T]=arguments[T];if(E.length>1){E[0]=E[0].slice(0,-1);for(var O=E.length-1,C=1;C<O;++C)E[C]=E[C].slice(1,-1);return E[O]=E[O].slice(1),E.join("")}else return E[0]}function r(S){return"(?:"+S+")"}function n(S){return S===void 0?"undefined":S===null?"null":Object.prototype.toString.call(S).split(" ").pop().split("]").shift().toLowerCase()}function i(S){return S.toUpperCase()}function s(S){return S!=null?S instanceof Array?S:typeof S.length!="number"||S.split||S.setInterval||S.call?[S]:Array.prototype.slice.call(S):[]}function o(S,E){var T=S;if(E)for(var O in E)T[O]=E[O];return T}function a(S){var E="[A-Za-z]",T="[\\x0D]",O="[0-9]",C="[\\x22]",H=t(O,"[A-Fa-f]"),ie="[\\x0A]",ve="[\\x20]",Re=r(r("%[EFef]"+H+"%"+H+H+"%"+H+H)+"|"+r("%[89A-Fa-f]"+H+"%"+H+H)+"|"+r("%"+H+H)),ut="[\\:\\/\\?\\#\\[\\]\\@]",me="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ue=t(ut,me),lt=S?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Me=S?"[\\uE000-\\uF8FF]":"[]",be=t(E,O,"[\\-\\.\\_\\~]",lt),Ve=r(E+t(E,O,"[\\+\\-\\.]")+"*"),Oe=r(r(Re+"|"+t(be,me,"[\\:]"))+"*"),Gi=r(r("25[0-5]")+"|"+r("2[0-4]"+O)+"|"+r("1"+O+O)+"|"+r("[1-9]"+O)+"|"+O),br=r(r("25[0-5]")+"|"+r("2[0-4]"+O)+"|"+r("1"+O+O)+"|"+r("0?[1-9]"+O)+"|0?0?"+O),kr=r(br+"\\."+br+"\\."+br+"\\."+br),ke=r(H+"{1,4}"),Er=r(r(ke+"\\:"+ke)+"|"+kr),xr=r(r(ke+"\\:")+"{6}"+Er),gn=r("\\:\\:"+r(ke+"\\:")+"{5}"+Er),Ki=r(r(ke)+"?\\:\\:"+r(ke+"\\:")+"{4}"+Er),Hn=r(r(r(ke+"\\:")+"{0,1}"+ke)+"?\\:\\:"+r(ke+"\\:")+"{3}"+Er),ea=r(r(r(ke+"\\:")+"{0,2}"+ke)+"?\\:\\:"+r(ke+"\\:")+"{2}"+Er),Gu=r(r(r(ke+"\\:")+"{0,3}"+ke)+"?\\:\\:"+ke+"\\:"+Er),Ku=r(r(r(ke+"\\:")+"{0,4}"+ke)+"?\\:\\:"+Er),ks=r(r(r(ke+"\\:")+"{0,5}"+ke)+"?\\:\\:"+ke),xs=r(r(r(ke+"\\:")+"{0,6}"+ke)+"?\\:\\:"),Un=r([xr,gn,Ki,Hn,ea,Gu,Ku,ks,xs].join("|")),qs=r(r(be+"|"+Re)+"+"),Fc=r(Un+"\\%25"+qs),Qi=r(Un+r("\\%25|\\%(?!"+H+"{2})")+qs),Qq=r("[vV]"+H+"+\\."+t(be,me,"[\\:]")+"+"),Wq=r("\\["+r(Qi+"|"+Un+"|"+Qq)+"\\]"),Av=r(r(Re+"|"+t(be,me))+"*"),ta=r(Wq+"|"+kr+"(?!"+Av+")|"+Av),ra=r(O+"*"),$v=r(r(Oe+"@")+"?"+ta+r("\\:"+ra)+"?"),na=r(Re+"|"+t(be,me,"[\\:\\@]")),Jq=r(na+"*"),Iv=r(na+"+"),Yq=r(r(Re+"|"+t(be,me,"[\\@]"))+"+"),Vn=r(r("\\/"+Jq)+"*"),Ns=r("\\/"+r(Iv+Vn)+"?"),Mc=r(Yq+Vn),Qu=r(Iv+Vn),Ds="(?!"+na+")",DZ=r(Vn+"|"+Ns+"|"+Mc+"|"+Qu+"|"+Ds),js=r(r(na+"|"+t("[\\/\\?]",Me))+"*"),ia=r(r(na+"|[\\/\\?]")+"*"),Ov=r(r("\\/\\/"+$v+Vn)+"|"+Ns+"|"+Qu+"|"+Ds),Xq=r(Ve+"\\:"+Ov+r("\\?"+js)+"?"+r("\\#"+ia)+"?"),Zq=r(r("\\/\\/"+$v+Vn)+"|"+Ns+"|"+Mc+"|"+Ds),eN=r(Zq+r("\\?"+js)+"?"+r("\\#"+ia)+"?"),jZ=r(Xq+"|"+eN),LZ=r(Ve+"\\:"+Ov+r("\\?"+js)+"?"),FZ="^("+Ve+")\\:"+r(r("\\/\\/("+r("("+Oe+")@")+"?("+ta+")"+r("\\:("+ra+")")+"?)")+"?("+Vn+"|"+Ns+"|"+Qu+"|"+Ds+")")+r("\\?("+js+")")+"?"+r("\\#("+ia+")")+"?$",MZ="^(){0}"+r(r("\\/\\/("+r("("+Oe+")@")+"?("+ta+")"+r("\\:("+ra+")")+"?)")+"?("+Vn+"|"+Ns+"|"+Mc+"|"+Ds+")")+r("\\?("+js+")")+"?"+r("\\#("+ia+")")+"?$",zZ="^("+Ve+")\\:"+r(r("\\/\\/("+r("("+Oe+")@")+"?("+ta+")"+r("\\:("+ra+")")+"?)")+"?("+Vn+"|"+Ns+"|"+Qu+"|"+Ds+")")+r("\\?("+js+")")+"?$",HZ="^"+r("\\#("+ia+")")+"?$",UZ="^"+r("("+Oe+")@")+"?("+ta+")"+r("\\:("+ra+")")+"?$";return{NOT_SCHEME:new RegExp(t("[^]",E,O,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",be,me),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",be,me),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",be,me),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",be,me),"g"),NOT_QUERY:new RegExp(t("[^\\%]",be,me,"[\\:\\@\\/\\?]",Me),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",be,me,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",be,me),"g"),UNRESERVED:new RegExp(be,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",be,Ue),"g"),PCT_ENCODED:new RegExp(Re,"g"),IPV4ADDRESS:new RegExp("^("+kr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Un+")"+r(r("\\%25|\\%(?!"+H+"{2})")+"("+qs+")")+"?\\]?$")}}var u=a(!1),l=a(!0),f=function(){function S(E,T){var O=[],C=!0,H=!1,ie=void 0;try{for(var ve=E[Symbol.iterator](),Re;!(C=(Re=ve.next()).done)&&(O.push(Re.value),!(T&&O.length===T));C=!0);}catch(ut){H=!0,ie=ut}finally{try{!C&&ve.return&&ve.return()}finally{if(H)throw ie}}return O}return function(E,T){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return S(E,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(S){if(Array.isArray(S)){for(var E=0,T=Array(S.length);E<S.length;E++)T[E]=S[E];return T}else return Array.from(S)},h=2147483647,d=36,p=1,m=26,v=38,b=700,P=72,g=128,y="-",R=/^xn--/,$=/[^\0-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=d-p,A=Math.floor,D=String.fromCharCode;function q(S){throw new RangeError(I[S])}function j(S,E){for(var T=[],O=S.length;O--;)T[O]=E(S[O]);return T}function ue(S,E){var T=S.split("@"),O="";T.length>1&&(O=T[0]+"@",S=T[1]),S=S.replace(_,".");var C=S.split("."),H=j(C,E).join(".");return O+H}function ee(S){for(var E=[],T=0,O=S.length;T<O;){var C=S.charCodeAt(T++);if(C>=55296&&C<=56319&&T<O){var H=S.charCodeAt(T++);(H&64512)==56320?E.push(((C&1023)<<10)+(H&1023)+65536):(E.push(C),T--)}else E.push(C)}return E}var W=function(E){return String.fromCodePoint.apply(String,c(E))},le=function(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:d},M=function(E,T){return E+22+75*(E<26)-((T!=0)<<5)},Ie=function(E,T,O){var C=0;for(E=O?A(E/b):E>>1,E+=A(E/T);E>x*m>>1;C+=d)E=A(E/x);return A(C+(x+1)*E/(E+v))},bt=function(E){var T=[],O=E.length,C=0,H=g,ie=P,ve=E.lastIndexOf(y);ve<0&&(ve=0);for(var Re=0;Re<ve;++Re)E.charCodeAt(Re)>=128&&q("not-basic"),T.push(E.charCodeAt(Re));for(var ut=ve>0?ve+1:0;ut<O;){for(var me=C,Ue=1,lt=d;;lt+=d){ut>=O&&q("invalid-input");var Me=le(E.charCodeAt(ut++));(Me>=d||Me>A((h-C)/Ue))&&q("overflow"),C+=Me*Ue;var be=lt<=ie?p:lt>=ie+m?m:lt-ie;if(Me<be)break;var Ve=d-be;Ue>A(h/Ve)&&q("overflow"),Ue*=Ve}var Oe=T.length+1;ie=Ie(C-me,Oe,me==0),A(C/Oe)>h-H&&q("overflow"),H+=A(C/Oe),C%=Oe,T.splice(C++,0,H)}return String.fromCodePoint.apply(String,T)},J=function(E){var T=[];E=ee(E);var O=E.length,C=g,H=0,ie=P,ve=!0,Re=!1,ut=void 0;try{for(var me=E[Symbol.iterator](),Ue;!(ve=(Ue=me.next()).done);ve=!0){var lt=Ue.value;lt<128&&T.push(D(lt))}}catch(Qi){Re=!0,ut=Qi}finally{try{!ve&&me.return&&me.return()}finally{if(Re)throw ut}}var Me=T.length,be=Me;for(Me&&T.push(y);be<O;){var Ve=h,Oe=!0,Gi=!1,br=void 0;try{for(var kr=E[Symbol.iterator](),ke;!(Oe=(ke=kr.next()).done);Oe=!0){var Er=ke.value;Er>=C&&Er<Ve&&(Ve=Er)}}catch(Qi){Gi=!0,br=Qi}finally{try{!Oe&&kr.return&&kr.return()}finally{if(Gi)throw br}}var xr=be+1;Ve-C>A((h-H)/xr)&&q("overflow"),H+=(Ve-C)*xr,C=Ve;var gn=!0,Ki=!1,Hn=void 0;try{for(var ea=E[Symbol.iterator](),Gu;!(gn=(Gu=ea.next()).done);gn=!0){var Ku=Gu.value;if(Ku<C&&++H>h&&q("overflow"),Ku==C){for(var ks=H,xs=d;;xs+=d){var Un=xs<=ie?p:xs>=ie+m?m:xs-ie;if(ks<Un)break;var qs=ks-Un,Fc=d-Un;T.push(D(M(Un+qs%Fc,0))),ks=A(qs/Fc)}T.push(D(M(ks,0))),ie=Ie(H,xr,be==Me),H=0,++be}}}catch(Qi){Ki=!0,Hn=Qi}finally{try{!gn&&ea.return&&ea.return()}finally{if(Ki)throw Hn}}++H,++C}return T.join("")},cn=function(E){return ue(E,function(T){return R.test(T)?bt(T.slice(4).toLowerCase()):T})},Qr=function(E){return ue(E,function(T){return $.test(T)?"xn--"+J(T):T})},Ae={version:"2.1.0",ucs2:{decode:ee,encode:W},decode:bt,encode:J,toASCII:Qr,toUnicode:cn},et={};function Je(S){var E=S.charCodeAt(0),T=void 0;return E<16?T="%0"+E.toString(16).toUpperCase():E<128?T="%"+E.toString(16).toUpperCase():E<2048?T="%"+(E>>6|192).toString(16).toUpperCase()+"%"+(E&63|128).toString(16).toUpperCase():T="%"+(E>>12|224).toString(16).toUpperCase()+"%"+(E>>6&63|128).toString(16).toUpperCase()+"%"+(E&63|128).toString(16).toUpperCase(),T}function k(S){for(var E="",T=0,O=S.length;T<O;){var C=parseInt(S.substr(T+1,2),16);if(C<128)E+=String.fromCharCode(C),T+=3;else if(C>=194&&C<224){if(O-T>=6){var H=parseInt(S.substr(T+4,2),16);E+=String.fromCharCode((C&31)<<6|H&63)}else E+=S.substr(T,6);T+=6}else if(C>=224){if(O-T>=9){var ie=parseInt(S.substr(T+4,2),16),ve=parseInt(S.substr(T+7,2),16);E+=String.fromCharCode((C&15)<<12|(ie&63)<<6|ve&63)}else E+=S.substr(T,9);T+=9}else E+=S.substr(T,3),T+=3}return E}function F(S,E){function T(O){var C=k(O);return C.match(E.UNRESERVED)?C:O}return S.scheme&&(S.scheme=String(S.scheme).replace(E.PCT_ENCODED,T).toLowerCase().replace(E.NOT_SCHEME,"")),S.userinfo!==void 0&&(S.userinfo=String(S.userinfo).replace(E.PCT_ENCODED,T).replace(E.NOT_USERINFO,Je).replace(E.PCT_ENCODED,i)),S.host!==void 0&&(S.host=String(S.host).replace(E.PCT_ENCODED,T).toLowerCase().replace(E.NOT_HOST,Je).replace(E.PCT_ENCODED,i)),S.path!==void 0&&(S.path=String(S.path).replace(E.PCT_ENCODED,T).replace(S.scheme?E.NOT_PATH:E.NOT_PATH_NOSCHEME,Je).replace(E.PCT_ENCODED,i)),S.query!==void 0&&(S.query=String(S.query).replace(E.PCT_ENCODED,T).replace(E.NOT_QUERY,Je).replace(E.PCT_ENCODED,i)),S.fragment!==void 0&&(S.fragment=String(S.fragment).replace(E.PCT_ENCODED,T).replace(E.NOT_FRAGMENT,Je).replace(E.PCT_ENCODED,i)),S}function B(S){return S.replace(/^0*(.*)/,"$1")||"0"}function K(S,E){var T=S.match(E.IPV4ADDRESS)||[],O=f(T,2),C=O[1];return C?C.split(".").map(B).join("."):S}function te(S,E){var T=S.match(E.IPV6ADDRESS)||[],O=f(T,3),C=O[1],H=O[2];if(C){for(var ie=C.toLowerCase().split("::").reverse(),ve=f(ie,2),Re=ve[0],ut=ve[1],me=ut?ut.split(":").map(B):[],Ue=Re.split(":").map(B),lt=E.IPV4ADDRESS.test(Ue[Ue.length-1]),Me=lt?7:8,be=Ue.length-Me,Ve=Array(Me),Oe=0;Oe<Me;++Oe)Ve[Oe]=me[Oe]||Ue[be+Oe]||"";lt&&(Ve[Me-1]=K(Ve[Me-1],E));var Gi=Ve.reduce(function(xr,gn,Ki){if(!gn||gn==="0"){var Hn=xr[xr.length-1];Hn&&Hn.index+Hn.length===Ki?Hn.length++:xr.push({index:Ki,length:1})}return xr},[]),br=Gi.sort(function(xr,gn){return gn.length-xr.length})[0],kr=void 0;if(br&&br.length>1){var ke=Ve.slice(0,br.index),Er=Ve.slice(br.index+br.length);kr=ke.join(":")+"::"+Er.join(":")}else kr=Ve.join(":");return H&&(kr+="%"+H),kr}else return S}var Pe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ye="".match(/(){0}/)[1]===void 0;function Fe(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T={},O=E.iri!==!1?l:u;E.reference==="suffix"&&(S=(E.scheme?E.scheme+":":"")+"//"+S);var C=S.match(Pe);if(C){Ye?(T.scheme=C[1],T.userinfo=C[3],T.host=C[4],T.port=parseInt(C[5],10),T.path=C[6]||"",T.query=C[7],T.fragment=C[8],isNaN(T.port)&&(T.port=C[5])):(T.scheme=C[1]||void 0,T.userinfo=S.indexOf("@")!==-1?C[3]:void 0,T.host=S.indexOf("//")!==-1?C[4]:void 0,T.port=parseInt(C[5],10),T.path=C[6]||"",T.query=S.indexOf("?")!==-1?C[7]:void 0,T.fragment=S.indexOf("#")!==-1?C[8]:void 0,isNaN(T.port)&&(T.port=S.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?C[4]:void 0)),T.host&&(T.host=te(K(T.host,O),O)),T.scheme===void 0&&T.userinfo===void 0&&T.host===void 0&&T.port===void 0&&!T.path&&T.query===void 0?T.reference="same-document":T.scheme===void 0?T.reference="relative":T.fragment===void 0?T.reference="absolute":T.reference="uri",E.reference&&E.reference!=="suffix"&&E.reference!==T.reference&&(T.error=T.error||"URI is not a "+E.reference+" reference.");var H=et[(E.scheme||T.scheme||"").toLowerCase()];if(!E.unicodeSupport&&(!H||!H.unicodeSupport)){if(T.host&&(E.domainHost||H&&H.domainHost))try{T.host=Ae.toASCII(T.host.replace(O.PCT_ENCODED,k).toLowerCase())}catch(ie){T.error=T.error||"Host's domain name can not be converted to ASCII via punycode: "+ie}F(T,u)}else F(T,O);H&&H.parse&&H.parse(T,E)}else T.error=T.error||"URI can not be parsed.";return T}function Cr(S,E){var T=E.iri!==!1?l:u,O=[];return S.userinfo!==void 0&&(O.push(S.userinfo),O.push("@")),S.host!==void 0&&O.push(te(K(String(S.host),T),T).replace(T.IPV6ADDRESS,function(C,H,ie){return"["+H+(ie?"%25"+ie:"")+"]"})),(typeof S.port=="number"||typeof S.port=="string")&&(O.push(":"),O.push(String(S.port))),O.length?O.join(""):void 0}var Et=/^\.\.?\//,ir=/^\/\.(\/|$)/,Ev=/^\/\.\.(\/|$)/,kt=/^\/?(?:.|\n)*?(?=\/|$)/;function Qt(S){for(var E=[];S.length;)if(S.match(Et))S=S.replace(Et,"");else if(S.match(ir))S=S.replace(ir,"/");else if(S.match(Ev))S=S.replace(Ev,"/"),E.pop();else if(S==="."||S==="..")S="";else{var T=S.match(kt);if(T){var O=T[0];S=S.slice(O.length),E.push(O)}else throw new Error("Unexpected dot segment condition")}return E.join("")}function hn(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=E.iri?l:u,O=[],C=et[(E.scheme||S.scheme||"").toLowerCase()];if(C&&C.serialize&&C.serialize(S,E),S.host&&!T.IPV6ADDRESS.test(S.host)){if(E.domainHost||C&&C.domainHost)try{S.host=E.iri?Ae.toUnicode(S.host):Ae.toASCII(S.host.replace(T.PCT_ENCODED,k).toLowerCase())}catch(ve){S.error=S.error||"Host's domain name can not be converted to "+(E.iri?"Unicode":"ASCII")+" via punycode: "+ve}}F(S,T),E.reference!=="suffix"&&S.scheme&&(O.push(S.scheme),O.push(":"));var H=Cr(S,E);if(H!==void 0&&(E.reference!=="suffix"&&O.push("//"),O.push(H),S.path&&S.path.charAt(0)!=="/"&&O.push("/")),S.path!==void 0){var ie=S.path;!E.absolutePath&&(!C||!C.absolutePath)&&(ie=Qt(ie)),H===void 0&&(ie=ie.replace(/^\/\//,"/%2F")),O.push(ie)}return S.query!==void 0&&(O.push("?"),O.push(S.query)),S.fragment!==void 0&&(O.push("#"),O.push(S.fragment)),O.join("")}function Wr(S,E){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments[3],C={};return O||(S=Fe(hn(S,T),T),E=Fe(hn(E,T),T)),T=T||{},!T.tolerant&&E.scheme?(C.scheme=E.scheme,C.userinfo=E.userinfo,C.host=E.host,C.port=E.port,C.path=Qt(E.path||""),C.query=E.query):(E.userinfo!==void 0||E.host!==void 0||E.port!==void 0?(C.userinfo=E.userinfo,C.host=E.host,C.port=E.port,C.path=Qt(E.path||""),C.query=E.query):(E.path?(E.path.charAt(0)==="/"?C.path=Qt(E.path):((S.userinfo!==void 0||S.host!==void 0||S.port!==void 0)&&!S.path?C.path="/"+E.path:S.path?C.path=S.path.slice(0,S.path.lastIndexOf("/")+1)+E.path:C.path=E.path,C.path=Qt(C.path)),C.query=E.query):(C.path=S.path,E.query!==void 0?C.query=E.query:C.query=S.query),C.userinfo=S.userinfo,C.host=S.host,C.port=S.port),C.scheme=S.scheme),C.fragment=E.fragment,C}function Mn(S,E,T){var O=o({scheme:"null"},T);return hn(Wr(Fe(S,O),Fe(E,O),O,!0),O)}function Hq(S,E){return typeof S=="string"?S=hn(Fe(S,E),E):n(S)==="object"&&(S=Fe(hn(S,E),E)),S}function dn(S,E,T){return typeof S=="string"?S=hn(Fe(S,T),T):n(S)==="object"&&(S=hn(S,T)),typeof E=="string"?E=hn(Fe(E,T),T):n(E)==="object"&&(E=hn(E,T)),S===E}function pn(S,E){return S&&S.toString().replace(!E||!E.iri?u.ESCAPE:l.ESCAPE,Je)}function zn(S,E){return S&&S.toString().replace(!E||!E.iri?u.PCT_ENCODED:l.PCT_ENCODED,k)}var tt={scheme:"http",domainHost:!0,parse:function(E,T){return E.host||(E.error=E.error||"HTTP URIs must have a host."),E},serialize:function(E,T){var O=String(E.scheme).toLowerCase()==="https";return(E.port===(O?443:80)||E.port==="")&&(E.port=void 0),E.path||(E.path="/"),E}},Jr={scheme:"https",domainHost:tt.domainHost,parse:tt.parse,serialize:tt.serialize};function _v(S){return typeof S.secure=="boolean"?S.secure:String(S.scheme).toLowerCase()==="wss"}var Mt={scheme:"ws",domainHost:!0,parse:function(E,T){var O=E;return O.secure=_v(O),O.resourceName=(O.path||"/")+(O.query?"?"+O.query:""),O.path=void 0,O.query=void 0,O},serialize:function(E,T){if((E.port===(_v(E)?443:80)||E.port==="")&&(E.port=void 0),typeof E.secure=="boolean"&&(E.scheme=E.secure?"wss":"ws",E.secure=void 0),E.resourceName){var O=E.resourceName.split("?"),C=f(O,2),H=C[0],ie=C[1];E.path=H&&H!=="/"?H:void 0,E.query=ie,E.resourceName=void 0}return E.fragment=void 0,E}},mn={scheme:"wss",domainHost:Mt.domainHost,parse:Mt.parse,serialize:Mt.serialize},Uq={},at=!0,li="[A-Za-z0-9\\-\\.\\_\\~"+(at?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",yn="[0-9A-Fa-f]",Yr=r(r("%[EFef]"+yn+"%"+yn+yn+"%"+yn+yn)+"|"+r("%[89A-Fa-f]"+yn+"%"+yn+yn)+"|"+r("%"+yn+yn)),vr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Vu="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",fi=t(Vu,'[\\"\\\\]'),Bi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Bu=new RegExp(li,"g"),wr=new RegExp(Yr,"g"),Vq=new RegExp(t("[^]",vr,"[\\.]",'[\\"]',fi),"g"),Sv=new RegExp(t("[^]",li,Bi),"g"),Bq=Sv;function Lc(S){var E=k(S);return E.match(Bu)?E:S}var Pv={scheme:"mailto",parse:function(E,T){var O=E,C=O.to=O.path?O.path.split(","):[];if(O.path=void 0,O.query){for(var H=!1,ie={},ve=O.query.split("&"),Re=0,ut=ve.length;Re<ut;++Re){var me=ve[Re].split("=");switch(me[0]){case"to":for(var Ue=me[1].split(","),lt=0,Me=Ue.length;lt<Me;++lt)C.push(Ue[lt]);break;case"subject":O.subject=zn(me[1],T);break;case"body":O.body=zn(me[1],T);break;default:H=!0,ie[zn(me[0],T)]=zn(me[1],T);break}}H&&(O.headers=ie)}O.query=void 0;for(var be=0,Ve=C.length;be<Ve;++be){var Oe=C[be].split("@");if(Oe[0]=zn(Oe[0]),T.unicodeSupport)Oe[1]=zn(Oe[1],T).toLowerCase();else try{Oe[1]=Ae.toASCII(zn(Oe[1],T).toLowerCase())}catch(Gi){O.error=O.error||"Email address's domain name can not be converted to ASCII via punycode: "+Gi}C[be]=Oe.join("@")}return O},serialize:function(E,T){var O=E,C=s(E.to);if(C){for(var H=0,ie=C.length;H<ie;++H){var ve=String(C[H]),Re=ve.lastIndexOf("@"),ut=ve.slice(0,Re).replace(wr,Lc).replace(wr,i).replace(Vq,Je),me=ve.slice(Re+1);try{me=T.iri?Ae.toUnicode(me):Ae.toASCII(zn(me,T).toLowerCase())}catch(be){O.error=O.error||"Email address's domain name can not be converted to "+(T.iri?"Unicode":"ASCII")+" via punycode: "+be}C[H]=ut+"@"+me}O.path=C.join(",")}var Ue=E.headers=E.headers||{};E.subject&&(Ue.subject=E.subject),E.body&&(Ue.body=E.body);var lt=[];for(var Me in Ue)Ue[Me]!==Uq[Me]&&lt.push(Me.replace(wr,Lc).replace(wr,i).replace(Sv,Je)+"="+Ue[Me].replace(wr,Lc).replace(wr,i).replace(Bq,Je));return lt.length&&(O.query=lt.join("&")),O}},Gq=/^([^\:]+)\:(.*)/,Rv={scheme:"urn",parse:function(E,T){var O=E.path&&E.path.match(Gq),C=E;if(O){var H=T.scheme||C.scheme||"urn",ie=O[1].toLowerCase(),ve=O[2],Re=H+":"+(T.nid||ie),ut=et[Re];C.nid=ie,C.nss=ve,C.path=void 0,ut&&(C=ut.parse(C,T))}else C.error=C.error||"URN can not be parsed.";return C},serialize:function(E,T){var O=T.scheme||E.scheme||"urn",C=E.nid,H=O+":"+(T.nid||C),ie=et[H];ie&&(E=ie.serialize(E,T));var ve=E,Re=E.nss;return ve.path=(C||T.nid)+":"+Re,ve}},Kq=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Tv={scheme:"urn:uuid",parse:function(E,T){var O=E;return O.uuid=O.nss,O.nss=void 0,!T.tolerant&&(!O.uuid||!O.uuid.match(Kq))&&(O.error=O.error||"UUID is not valid."),O},serialize:function(E,T){var O=E;return O.nss=(E.uuid||"").toLowerCase(),O}};et[tt.scheme]=tt,et[Jr.scheme]=Jr,et[Mt.scheme]=Mt,et[mn.scheme]=mn,et[Pv.scheme]=Pv,et[Rv.scheme]=Rv,et[Tv.scheme]=Tv,e.SCHEMES=et,e.pctEncChar=Je,e.pctDecChars=k,e.parse=Fe,e.removeDotSegments=Qt,e.serialize=hn,e.resolveComponents=Wr,e.resolve=Mn,e.normalize=Hq,e.equal=dn,e.escapeComponent=pn,e.unescapeComponent=zn,Object.defineProperty(e,"__esModule",{value:!0})})});var XP=w(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});var YP=JP();YP.code='require("ajv/dist/runtime/uri").default';Wp.default=YP});var Xp=w(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.CodeGen=Dt.Name=Dt.nil=Dt.stringify=Dt.str=Dt._=Dt.KeywordCxt=void 0;var PV=oo();Object.defineProperty(Dt,"KeywordCxt",{enumerable:!0,get:function(){return PV.KeywordCxt}});var lo=X();Object.defineProperty(Dt,"_",{enumerable:!0,get:function(){return lo._}});Object.defineProperty(Dt,"str",{enumerable:!0,get:function(){return lo.str}});Object.defineProperty(Dt,"stringify",{enumerable:!0,get:function(){return lo.stringify}});Object.defineProperty(Dt,"nil",{enumerable:!0,get:function(){return lo.nil}});Object.defineProperty(Dt,"Name",{enumerable:!0,get:function(){return lo.Name}});Object.defineProperty(Dt,"CodeGen",{enumerable:!0,get:function(){return lo.CodeGen}});var RV=Up(),nR=ao(),TV=Ip(),Ha=gs(),AV=X(),Ua=Fa(),cf=La(),Yp=ae(),ZP=QP(),$V=XP(),iR=(e,t)=>new RegExp(e,t);iR.code="new RegExp";var IV=["removeAdditional","useDefaults","coerceTypes"],OV=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),CV={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},kV={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},eR=200;function xV(e){var t,r,n,i,s,o,a,u,l,f,c,h,d,p,m,v,b,P,g,y,R,$,_,I,x;let A=e.strict,D=(t=e.code)===null||t===void 0?void 0:t.optimize,q=D===!0||D===void 0?1:D||0,j=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:iR,ue=(i=e.uriResolver)!==null&&i!==void 0?i:$V.default;return{strictSchema:(o=(s=e.strictSchema)!==null&&s!==void 0?s:A)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=e.strictNumbers)!==null&&a!==void 0?a:A)!==null&&u!==void 0?u:!0,strictTypes:(f=(l=e.strictTypes)!==null&&l!==void 0?l:A)!==null&&f!==void 0?f:"log",strictTuples:(h=(c=e.strictTuples)!==null&&c!==void 0?c:A)!==null&&h!==void 0?h:"log",strictRequired:(p=(d=e.strictRequired)!==null&&d!==void 0?d:A)!==null&&p!==void 0?p:!1,code:e.code?{...e.code,optimize:q,regExp:j}:{optimize:q,regExp:j},loopRequired:(m=e.loopRequired)!==null&&m!==void 0?m:eR,loopEnum:(v=e.loopEnum)!==null&&v!==void 0?v:eR,meta:(b=e.meta)!==null&&b!==void 0?b:!0,messages:(P=e.messages)!==null&&P!==void 0?P:!0,inlineRefs:(g=e.inlineRefs)!==null&&g!==void 0?g:!0,schemaId:(y=e.schemaId)!==null&&y!==void 0?y:"$id",addUsedSchema:(R=e.addUsedSchema)!==null&&R!==void 0?R:!0,validateSchema:($=e.validateSchema)!==null&&$!==void 0?$:!0,validateFormats:(_=e.validateFormats)!==null&&_!==void 0?_:!0,unicodeRegExp:(I=e.unicodeRegExp)!==null&&I!==void 0?I:!0,int32range:(x=e.int32range)!==null&&x!==void 0?x:!0,uriResolver:ue}}var Va=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...xV(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new AV.ValueScope({scope:{},prefixes:OV,es5:r,lines:n}),this.logger=FV(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,TV.getRules)(),tR.call(this,CV,t,"NOT SUPPORTED"),tR.call(this,kV,t,"DEPRECATED","warn"),this._metaOpts=jV.call(this),t.formats&&NV.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&DV.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),qV.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,i=ZP;n==="id"&&(i={...ZP},i.id=i.$id,delete i.$id),r&&t&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,t,r);async function i(f,c){await s.call(this,f.$schema);let h=this._addSchema(f,c);return h.validate||o.call(this,h)}async function s(f){f&&!this.getSchema(f)&&await i.call(this,{$ref:f},!0)}async function o(f){try{return this._compileSchemaEnv(f)}catch(c){if(!(c instanceof nR.default))throw c;return a.call(this,c),await u.call(this,c.missingSchema),o.call(this,f)}}function a({missingSchema:f,missingRef:c}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${c} cannot be resolved`)}async function u(f){let c=await l.call(this,f);this.refs[f]||await s.call(this,c.$schema),this.refs[f]||this.addSchema(c,f,r)}async function l(f){let c=this._loading[f];if(c)return c;try{return await(this._loading[f]=n(f))}finally{delete this._loading[f]}}}addSchema(t,r,n,i=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,n,i);return this}let s;if(typeof t=="object"){let{schemaId:o}=this.opts;if(s=t[o],s!==void 0&&typeof s!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Ua.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,i,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,t);if(!i&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return i}getSchema(t){let r;for(;typeof(r=rR.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,i=new Ha.SchemaEnv({schema:{},schemaId:n});if(r=Ha.resolveSchema.call(this,i,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=rR.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,Ua.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(zV.call(this,n,r),!r)return(0,Yp.eachItem)(n,s=>Jp.call(this,s)),this;UV.call(this,r);let i={...r,type:(0,cf.getJSONTypes)(r.type),schemaType:(0,cf.getJSONTypes)(r.schemaType)};return(0,Yp.eachItem)(n,i.type.length===0?s=>Jp.call(this,s,i):s=>i.type.forEach(o=>Jp.call(this,s,i,o))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let i=n.rules.findIndex(s=>s.keyword===t);i>=0&&n.rules.splice(i,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,s)=>i+r+s)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of r){let s=i.split("/").slice(1),o=t;for(let a of s)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:l}=u.definition,f=o[a];l&&f&&(o[a]=sR(f))}}return t}_removeAllSchemas(t,r){for(let n in t){let i=t[n];(!r||r.test(n))&&(typeof i=="string"?delete t[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[n]))}}_addSchema(t,r,n,i=this.opts.validateSchema,s=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof t=="object")o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(t);if(u!==void 0)return u;n=(0,Ua.normalizeId)(o||n);let l=Ua.getSchemaRefs.call(this,t,n);return u=new Ha.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(u.schema,u),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),i&&this.validateSchema(t,!0),u}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Ha.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Ha.compileSchema.call(this,t)}finally{this.opts=r}}};Dt.default=Va;Va.ValidationError=RV.default;Va.MissingRefError=nR.default;function tR(e,t,r,n="error"){for(let i in e){let s=i;s in t&&this.logger[n](`${r}: option ${i}. ${e[s]}`)}}function rR(e){return e=(0,Ua.normalizeId)(e),this.schemas[e]||this.refs[e]}function qV(){let e=this.opts.schemas;if(!!e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function NV(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function DV(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function jV(){let e={...this.opts};for(let t of IV)delete e[t];return e}var LV={log(){},warn(){},error(){}};function FV(e){if(e===!1)return LV;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var MV=/^[a-z_$][a-z0-9_$:-]*$/i;function zV(e,t){let{RULES:r}=this;if((0,Yp.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!MV.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function Jp(e,t,r){var n;let i=t?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,o=i?s.post:s.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},s.rules.push(o)),s.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,cf.getJSONTypes)(t.type),schemaType:(0,cf.getJSONTypes)(t.schemaType)}};t.before?HV.call(this,o,a,t.before):o.rules.push(a),s.all[e]=a,(n=t.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function HV(e,t,r){let n=e.rules.findIndex(i=>i.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function UV(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=sR(t)),e.validateSchema=this.compile(t,!0))}var VV={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function sR(e){return{anyOf:[e,VV]}}});var oR=w(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});var BV={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Zp.default=BV});var em=w(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.callRef=vs.getValidate=void 0;var GV=ao(),aR=Nt(),hr=X(),fo=zr(),uR=gs(),hf=ae(),KV={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=n,{root:l}=s;if((r==="#"||r==="#/")&&i===l.baseId)return c();let f=uR.resolveRef.call(u,l,i,r);if(f===void 0)throw new GV.default(n.opts.uriResolver,i,r);if(f instanceof uR.SchemaEnv)return h(f);return d(f);function c(){if(s===l)return df(e,o,s,s.$async);let p=t.scopeValue("root",{ref:l});return df(e,(0,hr._)`${p}.validate`,l,l.$async)}function h(p){let m=lR(e,p);df(e,m,p,p.$async)}function d(p){let m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,hr.stringify)(p)}:{ref:p}),v=t.name("valid"),b=e.subschema({schema:p,dataTypes:[],schemaPath:hr.nil,topSchemaRef:m,errSchemaPath:r},v);e.mergeEvaluated(b),e.ok(v)}}};function lR(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,hr._)`${r.scopeValue("wrapper",{ref:t})}.validate`}vs.getValidate=lR;function df(e,t,r,n){let{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?fo.default.this:hr.nil;n?f():c();function f(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=i.let("valid");i.try(()=>{i.code((0,hr._)`await ${(0,aR.callValidateCode)(e,t,l)}`),d(t),o||i.assign(p,!0)},m=>{i.if((0,hr._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),h(m),o||i.assign(p,!1)}),e.ok(p)}function c(){e.result((0,aR.callValidateCode)(e,t,l),()=>d(t),()=>h(t))}function h(p){let m=(0,hr._)`${p}.errors`;i.assign(fo.default.vErrors,(0,hr._)`${fo.default.vErrors} === null ? ${m} : ${fo.default.vErrors}.concat(${m})`),i.assign(fo.default.errors,(0,hr._)`${fo.default.vErrors}.length`)}function d(p){var m;if(!s.opts.unevaluated)return;let v=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(s.props=hf.mergeEvaluated.props(i,v.props,s.props));else{let b=i.var("props",(0,hr._)`${p}.evaluated.props`);s.props=hf.mergeEvaluated.props(i,b,s.props,hr.Name)}if(s.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(s.items=hf.mergeEvaluated.items(i,v.items,s.items));else{let b=i.var("items",(0,hr._)`${p}.evaluated.items`);s.items=hf.mergeEvaluated.items(i,b,s.items,hr.Name)}}}vs.callRef=df;vs.default=KV});var fR=w(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});var QV=oR(),WV=em(),JV=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",QV.default,WV.default];tm.default=JV});var cR=w(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});var pf=X(),Ti=pf.operators,mf={maximum:{okStr:"<=",ok:Ti.LTE,fail:Ti.GT},minimum:{okStr:">=",ok:Ti.GTE,fail:Ti.LT},exclusiveMaximum:{okStr:"<",ok:Ti.LT,fail:Ti.GTE},exclusiveMinimum:{okStr:">",ok:Ti.GT,fail:Ti.LTE}},YV={message:({keyword:e,schemaCode:t})=>(0,pf.str)`must be ${mf[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,pf._)`{comparison: ${mf[e].okStr}, limit: ${t}}`},XV={keyword:Object.keys(mf),type:"number",schemaType:"number",$data:!0,error:YV,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,pf._)`${r} ${mf[t].fail} ${n} || isNaN(${r})`)}};rm.default=XV});var hR=w(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});var Ba=X(),ZV={message:({schemaCode:e})=>(0,Ba.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ba._)`{multipleOf: ${e}}`},e6={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:ZV,code(e){let{gen:t,data:r,schemaCode:n,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Ba._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Ba._)`${o} !== parseInt(${o})`;e.fail$data((0,Ba._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};nm.default=e6});var pR=w(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});function dR(e){let t=e.length,r=0,n=0,i;for(;n<t;)r++,i=e.charCodeAt(n++),i>=55296&&i<=56319&&n<t&&(i=e.charCodeAt(n),(i&64512)===56320&&n++);return r}im.default=dR;dR.code='require("ajv/dist/runtime/ucs2length").default'});var mR=w(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});var ws=X(),t6=ae(),r6=pR(),n6={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,ws.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,ws._)`{limit: ${e}}`},i6={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:n6,code(e){let{keyword:t,data:r,schemaCode:n,it:i}=e,s=t==="maxLength"?ws.operators.GT:ws.operators.LT,o=i.opts.unicode===!1?(0,ws._)`${r}.length`:(0,ws._)`${(0,t6.useFunc)(e.gen,r6.default)}(${r})`;e.fail$data((0,ws._)`${o} ${s} ${n}`)}};sm.default=i6});var yR=w(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});var s6=Nt(),yf=X(),o6={message:({schemaCode:e})=>(0,yf.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,yf._)`{pattern: ${e}}`},a6={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:o6,code(e){let{data:t,$data:r,schema:n,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=r?(0,yf._)`(new RegExp(${i}, ${o}))`:(0,s6.usePattern)(e,n);e.fail$data((0,yf._)`!${a}.test(${t})`)}};om.default=a6});var gR=w(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});var Ga=X(),u6={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Ga.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Ga._)`{limit: ${e}}`},l6={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:u6,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxProperties"?Ga.operators.GT:Ga.operators.LT;e.fail$data((0,Ga._)`Object.keys(${r}).length ${i} ${n}`)}};am.default=l6});var vR=w(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});var Ka=Nt(),Qa=X(),f6=ae(),c6={message:({params:{missingProperty:e}})=>(0,Qa.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Qa._)`{missingProperty: ${e}}`},h6={keyword:"required",type:"object",schemaType:"array",$data:!0,error:c6,code(e){let{gen:t,schema:r,schemaCode:n,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?l():f(),a.strictRequired){let d=e.parentSchema.properties,{definedProperties:p}=e.it;for(let m of r)if(d?.[m]===void 0&&!p.has(m)){let v=o.schemaEnv.baseId+o.errSchemaPath,b=`required property "${m}" is not defined at "${v}" (strictRequired)`;(0,f6.checkStrictMode)(o,b,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Qa.nil,c);else for(let d of r)(0,Ka.checkReportMissingProp)(e,d)}function f(){let d=t.let("missing");if(u||s){let p=t.let("valid",!0);e.block$data(p,()=>h(d,p)),e.ok(p)}else t.if((0,Ka.checkMissingProp)(e,r,d)),(0,Ka.reportMissingProp)(e,d),t.else()}function c(){t.forOf("prop",n,d=>{e.setParams({missingProperty:d}),t.if((0,Ka.noPropertyInData)(t,i,d,a.ownProperties),()=>e.error())})}function h(d,p){e.setParams({missingProperty:d}),t.forOf(d,n,()=>{t.assign(p,(0,Ka.propertyInData)(t,i,d,a.ownProperties)),t.if((0,Qa.not)(p),()=>{e.error(),t.break()})},Qa.nil)}}};um.default=h6});var wR=w(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});var Wa=X(),d6={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Wa.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Wa._)`{limit: ${e}}`},p6={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:d6,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxItems"?Wa.operators.GT:Wa.operators.LT;e.fail$data((0,Wa._)`${r}.length ${i} ${n}`)}};lm.default=p6});var bR=w(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});var fm=La(),jt=X(),m6=ae(),y6=Aa(),g6={message:({params:{i:e,j:t}})=>(0,jt.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,jt._)`{i: ${e}, j: ${t}}`},v6={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:g6,code(e){let{gen:t,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!n&&!i)return;let u=t.let("valid"),l=s.items?(0,fm.getSchemaTypes)(s.items):[];e.block$data(u,f,(0,jt._)`${o} === false`),e.ok(u);function f(){let p=t.let("i",(0,jt._)`${r}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,jt._)`${p} > 1`,()=>(c()?h:d)(p,m))}function c(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function h(p,m){let v=t.name("item"),b=(0,fm.checkDataTypes)(l,v,a.opts.strictNumbers,fm.DataType.Wrong),P=t.const("indices",(0,jt._)`{}`);t.for((0,jt._)`;${p}--;`,()=>{t.let(v,(0,jt._)`${r}[${p}]`),t.if(b,(0,jt._)`continue`),l.length>1&&t.if((0,jt._)`typeof ${v} == "string"`,(0,jt._)`${v} += "_"`),t.if((0,jt._)`typeof ${P}[${v}] == "number"`,()=>{t.assign(m,(0,jt._)`${P}[${v}]`),e.error(),t.assign(u,!1).break()}).code((0,jt._)`${P}[${v}] = ${p}`)})}function d(p,m){let v=(0,m6.useFunc)(t,y6.default),b=t.name("outer");t.label(b).for((0,jt._)`;${p}--;`,()=>t.for((0,jt._)`${m} = ${p}; ${m}--;`,()=>t.if((0,jt._)`${v}(${r}[${p}], ${r}[${m}])`,()=>{e.error(),t.assign(u,!1).break(b)})))}}};cm.default=v6});var ER=w(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});var hm=X(),w6=ae(),b6=Aa(),E6={message:"must be equal to constant",params:({schemaCode:e})=>(0,hm._)`{allowedValue: ${e}}`},_6={keyword:"const",$data:!0,error:E6,code(e){let{gen:t,data:r,$data:n,schemaCode:i,schema:s}=e;n||s&&typeof s=="object"?e.fail$data((0,hm._)`!${(0,w6.useFunc)(t,b6.default)}(${r}, ${i})`):e.fail((0,hm._)`${s} !== ${r}`)}};dm.default=_6});var _R=w(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});var Ja=X(),S6=ae(),P6=Aa(),R6={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Ja._)`{allowedValues: ${e}}`},T6={keyword:"enum",schemaType:"array",$data:!0,error:R6,code(e){let{gen:t,data:r,$data:n,schema:i,schemaCode:s,it:o}=e;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=o.opts.loopEnum,u,l=()=>u??(u=(0,S6.useFunc)(t,P6.default)),f;if(a||n)f=t.let("valid"),e.block$data(f,c);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let d=t.const("vSchema",s);f=(0,Ja.or)(...i.map((p,m)=>h(d,m)))}e.pass(f);function c(){t.assign(f,!1),t.forOf("v",s,d=>t.if((0,Ja._)`${l()}(${r}, ${d})`,()=>t.assign(f,!0).break()))}function h(d,p){let m=i[p];return typeof m=="object"&&m!==null?(0,Ja._)`${l()}(${r}, ${d}[${p}])`:(0,Ja._)`${r} === ${m}`}}};pm.default=T6});var SR=w(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});var A6=cR(),$6=hR(),I6=mR(),O6=yR(),C6=gR(),k6=vR(),x6=wR(),q6=bR(),N6=ER(),D6=_R(),j6=[A6.default,$6.default,I6.default,O6.default,C6.default,k6.default,x6.default,q6.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},N6.default,D6.default];mm.default=j6});var gm=w(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.validateAdditionalItems=void 0;var bs=X(),ym=ae(),L6={message:({params:{len:e}})=>(0,bs.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,bs._)`{limit: ${e}}`},F6={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:L6,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,ym.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}PR(e,n)}};function PR(e,t){let{gen:r,schema:n,data:i,keyword:s,it:o}=e;o.items=!0;let a=r.const("len",(0,bs._)`${i}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,bs._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,ym.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,bs._)`${a} <= ${t.length}`);r.if((0,bs.not)(l),()=>u(l)),e.ok(l)}function u(l){r.forRange("i",t.length,a,f=>{e.subschema({keyword:s,dataProp:f,dataPropType:ym.Type.Num},l),o.allErrors||r.if((0,bs.not)(l),()=>r.break())})}}Ya.validateAdditionalItems=PR;Ya.default=F6});var vm=w(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.validateTuple=void 0;var RR=X(),gf=ae(),M6=Nt(),z6={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return TR(e,"additionalItems",t);r.items=!0,!(0,gf.alwaysValidSchema)(r,t)&&e.ok((0,M6.validateArray)(e))}};function TR(e,t,r=e.schema){let{gen:n,parentSchema:i,data:s,keyword:o,it:a}=e;f(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=gf.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),l=n.const("len",(0,RR._)`${s}.length`);r.forEach((c,h)=>{(0,gf.alwaysValidSchema)(a,c)||(n.if((0,RR._)`${l} > ${h}`,()=>e.subschema({keyword:o,schemaProp:h,dataProp:h},u)),e.ok(u))});function f(c){let{opts:h,errSchemaPath:d}=a,p=r.length,m=p===c.minItems&&(p===c.maxItems||c[t]===!1);if(h.strictTuples&&!m){let v=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${d}"`;(0,gf.checkStrictMode)(a,v,h.strictTuples)}}}Xa.validateTuple=TR;Xa.default=z6});var AR=w(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});var H6=vm(),U6={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,H6.validateTuple)(e,"items")};wm.default=U6});var IR=w(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});var $R=X(),V6=ae(),B6=Nt(),G6=gm(),K6={message:({params:{len:e}})=>(0,$R.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,$R._)`{limit: ${e}}`},Q6={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:K6,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:i}=r;n.items=!0,!(0,V6.alwaysValidSchema)(n,t)&&(i?(0,G6.validateAdditionalItems)(e,i):e.ok((0,B6.validateArray)(e)))}};bm.default=Q6});var OR=w(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});var Ur=X(),vf=ae(),W6={message:({params:{min:e,max:t}})=>t===void 0?(0,Ur.str)`must contain at least ${e} valid item(s)`:(0,Ur.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ur._)`{minContains: ${e}}`:(0,Ur._)`{minContains: ${e}, maxContains: ${t}}`},J6={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:W6,code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:s}=e,o,a,{minContains:u,maxContains:l}=n;s.opts.next?(o=u===void 0?1:u,a=l):o=1;let f=t.const("len",(0,Ur._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,vf.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,vf.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,vf.alwaysValidSchema)(s,r)){let m=(0,Ur._)`${f} >= ${o}`;a!==void 0&&(m=(0,Ur._)`${m} && ${f} <= ${a}`),e.pass(m);return}s.items=!0;let c=t.name("valid");a===void 0&&o===1?d(c,()=>t.if(c,()=>t.break())):o===0?(t.let(c,!0),a!==void 0&&t.if((0,Ur._)`${i}.length > 0`,h)):(t.let(c,!1),h()),e.result(c,()=>e.reset());function h(){let m=t.name("_valid"),v=t.let("count",0);d(m,()=>t.if(m,()=>p(v)))}function d(m,v){t.forRange("i",0,f,b=>{e.subschema({keyword:"contains",dataProp:b,dataPropType:vf.Type.Num,compositeRule:!0},m),v()})}function p(m){t.code((0,Ur._)`${m}++`),a===void 0?t.if((0,Ur._)`${m} >= ${o}`,()=>t.assign(c,!0).break()):(t.if((0,Ur._)`${m} > ${a}`,()=>t.assign(c,!1).break()),o===1?t.assign(c,!0):t.if((0,Ur._)`${m} >= ${o}`,()=>t.assign(c,!0)))}}};Em.default=J6});var xR=w(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.validateSchemaDeps=Sn.validatePropertyDeps=Sn.error=void 0;var _m=X(),Y6=ae(),Za=Nt();Sn.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,_m.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,_m._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var X6={keyword:"dependencies",type:"object",schemaType:"object",error:Sn.error,code(e){let[t,r]=Z6(e);CR(e,t),kR(e,r)}};function Z6({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let i=Array.isArray(e[n])?t:r;i[n]=e[n]}return[t,r]}function CR(e,t=e.schema){let{gen:r,data:n,it:i}=e;if(Object.keys(t).length===0)return;let s=r.let("missing");for(let o in t){let a=t[o];if(a.length===0)continue;let u=(0,Za.propertyInData)(r,n,o,i.opts.ownProperties);e.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(u,()=>{for(let l of a)(0,Za.checkReportMissingProp)(e,l)}):(r.if((0,_m._)`${u} && (${(0,Za.checkMissingProp)(e,a,s)})`),(0,Za.reportMissingProp)(e,s),r.else())}}Sn.validatePropertyDeps=CR;function kR(e,t=e.schema){let{gen:r,data:n,keyword:i,it:s}=e,o=r.name("valid");for(let a in t)(0,Y6.alwaysValidSchema)(s,t[a])||(r.if((0,Za.propertyInData)(r,n,a,s.opts.ownProperties),()=>{let u=e.subschema({keyword:i,schemaProp:a},o);e.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),e.ok(o))}Sn.validateSchemaDeps=kR;Sn.default=X6});var NR=w(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});var qR=X(),eB=ae(),tB={message:"property name must be valid",params:({params:e})=>(0,qR._)`{propertyName: ${e.propertyName}}`},rB={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:tB,code(e){let{gen:t,schema:r,data:n,it:i}=e;if((0,eB.alwaysValidSchema)(i,r))return;let s=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,qR.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Sm.default=rB});var Rm=w(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});var wf=Nt(),sn=X(),nB=zr(),bf=ae(),iB={message:"must NOT have additional properties",params:({params:e})=>(0,sn._)`{additionalProperty: ${e.additionalProperty}}`},sB={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:iB,code(e){let{gen:t,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,bf.alwaysValidSchema)(o,r))return;let l=(0,wf.allSchemaProperties)(n.properties),f=(0,wf.allSchemaProperties)(n.patternProperties);c(),e.ok((0,sn._)`${s} === ${nB.default.errors}`);function c(){t.forIn("key",i,v=>{!l.length&&!f.length?p(v):t.if(h(v),()=>p(v))})}function h(v){let b;if(l.length>8){let P=(0,bf.schemaRefOrVal)(o,n.properties,"properties");b=(0,wf.isOwnProperty)(t,P,v)}else l.length?b=(0,sn.or)(...l.map(P=>(0,sn._)`${v} === ${P}`)):b=sn.nil;return f.length&&(b=(0,sn.or)(b,...f.map(P=>(0,sn._)`${(0,wf.usePattern)(e,P)}.test(${v})`))),(0,sn.not)(b)}function d(v){t.code((0,sn._)`delete ${i}[${v}]`)}function p(v){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){d(v);return}if(r===!1){e.setParams({additionalProperty:v}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,bf.alwaysValidSchema)(o,r)){let b=t.name("valid");u.removeAdditional==="failing"?(m(v,b,!1),t.if((0,sn.not)(b),()=>{e.reset(),d(v)})):(m(v,b),a||t.if((0,sn.not)(b),()=>t.break()))}}function m(v,b,P){let g={keyword:"additionalProperties",dataProp:v,dataPropType:bf.Type.Str};P===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(g,b)}}};Pm.default=sB});var LR=w(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});var oB=oo(),DR=Nt(),Tm=ae(),jR=Rm(),aB={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:s}=e;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&jR.default.code(new oB.KeywordCxt(s,jR.default,"additionalProperties"));let o=(0,DR.allSchemaProperties)(r);for(let c of o)s.definedProperties.add(c);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Tm.mergeEvaluated.props(t,(0,Tm.toHash)(o),s.props));let a=o.filter(c=>!(0,Tm.alwaysValidSchema)(s,r[c]));if(a.length===0)return;let u=t.name("valid");for(let c of a)l(c)?f(c):(t.if((0,DR.propertyInData)(t,i,c,s.opts.ownProperties)),f(c),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(c),e.ok(u);function l(c){return s.opts.useDefaults&&!s.compositeRule&&r[c].default!==void 0}function f(c){e.subschema({keyword:"properties",schemaProp:c,dataProp:c},u)}}};Am.default=aB});var HR=w($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});var FR=Nt(),Ef=X(),MR=ae(),zR=ae(),uB={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,FR.allSchemaProperties)(r),u=a.filter(m=>(0,MR.alwaysValidSchema)(s,r[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,f=t.name("valid");s.props!==!0&&!(s.props instanceof Ef.Name)&&(s.props=(0,zR.evaluatedPropsToName)(t,s.props));let{props:c}=s;h();function h(){for(let m of a)l&&d(m),s.allErrors?p(m):(t.var(f,!0),p(m),t.if(f))}function d(m){for(let v in l)new RegExp(m).test(v)&&(0,MR.checkStrictMode)(s,`property ${v} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",n,v=>{t.if((0,Ef._)`${(0,FR.usePattern)(e,m)}.test(${v})`,()=>{let b=u.includes(m);b||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:v,dataPropType:zR.Type.Str},f),s.opts.unevaluated&&c!==!0?t.assign((0,Ef._)`${c}[${v}]`,!0):!b&&!s.allErrors&&t.if((0,Ef.not)(f),()=>t.break())})})}}};$m.default=uB});var UR=w(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});var lB=ae(),fB={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,lB.alwaysValidSchema)(n,r)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Im.default=fB});var VR=w(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});var cB=Nt(),hB={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:cB.validateUnion,error:{message:"must match a schema in anyOf"}};Om.default=hB});var BR=w(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});var _f=X(),dB=ae(),pB={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,_f._)`{passingSchemas: ${e.passing}}`},mB={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:pB,code(e){let{gen:t,schema:r,parentSchema:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let s=r,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((f,c)=>{let h;(0,dB.alwaysValidSchema)(i,f)?t.var(u,!0):h=e.subschema({keyword:"oneOf",schemaProp:c,compositeRule:!0},u),c>0&&t.if((0,_f._)`${u} && ${o}`).assign(o,!1).assign(a,(0,_f._)`[${a}, ${c}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,c),h&&e.mergeEvaluated(h,_f.Name)})})}}};Cm.default=mB});var GR=w(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});var yB=ae(),gB={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=t.name("valid");r.forEach((s,o)=>{if((0,yB.alwaysValidSchema)(n,s))return;let a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};km.default=gB});var WR=w(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});var Sf=X(),QR=ae(),vB={message:({params:e})=>(0,Sf.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Sf._)`{failingKeyword: ${e.ifClause}}`},wB={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:vB,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,QR.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=KR(n,"then"),s=KR(n,"else");if(!i&&!s)return;let o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){let f=t.let("ifClause");e.setParams({ifClause:f}),t.if(a,l("then",f),l("else",f))}else i?t.if(a,l("then")):t.if((0,Sf.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){let f=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(f)}function l(f,c){return()=>{let h=e.subschema({keyword:f},a);t.assign(o,a),e.mergeValidEvaluated(h,o),c?t.assign(c,(0,Sf._)`${f}`):e.setParams({ifClause:f})}}}};function KR(e,t){let r=e.schema[t];return r!==void 0&&!(0,QR.alwaysValidSchema)(e,r)}xm.default=wB});var JR=w(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});var bB=ae(),EB={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,bB.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};qm.default=EB});var YR=w(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});var _B=gm(),SB=AR(),PB=vm(),RB=IR(),TB=OR(),AB=xR(),$B=NR(),IB=Rm(),OB=LR(),CB=HR(),kB=UR(),xB=VR(),qB=BR(),NB=GR(),DB=WR(),jB=JR();function LB(e=!1){let t=[kB.default,xB.default,qB.default,NB.default,DB.default,jB.default,$B.default,IB.default,AB.default,OB.default,CB.default];return e?t.push(SB.default,RB.default):t.push(_B.default,PB.default),t.push(TB.default),t}Nm.default=LB});var XR=w(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});var rt=X(),FB={message:({schemaCode:e})=>(0,rt.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,rt._)`{format: ${e}}`},MB={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:FB,code(e,t){let{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:f,self:c}=a;if(!u.validateFormats)return;i?h():d();function h(){let p=r.scopeValue("formats",{ref:c.formats,code:u.code.formats}),m=r.const("fDef",(0,rt._)`${p}[${o}]`),v=r.let("fType"),b=r.let("format");r.if((0,rt._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(v,(0,rt._)`${m}.type || "string"`).assign(b,(0,rt._)`${m}.validate`),()=>r.assign(v,(0,rt._)`"string"`).assign(b,m)),e.fail$data((0,rt.or)(P(),g()));function P(){return u.strictSchema===!1?rt.nil:(0,rt._)`${o} && !${b}`}function g(){let y=f.$async?(0,rt._)`(${m}.async ? await ${b}(${n}) : ${b}(${n}))`:(0,rt._)`${b}(${n})`,R=(0,rt._)`(typeof ${b} == "function" ? ${y} : ${b}.test(${n}))`;return(0,rt._)`${b} && ${b} !== true && ${v} === ${t} && !${R}`}}function d(){let p=c.formats[s];if(!p){P();return}if(p===!0)return;let[m,v,b]=g(p);m===t&&e.pass(y());function P(){if(u.strictSchema===!1){c.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function g(R){let $=R instanceof RegExp?(0,rt.regexpCode)(R):u.code.formats?(0,rt._)`${u.code.formats}${(0,rt.getProperty)(s)}`:void 0,_=r.scopeValue("formats",{key:s,ref:R,code:$});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,rt._)`${_}.validate`]:["string",R,_]}function y(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!f.$async)throw new Error("async format in sync schema");return(0,rt._)`await ${b}(${n})`}return typeof v=="function"?(0,rt._)`${b}(${n})`:(0,rt._)`${b}.test(${n})`}}}};Dm.default=MB});var ZR=w(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});var zB=XR(),HB=[zB.default];jm.default=HB});var eT=w(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.contentVocabulary=co.metadataVocabulary=void 0;co.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];co.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var rT=w(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});var UB=fR(),VB=SR(),BB=YR(),GB=ZR(),tT=eT(),KB=[UB.default,VB.default,(0,BB.default)(),GB.default,tT.metadataVocabulary,tT.contentVocabulary];Lm.default=KB});var Fm=w(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.DiscrError=void 0;var QB;(function(e){e.Tag="tag",e.Mapping="mapping"})(QB=eu.DiscrError||(eu.DiscrError={}))});var iT=w(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});var ho=X(),Mm=Fm(),nT=gs(),WB=ae(),JB={message:({params:{discrError:e,tagName:t}})=>e===Mm.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,ho._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},YB={keyword:"discriminator",type:"object",schemaType:"object",error:JB,code(e){let{gen:t,data:r,schema:n,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=t.let("valid",!1),l=t.const("tag",(0,ho._)`${r}${(0,ho.getProperty)(a)}`);t.if((0,ho._)`typeof ${l} == "string"`,()=>f(),()=>e.error(!1,{discrError:Mm.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function f(){let d=h();t.if(!1);for(let p in d)t.elseIf((0,ho._)`${l} === ${p}`),t.assign(u,c(d[p]));t.else(),e.error(!1,{discrError:Mm.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function c(d){let p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:d},p);return e.mergeEvaluated(m,ho.Name),p}function h(){var d;let p={},m=b(i),v=!0;for(let y=0;y<o.length;y++){let R=o[y];R?.$ref&&!(0,WB.schemaHasRulesButRef)(R,s.self.RULES)&&(R=nT.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,R?.$ref),R instanceof nT.SchemaEnv&&(R=R.schema));let $=(d=R?.properties)===null||d===void 0?void 0:d[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);v=v&&(m||b(R)),P($,y)}if(!v)throw new Error(`discriminator: "${a}" must be required`);return p;function b({required:y}){return Array.isArray(y)&&y.includes(a)}function P(y,R){if(y.const)g(y.const,R);else if(y.enum)for(let $ of y.enum)g($,R);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(y,R){if(typeof y!="string"||y in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[y]=R}}}};zm.default=YB});var sT=w((dne,XB)=>{XB.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Tf=w((dt,aT)=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.CodeGen=dt.Name=dt.nil=dt.stringify=dt.str=dt._=dt.KeywordCxt=void 0;var ZB=Xp(),e5=rT(),t5=iT(),oT=sT(),r5=["/properties"],Pf="http://json-schema.org/draft-07/schema",Rf=class extends ZB.default{_addVocabularies(){super._addVocabularies(),e5.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(t5.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(oT,r5):oT;this.addMetaSchema(t,Pf,!1),this.refs["http://json-schema.org/schema"]=Pf}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Pf)?Pf:void 0)}};aT.exports=dt=Rf;Object.defineProperty(dt,"__esModule",{value:!0});dt.default=Rf;var n5=oo();Object.defineProperty(dt,"KeywordCxt",{enumerable:!0,get:function(){return n5.KeywordCxt}});var po=X();Object.defineProperty(dt,"_",{enumerable:!0,get:function(){return po._}});Object.defineProperty(dt,"str",{enumerable:!0,get:function(){return po.str}});Object.defineProperty(dt,"stringify",{enumerable:!0,get:function(){return po.stringify}});Object.defineProperty(dt,"nil",{enumerable:!0,get:function(){return po.nil}});Object.defineProperty(dt,"Name",{enumerable:!0,get:function(){return po.Name}});Object.defineProperty(dt,"CodeGen",{enumerable:!0,get:function(){return po.CodeGen}})});var lT=w((pne,uT)=>{"use strict";var i5={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};uT.exports={HEX:i5}});var gT=w((mne,yT)=>{"use strict";var{HEX:s5}=lT();function dT(e){if(mT(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)||[],[r]=t;return r?{host:a5(r,".",!1),isIPV4:!0}:{host:e,isIPV4:!1}}function Hm(e){let t="",r=!0;for(let n of e){if(n!=="0"&&r===!0&&(r=!1),s5[n]===void 0)return;r||(t+=n)}return t}function o5(e){let t=0,r={error:!1,address:"",zone:""},n=[],i=[],s=!1,o=!1,a=!1;function u(){if(i.length){if(s===!1){let l=Hm(i.join(""));if(l!==void 0)n.push(l);else return r.error=!0,!1}i.length=0}return!0}for(let l=0;l<e.length;l++){let f=e[l];if(!(f==="["||f==="]"))if(f===":"){if(o===!0&&(a=!0),!u())break;if(t++,n.push(":"),t>7){r.error=!0;break}l-1>=0&&e[l-1]===":"&&(o=!0);continue}else if(f==="%"){if(!u())break;s=!0}else{i.push(f);continue}}return i.length&&(s?r.zone=i.join(""):a?n.push(i.join("")):n.push(Hm(i.join("")))),r.address=n.join(""),r}function pT(e,t={}){if(mT(e,":")<2)return{host:e,isIPV6:!1};let r=o5(e,t.isIPV4);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,i=r.address;return r.zone&&(n+="%"+r.zone,i+="%25"+r.zone),{host:n,escapedHost:i,isIPV6:!0}}}function a5(e,t){let r="",n=!0,i=e.length;for(let s=0;s<i;s++){let o=e[s];o==="0"&&n?(s+1<=i&&e[s+1]===t||s+1===i)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function mT(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var fT=/^\.\.?\//,cT=/^\/\.(\/|$)/,hT=/^\/\.\.(\/|$)/,u5=/^\/?(?:.|\n)*?(?=\/|$)/;function l5(e){let t=[];for(;e.length;)if(e.match(fT))e=e.replace(fT,"");else if(e.match(cT))e=e.replace(cT,"/");else if(e.match(hT))e=e.replace(hT,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(u5);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function f5(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function c5(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host),i=dT(n);if(i.isIPV4)n=i.host;else{let s=pT(i.host,{isIPV4:!1});s.isIPV6===!0?n=`[${s.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}yT.exports={recomposeAuthority:c5,normalizeComponentEncoding:f5,removeDotSegments:l5,normalizeIPv4:dT,normalizeIPv6:pT,stringToHexStripped:Hm}});var ST=w((yne,_T)=>{"use strict";var h5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,d5=/([A-Za-z0-9][A-Za-z0-9-]{0,31}):(([A-Za-z0-9()+,\-.:=@;$_!*']|%[0-9A-Fa-f]{2})+)/;function vT(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function wT(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function bT(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function p5(e){return e.secure=vT(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function m5(e){if((e.port===(vT(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function y5(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(d5);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${n}:${t.nid||e.nid}`,s=Um[i];e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function g5(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),i=`${r}:${t.nid||n}`,s=Um[i];s&&(e=s.serialize(e,t));let o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function v5(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!h5.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function w5(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var ET={scheme:"http",domainHost:!0,parse:wT,serialize:bT},b5={scheme:"https",domainHost:ET.domainHost,parse:wT,serialize:bT},Af={scheme:"ws",domainHost:!0,parse:p5,serialize:m5},E5={scheme:"wss",domainHost:Af.domainHost,parse:Af.parse,serialize:Af.serialize},_5={scheme:"urn",parse:y5,serialize:g5,skipNormalize:!0},S5={scheme:"urn:uuid",parse:v5,serialize:w5,skipNormalize:!0},Um={http:ET,https:b5,ws:Af,wss:E5,urn:_5,"urn:uuid":S5};_T.exports=Um});var Vm=w((gne,TT)=>{"use strict";var P5=require("url"),{normalizeIPv6:R5,normalizeIPv4:T5,removeDotSegments:tu,recomposeAuthority:A5,normalizeComponentEncoding:$f}=gT(),PT=ST();function $5(e,t){return typeof e=="string"?e=Pn(Xn(e,t),t):typeof e=="object"&&(e=Xn(Pn(e,t),t)),e}function I5(e,t,r){let n=Object.assign({scheme:"null"},r),i=RT(Xn(e,n),Xn(t,n),n,!0);return Pn(i,{...n,skipEscape:!0})}function RT(e,t,r,n){let i={};return n||(e=Xn(Pn(e,r),r),t=Xn(Pn(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=tu(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=tu(t.path||""),i.query=t.query):(t.path?(t.path.charAt(0)==="/"?i.path=tu(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=tu(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function O5(e,t,r){return typeof e=="string"?(e=unescape(e),e=Pn($f(Xn(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Pn($f(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Pn($f(Xn(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Pn($f(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Pn(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),i=[],s=PT[(n.scheme||r.scheme||"").toLowerCase()];s&&s.serialize&&s.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(i.push(r.scheme),i.push(":"));let o=A5(r,n);if(o!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(o),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!s||!s.absolutePath)&&(a=tu(a)),o===void 0&&(a=a.replace(/^\/\//,"/%2F")),i.push(a)}return r.query!==void 0&&(i.push("?"),i.push(r.query)),r.fragment!==void 0&&(i.push("#"),i.push(r.fragment)),i.join("")}var C5=/^(?:([^:/?#]+):)?(?:\/\/((?:([^/?#@]*)@)?(\[[^/?#\]]+\]|[^/?#:]*)(?::(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,k5="".match(/(){0}/)[1]===void 0;function Xn(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=e.indexOf("%")!==-1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let s=e.match(C5);if(s){if(k5?(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5])):(n.scheme=s[1]||void 0,n.userinfo=e.indexOf("@")!==-1?s[3]:void 0,n.host=e.indexOf("//")!==-1?s[4]:void 0,n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=e.indexOf("?")!==-1?s[7]:void 0,n.fragment=e.indexOf("#")!==-1?s[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*:(?:\/|\?|#|$)/)?s[4]:void 0)),n.host){let a=T5(n.host);a.isIPV4===!1?n.host=R5(a.host,{isIPV4:!1}).host.toLowerCase():n.host=a.host}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let o=PT[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost))try{n.host=P5.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(i&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),i&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),i&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=encodeURI(n.path)),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURI(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}TT.exports={normalize:$5,resolve:I5,resolveComponents:RT,equal:O5,serialize:Pn,parse:Xn}});var AT=w(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.formatLimitDefinition=void 0;var x5=Tf(),on=X(),Ai=on.operators,If={formatMaximum:{okStr:"<=",ok:Ai.LTE,fail:Ai.GT},formatMinimum:{okStr:">=",ok:Ai.GTE,fail:Ai.LT},formatExclusiveMaximum:{okStr:"<",ok:Ai.LT,fail:Ai.GTE},formatExclusiveMinimum:{okStr:">",ok:Ai.GT,fail:Ai.LTE}},q5={message:({keyword:e,schemaCode:t})=>on.str`should be ${If[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>on._`{comparison: ${If[e].okStr}, limit: ${t}}`};mo.formatLimitDefinition={keyword:Object.keys(If),type:"string",schemaType:"string",$data:!0,error:q5,code(e){let{gen:t,data:r,schemaCode:n,keyword:i,it:s}=e,{opts:o,self:a}=s;if(!o.validateFormats)return;let u=new x5.KeywordCxt(s,a.RULES.all.format.definition,"format");u.$data?l():f();function l(){let h=t.scopeValue("formats",{ref:a.formats,code:o.code.formats}),d=t.const("fmt",on._`${h}[${u.schemaCode}]`);e.fail$data(on.or(on._`typeof ${d} != "object"`,on._`${d} instanceof RegExp`,on._`typeof ${d}.compare != "function"`,c(d)))}function f(){let h=u.schema,d=a.formats[h];if(!d||d===!0)return;if(typeof d!="object"||d instanceof RegExp||typeof d.compare!="function")throw new Error(`"${i}": format "${h}" does not define "compare" function`);let p=t.scopeValue("formats",{key:h,ref:d,code:o.code.formats?on._`${o.code.formats}${on.getProperty(h)}`:void 0});e.fail$data(c(p))}function c(h){return on._`${h}.compare(${r}, ${n}) ${If[i].fail} 0`}},dependencies:["format"]};var N5=e=>(e.addKeyword(mo.formatLimitDefinition),e);mo.default=N5});var Km=w((ru,OT)=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});var yo=Wl(),D5=AT(),Bm=X(),$T=new Bm.Name("fullFormats"),j5=new Bm.Name("fastFormats"),Gm=(e,t={keywords:!0})=>{if(Array.isArray(t))return IT(e,t,yo.fullFormats,$T),e;let[r,n]=t.mode==="fast"?[yo.fastFormats,j5]:[yo.fullFormats,$T],i=t.formats||yo.formatNames;return IT(e,i,r,n),t.keywords&&D5.default(e),e};Gm.get=(e,t="full")=>{let n=(t==="fast"?yo.fastFormats:yo.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n};function IT(e,t,r,n){var i,s;(i=(s=e.opts.code).formats)!==null&&i!==void 0||(s.formats=Bm._`require("ajv-formats/dist/formats").${n}`);for(let o of t)e.addFormat(o,r[o])}OT.exports=ru=Gm;Object.defineProperty(ru,"__esModule",{value:!0});ru.default=Gm});var kT=w((wne,CT)=>{"use strict";var L5=Tf(),F5=Vm(),M5=Km();CT.exports=z5;function z5(e){let t=new L5({...e,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:F5});return M5(t),t.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),t}});var DT=w((bne,NT)=>{var xT=require("fs"),qT=require("path");function H5(e,t,r){let n=xT.readFileSync(qT.join(__dirname,"serializer.js")).toString(),i="",s="",o=t.defaultMeta();typeof o=="string"?s=o:s=o.$id||o.id;let a=r.indexOf("ajv")!==-1,u="";if(a){u+=`const ajv = buildAjv(${JSON.stringify(e.ajv||{})})
`;for(let[l,f]of Object.entries(t.schemas))l!==s&&(u+=`ajv.addSchema(${JSON.stringify(f.schema)}, "${l}")
`);i=xT.readFileSync(qT.join(__dirname,"ajv.js")).toString(),i=i.replace("'use strict'","").replace("module.exports = buildAjv","")}return`
  'use strict'

  ${n.replace("'use strict'","").replace("module.exports = ","")}
  ${i}

  const serializer = new Serializer(${JSON.stringify(e||{})})
  ${u}

  ${r.replace("return main","")}

  module.exports = main
      `}NT.exports=H5});var QT=w((Ene,Cf)=>{"use strict";var Qm=N1()(),ou=bl()({proto:!0}),jT=Symbol("fast-json-stringify.cloned"),{randomUUID:FT}=require("crypto"),LT=K1(),MT=W1(),U5=kT(),zT=2e4,Of="default",HT=["default","json-stringify"],au=`
  if (addComma) {
    json += ','
  } else {
    addComma = true
  }
`;function Wm(e,t){if(!LT(e)){t?t=`"${t}" `:t="";let r=LT.errors[0],n=new Error(`${t}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=Wm.errors,n}}function dr(e,t){return{schema:e.schema[t],schemaId:e.schemaId,jsonPointer:e.jsonPointer+"/"+t}}function $i(e,t){let r=t.indexOf("#");r===-1&&(r=t.length);let n=t.slice(0,r)||e.schemaId,i=t.slice(r)||"#",s=n+i,o;try{o=Rn.getSchema(s)}catch{throw new Error(`Cannot find reference "${t}"`)}if(o===void 0)throw new Error(`Cannot find reference "${t}"`);let a=o.schema;return a.$ref!==void 0?$i({schema:a,schemaId:n,jsonPointer:i},a.$ref):{schema:a,schemaId:n,jsonPointer:i}}var nu=new Map,iu=new Map,go=null,Rn=null,su=null;function V5(e,t){if(e=ou(e),nu.clear(),iu.clear(),su=[],t=t||{},Rn=U5(t.ajv),go=e.$id||FT(),Wm(e),Xm(e),Rn.addSchema(e,go),t.schema){let l=ou(t.schema);for(let f of Object.keys(l)){let c=l[f];Wm(c,f),Xm(c);let h=c.$id||f;c.$id!==void 0&&c.$id[0]==="#"&&(h=f+c.$id),Rn.getSchema(h)===void 0&&Rn.addSchema(c,h)}}if(t.rounding&&!["floor","ceil","round"].includes(t.rounding))throw new Error(`Unsupported integer rounding method ${t.rounding}`);if(t.largeArrayMechanism)if(HT.includes(t.largeArrayMechanism))Of=t.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${t.rounding}`);if(t.largeArraySize)if(!Number.isNaN(Number.parseInt(t.largeArraySize,10)))zT=t.largeArraySize;else throw new Error(`Unsupported large array size. Expected integer-like, got ${t.largeArraySize}`);let r=new MT(t),s=`
    function main (input) {
      let json = ''
      ${Ii({schema:e,schemaId:go,jsonPointer:"#"},"input")}
      return json
    }
    ${su.join(`
`)}
    return main
    `,o=["ajv","serializer",s];if(t.debugMode&&(t.mode="debug"),t.mode==="debug")return{code:o.join(`
`),ajv:Rn};if(t.mode==="standalone")return DT()(t,Rn,s);let u=new Function("ajv","serializer",s)(Rn,r);return Rn=null,go=null,su=null,nu.clear(),iu.clear(),u}var B5=["maxProperties","minProperties","required","properties","patternProperties","additionalProperties","dependencies"],G5=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],K5=["maxLength","minLength","pattern"],Q5=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function UT(e){for(var t of B5)if(t in e)return"object";for(var t of G5)if(t in e)return"array";for(var t of K5)if(t in e)return"string";for(var t of Q5)if(t in e)return"number";return e.type}function W5(e){let t=e.schema,r=t.patternProperties,n=`
      var properties = ${JSON.stringify(t.properties)} || {}
      var keys = Object.keys(obj)
      for (var i = 0; i < keys.length; i++) {
        if (properties[keys[i]]) continue
  `,i=dr(e,"patternProperties");return Object.keys(r).forEach(s=>{let o=dr(i,s);r[s].$ref&&(o=$i(o,r[s].$ref),r[s]=o.schema);try{RegExp(s)}catch(u){throw new Error(`${u.message}. Found at ${s} matching ${JSON.stringify(r[s])}`)}let a=Ii(o,"obj[keys[i]]");n+=`
      if (/${s.replace(/\\*\//g,"\\/")}/.test(keys[i])) {
        ${au}
        json += serializer.asString(keys[i]) + ':'
        ${a}
        continue
      }
    `}),t.additionalProperties&&(n+=VT(e)),n+=`
      }
  `,n}function VT(e){let t=e.schema.additionalProperties,r="";if(t===!0)return r+=`
        if (obj[keys[i]] !== undefined && typeof obj[keys[i]] !== 'function' && typeof obj[keys[i]] !== 'symbol') {
          ${au}
          json += serializer.asString(keys[i]) + ':' + JSON.stringify(obj[keys[i]])
        }
    `,r;let n=dr(e,"additionalProperties");n.schema.$ref&&(n=$i(n,n.schema.$ref));let i=Ii(n,"obj[keys[i]]");return r+=`
    ${au}
    json += serializer.asString(keys[i]) + ':'
    ${i}
  `,r}function J5(e){return`
      var properties = ${JSON.stringify(e.schema.properties)} || {}
      var keys = Object.keys(obj)
      for (var i = 0; i < keys.length; i++) {
        if (properties[keys[i]]) continue
        ${VT(e)}
      }
  `}function Y5(e){e.schema.$ref&&(e=$i(e,e.schema.$ref));let t=e.schema,r=t.required||[],n="",i=dr(e,"properties");Object.keys(t.properties||{}).forEach(s=>{let o=dr(i,s);t.properties[s].$ref&&(o=$i(e,t.properties[s].$ref),t.properties[s]=o.schema);let a=JSON.stringify(s),u=JSON.stringify(a);n+=`
      if (obj[${a}] !== undefined) {
        ${au}
        json += ${u} + ':'
      `,n+=Ii(o,`obj[${JSON.stringify(s)}]`);let l=t.properties[s].default;l!==void 0?n+=`
      } else {
        ${au}
        json += ${u} + ':' + ${JSON.stringify(JSON.stringify(l))}
      `:r.includes(s)&&(n+=`
      } else {
        throw new Error('${a} is required!')
      `),n+=`
      }
    `});for(let s of r)t.properties&&t.properties[s]!==void 0||(n+=`if (obj['${s}'] === undefined) throw new Error('"${s}" is required!')
`);return n}function BT(e,t,r){let n=dr(e,"allOf");for(let i=0;i<t.allOf.length;i++){let s=t.allOf[i];if(s.$ref){let a=dr(n,i);s=$i(a,s.$ref).schema}let o=s.type;if(o===void 0&&(o=UT(s)),o!==void 0){if(r.type!==void 0&&r.type!==o)throw new Error("allOf schemas have different type values");r.type=o}if(s.format!==void 0){if(r.format!==void 0&&r.format!==s.format)throw new Error("allOf schemas have different format values");r.format=s.format}if(s.nullable!==void 0){if(r.nullable!==void 0&&r.nullable!==s.nullable)throw new Error("allOf schemas have different nullable values");r.nullable=s.nullable}if(s.properties!==void 0&&(r.properties===void 0&&(r.properties={}),Object.assign(r.properties,s.properties)),s.additionalProperties!==void 0&&(r.additionalProperties===void 0&&(r.additionalProperties={}),Object.assign(r.additionalProperties,s.additionalProperties)),s.patternProperties!==void 0&&(r.patternProperties===void 0&&(r.patternProperties={}),Object.assign(r.patternProperties,s.patternProperties)),s.required!==void 0&&(r.required===void 0&&(r.required=[]),r.required.push(...s.required)),s.oneOf!==void 0&&(r.oneOf===void 0&&(r.oneOf=[]),r.oneOf.push(...s.oneOf)),s.anyOf!==void 0&&(r.anyOf===void 0&&(r.anyOf=[]),r.anyOf.push(...s.anyOf)),s.fjs_type!==void 0){if(r.fjs_type!==void 0&&r.fjs_type!==s.fjs_type)throw new Error("allOf schemas have different fjs_type values");r.fjs_type=s.fjs_type}s.allOf!==void 0&&BT(e,s,r)}delete r.allOf,r.$id=`merged_${FT()}`,Rn.addSchema(r),e.schemaId=r.$id,e.jsonPointer="#"}function Jm(e){let t=e.schema,r=Y5(e);return t.patternProperties?r+=W5(e):t.additionalProperties&&!t.patternProperties&&(r+=J5(e)),r}function Ym(e){let t=Qm({},e.schema),r=t.then,n=t.else||{additionalProperties:!0};delete t.if,delete t.then,delete t.else;let i=dr(e,"if"),o=`
    if (ajv.validate("${i.schemaId+i.jsonPointer}", obj)) {
  `,a=dr(e,"then");a.schema=Qm(t,r),r.if&&r.then?o+=Ym(a):o+=Jm(a),o+=`
    }
  `;let u=dr(e,"else");return u.schema=Qm(t,n),o+=`
      else {
    `,n.if&&n.then?o+=Ym(u):o+=Jm(u),o+=`
      }
    `,o}function X5(e){return`(${e} && typeof ${e}.toJSON === 'function')
    ? ${e}.toJSON()
    : ${e}
  `}function Z5(e){let t=e.schema;if(iu.has(t))return iu.get(t);let r=KT();iu.set(t,r);let n=e.schemaId===go?"":e.schemaId,i=`
    function ${r} (input) {
      // ${n+e.jsonPointer}
  `;return t.nullable&&(i+=`
      if (input === null) {
        return 'null';
      }
  `),i+=`
      var obj = ${X5("input")}
      var json = '{'
      var addComma = false
  `,t.if&&t.then?i+=Ym(e):i+=Jm(e),i+=`
      json += '}'
      return json
    }
  `,su.push(i),r}function e9(e){let t=e.schema;t.items||(t.items={});let r=dr(e,"items");if(t.items.$ref&&(t[jT]||(e.schema=ou(e.schema),t=e.schema,t[jT]=!0),e=$i(e,t.items.$ref),r=e,t.items=e.schema),nu.has(t.items))return nu.get(t.items);let n=KT();nu.set(t.items,n);let i=e.schemaId===go?"":e.schemaId,s=`
    function ${n} (obj) {
      // ${i+e.jsonPointer}
  `;if(t.nullable&&(s+=`
      if (obj === null) {
        return 'null';
      }
    `),s+=`
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value '\${obj}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,t.additionalItems||(s+=`
      if (arrayLength > ${t.items.length}) {
        throw new Error(\`Item at ${t.items.length} does not match schema definition.\`)
      }
    `),Of!=="default")if(Of==="json-stringify")s+=`if (arrayLength && arrayLength >= ${zT}) return JSON.stringify(obj)
`;else throw new Error(`Unsupported large array mechanism ${Of}`);if(s+=`
    let jsonOutput = ''
  `,Array.isArray(t.items)){for(let o=0;o<t.items.length;o++){let a=t.items[o],u=Ii(dr(r,o),`obj[${o}]`);s+=`
        if (${o} < arrayLength) {
          if (${GT(a.type,`[${o}]`)}) {
            let json = ''
            ${u}
            jsonOutput += json
            if (${o} < arrayLength - 1) {
              jsonOutput += ','
            }
          } else {
            throw new Error(\`Item at ${o} does not match schema definition.\`)
          }
        }
        `}t.additionalItems&&(s+=`
        for (let i = ${t.items.length}; i < arrayLength; i++) {
          let json = JSON.stringify(obj[i])
          jsonOutput += json
          if (i < arrayLength - 1) {
            jsonOutput += ','
          }
        }`)}else s+=`
      for (let i = 0; i < arrayLength; i++) {
        let json = ''
        ${Ii(r,"obj[i]")}
        jsonOutput += json
        if (i < arrayLength - 1) {
          jsonOutput += ','
        }
      }`;return s+="\n    return `[${jsonOutput}]`\n  }",su.push(s),n}function GT(e,t){let r;switch(e){case"null":r=`obj${t} === null`;break;case"string":r=`typeof obj${t} === 'string'`;break;case"integer":r=`Number.isInteger(obj${t})`;break;case"number":r=`Number.isFinite(obj${t})`;break;case"boolean":r=`typeof obj${t} === 'boolean'`;break;case"object":r=`obj${t} && typeof obj${t} === 'object' && obj${t}.constructor === Object`;break;case"array":r=`Array.isArray(obj${t})`;break;default:if(Array.isArray(e))r=`(${e.map(i=>GT(i,t)).join(" || ")})`;else throw new Error(`${e} unsupported`)}return r}var t9=0;function KT(){return"anonymous"+t9++}function Ii(e,t){let r=e.schema;if(typeof r=="boolean")return`json += JSON.stringify(${t})`;if(r.$ref&&(e=$i(e,r.$ref),r=e.schema),r.type===void 0){let a=UT(r);a&&(r.type=a)}if(r.allOf){let a=ou(r);BT(e,r,a),r=a,e.schema=a}let n=r.type,i=r.nullable===!0,s="",o;switch(r.fjs_type==="string"&&r.format===void 0&&Array.isArray(r.type)&&r.type.length===2&&(n="string"),n){case"null":s+="json += serializer.asNull()";break;case"string":{o=i?"serializer.asStringNullable.bind(serializer)":"serializer.asString.bind(serializer)",s+=`json += ${o}(${t})`;break}case"integer":o=i?"serializer.asIntegerNullable.bind(serializer)":"serializer.asInteger.bind(serializer)",s+=`json += ${o}(${t})`;break;case"number":o=i?"serializer.asNumberNullable.bind(serializer)":"serializer.asNumber.bind(serializer)",s+=`json += ${o}(${t})`;break;case"boolean":o=i?"serializer.asBooleanNullable.bind(serializer)":"serializer.asBoolean.bind(serializer)",s+=`json += ${o}(${t})`;break;case"object":r.format==="date-time"?o=i?"serializer.asDateTimeNullable.bind(serializer)":"serializer.asDateTime.bind(serializer)":r.format==="date"?o=i?"serializer.asDateNullable.bind(serializer)":"serializer.asDate.bind(serializer)":r.format==="time"?o=i?"serializer.asTimeNullable.bind(serializer)":"serializer.asTime.bind(serializer)":o=Z5(e),s+=`json += ${o}(${t})`;break;case"array":o=e9(e),s+=`json += ${o}(${t})`;break;case void 0:if(r.anyOf||r.oneOf){let a=r.anyOf?"anyOf":"oneOf",u=dr(e,a);for(let l=0;l<e.schema[a].length;l++){let f=dr(u,l),c=f.schemaId+f.jsonPointer,h=Ii(f,t);s+=`
            ${l===0?"if":"else if"}(ajv.validate("${c}", ${t}))
              ${h}
          `}s+=`
          else throw new Error(\`The value \${JSON.stringify(${t})} does not match schema definition.\`)
        `}else if(r9(r))s+=`
          json += JSON.stringify(${t})
        `;else if("const"in r)s+=`
          if(ajv.validate(${JSON.stringify(r)}, ${t}))
            json += '${JSON.stringify(r.const)}'
          else
            throw new Error(\`Item \${JSON.stringify(${t})} does not match schema definition.\`)
        `;else if(r.type===void 0)s+=`
          json += JSON.stringify(${t})
        `;else throw new Error(`${r.type} unsupported`);break;default:if(Array.isArray(n)){let a=n,u=r.nullable===!0||n.includes("null");u&&(a=a.filter(f=>f!=="null"),s+=`
            if (${t} === null) {
              json += null
            } else {`);let l=ou(e);a.forEach((f,c)=>{let h=c===0?"if":"else if";l.schema.type=f;let d=Ii(l,t);switch(f){case"string":{s+=`
                ${h}(${t} === null || typeof ${t} === "${f}" || ${t} instanceof RegExp || (typeof ${t} === "object" && Object.hasOwnProperty.call(${t}, "toString")))
                  ${d}
              `;break}case"array":{s+=`
                ${h}(Array.isArray(${t}))
                  ${d}
              `;break}case"integer":{s+=`
                ${h}(Number.isInteger(${t}) || ${t} === null)
                  ${d}
              `;break}case"object":{r.fjs_type?s+=`
                  ${h}(${t} instanceof Date || ${t} === null)
                    ${d}
                `:s+=`
                  ${h}(typeof ${t} === "object" || ${t} === null)
                    ${d}
                `;break}default:{s+=`
                ${h}(typeof ${t} === "${f}" || ${t} === null)
                  ${d}
              `;break}}}),s+=`
          else throw new Error(\`The value \${JSON.stringify(${t})} does not match schema definition.\`)
        `,u&&(s+=`
            }
          `)}else throw new Error(`${n} unsupported`)}return s}function Xm(e){if(e!==null){e.type==="string"?(e.fjs_type="string",e.type=["string","object"]):Array.isArray(e.type)&&e.type.includes("string")&&!e.type.includes("object")&&(e.fjs_type="string",e.type.push("object"));for(let t in e)typeof e[t]=="object"&&Xm(e[t])}}function r9(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t]!==void 0)return!1;return!0}Cf.exports=V5;Cf.exports.validLargeArrayMechanisms=HT;Cf.exports.restore=function({code:e,ajv:t}){let r=new MT;return Function.apply(null,["ajv","serializer",e]).apply(null,[t,r])}});var JT=w((_ne,WT)=>{"use strict";var n9=QT();function i9(){return function(t,r){let n=Object.assign({},r,{schema:t});return s9.bind(null,n)}}function s9(e,{schema:t}){return e.schema&&t.$id&&e.schema[t.$id]&&(e.schema={...e.schema},delete e.schema[t.$id]),n9(t,e)}WT.exports=i9});var Zn=w(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.checkMetadata=void 0;var o9=ae(),a9={keyword:"metadata",schemaType:"object",code(e){YT(e);let{gen:t,schema:r,it:n}=e;if((0,o9.alwaysValidSchema)(n,r))return;let i=t.name("valid");e.subschema({keyword:"metadata",jtdMetadata:!0},i),e.ok(i)}};function YT({it:e,keyword:t},r){if(e.jtdMetadata!==r)throw new Error(`JTD: "${t}" cannot be used in this schema location`)}uu.checkMetadata=YT;uu.default=a9});var kf=w(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.hasRef=void 0;var XT=gs(),lu=X(),u9=ao(),ZT=zr(),eA=em(),l9=Zn(),f9={keyword:"ref",schemaType:"string",code(e){(0,l9.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:i,it:s}=e,{schemaEnv:{root:o}}=s,a=t.name("valid");i.nullable?(t.var(a,(0,lu._)`${r} === null`),t.if((0,lu.not)(a),u)):(t.var(a,!1),u()),e.ok(a);function u(){var c;let h=(c=o.schema.definitions)===null||c===void 0?void 0:c[n];if(!h)throw new u9.default(s.opts.uriResolver,"",n,`No definition ${n}`);Zm(h)||!s.opts.inlineRefs?l(h):f(h)}function l(c){let h=XT.compileSchema.call(s.self,new XT.SchemaEnv({schema:c,root:o,schemaPath:`/definitions/${n}`})),d=(0,eA.getValidate)(e,h),p=t.const("_errs",ZT.default.errors);(0,eA.callRef)(e,d,h,h.$async),t.assign(a,(0,lu._)`${p} === ${ZT.default.errors}`)}function f(c){let h=t.scopeValue("schema",s.opts.code.source===!0?{ref:c,code:(0,lu.stringify)(c)}:{ref:c});e.subschema({schema:c,dataTypes:[],schemaPath:lu.nil,topSchemaRef:h,errSchemaPath:`/definitions/${n}`},a)}}};function Zm(e){for(let t in e){let r;if(t==="ref"||typeof(r=e[t])=="object"&&Zm(r))return!0}return!1}fu.hasRef=Zm;fu.default=f9});var ty=w(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});var c9=/t|\s/i,h9=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,d9=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,p9=[0,31,28,31,30,31,30,31,31,30,31,30,31];function rA(e,t){let r=e.split(c9);return r.length===2&&tA(r[0])&&m9(r[1])||t&&r.length===1&&tA(r[0])}ey.default=rA;function tA(e){let t=h9.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&(i<=p9[n]||n===2&&i===29&&(r%100===0?r%400===0:r%4===0))}function m9(e){let t=d9.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3],s=+(t[4]||0),o=+(t[5]||0);return r<=23&&n<=59&&i<=59||r-s===23&&n-o===59&&i===60}rA.code='require("ajv/dist/runtime/timestamp").default'});var vo=w(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.typeErrorParams=Oi.typeErrorMessage=Oi.typeError=void 0;var y9=X();function g9(e){return{message:t=>nA(t,e),params:t=>iA(t,e)}}Oi.typeError=g9;function nA({parentSchema:e},t){return e?.nullable?`must be ${t} or null`:`must be ${t}`}Oi.typeErrorMessage=nA;function iA({parentSchema:e},t){return(0,y9._)`{type: ${t}, nullable: ${!!e?.nullable}}`}Oi.typeErrorParams=iA});var ry=w(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.intRange=void 0;var Rr=X(),v9=ty(),w9=ae(),b9=Zn(),sA=vo();wo.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var E9={message:e=>(0,sA.typeErrorMessage)(e,e.schema),params:e=>(0,sA.typeErrorParams)(e,e.schema)};function _9(e){let{gen:t,data:r,it:n}=e,{timestamp:i,allowDate:s}=n.opts;if(i==="date")return(0,Rr._)`${r} instanceof Date `;let o=(0,w9.useFunc)(t,v9.default),a=s?(0,Rr._)`, true`:Rr.nil,u=(0,Rr._)`typeof ${r} == "string" && ${o}(${r}${a})`;return i==="string"?u:(0,Rr.or)((0,Rr._)`${r} instanceof Date`,u)}var S9={keyword:"type",schemaType:"string",error:E9,code(e){(0,b9.checkMetadata)(e);let{data:t,schema:r,parentSchema:n,it:i}=e,s;switch(r){case"boolean":case"string":s=(0,Rr._)`typeof ${t} == ${r}`;break;case"timestamp":{s=_9(e);break}case"float32":case"float64":s=(0,Rr._)`typeof ${t} == "number"`;break;default:{let o=r;if(s=(0,Rr._)`typeof ${t} == "number" && isFinite(${t}) && !(${t} % 1)`,!i.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(s=(0,Rr._)`${s} && ${t} >= 0`);else{let[a,u]=wo.intRange[o];s=(0,Rr._)`${s} && ${t} >= ${a} && ${t} <= ${u}`}}}e.pass(n.nullable?(0,Rr.or)((0,Rr._)`${t} === null`,s):s)}};wo.default=S9});var Eo=w(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.checkNullableObject=bo.checkNullable=void 0;var xf=X();function oA({gen:e,data:t,parentSchema:r},n=xf.nil){let i=e.name("valid");return r.nullable?(e.let(i,(0,xf._)`${t} === null`),n=(0,xf.not)(i)):e.let(i,!1),[i,n]}bo.checkNullable=oA;function P9(e,t){let[r,n]=oA(e,t);return[r,(0,xf._)`${n} && typeof ${e.data} == "object" && !Array.isArray(${e.data})`]}bo.checkNullableObject=P9});var aA=w(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});var Ci=X(),R9=Zn(),T9=Eo(),A9={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Ci._)`{allowedValues: ${e}}`},$9={keyword:"enum",schemaType:"array",error:A9,code(e){(0,R9.checkMetadata)(e);let{gen:t,data:r,schema:n,schemaValue:i,parentSchema:s,it:o}=e;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,u=(0,Ci._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let f;[a,f]=(0,T9.checkNullable)(e,u),t.if(f,l)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,Ci.and)(u,(0,Ci.or)(...n.map(f=>(0,Ci._)`${r} === ${f}`))),s.nullable&&(a=(0,Ci.or)((0,Ci._)`${r} === null`,a))}e.pass(a);function l(){t.forOf("v",i,f=>t.if((0,Ci._)`${a} = ${r} === ${f}`,()=>t.break()))}}};ny.default=$9});var lA=w(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});var I9=ae(),O9=Nt(),uA=X(),C9=Zn(),k9=Eo(),x9=vo(),q9={keyword:"elements",schemaType:"object",error:(0,x9.typeError)("array"),code(e){(0,C9.checkMetadata)(e);let{gen:t,data:r,schema:n,it:i}=e;if((0,I9.alwaysValidSchema)(i,n))return;let[s]=(0,k9.checkNullable)(e);t.if((0,uA.not)(s),()=>t.if((0,uA._)`Array.isArray(${r})`,()=>t.assign(s,(0,O9.validateArray)(e)),()=>e.error())),e.ok(s)}};iy.default=q9});var oy=w(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.validateProperties=ki.error=void 0;var sy=Nt(),fA=ae(),Es=X(),N9=Zn(),D9=Eo(),cA=vo(),_o;(function(e){e.Additional="additional",e.Missing="missing"})(_o||(_o={}));ki.error={message:e=>{let{params:t}=e;return t.propError?t.propError===_o.Additional?"must NOT have additional properties":`must have property '${t.missingProperty}'`:(0,cA.typeErrorMessage)(e,"object")},params:e=>{let{params:t}=e;return t.propError?t.propError===_o.Additional?(0,Es._)`{error: ${t.propError}, additionalProperty: ${t.additionalProperty}}`:(0,Es._)`{error: ${t.propError}, missingProperty: ${t.missingProperty}}`:(0,cA.typeErrorParams)(e,"object")}};var j9={keyword:"properties",schemaType:"object",error:ki.error,code:hA};function hA(e){(0,N9.checkMetadata)(e);let{gen:t,data:r,parentSchema:n,it:i}=e,{additionalProperties:s,nullable:o}=n;if(i.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(d())throw new Error("JTD: properties and optionalProperties have common members");let[a,u]=p("properties"),[l,f]=p("optionalProperties");if(u.length===0&&f.length===0&&s)return;let[c,h]=i.jtdDiscriminator===void 0?(0,D9.checkNullableObject)(e,r):[t.let("valid",!1),!0];t.if(h,()=>t.assign(c,!0).block(()=>{m(u,"properties",!0),m(f,"optionalProperties"),s||b()})),e.pass(c);function d(){let g=n.properties,y=n.optionalProperties;if(!(g&&y))return!1;for(let R in g)if(Object.prototype.hasOwnProperty.call(y,R))return!0;return!1}function p(g){let y=n[g],R=y?(0,sy.allSchemaProperties)(y):[];if(i.jtdDiscriminator&&R.some(_=>_===i.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${g}`);let $=R.filter(_=>!(0,fA.alwaysValidSchema)(i,y[_]));return[R,$]}function m(g,y,R){let $=t.var("valid");for(let I of g)t.if((0,sy.propertyInData)(t,r,I,i.opts.ownProperties),()=>v(I,y,$),()=>_(I)),e.ok($);function _(I){R?(t.assign($,!1),e.error(!1,{propError:_o.Missing,missingProperty:I},{schemaPath:I})):t.assign($,!0)}}function v(g,y,R){e.subschema({keyword:y,schemaProp:g,dataProp:g},R)}function b(){t.forIn("key",r,g=>{let y=i.jtdDiscriminator===void 0?a:[i.jtdDiscriminator].concat(a),R=P(g,y,"properties"),$=P(g,l,"optionalProperties"),_=R===!0?$:$===!0?R:(0,Es.and)(R,$);t.if(_,()=>{i.opts.removeAdditional?t.code((0,Es._)`delete ${r}[${g}]`):(e.error(!1,{propError:_o.Additional,additionalProperty:g},{instancePath:g,parentSchema:!0}),i.opts.allErrors||t.break())})})}function P(g,y,R){let $;if(y.length>8){let _=(0,fA.schemaRefOrVal)(i,n[R],R);$=(0,Es.not)((0,sy.isOwnProperty)(t,_,g))}else y.length?$=(0,Es.and)(...y.map(_=>(0,Es._)`${g} !== ${_}`)):$=!0;return $}}ki.validateProperties=hA;ki.default=j9});var pA=w(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});var dA=oy(),L9={keyword:"optionalProperties",schemaType:"object",error:dA.error,code(e){e.parentSchema.properties||(0,dA.validateProperties)(e)}};ay.default=L9});var yA=w(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});var _s=X(),F9=Zn(),M9=Eo(),mA=vo(),qf=Fm(),z9={message:e=>{let{schema:t,params:r}=e;return r.discrError?r.discrError===qf.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in mapping`:(0,mA.typeErrorMessage)(e,"object")},params:e=>{let{schema:t,params:r}=e;return r.discrError?(0,_s._)`{error: ${r.discrError}, tag: ${t}, tagValue: ${r.tag}}`:(0,mA.typeErrorParams)(e,"object")}},H9={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:z9,code(e){(0,F9.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:i}=e,[s,o]=(0,M9.checkNullableObject)(e,r);t.if(o),a(),t.elseIf((0,_s.not)(s)),e.error(),t.endIf(),e.ok(s);function a(){let f=t.const("tag",(0,_s._)`${r}${(0,_s.getProperty)(n)}`);t.if((0,_s._)`${f} === undefined`),e.error(!1,{discrError:qf.DiscrError.Tag,tag:f}),t.elseIf((0,_s._)`typeof ${f} == "string"`),u(f),t.else(),e.error(!1,{discrError:qf.DiscrError.Tag,tag:f},{instancePath:n}),t.endIf()}function u(f){t.if(!1);for(let c in i.mapping)t.elseIf((0,_s._)`${f} === ${c}`),t.assign(s,l(c));t.else(),e.error(!1,{discrError:qf.DiscrError.Mapping,tag:f},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),t.endIf()}function l(f){let c=t.name("valid");return e.subschema({keyword:"mapping",schemaProp:f,jtdDiscriminator:n},c),c}}};uy.default=H9});var wA=w(ly=>{"use strict";Object.defineProperty(ly,"__esModule",{value:!0});var gA=ae(),vA=X(),U9=Zn(),V9=Eo(),B9=vo(),G9={keyword:"values",schemaType:"object",error:(0,B9.typeError)("object"),code(e){(0,U9.checkMetadata)(e);let{gen:t,data:r,schema:n,it:i}=e;if((0,gA.alwaysValidSchema)(i,n))return;let[s,o]=(0,V9.checkNullableObject)(e,r);t.if(o),t.assign(s,a()),t.elseIf((0,vA.not)(s)),e.error(),t.endIf(),e.ok(s);function a(){let u=t.name("valid");if(i.allErrors){let f=t.let("valid",!0);return l(()=>t.assign(f,!1)),f}return t.var(u,!0),l(()=>t.break()),u;function l(f){t.forIn("key",r,c=>{e.subschema({keyword:"values",dataProp:c,dataPropType:gA.Type.Str},u),t.if((0,vA.not)(u),f)})}}}};ly.default=G9});var bA=w(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});var K9=Nt(),Q9={keyword:"union",schemaType:"array",trackErrors:!0,code:K9.validateUnion,error:{message:"must match a schema in union"}};fy.default=Q9});var EA=w(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});var W9=kf(),J9=ry(),Y9=aA(),X9=lA(),Z9=oy(),e8=pA(),t8=yA(),r8=wA(),n8=bA(),i8=Zn(),s8=["definitions",W9.default,J9.default,Y9.default,X9.default,Z9.default,e8.default,t8.default,r8.default,n8.default,i8.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];cy.default=s8});var RA=w(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});var ei=e=>{let t={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return e&&(t.definitions={values:{ref:"schema"}}),t},o8=e=>({optionalProperties:ei(e)}),a8=e=>({properties:{ref:{type:"string"}},optionalProperties:ei(e)}),u8=e=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:ei(e)}),l8=e=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:ei(e)}),f8=e=>({properties:{elements:{ref:"schema"}},optionalProperties:ei(e)}),SA=e=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...ei(e)}}),PA=e=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...ei(e)}}),c8=e=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[SA(!1),PA(!1)]}}}},optionalProperties:ei(e)}),h8=e=>({properties:{values:{ref:"schema"}},optionalProperties:ei(e)}),_A=e=>({metadata:{union:[o8,a8,u8,l8,f8,SA,PA,c8,h8].map(t=>t(e))}}),d8={definitions:{schema:_A(!1)},..._A(!0)};hy.default=d8});var dy=w(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.jtdForms=void 0;Nf.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var AA=w(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});var py=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p8={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function TA(e){return py.lastIndex=0,'"'+(py.test(e)?e.replace(py,t=>{let r=p8[t];return typeof r=="string"?r:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):e)+'"'}my.default=TA;TA.code='require("ajv/dist/runtime/quote").default'});var qA=w(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});var m8=dy(),IA=gs(),pe=X(),y8=ao(),Le=zr(),g8=Nt(),v8=kf(),w8=ae(),b8=AA(),E8={elements:S8,values:P8,discriminator:R8,properties:$A,optionalProperties:$A,enum:cu,type:T8,ref:$8};function OA(e,t){let r=IA.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new pe.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a=o.scopeName("serialize"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:Le.default.data},l;try{this._compilations.add(e),e.serializeName=a,o.func(a,Le.default.data,!1,()=>{o.let(Le.default.json,(0,pe.str)``),hu(u),o.return(Le.default.json)}),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(Le.default.scope)}return ${f}`;let h=new Function(`${Le.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:h}),e.serialize=h}catch(f){throw l&&this.logger.error("Error compiling serializer, function code:",l),delete e.serialize,delete e.serializeName,f}finally{this._compilations.delete(e)}return e}yy.default=OA;function hu(e){let t;for(let r of m8.jtdForms)if(r in e.schema){t=r;break}_8(e,t?E8[t]:O8)}function _8(e,t){let{gen:r,schema:n,data:i}=e;if(!n.nullable)return t(e);r.if((0,pe._)`${i} === undefined || ${i} === null`,()=>r.add(Le.default.json,(0,pe._)`"null"`),()=>t(e))}function S8(e){let{gen:t,schema:r,data:n}=e;t.add(Le.default.json,(0,pe.str)`[`);let i=t.let("first",!0);t.forOf("el",n,s=>{xA(e,i),hu({...e,schema:r.elements,data:s})}),t.add(Le.default.json,(0,pe.str)`]`)}function P8(e){let{gen:t,schema:r,data:n}=e;t.add(Le.default.json,(0,pe.str)`{`);let i=t.let("first",!0);t.forIn("key",n,s=>CA(e,s,r.values,i)),t.add(Le.default.json,(0,pe.str)`}`)}function CA(e,t,r,n){let{gen:i,data:s}=e;xA(e,n),cu({...e,data:t}),i.add(Le.default.json,(0,pe.str)`:`);let o=i.const("value",(0,pe._)`${s}${(0,pe.getProperty)(t)}`);hu({...e,schema:r,data:o})}function R8(e){let{gen:t,schema:r,data:n}=e,{discriminator:i}=r;t.add(Le.default.json,(0,pe.str)`{${JSON.stringify(i)}:`);let s=t.const("tag",(0,pe._)`${n}${(0,pe.getProperty)(i)}`);cu({...e,data:s}),t.if(!1);for(let o in r.mapping){t.elseIf((0,pe._)`${s} === ${o}`);let a=r.mapping[o];kA({...e,schema:a},i)}t.endIf(),t.add(Le.default.json,(0,pe.str)`}`)}function $A(e){let{gen:t}=e;t.add(Le.default.json,(0,pe.str)`{`),kA(e),t.add(Le.default.json,(0,pe.str)`}`)}function kA(e,t){let{gen:r,schema:n,data:i}=e,{properties:s,optionalProperties:o}=n,a=c(s),u=c(o),l=h(a.concat(u)),f=!t;for(let v of a)p(v,s[v],d(v));for(let v of u){let b=d(v);r.if((0,pe.and)((0,pe._)`${b} !== undefined`,(0,g8.isOwnProperty)(r,i,v)),()=>p(v,o[v],b))}n.additionalProperties&&r.forIn("key",i,v=>r.if(m(v,l),()=>CA(e,v,{},r.let("first",f))));function c(v){return v?Object.keys(v):[]}function h(v){if(t&&v.push(t),new Set(v).size!==v.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return v}function d(v){return r.const("value",(0,pe._)`${i}${(0,pe.getProperty)(v)}`)}function p(v,b,P){f?f=!1:r.add(Le.default.json,(0,pe.str)`,`),r.add(Le.default.json,(0,pe.str)`${JSON.stringify(v)}:`),hu({...e,schema:b,data:P})}function m(v,b){return b.length?(0,pe.and)(...b.map(P=>(0,pe._)`${v} !== ${P}`)):!0}}function T8(e){let{gen:t,schema:r,data:n}=e;switch(r.type){case"boolean":t.add(Le.default.json,(0,pe._)`${n} ? "true" : "false"`);break;case"string":cu(e);break;case"timestamp":t.if((0,pe._)`${n} instanceof Date`,()=>t.add(Le.default.json,(0,pe._)`'"' + ${n}.toISOString() + '"'`),()=>cu(e));break;default:A8(e)}}function cu({gen:e,data:t}){e.add(Le.default.json,(0,pe._)`${(0,w8.useFunc)(e,b8.default)}(${t})`)}function A8({gen:e,data:t}){e.add(Le.default.json,(0,pe._)`"" + ${t}`)}function $8(e){let{gen:t,self:r,data:n,definitions:i,schema:s,schemaEnv:o}=e,{ref:a}=s,u=i[a];if(!u)throw new y8.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,v8.hasRef)(u))return hu({...e,schema:u});let{root:l}=o,f=OA.call(r,new IA.SchemaEnv({schema:u,root:l}),i);t.add(Le.default.json,(0,pe._)`${I8(t,f)}(${n})`)}function I8(e,t){return t.serialize?e.scopeValue("serialize",{ref:t.serialize}):(0,pe._)`${e.scopeValue("wrapper",{ref:t})}.serialize`}function O8({gen:e,data:t}){e.add(Le.default.json,(0,pe._)`JSON.stringify(${t})`)}function xA({gen:e},t){e.if(t,()=>e.assign(t,!1),()=>e.add(Le.default.json,(0,pe.str)`,`))}});var DA=w(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.parseJsonString=qi.parseJsonNumber=qi.parseJson=void 0;var C8=/position\s(\d+)$/;function ti(e,t){let r;ti.message=void 0;let n;t&&(e=e.slice(t));try{return ti.position=t+e.length,JSON.parse(e)}catch(i){if(n=C8.exec(i.message),!n){ti.message="unexpected end";return}r=+n[1];let s=e[r];e=e.slice(0,r),ti.position=t+r;try{return JSON.parse(e)}catch{ti.message=`unexpected token ${s}`;return}}}qi.parseJson=ti;ti.message=void 0;ti.position=0;ti.code='require("ajv/dist/runtime/parseJson").parseJson';function ri(e,t,r){let n="",i;if(ri.message=void 0,e[t]==="-"&&(n+="-",t++),e[t]==="0")n+="0",t++;else if(!s(r)){o();return}if(r)return ri.position=t,+n;if(e[t]==="."&&(n+=".",t++,!s())){o();return}if(i=e[t],(i==="e"||i==="E")&&(n+="e",t++,i=e[t],(i==="+"||i==="-")&&(n+=i,t++),!s())){o();return}return ri.position=t,+n;function s(a){let u=!1;for(;i=e[t],i>="0"&&i<="9"&&(a===void 0||a-- >0);)u=!0,n+=i,t++;return u}function o(){ri.position=t,ri.message=t<e.length?`unexpected token ${e[t]}`:"unexpected end"}}qi.parseJsonNumber=ri;ri.message=void 0;ri.position=0;ri.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var NA={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},k8="a".charCodeAt(0),x8="0".charCodeAt(0);function xi(e,t){let r="",n;for(xi.message=void 0;n=e[t++],n!=='"';)if(n==="\\")if(n=e[t],n in NA)r+=NA[n],t++;else if(n==="u"){t++;let s=4,o=0;for(;s--;){if(o<<=4,n=e[t],n===void 0){i("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-k8+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-x8;else{i(`unexpected token ${n}`);return}t++}r+=String.fromCharCode(o)}else{i(`unexpected token ${n}`);return}else if(n===void 0){i("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{i(`unexpected token ${n}`);return}return xi.position=t,r;function i(s){xi.position=t,xi.message=s}}qi.parseJsonString=xi;xi.message=void 0;xi.position=0;xi.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var KA=w(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});var q8=dy(),MA=gs(),Y=X(),N8=ao(),he=zr(),D8=Nt(),j8=kf(),L8=ry(),wy=DA(),zA=ae(),F8=ty(),M8={elements:V8,values:B8,discriminator:K8,properties:jA,optionalProperties:jA,enum:W8,type:Q8,ref:J8};function HA(e,t){let r=MA.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Y.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a=o.scopeName("parse"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:he.default.data,parseName:a,char:o.name("c")},l;try{this._compilations.add(e),e.parseName=a,z8(u),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(he.default.scope)}return ${f}`;let h=new Function(`${he.default.scope}`,l)(this.scope.get());this.scope.value(a,{ref:h}),e.parse=h}catch(f){throw l&&this.logger.error("Error compiling parser, function code:",l),delete e.parse,delete e.parseName,f}finally{this._compilations.delete(e)}return e}Py.default=HA;var vy=(0,Y._)`undefined`;function z8(e){let{gen:t,parseName:r,char:n}=e;t.func(r,(0,Y._)`${he.default.json}, ${he.default.jsonPos}, ${he.default.jsonPart}`,!1,()=>{t.let(he.default.data),t.let(n),t.assign((0,Y._)`${r}.message`,vy),t.assign((0,Y._)`${r}.position`,vy),t.assign(he.default.jsonPos,(0,Y._)`${he.default.jsonPos} || 0`),t.const(he.default.jsonLen,(0,Y._)`${he.default.json}.length`),Df(e),Sy(e),t.if(he.default.jsonPart,()=>{t.assign((0,Y._)`${r}.position`,he.default.jsonPos),t.return(he.default.data)}),t.if((0,Y._)`${he.default.jsonPos} === ${he.default.jsonLen}`,()=>t.return(he.default.data)),So(e)})}function Df(e){let t;for(let r of q8.jtdForms)if(r in e.schema){t=r;break}t?U8(e,M8[t]):Ey(e)}var H8=FA(!0,FA(!1,So));function U8(e,t){let{gen:r,schema:n,data:i}=e;if(!n.nullable)return t(e);du(e,"null",t,()=>r.assign(i,null))}function V8(e){let{gen:t,schema:r,data:n}=e;Tn(e,"[");let i=t.let("i",0);t.assign(n,(0,Y._)`[]`),by(e,"]",()=>{let s=t.let("el");Df({...e,schema:r.elements,data:s}),t.assign((0,Y._)`${n}[${i}++]`,s)})}function B8(e){let{gen:t,schema:r,data:n}=e;Tn(e,"{"),t.assign(n,(0,Y._)`{}`),by(e,"}",()=>G8(e,r.values))}function by(e,t,r){UA(e,t,r),Tn(e,t)}function UA(e,t,r){let{gen:n}=e;n.for((0,Y._)`;${he.default.jsonPos}<${he.default.jsonLen} && ${jf(1)}!==${t};`,()=>{r(),du(e,",",()=>n.break(),i)});function i(){du(e,t,()=>{},So)}}function G8(e,t){let{gen:r}=e,n=r.let("key");Ss({...e,data:n}),Tn(e,":"),BA(e,n,t)}function K8(e){let{gen:t,data:r,schema:n}=e,{discriminator:i,mapping:s}=n;Tn(e,"{"),t.assign(r,(0,Y._)`{}`);let o=t.const("pos",he.default.jsonPos),a=t.let("value"),u=t.let("tag");UA(e,"}",()=>{let l=t.let("key");Ss({...e,data:l}),Tn(e,":"),t.if((0,Y._)`${l} === ${i}`,()=>{Ss({...e,data:u}),t.assign((0,Y._)`${r}[${l}]`,u),t.break()},()=>Ey({...e,data:a}))}),t.assign(he.default.jsonPos,o),t.if((0,Y._)`${u} === undefined`),ni(e,(0,Y.str)`discriminator tag not found`);for(let l in s)t.elseIf((0,Y._)`${u} === ${l}`),VA({...e,schema:s[l]},i);t.else(),ni(e,(0,Y.str)`discriminator value not in schema`),t.endIf()}function jA(e){let{gen:t,data:r}=e;Tn(e,"{"),t.assign(r,(0,Y._)`{}`),VA(e)}function VA(e,t){let{gen:r,schema:n,data:i}=e,{properties:s,optionalProperties:o,additionalProperties:a}=n;if(by(e,"}",()=>{let u=r.let("key");if(Ss({...e,data:u}),Tn(e,":"),r.if(!1),LA(e,u,s),LA(e,u,o),t){r.elseIf((0,Y._)`${u} === ${t}`);let l=r.let("tag");Ss({...e,data:l})}r.else(),a?Ey({...e,data:(0,Y._)`${i}[${u}]`}):ni(e,(0,Y.str)`property ${u} not allowed`),r.endIf()}),s){let u=(0,D8.hasPropFunc)(r),l=(0,Y.and)(...Object.keys(s).map(f=>(0,Y._)`${u}.call(${i}, ${f})`));r.if((0,Y.not)(l),()=>ni(e,(0,Y.str)`missing required properties`))}}function LA(e,t,r={}){let{gen:n}=e;for(let i in r)n.elseIf((0,Y._)`${t} === ${i}`),BA(e,t,r[i])}function BA(e,t,r){Df({...e,schema:r,data:(0,Y._)`${e.data}[${t}]`})}function Q8(e){let{gen:t,schema:r,data:n,self:i}=e;switch(r.type){case"boolean":H8(e);break;case"string":Ss(e);break;case"timestamp":{Ss(e);let s=(0,zA.useFunc)(t,F8.default),{allowDate:o,parseDate:a}=i.opts,u=o?(0,Y._)`!${s}(${n}, true)`:(0,Y._)`!${s}(${n})`,l=a?(0,Y.or)(u,(0,Y._)`(${n} = new Date(${n}), false)`,(0,Y._)`isNaN(${n}.valueOf())`):u;t.if(l,()=>ni(e,(0,Y.str)`invalid timestamp`));break}case"float32":case"float64":gy(e);break;default:{let s=r.type;if(!i.opts.int32range&&(s==="int32"||s==="uint32"))gy(e,16),s==="uint32"&&t.if((0,Y._)`${n} < 0`,()=>ni(e,(0,Y.str)`integer out of range`));else{let[o,a,u]=L8.intRange[s];gy(e,u),t.if((0,Y._)`${n} < ${o} || ${n} > ${a}`,()=>ni(e,(0,Y.str)`integer out of range`))}}}}function Ss(e){Tn(e,'"'),_y(e,wy.parseJsonString)}function W8(e){let{gen:t,data:r,schema:n}=e,i=n.enum;Tn(e,'"'),t.if(!1);for(let s of i){let o=JSON.stringify(s).slice(1);t.elseIf((0,Y._)`${jf(o.length)} === ${o}`),t.assign(r,(0,Y.str)`${s}`),t.add(he.default.jsonPos,o.length)}t.else(),So(e),t.endIf()}function gy(e,t){let{gen:r}=e;Sy(e),r.if((0,Y._)`"-0123456789".indexOf(${jf(1)}) < 0`,()=>So(e),()=>_y(e,wy.parseJsonNumber,t))}function FA(e,t){return r=>{let{gen:n,data:i}=r;du(r,`${e}`,()=>t(r),()=>n.assign(i,e))}}function J8(e){let{gen:t,self:r,definitions:n,schema:i,schemaEnv:s}=e,{ref:o}=i,a=n[o];if(!a)throw new N8.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,j8.hasRef)(a))return Df({...e,schema:a});let{root:u}=s,l=HA.call(r,new MA.SchemaEnv({schema:a,root:u}),n);GA(e,Y8(t,l),!0)}function Y8(e,t){return t.parse?e.scopeValue("parse",{ref:t.parse}):(0,Y._)`${e.scopeValue("wrapper",{ref:t})}.parse`}function Ey(e){_y(e,wy.parseJson)}function _y(e,t,r){GA(e,(0,zA.useFunc)(e.gen,t),r)}function GA(e,t,r){let{gen:n,data:i}=e;n.assign(i,(0,Y._)`${t}(${he.default.json}, ${he.default.jsonPos}${r?(0,Y._)`, ${r}`:Y.nil})`),n.assign(he.default.jsonPos,(0,Y._)`${t}.position`),n.if((0,Y._)`${i} === undefined`,()=>ni(e,(0,Y._)`${t}.message`))}function Tn(e,t){du(e,t,So)}function du(e,t,r,n){let{gen:i}=e,s=t.length;Sy(e),i.if((0,Y._)`${jf(s)} === ${t}`,()=>{i.add(he.default.jsonPos,s),n?.(e)},()=>r(e))}function Sy({gen:e,char:t}){e.code((0,Y._)`while((${t}=${he.default.json}[${he.default.jsonPos}],${t}===" "||${t}==="\\n"||${t}==="\\r"||${t}==="\\t"))${he.default.jsonPos}++;`)}function jf(e){return e===1?(0,Y._)`${he.default.json}[${he.default.jsonPos}]`:(0,Y._)`${he.default.json}.slice(${he.default.jsonPos}, ${he.default.jsonPos}+${e})`}function So(e){ni(e,(0,Y._)`"unexpected token " + ${he.default.json}[${he.default.jsonPos}]`)}function ni({gen:e,parseName:t},r){e.assign((0,Y._)`${t}.message`,r),e.assign((0,Y._)`${t}.position`,he.default.jsonPos),e.return(vy)}});var WA=w((pt,QA)=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.CodeGen=pt.Name=pt.nil=pt.stringify=pt.str=pt._=pt.KeywordCxt=void 0;var X8=Xp(),Z8=EA(),eG=RA(),tG=qA(),rG=KA(),Ry="JTD-meta-schema",Lf=class extends X8.default{constructor(t={}){super({...t,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(Z8.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(eG.default,Ry,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ry)?Ry:void 0)}compileSerializer(t){let r=this._addSchema(t);return r.serialize||this._compileSerializer(r)}compileParser(t){let r=this._addSchema(t);return r.parse||this._compileParser(r)}_compileSerializer(t){if(tG.default.call(this,t,t.schema.definitions||{}),!t.serialize)throw new Error("ajv implementation error");return t.serialize}_compileParser(t){if(rG.default.call(this,t,t.schema.definitions||{}),!t.parse)throw new Error("ajv implementation error");return t.parse}};QA.exports=pt=Lf;Object.defineProperty(pt,"__esModule",{value:!0});pt.default=Lf;var nG=oo();Object.defineProperty(pt,"KeywordCxt",{enumerable:!0,get:function(){return nG.KeywordCxt}});var Po=X();Object.defineProperty(pt,"_",{enumerable:!0,get:function(){return Po._}});Object.defineProperty(pt,"str",{enumerable:!0,get:function(){return Po.str}});Object.defineProperty(pt,"stringify",{enumerable:!0,get:function(){return Po.stringify}});Object.defineProperty(pt,"nil",{enumerable:!0,get:function(){return Po.nil}});Object.defineProperty(pt,"Name",{enumerable:!0,get:function(){return Po.Name}});Object.defineProperty(pt,"CodeGen",{enumerable:!0,get:function(){return Po.CodeGen}})});var XA=w((Une,Ay)=>{"use strict";var iG=Tf().default,sG=WA(),oG=Vm(),YA=Symbol.for("fastify.ajv-compiler.reference"),JA={coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:oG,addUsedSchema:!1,allErrors:!1};function aG(){let e=new Map;return function(r,n){let i=JSON.stringify(r),s=JSON.stringify(n.customOptions),o=`${i}${s}`;if(e.has(o))return e.get(o);let a=new Ty(r,n),u=a.buildValidatorFunction.bind(a);return e.set(o,u),n.customOptions.code!==void 0&&(u[YA]=a),u}}var Ty=class{constructor(t,r){r.mode==="JTD"?this.ajv=new sG(Object.assign({},JA,r.customOptions)):this.ajv=new iG(Object.assign({},JA,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let s of r.plugins)Array.isArray(s)?(n=n&&s[0].name!=="formatsPlugin",s[0](this.ajv,s[1])):(n=n&&s.name!=="formatsPlugin",s(this.ajv));n&&Km()(this.ajv);let i=Object.values(t);for(let s of i)this.ajv.addSchema(s)}buildValidatorFunction({schema:t}){if(t.$id){let r=this.ajv.getSchema(t.$id);if(r)return r}return this.ajv.compile(t)}};Ay.exports=aG;Ay.exports.AjvReference=YA});var $y=w((Vne,ZA)=>{"use strict";var{buildSchemas:uG}=la(),lG=JT(),fG=XA();function cG(e,t){if(e)return new Ro(e,t);let r={buildValidator:fG(),buildSerializer:lG()};t&&t.compilersFactory&&(r=Object.assign(r,t.compilersFactory));let n={bucket:t&&t.bucket||uG,compilersFactory:r};return new Ro(void 0,n)}var Ro=class{constructor(t,r){this.opts=r||t&&t.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,t?(this.schemaBucket=this.opts.bucket(t.getSchemas()),this.validatorCompiler=t.getValidatorCompiler(),this.serializerCompiler=t.getSerializerCompiler(),this.parent=t):this.schemaBucket=this.opts.bucket()}add(t){return this.addedSchemas=!0,this.schemaBucket.add(t)}getSchema(t){return this.schemaBucket.getSchema(t)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(t){this.validatorCompiler=t}setSerializerCompiler(t){this.serializerCompiler=t}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(t){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),t.ajv))}setupSerializer(t){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),t.serializerOpts))}};Ro.buildSchemaController=cG;ZA.exports=Ro});var qy=w((Bne,xy)=>{"use strict";var Iy=Fd(),Cy=require("assert"),ky=Symbol.for("registered-plugin"),{kTestInternals:hG}=ht(),{exist:dG,existReply:pG,existRequest:mG}=Qd(),{FST_ERR_PLUGIN_VERSION_MISMATCH:yG}=sr();function pu(e){return e[Symbol.for("plugin-meta")]}function gG(e){let t=e$(e);if(t)return t;let r=require.cache,n=Object.keys(r);for(let i=0;i<n.length;i++){let s=n[i];if(r[s].exports===e)return s}return e.name?e.name:null}function vG(e){return e.toString().split(`
`).slice(0,2).map(t=>t.trim()).join(" -- ")}function e$(e){return e[Symbol.for("fastify.display-name")]}function t$(e){return!!e[Symbol.for("skip-override")]}function r$(e){let t=pu(e);if(!t)return;let r=t.dependencies;!r||(Cy(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{Cy(this[ky].indexOf(n)>-1,`The dependency '${n}' of plugin '${t.name}' is not registered`)}))}function n$(e){let t=pu(e);if(!t)return;let{decorators:r,name:n}=t;!r||(r.fastify&&Oy(this,"Fastify",r.fastify,n),r.reply&&Oy(this,"Reply",r.reply,n),r.request&&Oy(this,"Request",r.request,n))}var wG={Fastify:dG,Request:mG,Reply:pG};function Oy(e,t,r,n){Cy(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(i=>{let s=typeof n=="string"?` required by '${n}'`:"";if(!wG[t].call(e,i))throw new Error(`The decorator '${i}'${s} is not present in ${t}`)})}function bG(e){let t=pu(e);if(!t)return;let r=t.fastify,n=/-rc.+$/.test(this.version);if(!(n===!0&&Iy.gt(this.version,Iy.coerce(r))===!0)&&r&&Iy.satisfies(this.version,r,{includePrerelease:n})===!1)throw new yG(t.name,r,this.version)}function EG(e){let t=pu(e);if(!t)return;let r=t.name;!r||this[ky].push(r)}function _G(e){return EG.call(this,e),bG.call(this,e),n$.call(this,e),r$.call(this,e),t$(e)}xy.exports={getPluginName:gG,getFuncPreview:vG,registeredPlugins:ky,getDisplayName:e$,registerPlugin:_G};xy.exports[hG]={shouldSkipOverride:t$,getMeta:pu,checkDecorators:n$,checkDependencies:r$}});var s$=w((Gne,i$)=>{"use strict";i$.exports=function(){let t=0;return function(n){return t=t+1&2147483647,`req-${t.toString(36)}`}}});var mu=w((Kne,o$)=>{o$.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}});var Dy=w(Ni=>{var Te=mu(),Ny=()=>[{type:Te.RANGE,from:48,to:57}],a$=()=>[{type:Te.CHAR,value:95},{type:Te.RANGE,from:97,to:122},{type:Te.RANGE,from:65,to:90}].concat(Ny()),u$=()=>[{type:Te.CHAR,value:9},{type:Te.CHAR,value:10},{type:Te.CHAR,value:11},{type:Te.CHAR,value:12},{type:Te.CHAR,value:13},{type:Te.CHAR,value:32},{type:Te.CHAR,value:160},{type:Te.CHAR,value:5760},{type:Te.RANGE,from:8192,to:8202},{type:Te.CHAR,value:8232},{type:Te.CHAR,value:8233},{type:Te.CHAR,value:8239},{type:Te.CHAR,value:8287},{type:Te.CHAR,value:12288},{type:Te.CHAR,value:65279}],SG=()=>[{type:Te.CHAR,value:10},{type:Te.CHAR,value:13},{type:Te.CHAR,value:8232},{type:Te.CHAR,value:8233}];Ni.words=()=>({type:Te.SET,set:a$(),not:!1});Ni.notWords=()=>({type:Te.SET,set:a$(),not:!0});Ni.ints=()=>({type:Te.SET,set:Ny(),not:!1});Ni.notInts=()=>({type:Te.SET,set:Ny(),not:!0});Ni.whitespace=()=>({type:Te.SET,set:u$(),not:!1});Ni.notWhitespace=()=>({type:Te.SET,set:u$(),not:!0});Ni.anyChar=()=>({type:Te.SET,set:SG(),not:!0})});var f$=w(yu=>{var l$=mu(),To=Dy(),PG="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",RG={0:0,t:9,n:10,v:11,f:12,r:13};yu.strToChars=function(e){var t=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return e=e.replace(t,function(r,n,i,s,o,a,u,l){if(i)return r;var f=n?8:s?parseInt(s,16):o?parseInt(o,16):a?parseInt(a,8):u?PG.indexOf(u):RG[l],c=String.fromCharCode(f);return/[[\]{}^$.|?*+()]/.test(c)&&(c="\\"+c),c}),e};yu.tokenizeClass=(e,t)=>{for(var r=[],n=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g,i,s;(i=n.exec(e))!=null;)if(i[1])r.push(To.words());else if(i[2])r.push(To.ints());else if(i[3])r.push(To.whitespace());else if(i[4])r.push(To.notWords());else if(i[5])r.push(To.notInts());else if(i[6])r.push(To.notWhitespace());else if(i[7])r.push({type:l$.RANGE,from:(i[8]||i[9]).charCodeAt(0),to:i[10].charCodeAt(0)});else if(s=i[12])r.push({type:l$.CHAR,value:s.charCodeAt(0)});else return[r,n.lastIndex];yu.error(t,"Unterminated character class")};yu.error=(e,t)=>{throw new SyntaxError("Invalid regular expression: /"+e+"/: "+t)}});var c$=w(gu=>{var Ff=mu();gu.wordBoundary=()=>({type:Ff.POSITION,value:"b"});gu.nonWordBoundary=()=>({type:Ff.POSITION,value:"B"});gu.begin=()=>({type:Ff.POSITION,value:"^"});gu.end=()=>({type:Ff.POSITION,value:"$"})});var h$=w((Yne,jy)=>{var Ao=f$(),Vr=mu(),Ps=Dy(),Mf=c$();jy.exports=e=>{var t=0,r,n,i={type:Vr.ROOT,stack:[]},s=i,o=i.stack,a=[],u=b=>{Ao.error(e,`Nothing to repeat at column ${b-1}`)},l=Ao.strToChars(e);for(r=l.length;t<r;)switch(n=l[t++],n){case"\\":switch(n=l[t++],n){case"b":o.push(Mf.wordBoundary());break;case"B":o.push(Mf.nonWordBoundary());break;case"w":o.push(Ps.words());break;case"W":o.push(Ps.notWords());break;case"d":o.push(Ps.ints());break;case"D":o.push(Ps.notInts());break;case"s":o.push(Ps.whitespace());break;case"S":o.push(Ps.notWhitespace());break;default:/\d/.test(n)?o.push({type:Vr.REFERENCE,value:parseInt(n,10)}):o.push({type:Vr.CHAR,value:n.charCodeAt(0)})}break;case"^":o.push(Mf.begin());break;case"$":o.push(Mf.end());break;case"[":var f;l[t]==="^"?(f=!0,t++):f=!1;var c=Ao.tokenizeClass(l.slice(t),e);t+=c[1],o.push({type:Vr.SET,set:c[0],not:f});break;case".":o.push(Ps.anyChar());break;case"(":var h={type:Vr.GROUP,stack:[],remember:!0};n=l[t],n==="?"&&(n=l[t+1],t+=2,n==="="?h.followedBy=!0:n==="!"?h.notFollowedBy=!0:n!==":"&&Ao.error(e,`Invalid group, character '${n}' after '?' at column ${t-1}`),h.remember=!1),o.push(h),a.push(s),s=h,o=h.stack;break;case")":a.length===0&&Ao.error(e,`Unmatched ) at column ${t-1}`),s=a.pop(),o=s.options?s.options[s.options.length-1]:s.stack;break;case"|":s.options||(s.options=[s.stack],delete s.stack);var d=[];s.options.push(d),o=d;break;case"{":var p=/^(\d+)(,(\d+)?)?\}/.exec(l.slice(t)),m,v;p!==null?(o.length===0&&u(t),m=parseInt(p[1],10),v=p[2]?p[3]?parseInt(p[3],10):1/0:m,t+=p[0].length,o.push({type:Vr.REPETITION,min:m,max:v,value:o.pop()})):o.push({type:Vr.CHAR,value:123});break;case"?":o.length===0&&u(t),o.push({type:Vr.REPETITION,min:0,max:1,value:o.pop()});break;case"+":o.length===0&&u(t),o.push({type:Vr.REPETITION,min:1,max:1/0,value:o.pop()});break;case"*":o.length===0&&u(t),o.push({type:Vr.REPETITION,min:0,max:1/0,value:o.pop()});break;default:o.push({type:Vr.CHAR,value:n.charCodeAt(0)})}return a.length!==0&&Ao.error(e,"Unterminated group"),i};jy.exports.types=Vr});var m$=w((Xne,p$)=>{"use strict";var d$=h$(),TG=d$.types;p$.exports=function(e,t){t||(t={});var r=t.limit===void 0?25:t.limit;AG(e)?e=e.source:typeof e!="string"&&(e=String(e));try{e=d$(e)}catch{return!1}var n=0;return function i(s,o){var a,u,l;if(s.type===TG.REPETITION&&(o++,n++,o>1||n>r))return!1;if(s.options){for(a=0,l=s.options.length;a<l;a++)if(u=i({stack:s.options[a]},o),!u)return!1}var f=s.stack||s.value&&s.value.stack;if(!f)return!0;for(a=0;a<f.length;a++)if(u=i(f[a],o),!u)return!1;return!0}(e,0)};function AG(e){return{}.toString.call(e)==="[object RegExp]"}});var P$=w((Zne,S$)=>{"use strict";var $o="    ",Io="\u2502   ",y$="\u251C\u2500\u2500 ",g$="\u2514\u2500\u2500 ",v$="*",Hf="/",w$=/(?=\/)/;function $G(e){let t=e.name||"";return t=t.replace("bound","").trim(),t=(t||"anonymous")+"()",t}function b$(e){return Array.isArray(e)?e.map(t=>b$(t)):typeof e=="symbol"?e.toString():typeof e=="function"?$G(e):e}function Ly(e,t){let r={},n=this.buildPrettyMeta(e);return Array.isArray(t)||(t=n?Reflect.ownKeys(n):[]),t.forEach(i=>{let s=typeof i=="symbol"?i.toString():i;n&&n[i]&&(r[s]=b$(n[i]))}),r}function IG(e,t={}){if(!this.buildPrettyMeta)throw new Error("buildPrettyMeta not defined");t.includeMeta=t.includeMeta||null;let r=[],n="";e.sort((s,o)=>!s.path||!o.path?0:s.path.localeCompare(o.path));for(let s=0;s<e.length;s++){let o=e[s],a=r.find(l=>o.path===l.path);if(a){a.handlers.push({method:o.method,opts:o.opts.constraints||void 0,meta:t.includeMeta?Ly.call(this,o,t.includeMeta):null});continue}let u={method:o.method,opts:o.opts.constraints||void 0,meta:t.includeMeta?Ly.call(this,o,t.includeMeta):null};r.push({path:o.path,methods:[o.method],opts:[o.opts],handlers:[u]})}if(!r.filter(s=>s.path===Hf).length){let s={path:Hf,truncatedPath:"",methods:[],opts:[],handlers:[{}]};r.filter(o=>o.path===v$).length?r.splice(1,0,s):r.unshift(s)}let i=OG(r);return i.forEach((s,o)=>{n+=E$(s,null,o===i.length-1,!1,!0),n+=`
`}),n}function OG(e){let t=[],r={result:t};return e.forEach((n,i)=>{let s=n.path.split(w$);s[0]!==Hf&&s[0]!==v$&&(s=[Hf,s[0].slice(1),...s.slice(1)]),s.reduce((o,a,u)=>{if(!o[a]){o[a]={result:[]};let l={path:a,children:o[a].result};u===s.length-1&&(l.handlers=n.handlers),o.result.push(l)}return o[a]},r)}),t}function E$(e,t,r,n,i){let s="";if(!n&&!i&&(s+=`
`),n||(s+=`${t||""}${r?g$:y$}`),s+=`${e.path}`,e.handlers){let o=e.handlers.reduce((a,u)=>{let l=a.findIndex(f=>JSON.stringify(f.opts)===JSON.stringify(u.opts));return l!==-1?a[l].method=[a[l].method,u.method].join(", "):a.push(u),a},[]);o.forEach((a,u)=>{u>0&&(s+=`${n?"":t||""}${r?$o:Io}${e.path}`),s+=` (${a.method||"-"})`,a.opts&&JSON.stringify(a.opts)!=="{}"&&(s+=` ${JSON.stringify(a.opts)}`),a.meta&&Reflect.ownKeys(a.meta).forEach((l,f)=>{s+=`
${n?"":t||""}${r?$o:Io}`,s+=`\u2022 (${l}) ${JSON.stringify(a.meta[l])}`}),o.length>1&&u!==o.length-1&&(s+=`
`)})}else e.children.length>1&&(s+=" (-)");return n||(t=`${t||""}${r?$o:Io}`),e.children.forEach((o,a)=>{let u=a===e.children.length-1,l=!e.handlers&&e.children.length===1;s+=E$(o,t,u,l)}),s}function _$(e,t,r,n){if(!this.buildPrettyMeta)throw new Error("buildPrettyMeta not defined");n.includeMeta=n.includeMeta||null;let i="",s=[];for(let{node:u,method:l}of e.nodes)for(let f of u.handlerStorage.handlers)s.push({method:l,...f});s.length?s.forEach((u,l)=>{let f=`(${u.method||"-"})`;Object.keys(u.constraints).length>0&&(f+=" "+JSON.stringify(u.constraints));let c="",h=e.prefix.split("").map((d,p)=>d===":"?p:null).filter(d=>d!==null);if(h.length){let d=0;h.forEach((p,m)=>{c+=e.prefix.slice(d,p+1),c+=u.params[u.params.length-h.length+m],m===h.length-1&&(c+=e.prefix.slice(p+1)),d=p+1})}else c=e.prefix;if(l===0?i+=`${c} ${f}`:i+=`
${t}${r?$o:Io}${c} ${f}`,n.includeMeta){let d=Ly.call(this,u,n.includeMeta);Object.keys(d).forEach((p,m)=>{i+=`
${t||""}${r?$o:Io}`,i+=`\u2022 (${p}) ${JSON.stringify(d[p])}`})}}):i=e.prefix;let o=`${t}${r?g$:y$}${i}
`;t=`${t}${r?$o:Io}`;let a=Object.keys(e.children);for(let u=0;u<a.length;u++){let l=e.children[a[u]];o+=_$.call(this,l,t,u===a.length-1,n)}return o}function zf(e,t,r){if(t.handlerStorage.handlers.length!==0&&e.nodes.push({method:r,node:t}),t.parametricChildren&&t.parametricChildren[0]&&(e.children[":"]||(e.children[":"]={prefix:":",nodes:[],children:{}}),zf(e.children[":"],t.parametricChildren[0],r)),t.wildcardChild&&(e.children["*"]||(e.children["*"]={prefix:"*",nodes:[],children:{}}),zf(e.children["*"],t.wildcardChild,r)),t.staticChildren)for(let n of Object.values(t.staticChildren)){let i=n.prefix.split(w$),s=e,o;for(let a of i)o=s,s=s.children[a],s||(s={prefix:a,nodes:[],children:{}},o.children[a]=s);zf(s,n,r)}}function Fy(e){let t=Object.keys(e.children);if(e.nodes.length===0&&t.length===1){let r=e.children[t[0]];if(r.nodes.length<=1)return Fy(r),e.nodes=r.nodes,e.prefix+=r.prefix,e.children=r.children,e}for(let r of Object.keys(e.children))Fy(e.children[r]);return e}S$.exports={flattenNode:zf,compressFlattenedNode:Fy,prettyPrintFlattenedNode:_$,prettyPrintRoutesArray:IG}});var T$=w((eie,R$)=>{"use strict";var My=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(t){return t===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(t)}addHandler(t,r,n,i,s){let o={handler:t,params:r,constraints:s,store:n||null,_createParamsObject:this._compileCreateParamsObject(r)};Object.keys(s).length===0&&(this.unconstrainedHandler=o);for(let a of Object.keys(s))this.constraints.includes(a)||(a==="version"?this.constraints.unshift(a):this.constraints.push(a));if(this.handlers.length>=32)throw new Error("find-my-way supports a maximum of 32 route handlers per node when there are constraints, limit reached");this.handlers.push(o),this.handlers.sort((a,u)=>Object.keys(a.constraints).length-Object.keys(u.constraints).length),this._compileGetHandlerMatchingConstraints(i,s)}_compileCreateParamsObject(t){let r=[];for(let n=0;n<t.length;n++)r.push(`'${t[n]}': paramsArray[${n}]`);return new Function("paramsArray",`return {${r.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(t,r){for(let n=0;n<this.handlers.length;n++){let s=this.handlers[n].constraints[r];if(s!==void 0){let o=t.get(s)||0;o|=1<<n,t.set(s,o)}}}_constrainedIndexBitmask(t){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[t]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(t){this.constrainedHandlerStores={};for(let n of this.constraints){let i=t.newStoreForConstraint(n);this.constrainedHandlerStores[n]=i,this._buildConstraintStore(i,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let s=t.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${s}
      }
      if (candidates === 0) return null;
      `)}for(let n in t.strategies)t.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};R$.exports=My});var $$=w((tie,A$)=>{"use strict";var CG=T$(),Kf={STATIC:0,PARAMETRIC:1,WILDCARD:2},Uf=class{constructor(){this.handlerStorage=new CG}},Vf=class extends Uf{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(t,r){let n=this.staticChildren[t.charAt(r)];return n===void 0||!n.matchPrefix(t,r)?null:n}createStaticChild(t){if(t.length===0)return this;let r=this.staticChildren[t.charAt(0)];if(r){let i=1;for(;i<r.prefix.length;i++)if(t.charCodeAt(i)!==r.prefix.charCodeAt(i)){r=r.split(this,i);break}return r.createStaticChild(t.slice(i))}let n=t.charAt(0);return this.staticChildren[n]=new Oo(t),this.staticChildren[n]}},Oo=class extends Vf{constructor(t){super(),this.prefix=t,this.wildcardChild=null,this.parametricChildren=[],this.kind=Kf.STATIC,this._compilePrefixMatch()}createParametricChild(t){let r=t&&t.source,n=this.parametricChildren.find(i=>(i.regex&&i.regex.source)===r);return n||(n=new Bf(t),t?this.parametricChildren.unshift(n):this.parametricChildren.push(n),n)}createWildcardChild(){return this.wildcardChild?this.wildcardChild:(this.wildcardChild=new Gf,this.wildcardChild)}split(t,r){let n=this.prefix.slice(0,r),i=this.prefix.slice(r);this.prefix=i,this._compilePrefixMatch();let s=new Oo(n);return s.staticChildren[i.charAt(0)]=this,t.staticChildren[n.charAt(0)]=s,s}getNextNode(t,r,n,i){let s=this.findStaticMatchingChild(t,r),o=0;if(s===null){if(this.parametricChildren.length===0)return this.wildcardChild;s=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:i,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:i,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return s}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let t=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);t.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${t.join(" && ")}`)}},Bf=class extends Vf{constructor(t){super(),this.regex=t||null,this.isRegex=!!t,this.kind=Kf.PARAMETRIC}getNextNode(t,r){return this.findStaticMatchingChild(t,r)}},Gf=class extends Uf{constructor(){super(),this.kind=Kf.WILDCARD}getNextNode(){return null}};A$.exports={StaticNode:Oo,ParametricNode:Bf,WildcardNode:Gf,NODE_TYPES:Kf}});var O$=w((rie,I$)=>{"use strict";var kG=require("assert");function vu(){if(!(this instanceof vu))return new vu;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}vu.prototype.set=function(e,t){if(typeof e!="string")throw new TypeError("Version should be a string");let[r,n,i]=e.split(".");return r=Number(r)||0,n=Number(n)||0,i=Number(i)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=t,this.store["*"]=t,this.store["x.x"]=t,this.store["x.x.x"]=t),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=t,this.store[`${r}.x.x`]=t),i>=(this.store[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=i,this.store[`${r}.${n}.x`]=t),this.store[`${r}.${n}.${i}`]=t,this};vu.prototype.get=function(e){return this.store[e]};I$.exports={name:"version",mustMatchWhenDerived:!0,storage:vu,validate(e){kG(typeof e=="string","Version should be a string")}}});var k$=w((nie,C$)=>{"use strict";var xG=require("assert");function qG(){let e={},t=[];return{get:r=>{let n=e[r];if(n)return n;for(let i of t)if(i.host.test(r))return i.value},set:(r,n)=>{r instanceof RegExp?t.push({host:r,value:n}):e[r]=n}}}C$.exports={name:"host",mustMatchWhenDerived:!1,storage:qG,validate(e){xG(typeof e=="string"||Object.prototype.toString.call(e)==="[object RegExp]","Host should be a string or a RegExp")}}});var q$=w((iie,x$)=>{"use strict";var NG=O$(),DG=k$(),zy=require("assert"),Hy=class{constructor(t){if(this.strategies={version:NG,host:DG},this.strategiesInUse=new Set,t)for(let r of Object.values(t))this.addConstraintStrategy(r)}hasConstraintStrategy(t){let r=this.strategies[t];return r!==void 0?r.isCustom||this.strategiesInUse.has(t):!1}addConstraintStrategy(t){if(zy(typeof t.name=="string"&&t.name!=="","strategy.name is required."),zy(t.storage&&typeof t.storage=="function","strategy.storage function is required."),zy(t.deriveConstraint&&typeof t.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[t.name]&&this.strategies[t.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${t.name}.`);if(this.strategiesInUse.has(t.name))throw new Error(`There already exists a route with ${t.name} constraint.`);t.isCustom=!0,this.strategies[t.name]=t,t.mustMatchWhenDerived&&this.noteUsage({[t.name]:t})}deriveConstraints(t,r){}noteUsage(t){if(t){let r=this.strategiesInUse.size;for(let n in t)this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(t){if(!this.strategies[t])throw new Error(`No strategy registered for constraint key ${t}`);return this.strategies[t].storage()}validateConstraints(t){for(let r in t){let n=t[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let i=this.strategies[r];if(!i)throw new Error(`No strategy registered for constraint key ${r}`);i.validate&&i.validate(n)}}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let t=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];if(n.isCustom)t.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`);else if(r==="version")t.push("   version: req.headers['accept-version'],");else if(r==="host")t.push("   host: req.headers.host || req.headers[':authority'],");else throw new Error("unknown non-custom strategy for compiling constraint derivation function")}t.push("}"),this.deriveConstraints=new Function("req","ctx",t.join(`
`)).bind(this)}};x$.exports=Hy});var j$=w((sie,D$)=>{"use strict";function N$(e,t){return e===50?t===53?"%":t===51?"#":t===52?"$":t===54?"&":t===66||t===98?"+":t===67||t===99?",":t===70||t===102?"/":null:e===51?t===65||t===97?":":t===66||t===98?";":t===68||t===100?"=":t===70||t===102?"?":null:e===52&&t===48?"@":null}function jG(e){let t=!1,r=!1,n="";for(let s=1;s<e.length;s++){let o=e.charCodeAt(s);if(o===37){let a=e.charCodeAt(s+1),u=e.charCodeAt(s+2);N$(a,u)===null?t=!0:(r=!0,a===50&&u===53&&(t=!0,e=e.slice(0,s+1)+"25"+e.slice(s+1),s+=2),s+=2)}else if(o===63||o===59||o===35){n=e.slice(s+1),e=e.slice(0,s);break}}return{path:t?decodeURI(e):e,querystring:n,shouldDecodeParam:r}}function LG(e){let t=e.indexOf("%");if(t===-1)return e;let r="",n=t;for(let i=t;i<e.length;i++)if(e.charCodeAt(i)===37){let s=e.charCodeAt(i+1),o=e.charCodeAt(i+2),a=N$(s,o);r+=e.slice(n,i)+a,n=i+3}return e.slice(0,t)+r+e.slice(n)}D$.exports={safeDecodeURI:jG,safeDecodeURIComponent:LG}});var Wy=w((oie,H$)=>{"use strict";var mt=require("assert"),Qf=require("http"),FG=require("querystring"),By=m$(),M$=Jl(),{flattenNode:MG,compressFlattenedNode:zG,prettyPrintFlattenedNode:HG,prettyPrintRoutesArray:UG}=P$(),{StaticNode:L$,NODE_TYPES:Uy}=$$(),VG=q$(),{safeDecodeURI:BG,safeDecodeURIComponent:F$}=j$(),Gy=Qf.METHODS,z$=/^https?:\/\/.*?\//,Rs=/(\/:[^/()]*?)\?(\/?)/;if(!By(z$))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!By(Rs))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function yt(e){if(!(this instanceof yt))return new yt(e);e=e||{},e.defaultRoute?(mt(typeof e.defaultRoute=="function","The default route must be a function"),this.defaultRoute=e.defaultRoute):this.defaultRoute=null,e.onBadUrl?(mt(typeof e.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=e.onBadUrl):this.onBadUrl=null,e.buildPrettyMeta?(mt(typeof e.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=e.buildPrettyMeta):this.buildPrettyMeta=WG,e.querystringParser?(mt(typeof e.querystringParser=="function","querystringParser must be a function"),this.querystringParser=e.querystringParser):this.querystringParser=t=>t===""?{}:FG.parse(t),this.caseSensitive=e.caseSensitive===void 0?!0:e.caseSensitive,this.ignoreTrailingSlash=e.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=e.ignoreDuplicateSlashes||!1,this.maxParamLength=e.maxParamLength||100,this.allowUnsafeRegex=e.allowUnsafeRegex||!1,this.routes=[],this.trees={},this.constrainer=new VG(e.constraints),this._routesPatterns=[]}yt.prototype.on=function(t,r,n,i,s){typeof n=="function"&&(i!==void 0&&(s=i),i=n,n={}),mt(typeof r=="string","Path should be a string"),mt(r.length>0,"The path could not be empty"),mt(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),mt(typeof i=="function","Handler should be a function");let o=r.match(Rs);if(o){mt(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let l=r.replace(Rs,"$1$2"),f=r.replace(Rs,"$2");this.on(t,l,n,i,s),this.on(t,f,n,i,s);return}let a=r;this.ignoreDuplicateSlashes&&(r=Ky(r)),this.ignoreTrailingSlash&&(r=Qy(r));let u=Array.isArray(t)?t:[t];for(let l of u)this._on(l,r,n,i,s,a),this.routes.push({method:l,path:r,opts:n,handler:i,store:s})};yt.prototype._on=function(t,r,n,i,s){mt(typeof t=="string","Method should be a string"),mt(Gy.includes(t),`Method '${t}' is not an http method.`);let o={};if(n.constraints!==void 0&&(mt(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[t]===void 0&&(this.trees[t]=new L$("/")),r==="*"&&this.trees[t].prefix.length!==0){let c=this.trees[t];this.trees[t]=new L$(""),this.trees[t].staticChildren["/"]=c}let a=this.trees[t],u=a.prefix.length,l=[];for(let c=0;c<=r.length;c++){if(r.charCodeAt(c)===58&&r.charCodeAt(c+1)===58){c++;continue}let h=r.charCodeAt(c)===58&&r.charCodeAt(c+1)!==58,d=r.charCodeAt(c)===42;if(h||d||c===r.length&&c!==u){let p=r.slice(u,c);this.caseSensitive||(p=p.toLowerCase()),p=p.split("::").join(":"),p=p.split("%").join("%25"),a=a.createStaticChild(p)}if(h){let p=!1,m=[],v=0,b=c+1;for(let g=b;;g++){let y=r.charCodeAt(g);if(y===40||y===45||y===46){p=!0;let R=r.slice(b,g);if(l.push(R),y===40){let I=QG(r,g),x=r.slice(g,I+1);this.allowUnsafeRegex||mt(By(new RegExp(x)),`The regex '${x}' is not safe!`),m.push(KG(x)),g=I+1}else m.push("(.*?)");let $=g;for(;$<r.length;$++){let I=r.charCodeAt($);if(I===58||I===47)break}let _=r.slice(g,$);_&&m.push(GG(_)),b=$+1,g=$,(r.charCodeAt(g)===47||g===r.length)&&(v=_.length)}else if(y===47||g===r.length){let R=r.slice(b,g);l.push(R),m.length!==0&&m.push("(.*?)")}if(r.charCodeAt(g)===47||g===r.length){r=r.slice(0,c+1)+r.slice(g-v),c+=v;break}}let P=null;p&&(P=new RegExp("^"+m.join("")+"$")),a=a.createParametricChild(P),u=c+1}else d&&(l.push("*"),a=a.createWildcardChild(),u=c+1)}this.caseSensitive||(r=r.toLowerCase());let f=r==="*"||r==="/*";for(let c of this._routesPatterns){let h=!1;if((c.path===r||f&&(c.path==="/*"||c.path==="*"))&&(h=!0),h&&c.method===t&&M$(c.constraints,o))throw new Error(`Method '${t}' already declared for route '${r}' with constraints '${JSON.stringify(o)}'`)}this._routesPatterns.push({method:t,path:r,constraints:o}),a.handlerStorage.addHandler(i,l,s,this.constrainer,o)};yt.prototype.hasConstraintStrategy=function(e){return this.constrainer.hasConstraintStrategy(e)};yt.prototype.addConstraintStrategy=function(e){this.constrainer.addConstraintStrategy(e),this._rebuild(this.routes)};yt.prototype.reset=function(){this.trees={},this.routes=[],this._routesPatterns=[]};yt.prototype.off=function(t,r,n){mt(typeof r=="string","Path should be a string"),mt(r.length>0,"The path could not be empty"),mt(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`");let i=r.match(Rs);if(i){mt(r.length===i.index+i[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(Rs,"$1$2"),a=r.replace(Rs,"$2");this.off(t,o,n),this.off(t,a,n);return}this.ignoreDuplicateSlashes&&(r=Ky(r)),this.ignoreTrailingSlash&&(r=Qy(r));let s=Array.isArray(t)?t:[t];for(let o of s)this._off(o,r,n)};yt.prototype._off=function(t,r,n){mt(typeof t=="string","Method should be a string"),mt(Gy.includes(t),`Method '${t}' is not an http method.`);function i(o){return!n||!o?!0:M$(n,o)}let s=this.routes.filter(o=>t!==o.method||r!==o.path||!i(o.opts.constraints));this._rebuild(s)};yt.prototype.lookup=function(t,r,n){var i=this.find(t.method,t.url,this.constrainer.deriveConstraints(t,n));return i===null?this._defaultRoute(t,r,n):n===void 0?i.handler(t,r,i.params,i.store,i.searchParams):i.handler.call(n,t,r,i.params,i.store,i.searchParams)};yt.prototype.find=function(t,r,n){let i=this.trees[t];if(i===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(z$,"/")),this.ignoreDuplicateSlashes&&(r=Ky(r));let s,o,a;try{s=BG(r),r=s.path,o=s.querystring,a=s.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=Qy(r));let u=r;this.caseSensitive===!1&&(r=r.toLowerCase());let l=this.maxParamLength,f=i.prefix.length,c=[],h=r.length,d=[];for(;;){if(f===h){let m=i.handlerStorage.getMatchingHandler(n);if(m!==null)return{handler:m.handler,store:m.store,params:m._createParamsObject(c),searchParams:this.querystringParser(o)}}let p=i.getNextNode(r,f,d,c.length);if(p===null){if(d.length===0)return null;let m=d.pop();f=m.brotherPathIndex,c.splice(m.paramsCount),p=m.brotherNode}if(i=p,i.kind===Uy.STATIC){f+=i.prefix.length;continue}if(i.kind===Uy.WILDCARD){let m=u.slice(f);a&&(m=F$(m)),c.push(m),f=h;continue}if(i.kind===Uy.PARAMETRIC){let m=u.indexOf("/",f);m===-1&&(m=h);let v=u.slice(f,m);if(a&&(v=F$(v)),i.isRegex){let b=i.regex.exec(v);if(b===null)continue;for(let P=1;P<b.length;P++){let g=b[P];if(g.length>l)return null;c.push(g)}}else{if(v.length>l)return null;c.push(v)}f=m}}};yt.prototype._rebuild=function(e){this.reset();for(let t of e){let{method:r,path:n,opts:i,handler:s,store:o}=t;this._on(r,n,i,s,o),this.routes.push({method:r,path:n,opts:i,handler:s,store:o})}};yt.prototype._defaultRoute=function(e,t,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(e,t):this.defaultRoute.call(r,e,t);t.statusCode=404,t.end()};yt.prototype._onBadUrl=function(e){if(this.onBadUrl===null)return null;let t=this.onBadUrl;return{handler:(r,n,i)=>t(e,r,n),params:{},store:null}};yt.prototype.prettyPrint=function(e={}){if(e.commonPrefix=e.commonPrefix===void 0?!0:e.commonPrefix,!e.commonPrefix)return UG.call(this,this.routes,e);let t={prefix:"/",nodes:[],children:{}};for(let r in this.trees){let n=this.trees[r];n&&MG(t,n,r)}return zG(t),HG.call(this,t,"",!0,e)};for(Vy in Qf.METHODS){if(!Qf.METHODS.hasOwnProperty(Vy))continue;let e=Qf.METHODS[Vy],t=e.toLowerCase();if(yt.prototype[t])throw new Error("Method already exists: "+t);yt.prototype[t]=function(r,n,i){return this.on(e,r,n,i)}}var Vy;yt.prototype.all=function(e,t,r){this.on(Gy,e,t,r)};H$.exports=yt;function GG(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ky(e){return e.replace(/\/\/+/g,"/")}function Qy(e){return e.length>1&&e.charCodeAt(e.length-1)===47?e.slice(0,-1):e}function KG(e){return e.charCodeAt(1)===94&&(e=e.slice(0,1)+e.slice(2)),e.charCodeAt(e.length-2)===36&&(e=e.slice(0,e.length-2)+e.slice(e.length-1)),e}function QG(e,t){for(var r=1;t<e.length;){if(t++,e[t]==="\\"){t++;continue}if(e[t]===")"?r--:e[t]==="("&&r++,!r)return t}throw new TypeError('Invalid regexp expression in "'+e+'"')}function WG(e){return e?e.store?Object.assign({},e.store):{}:{}}});var Jy=w((aie,U$)=>{"use strict";var{kFourOhFourContext:JG,kReplySerializerDefault:YG,kSchemaErrorFormatter:XG,kErrorHandler:ZG,kReply:e7,kRequest:t7,kBodyLimit:r7,kLogLevel:n7,kContentTypeParser:i7,kRouteByFastify:s7,kRequestValidateWeakMap:o7,kReplySerializeWeakMap:a7}=ht();function u7({schema:e,handler:t,config:r,errorHandler:n,bodyLimit:i,logLevel:s,logSerializers:o,attachValidation:a,validatorCompiler:u,serializerCompiler:l,replySerializer:f,schemaErrorFormatter:c,server:h,isFastify:d}){this.schema=e,this.handler=t,this.Reply=h[e7],this.Request=h[t7],this.contentTypeParser=h[i7],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.config=r,this.errorHandler=n||h[ZG],this._middie=null,this._parserOptions={limit:i||h[r7]},this.logLevel=s||h[n7],this.logSerializers=o,this[JG]=null,this.attachValidation=a,this[YG]=f,this.schemaErrorFormatter=c||h[XG]||l7,this[s7]=d,this[o7]=null,this[a7]=null,this.validatorCompiler=u||null,this.serializerCompiler=l||null,this.server=h}function l7(e,t){let r="",n=", ";for(var i=0;i!==e.length;++i){let s=e[i];r+=t+(s.instancePath||"")+" "+s.message+n}return new Error(r.slice(0,-n.length))}U$.exports=u7});var B$=w((uie,V$)=>{"use strict";function Yy(e,t,r,n){if(r===void 0)return t.header("content-length","0"),n(null,null);if(typeof r.resume=="function")return r.on("error",s=>{t.log.error({err:s},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);let i=""+Buffer.byteLength(r);t.header("content-length",i),n(null,null)}function f7(e){return e==null?Yy:Array.isArray(e)?[...e,Yy]:[e,Yy]}V$.exports={parseHeadOnSendHandlers:f7}});var sI=w((lie,iI)=>{"use strict";var c7=Wy(),h7=Jy(),G$=wh(),{hookRunner:tI,hookIterator:rI,lifecycleHooks:d7}=Zi(),{supportedMethods:p7}=Ud(),{normalizeSchema:m7}=la(),{parseHeadOnSendHandlers:y7}=B$(),K$=Xi(),{kRequestAcceptVersion:Xy,kRouteByFastify:Zy}=ht(),{compileSchemasForValidation:g7,compileSchemasForSerialization:v7}=ph(),{FST_ERR_SCH_VALIDATION_BUILD:w7,FST_ERR_SCH_SERIALIZATION_BUILD:b7,FST_ERR_DEFAULT_ROUTE_INVALID_TYPE:E7,FST_ERR_DUPLICATED_ROUTE:_7,FST_ERR_INVALID_URL:S7,FST_ERR_SEND_UNDEFINED_ERR:P7}=sr(),{kRoutePrefix:R7,kLogLevel:T7,kLogSerializers:Q$,kHooks:W$,kSchemaController:A7,kOptions:J$,kReplySerializerDefault:eg,kReplyIsError:$7,kRequestPayloadStream:Wf,kDisableRequestLogging:I7,kSchemaErrorFormatter:O7,kErrorHandler:Y$,kHasBeenDecorated:X$}=ht(),{buildErrorHandler:C7}=fa();function k7(e){let t=c7(e.config),r,n,i,s,o,a,u,l,f,c,h,d,p,m,v,b,P=!1;return{setup(I,x){r=x.avvio,n=x.fourOhFour,o=x.logger,a=x.hasLogger,u=x.setupResponseListeners,l=x.throwIfAlreadyStarted,v=x.validateHTTPVersion,m=I.exposeHeadRoutes,i=I.requestIdHeader,s=I.requestIdLogLabel,f=I.genReqId,c=I.disableRequestLogging,h=I.ignoreTrailingSlash,d=I.ignoreDuplicateSlashes,p=Object.prototype.hasOwnProperty.call(I,"return503OnClosing")?I.return503OnClosing:!0,b=x.keepAliveConnections},routing:t.lookup.bind(t),route:$,prepareRoute:R,getDefaultRoute:function(){return t.defaultRoute},setDefaultRoute:function(I){if(typeof I!="function")throw new E7;t.defaultRoute=I},routeHandler:_,closeRoutes:()=>{P=!0},printRoutes:t.prettyPrint.bind(t),addConstraintStrategy:g,hasConstraintStrategy:y};function g(I){return l("Cannot add constraint strategy when fastify instance is already started!"),t.addConstraintStrategy(I)}function y(I){return t.hasConstraintStrategy(I)}function R({method:I,url:x,options:A,handler:D,isFastify:q}){if(typeof x!="string")throw new S7(typeof x);if(!D&&typeof A=="function")D=A,A={};else if(D&&typeof D=="function"){if(Object.prototype.toString.call(A)!=="[object Object]")throw new Error(`Options for ${I}:${x} route must be an object`);if(A.handler)throw typeof A.handler=="function"?new Error(`Duplicate handler for ${I}:${x} route is not allowed!`):new Error(`Handler for ${I}:${x} route must be a function`)}return A=Object.assign({},A,{method:I,url:x,path:x,handler:D||A&&A.handler}),$.call(this,{options:A,isFastify:q})}function $({options:I,isFastify:x}){let A={...I};l("Cannot add route when fastify instance is already started!");let D=A.url||A.path||"";if(Array.isArray(A.method))for(var q=0;q<A.method.length;++q)Z$(A.method[q],D,A.schema);else Z$(A.method,D,A.schema);if(!A.handler)throw new Error(`Missing handler function for ${A.method}:${D} route.`);if(A.errorHandler!==void 0&&typeof A.errorHandler!="function")throw new Error(`Error Handler for ${A.method}:${D} route, if defined, must be a function`);nI(A.bodyLimit);let j=this[R7];if(D==="/"&&j.length>0&&A.method!=="HEAD")switch(A.prefixTrailingSlash){case"slash":ue.call(this,{path:D,isFastify:x});break;case"no-slash":ue.call(this,{path:"",isFastify:x});break;case"both":default:ue.call(this,{path:"",isFastify:x}),h!==!0&&(d!==!0||!j.endsWith("/"))&&ue.call(this,{path:D,prefixing:!0,isFastify:x})}else D[0]==="/"&&j.endsWith("/")?ue.call(this,{path:D.slice(1),isFastify:x}):ue.call(this,{path:D,isFastify:x});return this;function ue({path:ee,prefixing:W=!1,isFastify:le=!1}){let M=j+ee;if(A.url=M,A.path=M,A.routePath=ee,A.prefix=j,A.logLevel=A.logLevel||this[T7],(this[Q$]||A.logSerializers)&&(A.logSerializers=Object.assign(Object.create(this[Q$]),A.logSerializers)),A.attachValidation==null&&(A.attachValidation=!1),W===!1)for(let k of this[W$].onRoute)k.call(this,A);let Ie=A.constraints||{},bt={...A.config,url:M,method:A.method},J=new h7({schema:A.schema,handler:A.handler.bind(this),config:bt,errorHandler:A.errorHandler,bodyLimit:A.bodyLimit,logLevel:A.logLevel,logSerializers:A.logSerializers,attachValidation:A.attachValidation,schemaErrorFormatter:A.schemaErrorFormatter,replySerializer:this[eg],validatorCompiler:A.validatorCompiler,serializerCompiler:A.serializerCompiler,server:this,isFastify:le});A.version&&(K$.emit("FSTDEP008"),Ie.version=A.version);let cn=t.find("HEAD",A.url,Ie),Qr=cn!=null;Qr&&!J[Zy]&&cn.store[Zy]&&t.off(A.method,A.url,{constraints:Ie});try{t.on(A.method,A.url,{constraints:Ie},_,J)}catch(k){if(!J[Zy])throw k.message.includes(`Method '${A.method}' already declared for route '${A.url}'`)?new _7(A.method,A.url):k}this.after((k,F)=>{J.errorHandler=A.errorHandler?C7(this[Y$],A.errorHandler):this[Y$],J._parserOptions.limit=A.bodyLimit||null,J.logLevel=A.logLevel,J.logSerializers=A.logSerializers,J.attachValidation=A.attachValidation,J[eg]=this[eg],J.schemaErrorFormatter=A.schemaErrorFormatter||this[O7]||J.schemaErrorFormatter,r.once("preReady",()=>{for(let B of d7){let K=this[W$][B].concat(A[B]||[]).map(te=>te.bind(this));J[B]=K.length?K:null}for(;!J.Request[X$]&&J.Request.parent;)J.Request=J.Request.parent;for(;!J.Reply[X$]&&J.Reply.parent;)J.Reply=J.Reply.parent;if(n.setContext(this,J),A.schema){J.schema=m7(J.schema,this.initialConfig);let B=this[A7];!A.validatorCompiler&&(A.schema.body||A.schema.headers||A.schema.querystring||A.schema.params)&&B.setupValidator(this[J$]);try{g7(J,A.validatorCompiler||B.validatorCompiler)}catch(K){throw new w7(A.method,M,K.message)}A.schema.response&&!A.serializerCompiler&&B.setupSerializer(this[J$]);try{v7(J,A.serializerCompiler||B.serializerCompiler)}catch(K){throw new b7(A.method,M,K.message)}}}),F(k)});let{exposeHeadRoute:Ae}=A;if((Ae!=null?Ae:m)&&I.method==="GET"&&!Qr){let k=y7(A.onSend);R.call(this,{method:"HEAD",url:ee,options:{...A,onSend:k},isFastify:!0})}else Qr&&Ae&&K$.emit("FSTDEP007")}}function _(I,x,A,D,q){if(!v(I.httpVersion)){let bt='{"error":"HTTP Version Not Supported","message":"HTTP Version Not Supported","statusCode":505}',J={"Content-Type":"application/json","Content-Length":bt.length};x.writeHead(505,J),x.end(bt);return}if(P===!0&&(I.httpVersionMajor!==2&&(x.once("finish",()=>I.destroy()),x.setHeader("Connection","close")),p)){let bt={"Content-Type":"application/json","Content-Length":"80"};x.writeHead(503,bt),x.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}');return}String.prototype.toLowerCase.call(I.headers.connection||"")==="keep-alive"&&b.has(I.socket)===!1&&(b.add(I.socket),I.socket.on("close",N7.bind({keepAliveConnections:b,socket:I.socket}))),I.headers[Xy]!==void 0&&(I.headers["accept-version"]=I.headers[Xy],I.headers[Xy]=void 0);let ue=I.headers[i]||f(I),ee={[s]:ue},W={level:D.logLevel};D.logSerializers&&(W.serializers=D.logSerializers);let le=o.child(ee,W);le[I7]=c;let M=new D.Request(ue,A,I,q,le,D),Ie=new D.Reply(x,M,le);c===!1&&le.info({req:M},"incoming request"),(a===!0||D.onResponse!==null)&&u(Ie),D.onRequest!==null?tI(D.onRequest,rI,M,Ie,eI):eI(null,M,Ie),D.onTimeout!==null&&(M.raw.socket._meta||M.raw.socket.on("timeout",x7),M.raw.socket._meta={context:D,request:M,reply:Ie})}}function x7(){let{context:e,request:t,reply:r}=this._meta;tI(e.onTimeout,rI,t,r,D7)}function Z$(e,t,r){if(p7.indexOf(e)===-1)throw new Error(`${e} method is not supported!`);if((e==="GET"||e==="HEAD")&&r&&r.body)throw new Error(`Body validation schema for ${e}:${t} route is not supported!`)}function nI(e){if(e!==void 0&&(!Number.isInteger(e)||e<=0))throw new TypeError(`'bodyLimit' option must be an integer > 0. Got '${e}'`)}function eI(e,t,r){if(r.sent!==!0){if(e!=null){r[$7]=!0,r.send(e);return}t[Wf]=t.raw,r.context.preParsing!==null?q7(r.context.preParsing,t,r,G$):G$(null,t,r)}}function q7(e,t,r,n){let i=0;function s(u,l){if(r.sent)return;if(typeof l<"u"&&(t[Wf]=l),u||i===e.length){n(u,t,r);return}let f=e[i++],c;try{c=f(t,r,t[Wf],s)}catch(h){s(h);return}c&&typeof c.then=="function"&&c.then(o,a)}function o(u){s(null,u)}function a(u){u||(u=new P7),s(u)}s(null,t[Wf])}function N7(){this.keepAliveConnections.delete(this.socket)}function D7(){}iI.exports={buildRouting:k7,validateBodyLimitOption:nI}});var lI=w((fie,uI)=>{"use strict";var j7=Wy(),oI=Al(),aI=Bl(),L7=Jy(),{kRoutePrefix:F7,kCanSetNotFoundHandler:wu,kFourOhFourLevelInstance:Jf,kFourOhFourContext:ii,kHooks:M7}=ht(),{lifecycleHooks:z7}=Zi(),{buildErrorHandler:H7}=fa(),U7={config:{},onSend:[],onError:[],errorHandler:H7()};function V7(e){let{logger:t,genReqId:r}=e,n=j7({onBadUrl:a(),defaultRoute:c}),i=null;return{router:n,setNotFoundHandler:l,setContext:u,arrange404:s};function s(h){h[Jf]=h,h[wu]=!0,n.onBadUrl=n.onBadUrl.bind(h)}function o(h,d){let{url:p,method:m}=h.raw,v=`Route ${m}:${p} not found`;h.log.info(v),d.code(404).send({message:v,error:"Not Found",statusCode:404})}function a(){return function(d,p,m){let v=r(p),b=t.child({reqId:v}),P=this[Jf][ii],g=new aI(v,null,p,null,b,P),y=new oI(m,g,b);i(g,y)}}function u(h,d){let p=Object.assign({},h[ii]);p.onSend=d.onSend,d[ii]=p}function l(h,d,p,m){this[wu]===void 0&&(this[wu]=!0),this[ii]===void 0&&(this[ii]=null);let v=this,b=this[F7]||"/";if(this[wu]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${b}'`);typeof h=="object"&&(h.preHandler&&(Array.isArray(h.preHandler)?h.preHandler=h.preHandler.map(P=>P.bind(v)):h.preHandler=h.preHandler.bind(v)),h.preValidation&&(Array.isArray(h.preValidation)?h.preValidation=h.preValidation.map(P=>P.bind(v)):h.preValidation=h.preValidation.bind(v))),typeof h=="function"&&(d=h,h=void 0),h=h||{},d?(this[Jf][wu]=!1,d=d.bind(this),i=d):(d=o,i=o),this.after((P,g)=>{f.call(this,b,h,d,p,m),g(P)})}function f(h,d,p,m,v){let b=new L7({schema:d.schema,handler:p,config:d.config||{},server:this});if(m.once("preReady",()=>{let P=this[ii];for(let g of z7){let y=this[M7][g].concat(d[g]||[]).map(R=>R.bind(this));P[g]=y.length?y:null}}),this[ii]!==null&&h==="/"){Object.assign(this[ii],b);return}this[Jf][ii]=b,n.all(h+(h.endsWith("/")?"*":"/*"),v,b),n.all(h,v,b)}function c(h,d){let p=r(h),m=t.child({reqId:p});m.info({req:h},"incoming request");let v=new aI(p,null,h,null,m,U7),b=new oI(d,v,m);v.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),v.log.warn(n.prettyPrint()),b.code(404).send(new Error("Not Found"))}}uI.exports=V7});var fI=w((cie,Yf)=>{"use strict";Yf.exports=_e;Yf.exports.default=_e;var B7={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},jsonShorthand:{type:"boolean",default:!0},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{type:"string",default:"request-id"},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},versioning:{type:"object",additionalProperties:!0,required:["storage","deriveVersion"],properties:{storage:{},deriveVersion:{}}},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},G7=Object.prototype.hasOwnProperty,K7=new RegExp("idle","u");function _e(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){e.connectionTimeout===void 0&&(e.connectionTimeout=0),e.keepAliveTimeout===void 0&&(e.keepAliveTimeout=72e3),e.maxRequestsPerSocket===void 0&&(e.maxRequestsPerSocket=0),e.requestTimeout===void 0&&(e.requestTimeout=0),e.bodyLimit===void 0&&(e.bodyLimit=1048576),e.caseSensitive===void 0&&(e.caseSensitive=!0),e.allowUnsafeRegex===void 0&&(e.allowUnsafeRegex=!1),e.ignoreTrailingSlash===void 0&&(e.ignoreTrailingSlash=!1),e.ignoreDuplicateSlashes===void 0&&(e.ignoreDuplicateSlashes=!1),e.disableRequestLogging===void 0&&(e.disableRequestLogging=!1),e.jsonShorthand===void 0&&(e.jsonShorthand=!0),e.maxParamLength===void 0&&(e.maxParamLength=100),e.onProtoPoisoning===void 0&&(e.onProtoPoisoning="error"),e.onConstructorPoisoning===void 0&&(e.onConstructorPoisoning="error"),e.pluginTimeout===void 0&&(e.pluginTimeout=1e4),e.requestIdHeader===void 0&&(e.requestIdHeader="request-id"),e.requestIdLogLabel===void 0&&(e.requestIdLogLabel="reqId"),e.http2SessionTimeout===void 0&&(e.http2SessionTimeout=72e3),e.exposeHeadRoutes===void 0&&(e.exposeHeadRoutes=!0);let d=o;for(let p in e)G7.call(B7.properties,p)||delete e[p];if(d===o){let p=e.connectionTimeout,m=o;if(!(typeof p=="number"&&!(p%1)&&!isNaN(p)&&isFinite(p))){let v=typeof p,b;if(b===void 0)if(v==="boolean"||p===null||v==="string"&&p&&p==+p&&!(p%1))b=+p;else return _e.errors=[{instancePath:t+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;b!==void 0&&(p=b,e!==void 0&&(e.connectionTimeout=b))}var a=m===o;if(a){let v=e.keepAliveTimeout,b=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v))){let g=typeof v,y;if(y===void 0)if(g==="boolean"||v===null||g==="string"&&v&&v==+v&&!(v%1))y=+v;else return _e.errors=[{instancePath:t+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;y!==void 0&&(v=y,e!==void 0&&(e.keepAliveTimeout=y))}var a=b===o;if(a){if(e.forceCloseConnections!==void 0){let g=e.forceCloseConnections,y=o,R=o,$=!1,_=null,I=o;if(typeof g!="string"){let D=typeof g,q;if(q===void 0)if(D=="number"||D=="boolean")q=""+g;else if(g===null)q="";else{let j={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[j]:s.push(j),o++}q!==void 0&&(g=q,e!==void 0&&(e.forceCloseConnections=q))}if(o===I&&typeof g=="string"&&!K7.test(g)){let D={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};s===null?s=[D]:s.push(D),o++}var u=I===o;u&&($=!0,_=0);let x=o;if(typeof g!="boolean"){let D;if(D===void 0)if(g==="false"||g===0||g===null)D=!1;else if(g==="true"||g===1)D=!0;else{let q={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[q]:s.push(q),o++}D!==void 0&&(g=D,e!==void 0&&(e.forceCloseConnections=D))}var u=x===o;if(u&&$?($=!1,_=[_,1]):u&&($=!0,_=1),$)o=R,s!==null&&(R?s.length=R:s=null);else{let D={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:_},message:"must match exactly one schema in oneOf"};return s===null?s=[D]:s.push(D),o++,_e.errors=s,!1}var a=y===o}else var a=!0;if(a){let g=e.maxRequestsPerSocket,y=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g))&&g!==null){let $=typeof g,_;if(_===void 0)if($==="boolean"||g===null||$==="string"&&g&&g==+g&&!(g%1))_=+g;else if(g===""||g===0||g===!1)_=null;else return _e.errors=[{instancePath:t+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;_!==void 0&&(g=_,e!==void 0&&(e.maxRequestsPerSocket=_))}var a=y===o;if(a){let $=e.requestTimeout,_=o;if(!(typeof $=="number"&&!($%1)&&!isNaN($)&&isFinite($))){let x=typeof $,A;if(A===void 0)if(x==="boolean"||$===null||x==="string"&&$&&$==+$&&!($%1))A=+$;else return _e.errors=[{instancePath:t+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;A!==void 0&&($=A,e!==void 0&&(e.requestTimeout=A))}var a=_===o;if(a){let x=e.bodyLimit,A=o;if(!(typeof x=="number"&&!(x%1)&&!isNaN(x)&&isFinite(x))){let q=typeof x,j;if(j===void 0)if(q==="boolean"||x===null||q==="string"&&x&&x==+x&&!(x%1))j=+x;else return _e.errors=[{instancePath:t+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;j!==void 0&&(x=j,e!==void 0&&(e.bodyLimit=j))}var a=A===o;if(a){let q=e.caseSensitive,j=o;if(typeof q!="boolean"){let ee;if(ee===void 0)if(q==="false"||q===0||q===null)ee=!1;else if(q==="true"||q===1)ee=!0;else return _e.errors=[{instancePath:t+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ee!==void 0&&(q=ee,e!==void 0&&(e.caseSensitive=ee))}var a=j===o;if(a){let ee=e.allowUnsafeRegex,W=o;if(typeof ee!="boolean"){let M;if(M===void 0)if(ee==="false"||ee===0||ee===null)M=!1;else if(ee==="true"||ee===1)M=!0;else return _e.errors=[{instancePath:t+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;M!==void 0&&(ee=M,e!==void 0&&(e.allowUnsafeRegex=M))}var a=W===o;if(a){if(e.http2!==void 0){let M=e.http2,Ie=o;if(typeof M!="boolean"){let J;if(J===void 0)if(M==="false"||M===0||M===null)J=!1;else if(M==="true"||M===1)J=!0;else return _e.errors=[{instancePath:t+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;J!==void 0&&(M=J,e!==void 0&&(e.http2=J))}var a=Ie===o}else var a=!0;if(a){if(e.https!==void 0){let M=e.https,Ie=o,bt=o,J=!0,cn=o,Qr=o,Ae=o,et=o,Je=!1,k=null,F=o;if(typeof M!="boolean"){let te;if(te===void 0)if(M==="false"||M===0||M===null)te=!1;else if(M==="true"||M===1)te=!0;else{let Pe={};s===null?s=[Pe]:s.push(Pe),o++}te!==void 0&&(M=te,e!==void 0&&(e.https=te))}var l=F===o;l&&(Je=!0,k=0);let B=o;if(M!==null){let te;if(te===void 0)if(M===""||M===0||M===!1)te=null;else{let Pe={};s===null?s=[Pe]:s.push(Pe),o++}te!==void 0&&(M=te,e!==void 0&&(e.https=te))}var l=B===o;if(l&&Je)Je=!1,k=[k,1];else{l&&(Je=!0,k=1);let te=o;if(o===te)if(M&&typeof M=="object"&&!Array.isArray(M)){let Ye;if(M.allowHTTP1===void 0&&(Ye="allowHTTP1")){let Fe={};s===null?s=[Fe]:s.push(Fe),o++}else{let Fe=o;for(let Cr in M)Cr!=="allowHTTP1"&&delete M[Cr];if(Fe===o&&M.allowHTTP1!==void 0){let Cr=M.allowHTTP1;if(typeof Cr!="boolean"){let Et;if(Et===void 0)if(Cr==="false"||Cr===0||Cr===null)Et=!1;else if(Cr==="true"||Cr===1)Et=!0;else{let ir={};s===null?s=[ir]:s.push(ir),o++}Et!==void 0&&(Cr=Et,M!==void 0&&(M.allowHTTP1=Et))}}}}else{let Ye={};s===null?s=[Ye]:s.push(Ye),o++}var l=te===o;l&&Je?(Je=!1,k=[k,2]):l&&(Je=!0,k=2)}if(Je)o=et,s!==null&&(et?s.length=et:s=null);else{let te={};s===null?s=[te]:s.push(te),o++}var f=Ae===o;if(f){let te={};s===null?s=[te]:s.push(te),o++}else o=Qr,s!==null&&(Qr?s.length=Qr:s=null);var c=cn===o;if(o=bt,s!==null&&(bt?s.length=bt:s=null),c){let te=o;e.https=!0;var c=te===o;J=c}if(!J){let te={instancePath:t+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return s===null?s=[te]:s.push(te),o++,_e.errors=s,!1}var a=Ie===o}else var a=!0;if(a){let M=e.ignoreTrailingSlash,Ie=o;if(typeof M!="boolean"){let J;if(J===void 0)if(M==="false"||M===0||M===null)J=!1;else if(M==="true"||M===1)J=!0;else return _e.errors=[{instancePath:t+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;J!==void 0&&(M=J,e!==void 0&&(e.ignoreTrailingSlash=J))}var a=Ie===o;if(a){let J=e.ignoreDuplicateSlashes,cn=o;if(typeof J!="boolean"){let Ae;if(Ae===void 0)if(J==="false"||J===0||J===null)Ae=!1;else if(J==="true"||J===1)Ae=!0;else return _e.errors=[{instancePath:t+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ae!==void 0&&(J=Ae,e!==void 0&&(e.ignoreDuplicateSlashes=Ae))}var a=cn===o;if(a){let Ae=e.disableRequestLogging,et=o;if(typeof Ae!="boolean"){let k;if(k===void 0)if(Ae==="false"||Ae===0||Ae===null)k=!1;else if(Ae==="true"||Ae===1)k=!0;else return _e.errors=[{instancePath:t+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;k!==void 0&&(Ae=k,e!==void 0&&(e.disableRequestLogging=k))}var a=et===o;if(a){let k=e.jsonShorthand,F=o;if(typeof k!="boolean"){let K;if(K===void 0)if(k==="false"||k===0||k===null)K=!1;else if(k==="true"||k===1)K=!0;else return _e.errors=[{instancePath:t+"/jsonShorthand",schemaPath:"#/properties/jsonShorthand/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;K!==void 0&&(k=K,e!==void 0&&(e.jsonShorthand=K))}var a=F===o;if(a){let K=e.maxParamLength,te=o;if(!(typeof K=="number"&&!(K%1)&&!isNaN(K)&&isFinite(K))){let Ye=typeof K,Fe;if(Fe===void 0)if(Ye==="boolean"||K===null||Ye==="string"&&K&&K==+K&&!(K%1))Fe=+K;else return _e.errors=[{instancePath:t+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Fe!==void 0&&(K=Fe,e!==void 0&&(e.maxParamLength=Fe))}var a=te===o;if(a){let Ye=e.onProtoPoisoning,Fe=o;if(typeof Ye!="string"){let Et=typeof Ye,ir;if(ir===void 0)if(Et=="number"||Et=="boolean")ir=""+Ye;else if(Ye===null)ir="";else return _e.errors=[{instancePath:t+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ir!==void 0&&(Ye=ir,e!==void 0&&(e.onProtoPoisoning=ir))}var a=Fe===o;if(a){let Et=e.onConstructorPoisoning,ir=o;if(typeof Et!="string"){let kt=typeof Et,Qt;if(Qt===void 0)if(kt=="number"||kt=="boolean")Qt=""+Et;else if(Et===null)Qt="";else return _e.errors=[{instancePath:t+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Qt!==void 0&&(Et=Qt,e!==void 0&&(e.onConstructorPoisoning=Qt))}var a=ir===o;if(a){let kt=e.pluginTimeout,Qt=o;if(!(typeof kt=="number"&&!(kt%1)&&!isNaN(kt)&&isFinite(kt))){let Wr=typeof kt,Mn;if(Mn===void 0)if(Wr==="boolean"||kt===null||Wr==="string"&&kt&&kt==+kt&&!(kt%1))Mn=+kt;else return _e.errors=[{instancePath:t+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Mn!==void 0&&(kt=Mn,e!==void 0&&(e.pluginTimeout=Mn))}var a=Qt===o;if(a){let Wr=e.requestIdHeader,Mn=o;if(typeof Wr!="string"){let dn=typeof Wr,pn;if(pn===void 0)if(dn=="number"||dn=="boolean")pn=""+Wr;else if(Wr===null)pn="";else return _e.errors=[{instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;pn!==void 0&&(Wr=pn,e!==void 0&&(e.requestIdHeader=pn))}var a=Mn===o;if(a){let dn=e.requestIdLogLabel,pn=o;if(typeof dn!="string"){let tt=typeof dn,Jr;if(Jr===void 0)if(tt=="number"||tt=="boolean")Jr=""+dn;else if(dn===null)Jr="";else return _e.errors=[{instancePath:t+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Jr!==void 0&&(dn=Jr,e!==void 0&&(e.requestIdLogLabel=Jr))}var a=pn===o;if(a){let tt=e.http2SessionTimeout,Jr=o;if(!(typeof tt=="number"&&!(tt%1)&&!isNaN(tt)&&isFinite(tt))){let Mt=typeof tt,mn;if(mn===void 0)if(Mt==="boolean"||tt===null||Mt==="string"&&tt&&tt==+tt&&!(tt%1))mn=+tt;else return _e.errors=[{instancePath:t+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;mn!==void 0&&(tt=mn,e!==void 0&&(e.http2SessionTimeout=mn))}var a=Jr===o;if(a){let Mt=e.exposeHeadRoutes,mn=o;if(typeof Mt!="boolean"){let at;if(at===void 0)if(Mt==="false"||Mt===0||Mt===null)at=!1;else if(Mt==="true"||Mt===1)at=!0;else return _e.errors=[{instancePath:t+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;at!==void 0&&(Mt=at,e!==void 0&&(e.exposeHeadRoutes=at))}var a=mn===o;if(a){if(e.versioning!==void 0){let at=e.versioning,li=o;if(o===li)if(at&&typeof at=="object"&&!Array.isArray(at)){let Yr;if(at.storage===void 0&&(Yr="storage")||at.deriveVersion===void 0&&(Yr="deriveVersion"))return _e.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/required",keyword:"required",params:{missingProperty:Yr},message:"must have required property '"+Yr+"'"}],!1}else return _e.errors=[{instancePath:t+"/versioning",schemaPath:"#/properties/versioning/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=li===o}else var a=!0;if(a)if(e.constraints!==void 0){let at=e.constraints,li=o;if(o===li)if(at&&typeof at=="object"&&!Array.isArray(at))for(let Yr in at){let vr=at[Yr],Vu=o;if(o===Vu)if(vr&&typeof vr=="object"&&!Array.isArray(vr)){let fi;if(vr.name===void 0&&(fi="name")||vr.storage===void 0&&(fi="storage")||vr.validate===void 0&&(fi="validate")||vr.deriveConstraint===void 0&&(fi="deriveConstraint"))return _e.errors=[{instancePath:t+"/constraints/"+Yr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:fi},message:"must have required property '"+fi+"'"}],!1;if(vr.name!==void 0){let Bi=vr.name;if(typeof Bi!="string"){let Bu=typeof Bi,wr;if(wr===void 0)if(Bu=="number"||Bu=="boolean")wr=""+Bi;else if(Bi===null)wr="";else return _e.errors=[{instancePath:t+"/constraints/"+Yr.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;wr!==void 0&&(Bi=wr,vr!==void 0&&(vr.name=wr))}}}else return _e.errors=[{instancePath:t+"/constraints/"+Yr.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=Vu===o;if(!h)break}else return _e.errors=[{instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=li===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}else return _e.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return _e.errors=s,o===0}Yf.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,jsonShorthand:!0,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:"request-id",requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0}});var cI=w((hie,Zf)=>{"use strict";var Xf=fI(),Q7=bl()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:W7}=sr();function J7(e){let t=Q7(e);if(!Xf(t)){let r=new W7(JSON.stringify(Xf.errors.map(n=>n.message)));throw r.errors=Xf.errors,r}return tg(t)}function tg(e){let t=Object.getOwnPropertyNames(e);for(let r of t){let n=e[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(e[r]=n&&typeof n=="object"?tg(n):n)}return Object.freeze(e)}Zf.exports=J7;Zf.exports.defaultInitOptions=Xf.defaultInitOptions;Zf.exports.utils={deepFreezeObject:tg}});var bI=w((die,wI)=>{"use strict";var{kAvvioBoot:Y7,kChildren:hI,kRoutePrefix:dI,kLogLevel:pI,kLogSerializers:rg,kHooks:ng,kSchemaController:Co,kContentTypeParser:mI,kReply:yI,kRequest:gI,kFourOhFour:X7,kPluginNameChain:vI}=ht(),Z7=Al(),eK=Bl(),tK=$y(),rK=Zd(),{buildHooks:nK}=Zi(),ko=qy();wI.exports=function(t,r,n){if(ko.registerPlugin.call(t,r))return t[vI].push(ko.getDisplayName(r)),t;let s=Object.create(t);t[hI].push(s),s.ready=t[Y7].bind(s),s[hI]=[],s[yI]=Z7.buildReply(s[yI]),s[gI]=eK.buildRequest(s[gI]),s[mI]=rK.helpers.buildContentTypeParser(s[mI]),s[ng]=nK(s[ng]),s[dI]=iK(s[dI],n.prefix),s[pI]=n.logLevel||s[pI],s[Co]=tK.buildSchemaController(t[Co]),s.getSchema=s[Co].getSchema.bind(s[Co]),s.getSchemas=s[Co].getSchemas.bind(s[Co]),s[ko.registeredPlugins]=Object.create(s[ko.registeredPlugins]),s[vI]=[ko.getPluginName(r)||ko.getFuncPreview(r)],(s[rg]||n.logSerializers)&&(s[rg]=Object.assign(Object.create(s[rg]),n.logSerializers)),n.prefix&&s[X7].arrange404(s);for(let o of s[ng].onRegister)o.call(this,s,n);return s};function iK(e,t){return t?(e.endsWith("/")&&t[0]==="/"?t=t.slice(1):t[0]!=="/"&&(t="/"+t),e+t):e}});var _I=w((pie,EI)=>{"use strict";EI.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var SI=w(ig=>{"use strict";ig.parse=oK;ig.serialize=aK;var sK=Object.prototype.toString,ec=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function oK(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=n.decode||uK,s=0;s<e.length;){var o=e.indexOf("=",s);if(o===-1)break;var a=e.indexOf(";",s);if(a===-1)a=e.length;else if(a<o){s=e.lastIndexOf(";",o-1)+1;continue}var u=e.slice(s,o).trim();if(r[u]===void 0){var l=e.slice(o+1,a).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1)),r[u]=cK(l,i)}s=a+1}return r}function aK(e,t,r){var n=r||{},i=n.encode||lK;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!ec.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!ec.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(n.domain){if(!ec.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!ec.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){var u=n.expires;if(!fK(u)||isNaN(u.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+u.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority){var l=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(l){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var f=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(f){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function uK(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function lK(e){return encodeURIComponent(e)}function fK(e){return sK.call(e)==="[object Date]"||e instanceof Date}function cK(e,t){try{return t(e)}catch{return e}}});var TI=w((yie,RI)=>{"use strict";var{URL:PI}=require("url"),sg="http://localhost";RI.exports=function(t,r){(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]")&&t.startsWith("//")&&(t=sg+t);let n=typeof t=="object"?Object.assign(new PI(sg),t):new PI(t,sg);if(typeof r=="string"){r=new URLSearchParams(r);for(let i of r.keys()){n.searchParams.delete(i);for(let s of r.getAll(i))n.searchParams.append(i,s)}}else{let i=Object.assign({},t.query,r);for(let s in i){let o=i[s];if(Array.isArray(o)){n.searchParams.delete(s);for(let a of o)n.searchParams.append(s,a)}else n.searchParams.set(s,o)}}return n}});var OI=w((gie,tc)=>{"use strict";var{Readable:AI,addAbortSignal:hK}=require("stream"),ag=require("util"),dK=SI(),pK=require("assert"),$I=ah()(),mK=TI(),{EventEmitter:yK}=require("events");$I.create("FastifyDeprecationLightMyRequest","FST_LIGHTMYREQUEST_DEP01",'You are accessing "request.connection", use "request.socket" instead.');function gK(e){return e.port?e.host:e.hostname+(e.protocol==="https:"?":443":":80")}var og=class extends yK{constructor(t){super(),this.remoteAddress=t}};function II(e){return new t(this);function t(r){An.call(r,{...e,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(An.prototype))this.constructor.prototype[n]=An.prototype[n];return ag.inherits(this.constructor,e.Request),this}}function An(e){AI.call(this,{autoDestroy:!1});let t=mK(e.url||e.path,e.query);this.url=t.pathname+t.search,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=e.method?e.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=e.headers||{};for(let o in r){let a=r[o];pK(a!==void 0,'invalid value "undefined" for header '+o),this.headers[o.toLowerCase()]=""+a}if(this.headers["user-agent"]=this.headers["user-agent"]||"lightMyRequest",this.headers.host=this.headers.host||e.authority||gK(t),e.cookies){let{cookies:o}=e,a=Object.keys(o).map(u=>dK.serialize(u,o[u]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new og(e.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return $I.emit("FST_LIGHTMYREQUEST_DEP01"),this.socket},configurable:!0});let n=e.signal;n&&hK(n,this);let i=e.payload||e.body||null,s=i&&typeof i.resume=="function";i&&typeof i!="string"&&!s&&!Buffer.isBuffer(i)&&(i=JSON.stringify(i),this.headers["content-type"]=this.headers["content-type"]||"application/json"),i&&!s&&!this.headers.hasOwnProperty("content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(i)?i.length:Buffer.byteLength(i)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);return this._lightMyRequest={payload:i,isDone:!1,simulate:e.simulate||{}},this}ag.inherits(An,AI);ag.inherits(II,An);An.prototype.prepare=function(e){let t=this._lightMyRequest.payload;if(!t||typeof t.resume!="function")return e();let r=[];t.on("data",n=>r.push(Buffer.from(n))),t.on("end",()=>{let n=Buffer.concat(r);return this.headers["content-length"]=this.headers["content-length"]||""+n.length,this._lightMyRequest.payload=n,e()}),t.resume()};An.prototype._read=function(e){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})};An.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&(this._error=!0,process.nextTick(()=>this.emit("error",e))),process.nextTick(()=>this.emit("close")))};tc.exports=An;tc.exports.Request=An;tc.exports.CustomRequest=II});var kI=w((vie,bu)=>{"use strict";var xo={decodeValues:!0,map:!1,silent:!1};function ug(e){return typeof e=="string"&&!!e.trim()}function lg(e,t){var r=e.split(";").filter(ug),n=r.shift(),i=vK(n),s=i.name,o=i.value;t=t?Object.assign({},xo,t):xo;try{o=t.decodeValues?decodeURIComponent(o):o}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",u)}var a={name:s,value:o};return r.forEach(function(u){var l=u.split("="),f=l.shift().trimLeft().toLowerCase(),c=l.join("=");f==="expires"?a.expires=new Date(c):f==="max-age"?a.maxAge=parseInt(c,10):f==="secure"?a.secure=!0:f==="httponly"?a.httpOnly=!0:f==="samesite"?a.sameSite=c:a[f]=c}),a}function vK(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function CI(e,t){if(t=t?Object.assign({},xo,t):xo,!e)return t.map?{}:[];if(e.headers&&e.headers["set-cookie"])e=e.headers["set-cookie"];else if(e.headers){var r=e.headers[Object.keys(e.headers).find(function(i){return i.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},xo,t):xo,t.map){var n={};return e.filter(ug).reduce(function(i,s){var o=lg(s,t);return i[o.name]=o,i},n)}else return e.filter(ug).map(function(i){return lg(i,t)})}function wK(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,i,s,o,a;function u(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function l(){return i=e.charAt(r),i!=="="&&i!==";"&&i!==","}for(;r<e.length;){for(n=r,a=!1;u();)if(i=e.charAt(r),i===","){for(s=r,r+=1,u(),o=r;r<e.length&&l();)r+=1;r<e.length&&e.charAt(r)==="="?(a=!0,r=o,t.push(e.substring(n,s)),n=r):r=s+1}else r+=1;(!a||r>=e.length)&&t.push(e.substring(n,e.length))}return t}bu.exports=CI;bu.exports.parse=CI;bu.exports.parseString=lg;bu.exports.splitCookiesString=wK});var NI=w((wie,qI)=>{"use strict";var Eu=require("http"),{Writable:bK}=require("stream"),EK=require("util"),_K=kI();function Di(e,t,r){Eu.ServerResponse.call(this,e),this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]},this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(PK()),this._promiseCallback=typeof r=="function";let n=!1,i=o=>{if(n=!0,this._promiseCallback)return process.nextTick(()=>t(o));process.nextTick(()=>t(null,o))},s=o=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>r(o));process.nextTick(()=>t(o,null))}};this.once("finish",()=>{let o=SK(this);o.raw.req=e,i(o)}),this.connection.once("error",s),this.once("error",s),this.once("close",s)}EK.inherits(Di,Eu.ServerResponse);Di.prototype.setTimeout=function(e,t){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},e),this.on("timeout",t),this};Di.prototype.writeHead=function(){let e=Eu.ServerResponse.prototype.writeHead.apply(this,arguments);return xI(this),e};Di.prototype.write=function(e,t,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Eu.ServerResponse.prototype.write.call(this,e,t,r),this._lightMyRequest.payloadChunks.push(Buffer.from(e,t)),!0};Di.prototype.end=function(e,t,r){e&&this.write(e,t),Eu.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};Di.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&process.nextTick(()=>this.emit("error",e)),process.nextTick(()=>this.emit("close")))};Di.prototype.addTrailers=function(e){for(let t in e)this._lightMyRequest.trailers[t.toLowerCase().trim()]=e[t].toString().trim()};function SK(e){e._lightMyRequest.headers===null&&xI(e);let t={raw:{res:e},headers:e._lightMyRequest.headers,statusCode:e.statusCode,statusMessage:e.statusMessage,trailers:{},get cookies(){return _K.parse(this)}},r=Buffer.concat(e._lightMyRequest.payloadChunks);return t.rawPayload=r,t.payload=r.toString(),t.body=t.payload,t.trailers=e._lightMyRequest.trailers,t.json=function(){if(t.headers["content-type"].indexOf("application/json")<0)throw new Error("The content-type of the response is not application/json");return JSON.parse(t.payload)},t}function PK(){return new bK({write(e,t,r){setImmediate(r)}})}function xI(e){e._lightMyRequest.headers=Object.assign({},e.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(t=>{let r=new RegExp("\\r\\n"+t+": ([^\\r]*)\\r\\n"),n=e._header.match(r);n&&(e._lightMyRequest.headers[t.toLowerCase()]=n[1])})}qI.exports=Di});var DI=w((bie,fg)=>{"use strict";fg.exports=ft;fg.exports.default=ft;var RK={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function ft(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:i=e}={}){let s=null,o=0,a=o,u=!1,l=null,f=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let y;if(e.url===void 0&&(y="url")){let R={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};s===null?s=[R]:s.push(R),o++}}var h=f===o;h&&(u=!0,l=0);let c=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let y;if(e.path===void 0&&(y="path")){let R={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};s===null?s=[R]:s.push(R),o++}}var h=c===o;if(h&&u?(u=!1,l=[l,1]):h&&(u=!0,l=1),u)o=a,s!==null&&(a?s.length=a:s=null);else{let y={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:l},message:"must match exactly one schema in oneOf"};return s===null?s=[y]:s.push(y),o++,ft.errors=s,!1}if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.url!==void 0){let y=e.url,R=o,$=o,_=!1,I=null,x=o;if(typeof y!="string"){let D=typeof y,q;if(q===void 0)if(D=="number"||D=="boolean")q=""+y;else if(y===null)q="";else{let j={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[j]:s.push(j),o++}q!==void 0&&(y=q,e!==void 0&&(e.url=q))}var p=x===o;p&&(_=!0,I=0);let A=o;if(o===A)if(y&&typeof y=="object"&&!Array.isArray(y)){let D;if(y.pathname===void 0&&(D="pathname")){let q={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};s===null?s=[q]:s.push(q),o++}else{if(y.protocol!==void 0){let q=y.protocol,j=o;if(typeof q!="string"){let ue=typeof q,ee;if(ee===void 0)if(ue=="number"||ue=="boolean")ee=""+q;else if(q===null)ee="";else{let W={instancePath:t+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[W]:s.push(W),o++}ee!==void 0&&(q=ee,y!==void 0&&(y.protocol=ee))}var d=j===o}else var d=!0;if(d){if(y.hostname!==void 0){let q=y.hostname,j=o;if(typeof q!="string"){let ee=typeof q,W;if(W===void 0)if(ee=="number"||ee=="boolean")W=""+q;else if(q===null)W="";else{let le={instancePath:t+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[le]:s.push(le),o++}W!==void 0&&(q=W,y!==void 0&&(y.hostname=W))}var d=j===o}else var d=!0;if(d)if(y.pathname!==void 0){let q=y.pathname,j=o;if(typeof q!="string"){let ee=typeof q,W;if(W===void 0)if(ee=="number"||ee=="boolean")W=""+q;else if(q===null)W="";else{let le={instancePath:t+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[le]:s.push(le),o++}W!==void 0&&(q=W,y!==void 0&&(y.pathname=W))}var d=j===o}else var d=!0}}}else{let D={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[D]:s.push(D),o++}var p=A===o;if(p&&_?(_=!1,I=[I,1]):p&&(_=!0,I=1),_)o=$,s!==null&&($?s.length=$:s=null);else{let D={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:I},message:"must match exactly one schema in oneOf"};return s===null?s=[D]:s.push(D),o++,ft.errors=s,!1}var m=R===o}else var m=!0;if(m){if(e.path!==void 0){let y=e.path,R=o,$=o,_=!1,I=null,x=o;if(typeof y!="string"){let q=typeof y,j;if(j===void 0)if(q=="number"||q=="boolean")j=""+y;else if(y===null)j="";else{let ue={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ue]:s.push(ue),o++}j!==void 0&&(y=j,e!==void 0&&(e.path=j))}var b=x===o;b&&(_=!0,I=0);let A=o;if(o===A)if(y&&typeof y=="object"&&!Array.isArray(y)){let q;if(y.pathname===void 0&&(q="pathname")){let j={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:q},message:"must have required property '"+q+"'"};s===null?s=[j]:s.push(j),o++}else{if(y.protocol!==void 0){let j=y.protocol,ue=o;if(typeof j!="string"){let ee=typeof j,W;if(W===void 0)if(ee=="number"||ee=="boolean")W=""+j;else if(j===null)W="";else{let le={instancePath:t+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[le]:s.push(le),o++}W!==void 0&&(j=W,y!==void 0&&(y.protocol=W))}var v=ue===o}else var v=!0;if(v){if(y.hostname!==void 0){let j=y.hostname,ue=o;if(typeof j!="string"){let W=typeof j,le;if(le===void 0)if(W=="number"||W=="boolean")le=""+j;else if(j===null)le="";else{let M={instancePath:t+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[M]:s.push(M),o++}le!==void 0&&(j=le,y!==void 0&&(y.hostname=le))}var v=ue===o}else var v=!0;if(v)if(y.pathname!==void 0){let j=y.pathname,ue=o;if(typeof j!="string"){let W=typeof j,le;if(le===void 0)if(W=="number"||W=="boolean")le=""+j;else if(j===null)le="";else{let M={instancePath:t+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[M]:s.push(M),o++}le!==void 0&&(j=le,y!==void 0&&(y.pathname=le))}var v=ue===o}else var v=!0}}}else{let q={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[q]:s.push(q),o++}var b=A===o;if(b&&_?(_=!1,I=[I,1]):b&&(_=!0,I=1),_)o=$,s!==null&&($?s.length=$:s=null);else{let q={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:I},message:"must match exactly one schema in oneOf"};return s===null?s=[q]:s.push(q),o++,ft.errors=s,!1}var m=R===o}else var m=!0;if(m){if(e.cookies!==void 0){let y=e.cookies,R=o;if(o===R&&!(y&&typeof y=="object"&&!Array.isArray(y)))return ft.errors=[{instancePath:t+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=R===o}else var m=!0;if(m){if(e.headers!==void 0){let y=e.headers,R=o;if(o===R&&!(y&&typeof y=="object"&&!Array.isArray(y)))return ft.errors=[{instancePath:t+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=R===o}else var m=!0;if(m){if(e.query!==void 0){let y=e.query,R=o,$=o,_=!1,I=o;if(o===I&&!(y&&typeof y=="object"&&!Array.isArray(y))){let A={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[A]:s.push(A),o++}var P=I===o;if(_=_||P,!_){let A=o;if(typeof y!="string"){let q=typeof y,j;if(j===void 0)if(q=="number"||q=="boolean")j=""+y;else if(y===null)j="";else{let ue={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[ue]:s.push(ue),o++}j!==void 0&&(y=j,e!==void 0&&(e.query=j))}var P=A===o;_=_||P}if(_)o=$,s!==null&&($?s.length=$:s=null);else{let A={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return s===null?s=[A]:s.push(A),o++,ft.errors=s,!1}var m=R===o}else var m=!0;if(m){if(e.simulate!==void 0){let y=e.simulate,R=o;if(o===R)if(y&&typeof y=="object"&&!Array.isArray(y)){if(y.end!==void 0){let _=y.end,I=o;if(typeof _!="boolean"){let x;if(x===void 0)if(_==="false"||_===0||_===null)x=!1;else if(_==="true"||_===1)x=!0;else return ft.errors=[{instancePath:t+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;x!==void 0&&(_=x,y!==void 0&&(y.end=x))}var g=I===o}else var g=!0;if(g){if(y.split!==void 0){let _=y.split,I=o;if(typeof _!="boolean"){let A;if(A===void 0)if(_==="false"||_===0||_===null)A=!1;else if(_==="true"||_===1)A=!0;else return ft.errors=[{instancePath:t+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(_=A,y!==void 0&&(y.split=A))}var g=I===o}else var g=!0;if(g){if(y.error!==void 0){let _=y.error,I=o;if(typeof _!="boolean"){let A;if(A===void 0)if(_==="false"||_===0||_===null)A=!1;else if(_==="true"||_===1)A=!0;else return ft.errors=[{instancePath:t+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(_=A,y!==void 0&&(y.error=A))}var g=I===o}else var g=!0;if(g)if(y.close!==void 0){let _=y.close,I=o;if(typeof _!="boolean"){let A;if(A===void 0)if(_==="false"||_===0||_===null)A=!1;else if(_==="true"||_===1)A=!0;else return ft.errors=[{instancePath:t+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;A!==void 0&&(_=A,y!==void 0&&(y.close=A))}var g=I===o}else var g=!0}}}else return ft.errors=[{instancePath:t+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=R===o}else var m=!0;if(m){if(e.authority!==void 0){let y=e.authority,R=o;if(typeof y!="string"){let _=typeof y,I;if(I===void 0)if(_=="number"||_=="boolean")I=""+y;else if(y===null)I="";else return ft.errors=[{instancePath:t+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;I!==void 0&&(y=I,e!==void 0&&(e.authority=I))}var m=R===o}else var m=!0;if(m){if(e.remoteAddress!==void 0){let y=e.remoteAddress,R=o;if(typeof y!="string"){let _=typeof y,I;if(I===void 0)if(_=="number"||_=="boolean")I=""+y;else if(y===null)I="";else return ft.errors=[{instancePath:t+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;I!==void 0&&(y=I,e!==void 0&&(e.remoteAddress=I))}var m=R===o}else var m=!0;if(m){if(e.method!==void 0){let y=e.method,R=o;if(typeof y!="string"){let _=typeof y,I;if(I===void 0)if(_=="number"||_=="boolean")I=""+y;else if(y===null)I="";else return ft.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;I!==void 0&&(y=I,e!==void 0&&(e.method=I))}if(!(y==="ACL"||y==="BIND"||y==="CHECKOUT"||y==="CONNECT"||y==="COPY"||y==="DELETE"||y==="GET"||y==="HEAD"||y==="LINK"||y==="LOCK"||y==="M-SEARCH"||y==="MERGE"||y==="MKACTIVITY"||y==="MKCALENDAR"||y==="MKCOL"||y==="MOVE"||y==="NOTIFY"||y==="OPTIONS"||y==="PATCH"||y==="POST"||y==="PROPFIND"||y==="PROPPATCH"||y==="PURGE"||y==="PUT"||y==="REBIND"||y==="REPORT"||y==="SEARCH"||y==="SOURCE"||y==="SUBSCRIBE"||y==="TRACE"||y==="UNBIND"||y==="UNLINK"||y==="UNLOCK"||y==="UNSUBSCRIBE"||y==="acl"||y==="bind"||y==="checkout"||y==="connect"||y==="copy"||y==="delete"||y==="get"||y==="head"||y==="link"||y==="lock"||y==="m-search"||y==="merge"||y==="mkactivity"||y==="mkcalendar"||y==="mkcol"||y==="move"||y==="notify"||y==="options"||y==="patch"||y==="post"||y==="propfind"||y==="proppatch"||y==="purge"||y==="put"||y==="rebind"||y==="report"||y==="search"||y==="source"||y==="subscribe"||y==="trace"||y==="unbind"||y==="unlink"||y==="unlock"||y==="unsubscribe"))return ft.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:RK.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=R===o}else var m=!0;if(m)if(e.validate!==void 0){let y=e.validate,R=o;if(typeof y!="boolean"){let _;if(_===void 0)if(y==="false"||y===0||y===null)_=!1;else if(y==="true"||y===1)_=!0;else return ft.errors=[{instancePath:t+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;_!==void 0&&(y=_,e!==void 0&&(e.validate=_))}var m=R===o}else var m=!0}}}}}}}}}else return ft.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ft.errors=s,o===0}});var MI=w((Eie,ic)=>{"use strict";var TK=require("assert"),cg=OI(),hg=NI(),nc="The dispatch function has already been invoked",jI=DI();function FI(e,t,r){return typeof r>"u"?new _u(e,t):rc(e,t,r)}function LI(e,t,r,n){return r.once("error",function(i){this.destroyed&&n.destroy(i)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),r.prepare(()=>e.call(t,r,n))}function rc(e,t,r){if(t=typeof t=="string"?{url:t}:t,t.validate!==!1&&(TK(typeof e=="function","dispatchFunc should be a function"),!jI(t)))throw new Error(jI.errors.map(o=>o.message));let n=t.server||{},i=t.Request?cg.CustomRequest:cg;if(typeof r=="function"){let s=new i(t),o=new hg(s,r);return LI(e,n,s,o)}else return new Promise((s,o)=>{let a=new i(t),u=new hg(a,s,o);LI(e,n,a,u)})}function _u(e,t){typeof t=="string"?this.option={url:t}:this.option=Object.assign({},t),this.dispatch=e,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var AK=["delete","get","head","options","patch","post","put","trace"];AK.forEach(e=>{_u.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(nc);return this.option.url=t,this.option.method=e.toUpperCase(),this}});var $K=["body","cookies","headers","payload","query"];$K.forEach(e=>{_u.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(nc);return this.option[e]=t,this}});_u.prototype.end=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(nc);if(this._hasInvoked=!0,typeof e=="function")rc(this.dispatch,this.option,e);else return this._promise=rc(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(e=>{e!=="constructor"&&(_u.prototype[e]=function(...t){if(!this._promise){if(this._hasInvoked===!0)throw new Error(nc);this._hasInvoked=!0,this._promise=rc(this.dispatch,this.option)}return this._promise[e](...t)})});function IK(e){return e instanceof cg||e instanceof hg||e&&e.constructor&&e.constructor.name==="_CustomLMRRequest"}ic.exports=FI;ic.exports.inject=FI;ic.exports.isInjection=IK});var WI=w((_ie,uc)=>{"use strict";var OK="4.4.0",CK=ow(),kK=require("http"),Su,{kAvvioBoot:sc,kChildren:dg,kServerBindings:zI,kBodyLimit:xK,kRoutePrefix:HI,kLogLevel:qK,kLogSerializers:NK,kHooks:Pu,kSchemaController:ji,kRequestAcceptVersion:DK,kReplySerializerDefault:UI,kContentTypeParser:jK,kReply:LK,kRequest:FK,kFourOhFour:MK,kState:Li,kOptions:zK,kPluginNameChain:Ru,kSchemaErrorFormatter:pg,kErrorHandler:oc,kKeepAliveConnections:mg,kFourOhFourContext:HK}=ht(),{createServer:UK,compileValidateHTTPVersion:VK}=Ew(),ac=Al(),yg=Bl(),{supportedMethods:BK}=Ud(),qo=Qd(),Ts=Zd(),VI=$y(),{Hooks:GK,hookRunnerApplication:KK,supportedHooks:gg}=Zi(),{createLogger:QK}=cd(),WK=qy(),JK=s$(),{buildRouting:YK,validateBodyLimitOption:XK}=sI(),ZK=lI(),QI=cI(),eQ=bI(),tQ=Xi(),rQ=_I(),{defaultInitOptions:Tr}=QI,{FST_ERR_BAD_URL:nQ,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:iQ,AVVIO_ERRORS_MAP:BI,appendStackTrace:sQ}=sr(),{buildErrorHandler:GI}=fa(),oQ={config:{},onSend:[],onError:[],[HK]:null};function aQ(e){let t={};return["errorHandler","logLevel","logSerializers"].concat(gg).forEach(n=>{t[n]=e.store[n]}),Object.assign({},t)}function vg(e){if(e=e||{},typeof e!="object")throw new TypeError("Options must be an object");if(e.querystringParser&&typeof e.querystringParser!="function")throw new Error(`querystringParser option should be a function, instead got '${typeof e.querystringParser}'`);if(e.schemaController&&e.schemaController.bucket&&typeof e.schemaController.bucket!="function")throw new Error(`schemaController.bucket option should be a function, instead got '${typeof e.schemaController.bucket}'`);XK(e.bodyLimit);let t=e.requestIdHeader||Tr.requestIdHeader,r=e.genReqId||JK(),n=e.requestIdLogLabel||"reqId",i=e.bodyLimit||Tr.bodyLimit,s=e.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},e.ajv),a=e.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new Error(`ajv.customOptions option should be an object, instead got '${typeof o.customOptions}'`);if(!o.plugins||!Array.isArray(o.plugins))throw new Error(`ajv.plugins option should be an array, instead got '${typeof o.plugins}'`);let{logger:u,hasLogger:l}=QK(e);e.connectionTimeout=e.connectionTimeout||Tr.connectionTimeout,e.keepAliveTimeout=e.keepAliveTimeout||Tr.keepAliveTimeout,e.maxRequestsPerSocket=e.maxRequestsPerSocket||Tr.maxRequestsPerSocket,e.requestTimeout=e.requestTimeout||Tr.requestTimeout,e.logger=u,e.genReqId=r,e.requestIdHeader=t,e.requestIdLogLabel=n,e.disableRequestLogging=s,e.ajv=o,e.clientErrorHandler=e.clientErrorHandler||W;let f=QI(e);e.exposeHeadRoutes=f.exposeHeadRoutes;let c=e.constraints;e.versioning&&(tQ.emit("FSTDEP009"),c={...c,version:{name:"version",mustMatchWhenDerived:!0,storage:e.versioning.storage,deriveConstraint:e.versioning.deriveVersion,validate(k){if(typeof k!="string")throw new Error("Version constraint should be a string.")}}});let h=YK({config:{defaultRoute:le,onBadUrl:M,constraints:c,ignoreTrailingSlash:e.ignoreTrailingSlash||Tr.ignoreTrailingSlash,ignoreDuplicateSlashes:e.ignoreDuplicateSlashes||Tr.ignoreDuplicateSlashes,maxParamLength:e.maxParamLength||Tr.maxParamLength,caseSensitive:e.caseSensitive,allowUnsafeRegex:e.allowUnsafeRegex||Tr.allowUnsafeRegex,buildPrettyMeta:aQ,querystringParser:e.querystringParser}}),d=ZK(e),p=uQ(h.routing,e);e.http2SessionTimeout=f.http2SessionTimeout;let{server:m,listen:v}=UK(e,p),b=typeof m.closeAllConnections=="function",P=typeof m.closeIdleConnections=="function",g=e.forceCloseConnections;if(g==="idle"&&!P)throw new iQ;typeof g!="boolean"&&(g=P?"idle":!1);let y=!b&&g===!0?new Set:rQ(),R=ac.setupResponseListeners,$=VI.buildSchemaController(null,e.schemaController),_={[Li]:{listening:!1,closing:!1,started:!1},[mg]:y,[zK]:e,[dg]:[],[zI]:[],[xK]:i,[HI]:"",[qK]:"",[NK]:null,[Pu]:new GK,[ji]:$,[pg]:null,[oc]:GI(),[UI]:null,[jK]:new Ts(i,e.onProtoPoisoning||Tr.onProtoPoisoning,e.onConstructorPoisoning||Tr.onConstructorPoisoning),[LK]:ac.buildReply(ac),[FK]:yg.buildRequest(yg,e.trustProxy),[MK]:d,[WK.registeredPlugins]:[],[Ru]:["fastify"],[sc]:null,routing:p,getDefaultRoute:h.getDefaultRoute.bind(h),setDefaultRoute:h.setDefaultRoute.bind(h),delete:function(F,B,K){return h.prepareRoute.call(this,{method:"DELETE",url:F,options:B,handler:K})},get:function(F,B,K){return h.prepareRoute.call(this,{method:"GET",url:F,options:B,handler:K})},head:function(F,B,K){return h.prepareRoute.call(this,{method:"HEAD",url:F,options:B,handler:K})},patch:function(F,B,K){return h.prepareRoute.call(this,{method:"PATCH",url:F,options:B,handler:K})},post:function(F,B,K){return h.prepareRoute.call(this,{method:"POST",url:F,options:B,handler:K})},put:function(F,B,K){return h.prepareRoute.call(this,{method:"PUT",url:F,options:B,handler:K})},options:function(F,B,K){return h.prepareRoute.call(this,{method:"OPTIONS",url:F,options:B,handler:K})},all:function(F,B,K){return h.prepareRoute.call(this,{method:BK,url:F,options:B,handler:K})},route:function(F){return h.route.call(this,{options:F})},log:u,withTypeProvider:j,addHook:ue,addSchema:ee,getSchema:$.getSchema.bind($),getSchemas:$.getSchemas.bind($),setValidatorCompiler:bt,setSerializerCompiler:cn,setSchemaController:Qr,setReplySerializer:Ae,setSchemaErrorFormatter:J,addContentTypeParser:Ts.helpers.addContentTypeParser,hasContentTypeParser:Ts.helpers.hasContentTypeParser,getDefaultJsonParser:Ts.defaultParsers.getDefaultJsonParser,defaultTextParser:Ts.defaultParsers.defaultTextParser,removeContentTypeParser:Ts.helpers.removeContentTypeParser,removeAllContentTypeParsers:Ts.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function(k){return this[Ru].includes(k)},listen:v,server:m,addresses:function(){let k=this[zI].map(F=>F.address());return k.push(this.server.address()),k.filter(F=>F)},decorate:qo.add,hasDecorator:qo.exist,decorateReply:qo.decorateReply,decorateRequest:qo.decorateRequest,hasRequestDecorator:qo.existRequest,hasReplyDecorator:qo.existReply,inject:D,printRoutes:Je,setNotFoundHandler:Ie,setErrorHandler:et,initialConfig:f,addConstraintStrategy:h.addConstraintStrategy.bind(h),hasConstraintStrategy:h.hasConstraintStrategy.bind(h)};Object.defineProperties(_,{pluginName:{configurable:!0,get(){return this[Ru].length>1?this[Ru].join(" -> "):this[Ru][0]}},prefix:{configurable:!0,get(){return this[HI]}},validatorCompiler:{configurable:!0,get(){return this[ji].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[ji].getSerializerCompiler()}},version:{configurable:!0,get(){return OK}},errorHandler:{configurable:!0,get(){return this[oc].func}}}),e.schemaErrorFormatter&&(KI(e.schemaErrorFormatter),_[pg]=e.schemaErrorFormatter.bind(_));let I=Number(e.pluginTimeout),x=CK(_,{autostart:!1,timeout:isNaN(I)===!1?I:Tr.pluginTimeout,expose:{use:"register"}});x.override=eQ,x.on("start",()=>_[Li].started=!0),_[sc]=_.ready,_.ready=q,_.printPlugins=x.prettyPrint.bind(x),x.once("preReady",()=>{_.onClose((k,F)=>{if(_[Li].closing=!0,h.closeRoutes(),_[Li].listening)if(k.server.close(F),g==="idle")k.server.closeIdleConnections();else if(b&&g)k.server.closeAllConnections();else for(let B of _[mg])B.destroy(),_[mg].delete(B);else F(null)})}),_.setNotFoundHandler(),d.arrange404(_),h.setup(e,{avvio:x,fourOhFour:d,logger:u,hasLogger:l,setupResponseListeners:R,throwIfAlreadyStarted:A,validateHTTPVersion:VK(e),keepAliveConnections:y}),m.on("clientError",e.clientErrorHandler.bind(_));try{let F=require("diagnostics_channel").channel("fastify.initialization");F.hasSubscribers&&F.publish({fastify:_})}catch{}return _;function A(k){if(_[Li].started)throw new Error(k)}function D(k,F){if(Su===void 0&&(Su=MI()),_[Li].started){if(_[Li].closing){let B=new Error("Server is closed");if(F){F(B);return}else return Promise.reject(B)}return Su(p,k,F)}if(F)this.ready(B=>{B?F(B,null):Su(p,k,F)});else return Su((B,K)=>{this.ready(function(te){if(te){K.emit("error",te);return}p(B,K)})},k)}function q(k){let F,B;if(process.nextTick(K),!k)return new Promise(function(Pe,Ye){F=Pe,B=Ye});function K(){_[sc]((Pe,Ye)=>{Pe||_[Li].started?te(Pe):KK("onReady",_[sc],_,te),Ye()})}function te(Pe){if(Pe=Pe!=null&&BI[Pe.code]!=null?sQ(Pe,new BI[Pe.code](Pe.message)):Pe,k)Pe?k(Pe):k(void 0,_);else{if(Pe)return B(Pe);F(_)}}}function j(){return this}function ue(k,F){if(A('Cannot call "addHook" when fastify instance is already started!'),k==="onSend"||k==="preSerialization"||k==="onError"||k==="preParsing"){if(F.constructor.name==="AsyncFunction"&&F.length===4)throw new Error("Async function has too many arguments. Async hooks should not use the 'done' argument.")}else if(k==="onReady"){if(F.constructor.name==="AsyncFunction"&&F.length!==0)throw new Error("Async function has too many arguments. Async hooks should not use the 'done' argument.")}else if(F.constructor.name==="AsyncFunction"&&F.length===3)throw new Error("Async function has too many arguments. Async hooks should not use the 'done' argument.");return k==="onClose"?this.onClose(F):k==="onReady"?this[Pu].add(k,F):k==="onRoute"?(this[Pu].validate(k,F),this[Pu].add(k,F)):this.after((K,te)=>{B.call(this,k,F),te(K)}),this;function B(K,te){this[Pu].add(K,te),this[dg].forEach(Pe=>B.call(Pe,K,te))}}function ee(k){return A('Cannot call "addSchema" when fastify instance is already started!'),this[ji].add(k),this[dg].forEach(F=>F.addSchema(k)),this}function W(k,F){if(k.code==="ECONNRESET"||F.destroyed)return;let B=JSON.stringify({error:kK.STATUS_CODES[400],message:"Client Error",statusCode:400});this.log.trace({err:k},"client error"),F.writable&&F.write(`HTTP/1.1 400 Bad Request\r
Content-Length: ${B.length}\r
Content-Type: application/json\r
\r
${B}`),F.destroy(k)}function le(k,F){k.headers["accept-version"]!==void 0&&(k.headers[DK]=k.headers["accept-version"],k.headers["accept-version"]=void 0),d.router.lookup(k,F)}function M(k,F,B){if(a){let te=r(F),Pe=u.child({reqId:te});Pe.info({req:F},"incoming request");let Ye=new yg(te,null,F,null,Pe,oQ),Fe=new ac(B,Ye,Pe);return a(new nQ(k),Ye,Fe)}let K=`{"error":"Bad Request","message":"'${k}' is not a valid url component","statusCode":400}`;B.writeHead(400,{"Content-Type":"application/json","Content-Length":K.length}),B.end(K)}function Ie(k,F){return A('Cannot call "setNotFoundHandler" when fastify instance is already started!'),d.setNotFoundHandler.call(this,k,F,x,h.routeHandler),this}function bt(k){return A('Cannot call "setValidatorCompiler" when fastify instance is already started!'),this[ji].setValidatorCompiler(k),this}function J(k){return A('Cannot call "setSchemaErrorFormatter" when fastify instance is already started!'),KI(k),this[pg]=k.bind(this),this}function cn(k){return A('Cannot call "setSerializerCompiler" when fastify instance is already started!'),this[ji].setSerializerCompiler(k),this}function Qr(k){A('Cannot call "setSchemaController" when fastify instance is already started!');let F=this[ji],B=VI.buildSchemaController(F,Object.assign({},F.opts,k));return this[ji]=B,this.getSchema=B.getSchema.bind(B),this.getSchemas=B.getSchemas.bind(B),this}function Ae(k){return A('Cannot call "setReplySerializer" when fastify instance is already started!'),this[UI]=k,this}function et(k){return A('Cannot call "setErrorHandler" when fastify instance is already started!'),this[oc]=GI(this[oc],k.bind(this)),this}function Je(k={}){return k.includeMeta=k.includeHooks?k.includeMeta?gg.concat(k.includeMeta):gg:k.includeMeta,h.printRoutes(k)}}function KI(e){if(typeof e!="function")throw new Error(`schemaErrorFormatter option should be a function, instead got ${typeof e}`);if(e.constructor.name==="AsyncFunction")throw new Error("schemaErrorFormatter option should not be an async function")}function uQ(e,{rewriteUrl:t,logger:r}){return t?function(i,s){let o=i.url,a=t(i);o!==a&&(r.debug({originalUrl:o,url:a},"rewrite url"),typeof a=="string"?i.url=a:i.destroy(new Error(`Rewrite url for "${i.url}" needs to be of type "string" but received "${typeof a}"`))),e(i,s)}:e}uc.exports=vg;uc.exports.fastify=vg;uc.exports.default=vg});var XI=w((Hse,YI)=>{"use strict";var lQ=/at\s{1}(?:.*\.)?plugin\s{1}.*\n\s*(.*)/,fQ=/(\w*(\.\w*)*)\..*/;YI.exports=function(t){let r=t.match(lQ);return r?r[1].split(/[/\\]/).slice(-1)[0].match(fQ)[1]:"anonymous"}});var No=w((Use,ZI)=>{"use strict";var cQ=XI(),hQ=0;function Cg(e,t={}){let r=!1;if(typeof e.default<"u"&&(e=e.default),typeof e!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof e}'`);e[Symbol.for("skip-override")]=!0;let n=t&&t.name||dQ(e);if(typeof t=="string"&&(t={fastify:t}),typeof t!="object"||Array.isArray(t)||t===null)throw new TypeError("The options object should be an object");if(t.fastify!==void 0&&typeof t.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof t.fastify}'`);t.name||(r=!0,t.name=n+"-auto-"+hQ++),e[Symbol.for("fastify.display-name")]=t.name,e[Symbol.for("plugin-meta")]=t,e.default||(e.default=e);let i=pQ(t.name);return!r&&!e[i]&&(e[i]=e),e}function dQ(e){if(e.name.length>0)return e.name;try{throw new Error("anonymous function")}catch(t){return cQ(t.stack)}}function pQ(e){return e[0]==="@"&&(e=e.slice(1).replace("/","-")),e.replace(/-(.)/g,function(r,n){return n.toUpperCase()})}Cg.default=Cg;ZI.exports=Cg});var eO=w(kg=>{kg.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";kg.SYMBOL_SUPPORT=typeof Symbol<"u"});var ze=w((Bse,rO)=>{var tO=eO(),mQ=tO.ARRAY_BUFFER_SUPPORT,yQ=tO.SYMBOL_SUPPORT;rO.exports=function(t,r){var n,i,s,o,a;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof r!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||mQ&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(s=0,o=t.length;s<o;s++)r(t[s],s);return}if(typeof t.forEach=="function"){t.forEach(r);return}if(yQ&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(n=t,s=0;a=n.next(),a.done!==!0;)r(a.value,s),s++;return}for(i in t)t.hasOwnProperty(i)&&r(t[i],i)}});var Iu=w($u=>{var gQ=function(e,t){return e<t?-1:e>t?1:0},vQ=function(e,t){return e<t?1:e>t?-1:0};function wQ(e){return function(t,r){return e(r,t)}}function bQ(e){return e===2?function(t,r){return t[0]<r[0]?-1:t[0]>r[0]?1:t[1]<r[1]?-1:t[1]>r[1]?1:0}:function(t,r){for(var n=0;n<e;){if(t[n]<r[n])return-1;if(t[n]>r[n])return 1;n++}return 0}}$u.DEFAULT_COMPARATOR=gQ;$u.DEFAULT_REVERSE_COMPARATOR=vQ;$u.reverseComparator=wQ;$u.createTupleComparator=bQ});var tr=w($n=>{var EQ=Math.pow(2,8)-1,_Q=Math.pow(2,16)-1,SQ=Math.pow(2,32)-1,PQ=Math.pow(2,7)-1,RQ=Math.pow(2,15)-1,TQ=Math.pow(2,31)-1;$n.getPointerArray=function(e){var t=e-1;if(t<=EQ)return Uint8Array;if(t<=_Q)return Uint16Array;if(t<=SQ)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};$n.getSignedPointerArray=function(e){var t=e-1;return t<=PQ?Int8Array:t<=RQ?Int16Array:t<=TQ?Int32Array:Float64Array};$n.getNumberType=function(e){return e===(e|0)?Math.sign(e)===-1?e<=127&&e>=-128?Int8Array:e<=32767&&e>=-32768?Int16Array:Int32Array:e<=255?Uint8Array:e<=65535?Uint16Array:Uint32Array:Float64Array};var AQ={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};$n.getMinimalRepresentation=function(e,t){var r=null,n=0,i,s,o,a,u;for(a=0,u=e.length;a<u;a++)o=t?t(e[a]):e[a],s=$n.getNumberType(o),i=AQ[s.name],i>n&&(n=i,r=s);return r};$n.isTypedArray=function(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)};$n.concat=function(){var e=0,t,r,n;for(t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=new arguments[0].constructor(e);for(t=0,r=0;t<n;t++)i.set(arguments[t],r),r+=arguments[t].length;return i};$n.indices=function(e){for(var t=$n.getPointerArray(e),r=new t(e),n=0;n<e;n++)r[n]=n;return r}});var pr=w(Ou=>{var nO=ze(),iO=tr();function $Q(e){return Array.isArray(e)||iO.isTypedArray(e)}function xg(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size}function IQ(e){var t=xg(e),r=typeof t=="number"?new Array(t):[],n=0;return nO(e,function(i){r[n++]=i}),r}function OQ(e){var t=xg(e),r=typeof t=="number"?iO.getPointerArray(t):Array,n=typeof t=="number"?new Array(t):[],i=typeof t=="number"?new r(t):[],s=0;return nO(e,function(o){n[s]=o,i[s]=s++}),[n,i]}Ou.isArrayLike=$Q;Ou.guessLength=xg;Ou.toArray=IQ;Ou.toArrayWithIndices=OQ});var yc=w((Wse,uO)=>{var dc=ze(),sO=Iu(),In=pr(),mc=sO.DEFAULT_COMPARATOR,qg=sO.reverseComparator;function Ng(e,t,r,n){for(var i=t[n],s,o;n>r;){if(s=n-1>>1,o=t[s],e(i,o)<0){t[n]=o,n=s;continue}break}t[n]=i}function Cu(e,t,r){for(var n=t.length,i=r,s=t[r],o=2*r+1,a;o<n;)a=o+1,a<n&&e(t[o],t[a])>=0&&(o=a),t[r]=t[o],r=o,o=2*r+1;t[r]=s,Ng(e,t,i,r)}function oO(e,t,r){t.push(r),Ng(e,t,0,t.length-1)}function Dg(e,t){var r=t.pop();if(t.length!==0){var n=t[0];return t[0]=r,Cu(e,t,0),n}return r}function Do(e,t,r){if(t.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var n=t[0];return t[0]=r,Cu(e,t,0),n}function aO(e,t,r){var n;return t.length!==0&&e(t[0],r)<0&&(n=t[0],t[0]=r,r=n,Cu(e,t,0)),r}function $s(e,t){for(var r=t.length,n=r>>1,i=n;--i>=0;)Cu(e,t,i)}function jg(e,t){for(var r=t.length,n=0,i=new Array(r);n<r;)i[n++]=Dg(e,t);return i}function CQ(e,t,r){arguments.length===2&&(r=t,t=e,e=mc);var n=qg(e),i,s,o,a=1/0,u;if(t===1){if(In.isArrayLike(r)){for(i=0,s=r.length;i<s;i++)o=r[i],(a===1/0||e(o,a)<0)&&(a=o);return u=new r.constructor(1),u[0]=a,u}return dc(r,function(f){(a===1/0||e(f,a)<0)&&(a=f)}),[a]}if(In.isArrayLike(r)){if(t>=r.length)return r.slice().sort(e);for(u=r.slice(0,t),$s(n,u),i=t,s=r.length;i<s;i++)n(r[i],u[0])>0&&Do(n,u,r[i]);return u.sort(e)}var l=In.guessLength(r);return l!==null&&l<t&&(t=l),u=new Array(t),i=0,dc(r,function(f){i<t?u[i]=f:(i===t&&$s(n,u),n(f,u[0])>0&&Do(n,u,f)),i++}),u.length>i&&(u.length=i),u.sort(e)}function kQ(e,t,r){arguments.length===2&&(r=t,t=e,e=mc);var n=qg(e),i,s,o,a=-1/0,u;if(t===1){if(In.isArrayLike(r)){for(i=0,s=r.length;i<s;i++)o=r[i],(a===-1/0||e(o,a)>0)&&(a=o);return u=new r.constructor(1),u[0]=a,u}return dc(r,function(f){(a===-1/0||e(f,a)>0)&&(a=f)}),[a]}if(In.isArrayLike(r)){if(t>=r.length)return r.slice().sort(n);for(u=r.slice(0,t),$s(e,u),i=t,s=r.length;i<s;i++)e(r[i],u[0])>0&&Do(e,u,r[i]);return u.sort(n)}var l=In.guessLength(r);return l!==null&&l<t&&(t=l),u=new Array(t),i=0,dc(r,function(f){i<t?u[i]=f:(i===t&&$s(e,u),e(f,u[0])>0&&Do(e,u,f)),i++}),u.length>i&&(u.length=i),u.sort(n)}function $e(e){if(this.clear(),this.comparator=e||mc,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}$e.prototype.clear=function(){this.items=[],this.size=0};$e.prototype.push=function(e){return oO(this.comparator,this.items,e),++this.size};$e.prototype.peek=function(){return this.items[0]};$e.prototype.pop=function(){return this.size!==0&&this.size--,Dg(this.comparator,this.items)};$e.prototype.replace=function(e){return Do(this.comparator,this.items,e)};$e.prototype.pushpop=function(e){return aO(this.comparator,this.items,e)};$e.prototype.consume=function(){return this.size=0,jg(this.comparator,this.items)};$e.prototype.toArray=function(){return jg(this.comparator,this.items.slice())};$e.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:$e,enumerable:!1}),e};typeof Symbol<"u"&&($e.prototype[Symbol.for("nodejs.util.inspect.custom")]=$e.prototype.inspect);function pc(e){if(this.clear(),this.comparator=e||mc,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=qg(this.comparator)}pc.prototype=$e.prototype;$e.from=function(e,t){var r=new $e(t),n;return In.isArrayLike(e)?n=e.slice():n=In.toArray(e),$s(r.comparator,n),r.items=n,r.size=n.length,r};pc.from=function(e,t){var r=new pc(t),n;return In.isArrayLike(e)?n=e.slice():n=In.toArray(e),$s(r.comparator,n),r.items=n,r.size=n.length,r};$e.siftUp=Cu;$e.siftDown=Ng;$e.push=oO;$e.pop=Dg;$e.replace=Do;$e.pushpop=aO;$e.heapify=$s;$e.consume=jg;$e.nsmallest=CQ;$e.nlargest=kQ;$e.MinHeap=$e;$e.MaxHeap=pc;uO.exports=$e});var Lg=w((Jse,mO)=>{var lO=Iu(),fO=ze(),cO=lO.DEFAULT_COMPARATOR,xQ=lO.reverseComparator;function rr(e){if(this.clear(),this.comparator=e||cO,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.")}rr.prototype.clear=function(){this.root=null,this.min=null,this.size=0};function qQ(e){return{item:e,degree:0}}function hO(e,t){e.root?(t.right=e.root.right,t.left=e.root,e.root.right.left=t,e.root.right=t):e.root=t}rr.prototype.push=function(e){var t=qQ(e);return t.left=t,t.right=t,hO(this,t),(!this.min||this.comparator(t.item,this.min.item)<=0)&&(this.min=t),++this.size};rr.prototype.peek=function(){return this.min?this.min.item:void 0};function dO(e){for(var t=[],r=e,n=!1;!(r===e&&n);)r===e&&(n=!0),t.push(r),r=r.right;return t}function pO(e,t){e.root===t&&(e.root=t.right),t.left.right=t.right,t.right.left=t.left}function NQ(e,t){e.child?(t.right=e.child.right,t.left=e.child,e.child.right.left=t,e.child.right=t):e.child=t}function DQ(e,t,r){pO(e,t),t.left=t,t.right=t,NQ(r,t),r.degree++,t.parent=r}function jQ(e){var t=new Array(e.size),r=dO(e.root),n,i,s,o,a,u;for(n=0,i=r.length;n<i;n++){for(s=r[n],a=s.degree;t[a];)o=t[a],e.comparator(s.item,o.item)>0&&(u=s,s=o,o=u),DQ(e,o,s),t[a]=null,a++;t[a]=s}for(n=0;n<e.size;n++)t[n]&&e.comparator(t[n].item,e.min.item)<=0&&(e.min=t[n])}rr.prototype.pop=function(){if(!!this.size){var e=this.min;if(e.child){var t=dO(e.child),r,n,i;for(n=0,i=t.length;n<i;n++)r=t[n],hO(this,r),delete r.parent}return pO(this,e),e===e.right?(this.min=null,this.root=null):(this.min=e.right,jQ(this)),this.size--,e.item}};rr.prototype.inspect=function(){var e={size:this.size};return this.min&&"item"in this.min&&(e.top=this.min.item),Object.defineProperty(e,"constructor",{value:rr,enumerable:!1}),e};typeof Symbol<"u"&&(rr.prototype[Symbol.for("nodejs.util.inspect.custom")]=rr.prototype.inspect);function gc(e){if(this.clear(),this.comparator=e||cO,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.");this.comparator=xQ(this.comparator)}gc.prototype=rr.prototype;rr.from=function(e,t){var r=new rr(t);return fO(e,function(n){r.push(n)}),r};gc.from=function(e,t){var r=new gc(t);return fO(e,function(n){r.push(n)}),r};rr.MinFibonacciHeap=rr;rr.MaxFibonacciHeap=gc;mO.exports=rr});var bO=w((Yse,wO)=>{var yO="";function gO(e,t,r){for(var n=t.length,i=[],s=n,o=-1,a,u=0,l;s--;)o=Math.max(e[t[s]+r],o);for(l=o>>24&&32||o>>16&&24||o>>8&&16||8;u<l;u+=4){for(s=16;s--;)i[s]=[];for(s=n;s--;)i[e[t[s]+r]>>u&15].push(t[s]);for(a=0;a<16;a++)for(o=i[a].length;o--;)t[++s]=i[a][o]}}function LQ(e,t,r,n){return e[r]-e[n]||(r%3===2?e[r+1]-e[n+1]||t[r+2]-t[n+2]:t[r+1]-t[n+1])}function Fg(e,t){var r=[],n=[],i=2*t/3|0,s=t-i,o=i+1>>1,a=i,u=0,l,f=[],c=[];if(t===1)return[0];for(;a--;)r[a]=(a*3>>1)+1;for(a=3;a--;)gO(e,r,a);for(u=n[(r[0]/3|0)+(r[0]%3===1?0:o)]=1,a=1;a<i;a++)(e[r[a]]!==e[r[a-1]]||e[r[a]+1]!==e[r[a-1]+1]||e[r[a]+2]!==e[r[a-1]+2])&&u++,n[(r[a]/3|0)+(r[a]%3===1?0:o)]=u;if(u<i)for(n=Fg(n,i),a=i;a--;)r[a]=n[a]<o?n[a]*3+1:(n[a]-o)*3+2;for(a=i;a--;)f[r[a]]=a;for(f[t]=-1,f[t+1]=-2,n=t%3===1?[t-1]:[],a=0;a<i;a++)r[a]%3===1&&n.push(r[a]-1);for(gO(e,n,0),a=0,u=0,l=0;a<i&&u<s;)c[l++]=LQ(e,f,r[a],n[u])<0?r[a++]:n[u++];for(;a<i;)c[l++]=r[a++];for(;u<s;)c[l++]=n[u++];return c}function vO(e){var t=e.length,r=t%3,n=new Array(t+r),i,s;if(typeof e!="string"){var o=Object.create(null);for(s=0;s<t;s++)o[e[s]]||(o[e[s]]=!0);var a=Object.create(null),u=Object.keys(o).sort();for(s=0,i=u.length;s<i;s++)a[u[s]]=s+1;for(s=0;s<t;s++)n[s]=a[e[s]]}else for(s=0;s<t;s++)n[s]=e.charCodeAt(s);for(;s<r;s++)n[s]=0;return n}function Fi(e){this.hasArbitrarySequence=typeof e!="string",this.string=e,this.length=e.length,this.array=Fg(vO(e),this.length)}Fi.prototype.toString=function(){return this.array.join(",")};Fi.prototype.toJSON=function(){return this.array};Fi.prototype.inspect=function(){for(var e=new Array(this.length),t=0;t<this.length;t++)e[t]=this.string.slice(this.array[t]);return Object.defineProperty(e,"constructor",{value:Fi,enumerable:!1}),e};typeof Symbol<"u"&&(Fi.prototype[Symbol.for("nodejs.util.inspect.custom")]=Fi.prototype.inspect);function Mi(e){if(this.hasArbitrarySequence=typeof e[0]!="string",this.size=e.length,this.hasArbitrarySequence){this.text=[];for(var t=0,r=this.size;t<r;t++)this.text.push.apply(this.text,e[t]),t<r-1&&this.text.push(yO)}else this.text=e.join(yO);this.firstLength=e[0].length,this.length=this.text.length,this.array=Fg(vO(this.text),this.length)}Mi.prototype.longestCommonSubsequence=function(){var e=this.hasArbitrarySequence?[]:"",t,r,n,i,s;for(r=1;r<this.length;r++)if(i=this.array[r],s=this.array[r-1],!(i<this.firstLength&&s<this.firstLength)&&!(i>this.firstLength&&s>this.firstLength)){for(t=Math.min(this.length-i,this.length-s),n=0;n<t;n++)if(this.text[i+n]!==this.text[s+n]){t=n;break}t>e.length&&(e=this.text.slice(i,i+t))}return e};Mi.prototype.toString=function(){return this.array.join(",")};Mi.prototype.toJSON=function(){return this.array};Mi.prototype.inspect=function(){for(var e=new Array(this.length),t=0;t<this.length;t++)e[t]=this.text.slice(this.array[t]);return Object.defineProperty(e,"constructor",{value:Mi,enumerable:!1}),e};typeof Symbol<"u"&&(Mi.prototype[Symbol.for("nodejs.util.inspect.custom")]=Mi.prototype.inspect);Fi.GeneralizedSuffixArray=Mi;wO.exports=Fi});var RO=w((Xse,PO)=>{var FQ=ze();function an(e){this.size=0,this.items=new Map,this.inverse=e}function $r(){this.size=0,this.items=new Map,this.inverse=new an(this)}function EO(){this.size=0,this.items.clear(),this.inverse.items.clear()}$r.prototype.clear=EO;an.prototype.clear=EO;function _O(e,t){if(this.items.has(e)){var r=this.items.get(e);if(r===t)return this;this.inverse.items.delete(r)}if(this.inverse.items.has(t)){var n=this.inverse.items.get(t);if(n===e)return this;this.items.delete(n)}return this.items.set(e,t),this.inverse.items.set(t,e),this.size=this.items.size,this.inverse.size=this.inverse.items.size,this}$r.prototype.set=_O;an.prototype.set=_O;function SO(e){if(this.items.has(e)){var t=this.items.get(e);return this.items.delete(e),this.inverse.items.delete(t),this.size=this.items.size,this.inverse.size=this.inverse.items.size,!0}return!1}$r.prototype.delete=SO;an.prototype.delete=SO;var MQ=["has","get","forEach","keys","values","entries"];MQ.forEach(function(e){$r.prototype[e]=an.prototype[e]=function(){return Map.prototype[e].apply(this.items,arguments)}});typeof Symbol<"u"&&($r.prototype[Symbol.iterator]=$r.prototype.entries,an.prototype[Symbol.iterator]=an.prototype.entries);$r.prototype.inspect=function(){var e={left:this.items,right:this.inverse.items};return Object.defineProperty(e,"constructor",{value:$r,enumerable:!1}),e};typeof Symbol<"u"&&($r.prototype[Symbol.for("nodejs.util.inspect.custom")]=$r.prototype.inspect);an.prototype.inspect=function(){var e={left:this.inverse.items,right:this.items};return Object.defineProperty(e,"constructor",{value:an,enumerable:!1}),e};typeof Symbol<"u"&&(an.prototype[Symbol.for("nodejs.util.inspect.custom")]=an.prototype.inspect);$r.from=function(e){var t=new $r;return FQ(e,function(r,n){t.set(n,r)}),t};PO.exports=$r});var At=w((Zse,TO)=>{function On(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}typeof Symbol<"u"&&(On.prototype[Symbol.iterator]=function(){return this});On.of=function(){var e=arguments,t=e.length,r=0;return new On(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})};On.empty=function(){var e=new On(function(){return{done:!0}});return e};On.fromSequence=function(e){var t=0,r=e.length;return new On(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})};On.is=function(e){return e instanceof On?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"};TO.exports=On});var zg=w(un=>{function $O(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e&~(e>>1)}un.msb32=$O;function Mg(e){return e|=e>>1,e|=e>>2,e|=e>>4,e&~(e>>1)}un.msb8=Mg;un.test=function(e,t){return e>>t&1};un.criticalBit8=function(e,t){return Mg(e^t)};un.criticalBit8Mask=function(e,t){return~Mg(e^t)>>>0&255};un.testCriticalBit8=function(e,t){return 1+(e|t)>>8};un.criticalBit32Mask=function(e,t){return~$O(e^t)>>>0&4294967295};un.popcount=function(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127};var jo=new Uint8Array(Math.pow(2,8));for(ku=0,AO=jo.length;ku<AO;ku++)jo[ku]=un.popcount(ku);var ku,AO;un.table8Popcount=function(e){return jo[e&255]+jo[e>>8&255]+jo[e>>16&255]+jo[e>>24&255]}});var kO=w((toe,CO)=>{var OO=At(),IO=zg();function gt(e){this.length=e,this.clear()}gt.prototype.clear=function(){this.size=0,this.array=new Uint32Array(Math.ceil(this.length/32))};gt.prototype.set=function(e,t){var r=e>>5,n=e&31,i=this.array[r],s;return t===0||t===!1?s=this.array[r]&=~(1<<n):s=this.array[r]|=1<<n,s=s>>>0,s>i?this.size++:s<i&&this.size--,this};gt.prototype.reset=function(e){var t=e>>5,r=e&31,n=this.array[t],i;return i=this.array[t]&=~(1<<r),i<n&&this.size--,this};gt.prototype.flip=function(e){var t=e>>5,r=e&31,n=this.array[t],i=this.array[t]^=1<<r;return i=i>>>0,i>n?this.size++:i<n&&this.size--,this};gt.prototype.get=function(e){var t=e>>5,r=e&31;return this.array[t]>>r&1};gt.prototype.test=function(e){return Boolean(this.get(e))};gt.prototype.rank=function(e){if(this.size===0)return 0;for(var t=e>>5,r=e&31,n=0,i=0;i<t;i++)n+=IO.table8Popcount(this.array[i]);var s=this.array[t]&(1<<r)-1;return n+=IO.table8Popcount(s),n};gt.prototype.select=function(e){if(this.size===0||e>=this.length)return-1;for(var t,r=32,n=0,i=0,s=0,o=this.array.length;s<o;s++)if(t=this.array[s],t!==0){s===o-1&&(r=this.length%32||32);for(var a=0;a<r;a++,n++)if(i+=t>>a&1,i===e)return n}};gt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.length,n,i,s=32,o=0,a=this.array.length;o<a;o++){n=this.array[o],o===a-1&&(s=r%32||32);for(var u=0;u<s;u++)i=n>>u&1,e.call(t,i,o*32+u)}};gt.prototype.values=function(){var e=this.length,t=!1,r,n,i=this.array,s=i.length,o=0,a=-1,u=32;return new OO(function l(){if(!t){if(o>=s)return{done:!0};o===s-1&&(u=e%32||32),r=i[o++],t=!0,a=-1}return a++,a>=u?(t=!1,l()):(n=r>>a&1,{value:n})})};gt.prototype.entries=function(){var e=this.length,t=!1,r,n,i=this.array,s,o=i.length,a=0,u=-1,l=32;return new OO(function f(){if(!t){if(a>=o)return{done:!0};a===o-1&&(l=e%32||32),r=i[a++],t=!0,u=-1}return u++,s=~-a*32+u,u>=l?(t=!1,f()):(n=r>>u&1,{value:[s,n]})})};typeof Symbol<"u"&&(gt.prototype[Symbol.iterator]=gt.prototype.values);gt.prototype.inspect=function(){var e=new Uint8Array(this.length);return this.forEach(function(t,r){e[r]=t}),Object.defineProperty(e,"constructor",{value:gt,enumerable:!1}),e};typeof Symbol<"u"&&(gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=gt.prototype.inspect);gt.prototype.toJSON=function(){return Array.from(this.array)};CO.exports=gt});var DO=w((roe,NO)=>{var qO=At(),xO=zg(),zQ=function(e){return Math.max(1,Math.ceil(e*1.5))};function HQ(e){return new Uint32Array(Math.ceil(e/32))}function He(e){var t=e||0,r=zQ;typeof e=="object"&&(t=e.initialLength||e.initialCapacity||0,r=e.policy||r),this.size=0,this.length=t,this.capacity=Math.ceil(this.length/32)*32,this.policy=r,this.array=HQ(this.capacity)}He.prototype.set=function(e,t){if(this.length<e)throw new Error("BitVector.set: index out of bounds.");var r=e>>5,n=e&31,i=this.array[r],s;return t===0||t===!1?s=this.array[r]&=~(1<<n):s=this.array[r]|=1<<n,s=s>>>0,s>i?this.size++:s<i&&this.size--,this};He.prototype.reset=function(e){var t=e>>5,r=e&31,n=this.array[t],i;return i=this.array[t]&=~(1<<r),i<n&&this.size--,this};He.prototype.flip=function(e){var t=e>>5,r=e&31,n=this.array[t],i=this.array[t]^=1<<r;return i=i>>>0,i>n?this.size++:i<n&&this.size--,this};He.prototype.applyPolicy=function(e){var t=this.policy(e||this.capacity);if(typeof t!="number"||t<0)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(t<=this.capacity)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned a less or equal capacity to allocate.");return Math.ceil(t/32)*32};He.prototype.reallocate=function(e){var t=e;if(e=Math.ceil(e/32)*32,t<this.length&&(this.length=t),e===this.capacity)return this;var r=this.array,n=e/32;return n===this.array.length?this:(n>this.array.length?(this.array=new Uint32Array(n),this.array.set(r,0)):this.array=r.slice(0,n),this.capacity=e,this)};He.prototype.grow=function(e){var t;if(typeof e=="number"){if(this.capacity>=e)return this;for(t=this.capacity;t<e;)t=this.applyPolicy(t);return this.reallocate(t),this}return t=this.applyPolicy(),this.reallocate(t),this};He.prototype.resize=function(e){return e===this.length?this:e<this.length?(this.length=e,this):(this.length=e,this.reallocate(e),this)};He.prototype.push=function(e){if(this.capacity===this.length&&this.grow(),e===0||e===!1)return++this.length;this.size++;var t=this.length++,r=t>>5,n=t&31;return this.array[r]|=1<<n,this.length};He.prototype.pop=function(){if(this.length!==0){var e=--this.length,t=e>>5,r=e&31;return this.array[t]>>r&1}};He.prototype.get=function(e){if(!(this.length<e)){var t=e>>5,r=e&31;return this.array[t]>>r&1}};He.prototype.test=function(e){return this.length<e?!1:Boolean(this.get(e))};He.prototype.rank=function(e){if(this.size===0)return 0;for(var t=e>>5,r=e&31,n=0,i=0;i<t;i++)n+=xO.table8Popcount(this.array[i]);var s=this.array[t]&(1<<r)-1;return n+=xO.table8Popcount(s),n};He.prototype.select=function(e){if(this.size===0||e>=this.length)return-1;for(var t,r=32,n=0,i=0,s=0,o=this.array.length;s<o;s++)if(t=this.array[s],t!==0){s===o-1&&(r=this.length%32||32);for(var a=0;a<r;a++,n++)if(i+=t>>a&1,i===e)return n}};He.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.length,n,i,s=32,o=0,a=this.array.length;o<a;o++){n=this.array[o],o===a-1&&(s=r%32||32);for(var u=0;u<s;u++)i=n>>u&1,e.call(t,i,o*32+u)}};He.prototype.values=function(){var e=this.length,t=!1,r,n,i=this.array,s=i.length,o=0,a=-1,u=32;return new qO(function l(){if(!t){if(o>=s)return{done:!0};o===s-1&&(u=e%32||32),r=i[o++],t=!0,a=-1}return a++,a>=u?(t=!1,l()):(n=r>>a&1,{value:n})})};He.prototype.entries=function(){var e=this.length,t=!1,r,n,i=this.array,s,o=i.length,a=0,u=-1,l=32;return new qO(function f(){if(!t){if(a>=o)return{done:!0};a===o-1&&(l=e%32||32),r=i[a++],t=!0,u=-1}return u++,s=~-a*32+u,u>=l?(t=!1,f()):(n=r>>u&1,{value:[s,n]})})};typeof Symbol<"u"&&(He.prototype[Symbol.iterator]=He.prototype.values);He.prototype.inspect=function(){var e=new Uint8Array(this.length);return this.forEach(function(t,r){e[r]=t}),Object.defineProperty(e,"constructor",{value:He,enumerable:!1}),e};typeof Symbol<"u"&&(He.prototype[Symbol.for("nodejs.util.inspect.custom")]=He.prototype.inspect);He.prototype.toJSON=function(){return Array.from(this.array.slice(0,(this.length>>5)+1))};NO.exports=He});var LO=w((noe,jO)=>{function Is(e,t){return(e&65535)*t+(((e>>>16)*t&65535)<<16)&4294967295}function UQ(e,t){return(e&65535)+(t>>>16)+(((e>>>16)+t&65535)<<16)&4294967295}function Hg(e,t){return e<<t|e>>>32-t}jO.exports=function(t,r){var n=3432918353,i=461845907,s=15,o=13,a=5,u=1801774676,l=t,f,c,h;for(c=0,h=r.length-4;c<=h;c+=4)f=r[c]|r[c+1]<<8|r[c+2]<<16|r[c+3]<<24,f=Is(f,n),f=Hg(f,s),f=Is(f,i),l^=f,l=Hg(l,o),l=Is(l,a),l=UQ(l,u);switch(f=0,r.length&3){case 3:f^=r[c+2]<<16;case 2:f^=r[c+1]<<8;case 1:f^=r[c],f=Is(f,n),f=Hg(f,s),f=Is(f,i),l^=f;default:}return l^=r.length,l^=l>>>16,l=Is(l,2246822507),l^=l>>>13,l=Is(l,3266489909),l^=l>>>16,l>>>0}});var HO=w((ioe,zO)=>{var VQ=LO(),BQ=ze(),GQ=Math.LN2*Math.LN2,KQ={errorRate:.005};function FO(e){var t=new Uint16Array(e.length),r,n;for(r=0,n=e.length;r<n;r++)t[r]=e.charCodeAt(r);return t}function MO(e,t,r){var n=VQ(t*4221880213&4294967295,r);return n%(e*8)}function Os(e){var t={};if(!e)throw new Error("mnemonist/BloomFilter.constructor: a BloomFilter must be created with a capacity.");if(typeof e=="object"?t=e:t.capacity=e,typeof t.capacity!="number"||t.capacity<=0)throw new Error("mnemonist/BloomFilter.constructor: `capacity` option should be a positive integer.");if(this.capacity=t.capacity,this.errorRate=t.errorRate||KQ.errorRate,typeof this.errorRate!="number"||t.errorRate<=0)throw new Error("mnemonist/BloomFilter.constructor: `errorRate` option should be a positive float.");this.clear()}Os.prototype.clear=function(){var e=-1/GQ*this.capacity*Math.log(this.errorRate),t=e/8|0;this.hashFunctions=t*8/this.capacity*Math.LN2|0,this.data=new Uint8Array(t)};Os.prototype.add=function(e){for(var t=FO(e),r=0,n=this.hashFunctions;r<n;r++){var i=MO(this.data.length,r,t),s=1<<(7&i);this.data[i>>3]|=s}return this};Os.prototype.test=function(e){for(var t=FO(e),r=0,n=this.hashFunctions;r<n;r++){var i=MO(this.data.length,r,t);if(!(this.data[i>>3]&1<<(7&i)))return!1}return!0};Os.prototype.toJSON=function(){return this.data};Os.from=function(e,t){if(!t&&(t=e.length||e.size,typeof t!="number"))throw new Error("BloomFilter.from: could not infer the filter's capacity. Try passing it as second argument.");var r=new Os(t);return BQ(e,function(n){r.add(n)}),r};zO.exports=Os});var VO=w((soe,UO)=>{var QQ=ze();function ln(e){if(typeof e!="function")throw new Error("mnemonist/BKTree.constructor: given `distance` should be a function.");this.distance=e,this.clear()}ln.prototype.add=function(e){if(!this.root)return this.root={item:e,children:{}},this.size++,this;for(var t=this.root,r;r=this.distance(e,t.item),!!t.children[r];)t=t.children[r];return t.children[r]={item:e,children:{}},this.size++,this};ln.prototype.search=function(e,t){if(!this.root)return[];for(var r=[],n=[this.root],i,s,o,a,u;n.length;)for(i=n.pop(),o=this.distance(t,i.item),o<=e&&r.push({item:i.item,distance:o}),a=o-e,u=o+e+1;a<u;a++)s=i.children[a],s&&n.push(s);return r};ln.prototype.clear=function(){this.size=0,this.root=null};ln.prototype.toJSON=function(){return this.root};ln.prototype.inspect=function(){for(var e=[],t=[this.root],r,n;t.length;)if(r=t.pop(),!!r){e.push(r.item);for(n in r.children)t.push(r.children[n])}return Object.defineProperty(e,"constructor",{value:ln,enumerable:!1}),e};typeof Symbol<"u"&&(ln.prototype[Symbol.for("nodejs.util.inspect.custom")]=ln.prototype.inspect);ln.from=function(e,t){var r=new ln(t);return QQ(e,function(n){r.add(n)}),r};UO.exports=ln});var Vg=w((ooe,GO)=>{var Ug=pr(),BO=At();function nt(e,t){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=e,this.capacity=t,this.items=new e(this.capacity),this.clear()}nt.prototype.clear=function(){this.start=0,this.size=0};nt.prototype.push=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var t=(this.start+this.size)%this.capacity;return this.items[t]=e,++this.size};nt.prototype.unshift=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var t=this.start-1;return this.start===0&&(t=this.capacity-1),this.items[t]=e,this.start=t,++this.size};nt.prototype.pop=function(){if(this.size===0)return;let e=(this.start+this.size-1)%this.capacity;return this.size--,this.items[e]};nt.prototype.shift=function(){if(this.size!==0){var e=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[e]}};nt.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};nt.prototype.peekLast=function(){if(this.size!==0){var e=this.start+this.size-1;return e>this.capacity&&(e-=this.capacity),this.items[e]}};nt.prototype.get=function(e){if(this.size!==0)return e=this.start+e,e>this.capacity&&(e-=this.capacity),this.items[e]};nt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.capacity,n=this.size,i=this.start,s=0;s<n;)e.call(t,this.items[i],s,this),i++,s++,i===r&&(i=0)};nt.prototype.toArray=function(){var e=this.start+this.size;if(e<this.capacity)return this.items.slice(this.start,e);for(var t=new this.ArrayClass(this.size),r=this.capacity,n=this.size,i=this.start,s=0;s<n;)t[s]=this.items[i],i++,s++,i===r&&(i=0);return t};nt.prototype.values=function(){var e=this.items,t=this.capacity,r=this.size,n=this.start,i=0;return new BO(function(){if(i>=r)return{done:!0};var s=e[n];return n++,i++,n===t&&(n=0),{value:s,done:!1}})};nt.prototype.entries=function(){var e=this.items,t=this.capacity,r=this.size,n=this.start,i=0;return new BO(function(){if(i>=r)return{done:!0};var s=e[n];return n++,n===t&&(n=0),{value:[i++,s],done:!1}})};typeof Symbol<"u"&&(nt.prototype[Symbol.iterator]=nt.prototype.values);nt.prototype.inspect=function(){var e=this.toArray();return e.type=this.ArrayClass.name,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:nt,enumerable:!1}),e};typeof Symbol<"u"&&(nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=nt.prototype.inspect);nt.from=function(e,t,r){if(arguments.length<3&&(r=Ug.guessLength(e),typeof r!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new nt(t,r);if(Ug.isArrayLike(e)){var i,s;for(i=0,s=e.length;i<s;i++)n.items[i]=e[i];return n.size=s,n}return Ug.forEach(e,function(o){n.push(o)}),n};GO.exports=nt});var WO=w((aoe,QO)=>{var Bg=pr(),Gg=Vg();function Lo(e,t){if(arguments.length<2)throw new Error("mnemonist/circular-buffer: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/circular-buffer: `capacity` should be a positive number.");this.ArrayClass=e,this.capacity=t,this.items=new e(this.capacity),this.clear()}function KO(e){Lo.prototype[e]=Gg.prototype[e]}Object.keys(Gg.prototype).forEach(KO);typeof Symbol<"u"&&Object.getOwnPropertySymbols(Gg.prototype).forEach(KO);Lo.prototype.push=function(e){var t=(this.start+this.size)%this.capacity;return this.items[t]=e,this.size===this.capacity?(this.start=(t+1)%this.capacity,this.size):++this.size};Lo.prototype.unshift=function(e){var t=this.start-1;return this.start===0&&(t=this.capacity-1),this.items[t]=e,this.size===this.capacity?(this.start=t,this.size):(this.start=t,++this.size)};Lo.from=function(e,t,r){if(arguments.length<3&&(r=Bg.guessLength(e),typeof r!="number"))throw new Error("mnemonist/circular-buffer.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new Lo(t,r);if(Bg.isArrayLike(e)){var i,s;for(i=0,s=e.length;i<s;i++)n.items[i]=e[i];return n.size=s,n}return Bg.forEach(e,function(o){n.push(o)}),n};QO.exports=Lo});var YO=w((uoe,JO)=>{function Lt(e){if(typeof e!="function")throw new Error("mnemonist/DefaultMap.constructor: expecting a function.");this.items=new Map,this.factory=e,this.size=0}Lt.prototype.clear=function(){this.items.clear(),this.size=0};Lt.prototype.get=function(e){var t=this.items.get(e);return typeof t>"u"&&(t=this.factory(e,this.size),this.items.set(e,t),this.size++),t};Lt.prototype.peek=function(e){return this.items.get(e)};Lt.prototype.set=function(e,t){return this.items.set(e,t),this.size=this.items.size,this};Lt.prototype.has=function(e){return this.items.has(e)};Lt.prototype.delete=function(e){var t=this.items.delete(e);return this.size=this.items.size,t};Lt.prototype.forEach=function(e,t){t=arguments.length>1?t:this,this.items.forEach(e,t)};Lt.prototype.entries=function(){return this.items.entries()};Lt.prototype.keys=function(){return this.items.keys()};Lt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Lt.prototype[Symbol.iterator]=Lt.prototype.entries);Lt.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Lt.prototype.inspect);Lt.autoIncrement=function(){var e=0;return function(){return e++}};JO.exports=Lt});var ZO=w((loe,XO)=>{function Cn(e){if(typeof e!="function")throw new Error("mnemonist/DefaultWeakMap.constructor: expecting a function.");this.items=new WeakMap,this.factory=e}Cn.prototype.clear=function(){this.items=new WeakMap};Cn.prototype.get=function(e){var t=this.items.get(e);return typeof t>"u"&&(t=this.factory(e),this.items.set(e,t)),t};Cn.prototype.peek=function(e){return this.items.get(e)};Cn.prototype.set=function(e,t){return this.items.set(e,t),this};Cn.prototype.has=function(e){return this.items.has(e)};Cn.prototype.delete=function(e){return this.items.delete(e)};Cn.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Cn.prototype[Symbol.for("nodejs.util.inspect.custom")]=Cn.prototype.inspect);XO.exports=Cn});var tC=w((foe,eC)=>{var Kg=tr();function kn(e){var t=Kg.getPointerArray(e),r=Kg.getPointerArray(Math.log2(e));this.size=e,this.dimension=e,this.parents=new t(e),this.ranks=new r(e);for(var n=0;n<e;n++)this.parents[n]=n}kn.prototype.find=function(e){for(var t=e,r,n;r=this.parents[t],t!==r;)t=r;for(;n=this.parents[e],n!==t;)this.parents[e]=t,e=n;return t};kn.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);if(r===n)return this;this.dimension--;var i=this.ranks[e],s=this.ranks[t];return i<s?this.parents[r]=n:i>s?this.parents[n]=r:(this.parents[n]=r,this.ranks[r]++),this};kn.prototype.connected=function(e,t){var r=this.find(e);return r===this.find(t)};kn.prototype.mapping=function(){for(var e=Kg.getPointerArray(this.dimension),t={},r=new e(this.size),n=0,i,s=0,o=this.parents.length;s<o;s++)i=this.find(s),typeof t[i]>"u"?(r[s]=n,t[i]=n++):r[s]=t[i];return r};kn.prototype.compile=function(){for(var e={},t=new Array(this.dimension),r=0,n,i=0,s=this.parents.length;i<s;i++)n=this.find(i),typeof e[n]>"u"?(t[r]=[i],e[n]=r++):t[e[n]].push(i);return t};kn.prototype.inspect=function(){var e=this.compile();return Object.defineProperty(e,"constructor",{value:kn,enumerable:!1}),e};typeof Symbol<"u"&&(kn.prototype[Symbol.for("nodejs.util.inspect.custom")]=kn.prototype.inspect);eC.exports=kn});var vc=w((coe,iC)=>{var rC=Iu(),Qg=yc(),WQ=rC.DEFAULT_COMPARATOR,JQ=rC.reverseComparator;function YQ(e,t,r,n){for(var i=r,s=n,o=t[n],a=2*n+1,u;a<i;)u=a+1,u<i&&e(t[a],t[u])>=0&&(a=u),t[n]=t[a],n=a,a=2*n+1;t[n]=o,Qg.siftDown(e,t,s,n)}function nC(e,t,r,n){for(var i=n,s=i,o=new e(n),a,u;s>0;)a=r[--s],s!==0&&(u=r[0],r[0]=a,YQ(t,r,--n,0),a=u),o[s]=a;return o}function xn(e,t,r){if(arguments.length===2&&(r=t,t=null),this.ArrayClass=e,this.capacity=r,this.items=new e(r),this.clear(),this.comparator=t||WQ,typeof r!="number"&&r<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=JQ(this.comparator)}xn.prototype.clear=function(){this.size=0};xn.prototype.push=function(e){return this.size<this.capacity?(this.items[this.size]=e,Qg.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(e,this.items[0])>0&&Qg.replace(this.comparator,this.items,e),this.size};xn.prototype.peek=function(){return this.items[0]};xn.prototype.consume=function(){var e=nC(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,e};xn.prototype.toArray=function(){return nC(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)};xn.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:xn,enumerable:!1}),e};typeof Symbol<"u"&&(xn.prototype[Symbol.for("nodejs.util.inspect.custom")]=xn.prototype.inspect);iC.exports=xn});var aC=w((hoe,oC)=>{var XQ=ze(),sC=function(e){return e};function Vt(e){if(this.items=new Map,this.clear(),Array.isArray(e)?(this.writeHashFunction=e[0],this.readHashFunction=e[1]):(this.writeHashFunction=e,this.readHashFunction=e),this.writeHashFunction||(this.writeHashFunction=sC),this.readHashFunction||(this.readHashFunction=sC),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.")}Vt.prototype.clear=function(){this.items.clear(),this.size=0};Vt.prototype.add=function(e){var t=this.writeHashFunction(e);return this.items.set(t,e),this.size=this.items.size,this};Vt.prototype.set=function(e,t){return e=this.writeHashFunction(e),this.items.set(e,t),this.size=this.items.size,this};Vt.prototype.get=function(e){return e=this.readHashFunction(e),this.items.get(e)};Vt.prototype.has=function(e){return e=this.readHashFunction(e),this.items.has(e)};Vt.prototype.forEach=function(e,t){t=arguments.length>1?t:this,this.items.forEach(function(r){e.call(t,r,r)})};Vt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Vt.prototype[Symbol.iterator]=Vt.prototype.values);Vt.prototype.inspect=function(){var e=Array.from(this.items.values());return Object.defineProperty(e,"constructor",{value:Vt,enumerable:!1}),e};typeof Symbol<"u"&&(Vt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Vt.prototype.inspect);Vt.from=function(e,t,r){var n=new Vt(t);return XQ(e,function(i,s){r?n.set(s,i):n.add(i)}),n};oC.exports=Vt});var Wg=w((doe,uC)=>{var wc=At(),ZQ=ze();function De(e){this.Container=e||Array,this.items=new Map,this.clear(),Object.defineProperty(this.items,"constructor",{value:De,enumerable:!1})}De.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};De.prototype.set=function(e,t){var r=this.items.get(e),n;return r||(this.dimension++,r=new this.Container,this.items.set(e,r)),this.Container===Set?(n=r.size,r.add(t),n<r.size&&this.size++):(r.push(t),this.size++),this};De.prototype.delete=function(e){var t=this.items.get(e);return t?(this.size-=this.Container===Set?t.size:t.length,this.dimension--,this.items.delete(e),!0):!1};De.prototype.remove=function(e,t){var r=this.items.get(e),n,i;return r?this.Container===Set?(n=r.delete(t),n&&this.size--,r.size===0&&(this.items.delete(e),this.dimension--),n):(i=r.indexOf(t),i===-1?!1:(this.size--,r.length===1?(this.items.delete(e),this.dimension--,!0):(r.splice(i,1),!0))):!1};De.prototype.has=function(e){return this.items.has(e)};De.prototype.get=function(e){return this.items.get(e)};De.prototype.multiplicity=function(e){var t=this.items.get(e);return typeof t>"u"?0:this.Container===Set?t.size:t.length};De.prototype.count=De.prototype.multiplicity;De.prototype.forEach=function(e,t){t=arguments.length>1?t:this;var r;function n(i){e.call(t,i,r)}this.items.forEach(function(i,s){r=s,i.forEach(n)})};De.prototype.forEachAssociation=function(e,t){t=arguments.length>1?t:this,this.items.forEach(e,t)};De.prototype.keys=function(){return this.items.keys()};De.prototype.values=function(){var e=this.items.values(),t=!1,r,n,i,s;return this.Container===Set?new wc(function o(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,r=n.value.values()}return n=r.next(),n.done?(t=!1,o()):{done:!1,value:n.value}}):new wc(function o(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,r=n.value,i=0,s=r.length}return i>=s?(t=!1,o()):{done:!1,value:r[i++]}})};De.prototype.entries=function(){var e=this.items.entries(),t=!1,r,n,i,s,o;return this.Container===Set?new wc(function a(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,i=n.value[0],r=n.value[1].values()}return n=r.next(),n.done?(t=!1,a()):{done:!1,value:[i,n.value]}}):new wc(function a(){if(!t){if(n=e.next(),n.done)return{done:!0};t=!0,i=n.value[0],r=n.value[1],s=0,o=r.length}return s>=o?(t=!1,a()):{done:!1,value:[i,r[s++]]}})};De.prototype.containers=function(){return this.items.values()};De.prototype.associations=function(){return this.items.entries()};typeof Symbol<"u"&&(De.prototype[Symbol.iterator]=De.prototype.entries);De.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(De.prototype[Symbol.for("nodejs.util.inspect.custom")]=De.prototype.inspect);De.prototype.toJSON=function(){return this.items};De.from=function(e,t){var r=new De(t);return ZQ(e,function(n,i){r.set(i,n)}),r};uC.exports=De});var cC=w((poe,fC)=>{var eW=Wg(),tW=ze(),lC=function(e){return e};function Bt(e,t){if(this.items=new eW(t),this.clear(),Array.isArray(e)?(this.writeHashFunction=e[0],this.readHashFunction=e[1]):(this.writeHashFunction=e,this.readHashFunction=e),this.writeHashFunction||(this.writeHashFunction=lC),this.readHashFunction||(this.readHashFunction=lC),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.")}Bt.prototype.clear=function(){this.items.clear(),this.size=0,this.dimension=0};Bt.prototype.add=function(e){var t=this.writeHashFunction(e);return this.items.set(t,e),this.size=this.items.size,this.dimension=this.items.dimension,this};Bt.prototype.set=function(e,t){return e=this.writeHashFunction(e),this.items.set(e,t),this.size=this.items.size,this.dimension=this.items.dimension,this};Bt.prototype.get=function(e){return e=this.readHashFunction(e),this.items.get(e)};Bt.prototype.has=function(e){return e=this.readHashFunction(e),this.items.has(e)};Bt.prototype.forEach=function(e,t){t=arguments.length>1?t:this,this.items.forEach(function(r){e.call(t,r,r)})};Bt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Bt.prototype[Symbol.iterator]=Bt.prototype.values);Bt.prototype.inspect=function(){var e=Array.from(this);return Object.defineProperty(e,"constructor",{value:Bt,enumerable:!1}),e};typeof Symbol<"u"&&(Bt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Bt.prototype.inspect);Bt.from=function(e,t,r,n){arguments.length===3&&typeof r=="boolean"&&(n=r,r=Array);var i=new Bt(t,r);return tW(e,function(s,o){n?i.set(o,s):i.add(s)}),i};fC.exports=Bt});var pC=w((moe,dC)=>{var hC=1024;function rW(e){return(e&e-1)===0}function fn(e,t){if(arguments.length<1)throw new Error("mnemonist/hashed-array-tree: expecting at least a byte array constructor.");var r=t||0,n=hC,i=0;if(typeof t=="object"&&(r=t.initialCapacity||0,i=t.initialLength||0,n=t.blockSize||hC),!n||!rW(n))throw new Error("mnemonist/hashed-array-tree: block size should be a power of two.");var s=Math.max(i,r),o=Math.ceil(s/n);this.ArrayClass=e,this.length=i,this.capacity=o*n,this.blockSize=n,this.offsetMask=n-1,this.blockMask=Math.log2(n),this.blocks=new Array(o);for(var a=0;a<o;a++)this.blocks[a]=new this.ArrayClass(this.blockSize)}fn.prototype.set=function(e,t){if(this.length<e)throw new Error("HashedArrayTree("+this.ArrayClass.name+").set: index out of bounds.");var r=e>>this.blockMask,n=e&this.offsetMask;return this.blocks[r][n]=t,this};fn.prototype.get=function(e){if(!(this.length<e)){var t=e>>this.blockMask,r=e&this.offsetMask;return this.blocks[t][r]}};fn.prototype.grow=function(e){if(typeof e!="number"&&(e=this.capacity+this.blockSize),this.capacity>=e)return this;for(;this.capacity<e;)this.blocks.push(new this.ArrayClass(this.blockSize)),this.capacity+=this.blockSize;return this};fn.prototype.resize=function(e){return e===this.length?this:e<this.length?(this.length=e,this):(this.length=e,this.grow(e),this)};fn.prototype.push=function(e){this.capacity===this.length&&this.grow();var t=this.length,r=t>>this.blockMask,n=t&this.offsetMask;return this.blocks[r][n]=e,++this.length};fn.prototype.pop=function(){if(this.length!==0){var e=this.blocks[this.blocks.length-1],t=--this.length&this.offsetMask;return e[t]}};fn.prototype.inspect=function(){for(var e=new this.ArrayClass(this.length),t,r=0,n=this.length;r<n;r++)t=r>>this.blockMask,e[r]=this.blocks[t][r&this.offsetMask];return e.type=this.ArrayClass.name,e.items=this.length,e.capacity=this.capacity,e.blockSize=this.blockSize,Object.defineProperty(e,"constructor",{value:fn,enumerable:!1}),e};typeof Symbol<"u"&&(fn.prototype[Symbol.for("nodejs.util.inspect.custom")]=fn.prototype.inspect);dC.exports=fn});var Yg=w((yoe,yC)=>{var mC=At(),Jg=pr();function vt(e,t){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=t,this.ArrayClass=e,this.items=new this.ArrayClass(this.capacity),this.clear()}vt.prototype.clear=function(){this.size=0};vt.prototype.push=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=e,this.size};vt.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]};vt.prototype.peek=function(){return this.items[this.size-1]};vt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.items.length;r<n;r++)e.call(t,this.items[n-r-1],r,this)};vt.prototype.toArray=function(){for(var e=new this.ArrayClass(this.size),t=this.size-1,r=this.size;r--;)e[r]=this.items[t-r];return e};vt.prototype.values=function(){var e=this.items,t=this.size,r=0;return new mC(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return r++,{value:n,done:!1}})};vt.prototype.entries=function(){var e=this.items,t=this.size,r=0;return new mC(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(vt.prototype[Symbol.iterator]=vt.prototype.values);vt.prototype.toString=function(){return this.toArray().join(",")};vt.prototype.toJSON=function(){return this.toArray()};vt.prototype.inspect=function(){var e=this.toArray();return e.type=this.ArrayClass.name,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:vt,enumerable:!1}),e};typeof Symbol<"u"&&(vt.prototype[Symbol.for("nodejs.util.inspect.custom")]=vt.prototype.inspect);vt.from=function(e,t,r){if(arguments.length<3&&(r=Jg.guessLength(e),typeof r!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new vt(t,r);if(Jg.isArrayLike(e)){var i,s;for(i=0,s=e.length;i<s;i++)n.items[i]=e[i];return n.size=s,n}return Jg.forEach(e,function(o){n.push(o)}),n};yC.exports=vt});var vC=w((goe,gC)=>{var nW=pr(),iW=tr(),sW=Yg();function Xg(e,t,r,n,i,s,o,a){var u=o+(a-o)/2|0,l=~-u,f=-~u,c=r[u];n[s]=c+1;var h=t?t(e[c]):e[c][1],d=s*2+1,p=s*2+2,m=-1/0,v=-1/0;o<=l&&(m=Xg(e,t,r,n,i,d,o,l)),f<=a&&(v=Xg(e,t,r,n,i,p,f,a));var b=Math.max(h,m,v),P=c;return b===m?P=i[n[d]-1]:b===v&&(P=i[n[p]-1]),i[c]=P,b}function qn(e,t){this.size=e.length,this.intervals=e;var r=null,n=null;Array.isArray(t)&&(r=t[0],n=t[1]);var i=e.length,s=iW.getPointerArray(i+1),o=new s(i),a;for(a=1;a<i;a++)o[a]=a;o.sort(function(h,d){return h=e[h],d=e[d],r?(h=r(h),d=r(d)):(h=h[0],d=d[0]),h<d?-1:h>d?1:0});var u=Math.ceil(Math.log2(i+1)),l=Math.pow(2,u)-1,f=new s(l),c=new s(i);Xg(e,n,o,f,c,0,0,i-1),o=null,this.height=u,this.tree=f,this.augmentations=c,this.startGetter=r,this.endGetter=n,this.stack=new sW(s,this.height)}qn.prototype.intervalsContainingPoint=function(e){var t=[],r=this.stack;r.clear(),r.push(0);for(var n=this.tree.length,i,s,o,a,u,l,f,c,h;r.size;)i=r.pop(),s=this.tree[i]-1,o=this.intervals[s],a=this.intervals[this.augmentations[s]],f=this.endGetter?this.endGetter(a):a[1],!(e>f)&&(c=i*2+1,c<n&&this.tree[c]!==0&&r.push(c),u=this.startGetter?this.startGetter(o):o[0],l=this.endGetter?this.endGetter(o):o[1],e>=u&&e<=l&&t.push(o),!(e<u)&&(h=i*2+2,h<n&&this.tree[h]!==0&&r.push(h)));return t};qn.prototype.intervalsOverlappingInterval=function(e){var t=this.startGetter?this.startGetter(e):e[0],r=this.endGetter?this.endGetter(e):e[1],n=[],i=this.stack;i.clear(),i.push(0);for(var s=this.tree.length,o,a,u,l,f,c,h,d,p;i.size;)o=i.pop(),a=this.tree[o]-1,u=this.intervals[a],l=this.intervals[this.augmentations[a]],h=this.endGetter?this.endGetter(l):l[1],!(t>h)&&(d=o*2+1,d<s&&this.tree[d]!==0&&i.push(d),f=this.startGetter?this.startGetter(u):u[0],c=this.endGetter?this.endGetter(u):u[1],r>=f&&t<=c&&n.push(u),!(r<f)&&(p=o*2+2,p<s&&this.tree[p]!==0&&i.push(p)));return n};qn.prototype.inspect=function(){var e=this.intervals.slice();return Object.defineProperty(e,"constructor",{value:qn,enumerable:!1}),e};typeof Symbol<"u"&&(qn.prototype[Symbol.for("nodejs.util.inspect.custom")]=qn.prototype.inspect);qn.from=function(e,t){return nW.isArrayLike(e)?new qn(e,t):new qn(Array.from(e),t)};gC.exports=qn});var Zg=w(zi=>{zi.search=function(e,t,r,n){var i=0;r=typeof r<"u"?r:0,n=typeof n<"u"?n:e.length,n--;for(var s;r<=n;)if(i=r+n>>>1,s=e[i],s>t)n=~-i;else if(s<t)r=-~i;else return i;return-1};zi.searchWithComparator=function(e,t,r){for(var n=0,i=0,s=~-t.length,o;i<=s;)if(n=i+s>>>1,o=e(t[n],r),o>0)s=~-n;else if(o<0)i=-~n;else return n;return-1};zi.lowerBound=function(e,t,r,n){var i=0;for(r=typeof r<"u"?r:0,n=typeof n<"u"?n:e.length;r<n;)i=r+n>>>1,t<=e[i]?n=i:r=-~i;return r};zi.lowerBoundWithComparator=function(e,t,r){for(var n=0,i=0,s=t.length;i<s;)n=i+s>>>1,e(r,t[n])<=0?s=n:i=-~n;return i};zi.lowerBoundIndices=function(e,t,r,n,i){var s=0;for(n=typeof n<"u"?n:0,i=typeof i<"u"?i:e.length;n<i;)s=n+i>>>1,r<=e[t[s]]?i=s:n=-~s;return n};zi.upperBound=function(e,t,r,n){var i=0;for(r=typeof r<"u"?r:0,n=typeof n<"u"?n:e.length;r<n;)i=r+n>>>1,t>=e[i]?r=-~i:n=i;return r};zi.upperBoundWithComparator=function(e,t,r){for(var n=0,i=0,s=t.length;i<s;)n=i+s>>>1,e(r,t[n])>=0?i=-~n:s=n;return i}});var _C=w(Hi=>{var Fo=tr(),Mo=pr().isArrayLike,Cs=Zg(),wC=Lg();function bC(e,t){if(e.length===0)return t.slice();if(t.length===0)return e.slice();var r;e[0]>t[0]&&(r=e,e=t,t=r);var n=e[e.length-1],i=t[0];if(n<=i)return Fo.isTypedArray(e)?Fo.concat(e,t):e.concat(t);var s=new e.constructor(e.length+t.length),o,a,u;for(o=0,a=e.length;o<a&&(u=e[o],u<=i);o++)s[o]=u;for(var l=o,f=e.length,c=0,h=t.length,d,p;l<f&&c<h;)d=e[l],p=t[c],d<=p?(s[o++]=d,l++):(s[o++]=p,c++);for(;l<f;)s[o++]=e[l++];for(;c<h;)s[o++]=t[c++];return s}function EC(e,t){if(e.length===0)return t.slice();if(t.length===0)return e.slice();var r;e[0]>t[0]&&(r=e,e=t,t=r);var n=e[e.length-1],i=t[0];if(n<i)return Fo.isTypedArray(e)?Fo.concat(e,t):e.concat(t);var s=new e.constructor,o,a,u;for(o=0,a=e.length;o<a&&(u=e[o],u<i);o++)s.push(u);for(var l=o,f=e.length,c=0,h=t.length,d,p;l<f&&c<h;)d=e[l],p=t[c],d<=p?((s.length===0||s[s.length-1]!==d)&&s.push(d),l++):((s.length===0||s[s.length-1]!==p)&&s.push(p),c++);for(;l<f;)d=e[l++],(s.length===0||s[s.length-1]!==d)&&s.push(d);for(;c<h;)p=t[c++],(s.length===0||s[s.length-1]!==p)&&s.push(p);return s}Hi.intersectionUniqueArrays=function(e,t){if(e.length===0||t.length===0)return new e.constructor(0);var r;e[0]>t[0]&&(r=e,e=t,t=r);var n=e[e.length-1],i=t[0];if(n<i)return new e.constructor(0);for(var s=new e.constructor,o=Cs.lowerBound(e,i),a=e.length,u=0,l=Cs.upperBound(t,n),f,c;o<a&&u<l;)f=e[o],c=t[u],f<c?o=Cs.lowerBound(e,c,o+1):f>c?u=Cs.lowerBound(t,f,u+1):(s.push(f),o++,u++);return s};function oW(e){var t=0,r=-1/0,n,i,s,o=[];for(i=0,s=e.length;i<s;i++)n=e[i].length,n!==0&&(o.push(e[i]),t+=n,n>r&&(r=n));if(o.length===0)return new e[0].constructor(0);if(o.length===1)return o[0].slice();if(o.length===2)return bC(o[0],o[1]);e=o;var a=new e[0].constructor(t),u=Fo.getPointerArray(r),l=new u(e.length),f=new wC(function(d,p){return d=e[d][l[d]],p=e[p][l[p]],d<p?-1:d>p?1:0});for(i=0;i<s;i++)f.push(i);i=0;for(var c,h;f.size;)c=f.pop(),h=e[c][l[c]++],a[i++]=h,l[c]<e[c].length&&f.push(c);return a}function aW(e){var t=-1/0,r,n,i,s=[];for(n=0,i=e.length;n<i;n++)r=e[n].length,r!==0&&(s.push(e[n]),r>t&&(t=r));if(s.length===0)return new e[0].constructor(0);if(s.length===1)return s[0].slice();if(s.length===2)return EC(s[0],s[1]);e=s;var o=new e[0].constructor,a=Fo.getPointerArray(t),u=new a(e.length),l=new wC(function(h,d){return h=e[h][u[h]],d=e[d][u[d]],h<d?-1:h>d?1:0});for(n=0;n<i;n++)l.push(n);for(var f,c;l.size;)f=l.pop(),c=e[f][u[f]++],(o.length===0||o[o.length-1]!==c)&&o.push(c),u[f]<e[f].length&&l.push(f);return o}Hi.kWayIntersectionUniqueArrays=function(e){var t=-1/0,r=-1/0,n=1/0,i,s,o,a,u;for(a=0,u=e.length;a<u;a++){if(o=e[a].length,o===0)return[];o>t&&(t=o),i=e[a][0],s=e[a][o-1],i>r&&(r=i),s<n&&(n=s)}if(r>n)return[];if(r===n)return[r];var l,f,c=e[0],h,d,p,m,v,b,P=r;for(a=1;a<u;a++){for(l=c,f=e[a],c=new Array,h=0,d=Cs.lowerBound(f,P),p=l.length,m=f.length;h<p&&d<m;)v=l[h],b=f[d],v<b?h=Cs.lowerBound(l,b,h+1):v>b?d=Cs.lowerBound(f,v,d+1):(c.push(v),h++,d++);if(c.length===0)return c;P=c[0]}return c};Hi.merge=function(){if(arguments.length===2){if(Mo(arguments[0]))return bC(arguments[0],arguments[1])}else if(Mo(arguments[0]))return oW(arguments);return null};Hi.unionUnique=function(){if(arguments.length===2){if(Mo(arguments[0]))return EC(arguments[0],arguments[1])}else if(Mo(arguments[0]))return aW(arguments);return null};Hi.intersectionUnique=function(){if(arguments.length===2){if(Mo(arguments[0]))return Hi.intersectionUniqueArrays(arguments[0],arguments[1])}else if(Mo(arguments[0]))return Hi.kWayIntersectionUniqueArrays(arguments);return null}});var RC=w((boe,PC)=>{var uW=At(),lW=ze(),fW=_C();function SC(e){return e}function nr(e){if(this.clear(),Array.isArray(e)?(this.documentTokenizer=e[0],this.queryTokenizer=e[1]):(this.documentTokenizer=e,this.queryTokenizer=e),this.documentTokenizer||(this.documentTokenizer=SC),this.queryTokenizer||(this.queryTokenizer=SC),typeof this.documentTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: document tokenizer is not a function.");if(typeof this.queryTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: query tokenizer is not a function.")}nr.prototype.clear=function(){this.items=[],this.mapping=new Map,this.size=0,this.dimension=0};nr.prototype.add=function(e){this.size++;var t=this.items.length;this.items.push(e);var r=this.documentTokenizer(e);if(!Array.isArray(r))throw new Error("mnemonist/InvertedIndex.add: tokenizer function should return an array of tokens.");for(var n=new Set,i,s,o=0,a=r.length;o<a;o++)i=r[o],!n.has(i)&&(n.add(i),s=this.mapping.get(i),s||(s=[],this.mapping.set(i,s)),s.push(t));return this.dimension=this.mapping.size,this};nr.prototype.get=function(e){if(!this.size)return[];var t=this.queryTokenizer(e);if(!Array.isArray(t))throw new Error("mnemonist/InvertedIndex.query: tokenizer function should return an array of tokens.");if(!t.length)return[];var r=this.mapping.get(t[0]),n,i,s;if(typeof r>"u"||r.length===0)return[];if(t.length>1)for(i=1,s=t.length;i<s;i++){if(n=this.mapping.get(t[i]),typeof n>"u"||n.length===0)return[];r=fW.intersectionUniqueArrays(r,n)}var o=new Array(r.length);for(i=0,s=o.length;i<s;i++)o[i]=this.items[r[i]];return o};nr.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.documents.length;r<n;r++)e.call(t,this.documents[r],r,this)};nr.prototype.documents=function(){var e=this.items,t=e.length,r=0;return new uW(function(){if(r>=t)return{done:!0};var n=e[r++];return{value:n,done:!1}})};nr.prototype.tokens=function(){return this.mapping.keys()};typeof Symbol<"u"&&(nr.prototype[Symbol.iterator]=nr.prototype.documents);nr.prototype.inspect=function(){var e=this.items.slice();return Object.defineProperty(e,"constructor",{value:nr,enumerable:!1}),e};typeof Symbol<"u"&&(nr.prototype[Symbol.for("nodejs.util.inspect.custom")]=nr.prototype.inspect);nr.from=function(e,t){var r=new nr(t);return lW(e,function(n){r.add(n)}),r};PC.exports=nr});var t0=w(e0=>{var $t=new Float64Array(64),Xe=new Float64Array(64);function cW(e,t,r){var n,i,s,o,a;for($t[0]=t,Xe[0]=r,i=0;i>=0;)if(s=$t[i],o=Xe[i]-1,s<o){for(n=e[s];s<o;){for(;e[o]>=n&&s<o;)o--;for(s<o&&(e[s++]=e[o]);e[s]<=n&&s<o;)s++;s<o&&(e[o--]=e[s])}e[s]=n,$t[i+1]=s+1,Xe[i+1]=Xe[i],Xe[i++]=s,Xe[i]-$t[i]>Xe[i-1]-$t[i-1]&&(a=$t[i],$t[i]=$t[i-1],$t[i-1]=a,a=Xe[i],Xe[i]=Xe[i-1],Xe[i-1]=a)}else i--;return e}e0.inplaceQuickSort=cW;function hW(e,t,r,n){var i,s,o,a,u,l;for($t[0]=r,Xe[0]=n,s=0;s>=0;)if(o=$t[s],a=Xe[s]-1,o<a){for(u=t[o],i=e[u];o<a;){for(;e[t[a]]>=i&&o<a;)a--;for(o<a&&(t[o++]=t[a]);e[t[o]]<=i&&o<a;)o++;o<a&&(t[a--]=t[o])}t[o]=u,$t[s+1]=o+1,Xe[s+1]=Xe[s],Xe[s++]=o,Xe[s]-$t[s]>Xe[s-1]-$t[s-1]&&(l=$t[s],$t[s]=$t[s-1],$t[s-1]=l,l=Xe[s],Xe[s]=Xe[s-1],Xe[s-1]=l)}else s--;return t}e0.inplaceQuickSortIndices=hW});var OC=w((_oe,IC)=>{var dW=pr(),bc=tr(),TC=Iu().createTupleComparator,AC=vc(),pW=t0().inplaceQuickSortIndices;function r0(e,t,r,n){var i,s=0,o;for(i=0;i<e;i++)o=t[i][r]-n[i],s+=o*o;return s}function mW(e,t){var r=t.length,n=new Array(e),i=new Array(r),s,o=bc.getPointerArray(r),a=new o(r),u,l,f,c=!0;for(u=0;u<e;u++){for(s=new Float64Array(r),l=0;l<r;l++)f=t[l],s[l]=f[1][u],c&&(i[l]=f[0],a[l]=l);c=!1,n[u]=s}return{axes:n,ids:a,labels:i}}function $C(e,t,r,n){for(var i=n.length,s=bc.getPointerArray(i+1),o=new s(i),a=new s(i),u=new s(i),l=[[0,0,r.length,-1,0]],f,c,h,d,p,m,v,b,P=0;l.length!==0;)f=l.pop(),b=f[0],m=f[1],v=f[2],c=f[3],h=f[4],pW(t[b],r,m,v),i=v-m,d=m+(i>>>1),p=r[d],o[P]=p,c>-1&&(h===0?a[c]=P+1:u[c]=P+1),b=(b+1)%e,d!==m&&d!==v-1&&l.push([b,d+1,v,P,1]),d!==m&&l.push([b,m,d,P,0]),P++;return{axes:t,labels:n,pivots:o,lefts:a,rights:u}}function Br(e,t){this.dimensions=e,this.visited=0,this.axes=t.axes,this.labels=t.labels,this.pivots=t.pivots,this.lefts=t.lefts,this.rights=t.rights,this.size=this.labels.length}Br.prototype.nearestNeighbor=function(e){var t=1/0,r=null,n=this.dimensions,i=this.axes,s=this.pivots,o=this.lefts,a=this.rights,u=0;function l(f,c){u++;var h=o[c],d=a[c],p=s[c],m=r0(n,i,p,e);if(!(m<t&&(r=p,t=m,m===0))){var v=i[f][p]-e[f];f=(f+1)%n,v>0?h!==0&&l(f,h-1):d!==0&&l(f,d-1),v*v<t&&(v>0?d!==0&&l(f,d-1):h!==0&&l(f,h-1))}}return l(0,0),this.visited=u,this.labels[r]};var yW=TC(3),gW=TC(2);Br.prototype.kNearestNeighbors=function(e,t){if(e<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(e=Math.min(e,this.size),e===1)return[this.nearestNeighbor(t)];var r=new AC(Array,yW,e),n=this.dimensions,i=this.axes,s=this.pivots,o=this.lefts,a=this.rights,u=0;function l(h,d){var p=o[d],m=a[d],v=s[d],b=r0(n,i,v,t);r.push([b,u++,v]);var P=t[h],g=i[h][v],y=P-g;h=(h+1)%n,P<g?p!==0&&l(h,p-1):m!==0&&l(h,m-1),(y*y<r.peek()[0]||r.size<e)&&(P<g?m!==0&&l(h,m-1):p!==0&&l(h,p-1))}l(0,0),this.visited=u;for(var f=r.consume(),c=0;c<f.length;c++)f[c]=this.labels[f[c][2]];return f};Br.prototype.linearKNearestNeighbors=function(e,t){if(e<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");e=Math.min(e,this.size);var r=new AC(Array,gW,e),n,i,s;for(n=0,i=this.size;n<i;n++)s=r0(this.dimensions,this.axes,this.pivots[n],t),r.push([s,n]);var o=r.consume();for(n=0;n<o.length;n++)o[n]=this.labels[this.pivots[o[n][1]]];return o};Br.prototype.inspect=function(){var e=new Map;e.dimensions=this.dimensions,Object.defineProperty(e,"constructor",{value:Br,enumerable:!1});var t,r,n;for(t=0;t<this.size;t++){for(n=new Array(this.dimensions),r=0;r<this.dimensions;r++)n[r]=this.axes[r][t];e.set(this.labels[t],n)}return e};typeof Symbol<"u"&&(Br.prototype[Symbol.for("nodejs.util.inspect.custom")]=Br.prototype.inspect);Br.from=function(e,t){var r=dW.toArray(e),n=mW(t,r),i=$C(t,n.axes,n.ids,n.labels);return new Br(t,i)};Br.fromAxes=function(e,t){t||(t=bc.indices(e[0].length));var r=e.length,n=$C(e.length,e,bc.indices(t.length),t);return new Br(r,n)};IC.exports=Br});var xC=w((Soe,kC)=>{var CC=At(),vW=ze();function Ge(){this.clear()}Ge.prototype.clear=function(){this.head=null,this.tail=null,this.size=0};Ge.prototype.first=function(){return this.head?this.head.item:void 0};Ge.prototype.peek=Ge.prototype.first;Ge.prototype.last=function(){return this.tail?this.tail.item:void 0};Ge.prototype.push=function(e){var t={item:e,next:null};return this.head?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),this.size++,this.size};Ge.prototype.unshift=function(e){var t={item:e,next:null};return this.head?(this.head.next||(this.tail=this.head),t.next=this.head,this.head=t):(this.head=t,this.tail=t),this.size++,this.size};Ge.prototype.shift=function(){if(!!this.size){var e=this.head;return this.head=e.next,this.size--,e.item}};Ge.prototype.forEach=function(e,t){if(!!this.size){t=arguments.length>1?t:this;for(var r=this.head,n=0;r;)e.call(t,r.item,n,this),r=r.next,n++}};Ge.prototype.toArray=function(){if(!this.size)return[];for(var e=new Array(this.size),t=0,r=this.size,n=this.head;t<r;t++)e[t]=n.item,n=n.next;return e};Ge.prototype.values=function(){var e=this.head;return new CC(function(){if(!e)return{done:!0};var t=e.item;return e=e.next,{value:t,done:!1}})};Ge.prototype.entries=function(){var e=this.head,t=0;return new CC(function(){if(!e)return{done:!0};var r=e.item;return e=e.next,t++,{value:[t-1,r],done:!1}})};typeof Symbol<"u"&&(Ge.prototype[Symbol.iterator]=Ge.prototype.values);Ge.prototype.toString=function(){return this.toArray().join(",")};Ge.prototype.toJSON=function(){return this.toArray()};Ge.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:Ge,enumerable:!1}),e};typeof Symbol<"u"&&(Ge.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ge.prototype.inspect);Ge.from=function(e){var t=new Ge;return vW(e,function(r){t.push(r)}),t};kC.exports=Ge});var Ec=w((Poe,qC)=>{var n0=At(),wW=ze(),bW=tr(),EW=pr();function ct(e,t,r){if(arguments.length<2&&(r=e,e=null,t=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=bW.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof e=="function"?new e(r):new Array(r),this.V=typeof t=="function"?new t(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}ct.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};ct.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var r=this.backward[e],n=this.forward[e];return this.tail===e?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[t]=e,this.head=e,this.forward[e]=t,this};ct.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};ct.prototype.setpop=function(e,t){var r=null,n=null,i=this.items[e];return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],delete this.items[this.K[i]]),this.items[e]=i,this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};ct.prototype.has=function(e){return e in this.items};ct.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};ct.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};ct.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.size,i=this.head,s=this.K,o=this.V,a=this.forward;r<n;)e.call(t,o[i],s[i],this),i=a[i],r++};ct.prototype.keys=function(){var e=0,t=this.size,r=this.head,n=this.K,i=this.forward;return new n0(function(){if(e>=t)return{done:!0};var s=n[r];return e++,e<t&&(r=i[r]),{done:!1,value:s}})};ct.prototype.values=function(){var e=0,t=this.size,r=this.head,n=this.V,i=this.forward;return new n0(function(){if(e>=t)return{done:!0};var s=n[r];return e++,e<t&&(r=i[r]),{done:!1,value:s}})};ct.prototype.entries=function(){var e=0,t=this.size,r=this.head,n=this.K,i=this.V,s=this.forward;return new n0(function(){if(e>=t)return{done:!0};var o=n[r],a=i[r];return e++,e<t&&(r=s[r]),{done:!1,value:[o,a]}})};typeof Symbol<"u"&&(ct.prototype[Symbol.iterator]=ct.prototype.entries);ct.prototype.inspect=function(){for(var e=new Map,t=this.entries(),r;r=t.next(),!r.done;)e.set(r.value[0],r.value[1]);return Object.defineProperty(e,"constructor",{value:ct,enumerable:!1}),e};typeof Symbol<"u"&&(ct.prototype[Symbol.for("nodejs.util.inspect.custom")]=ct.prototype.inspect);ct.from=function(e,t,r,n){if(arguments.length<2){if(n=EW.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new ct(t,r,n);return wW(e,function(s,o){i.set(o,s)}),i};qC.exports=ct});var DC=w((Roe,NC)=>{var zo=Ec(),_W=ze(),SW=tr(),PW=pr();function Nn(e,t,r){arguments.length<2?zo.call(this,e):zo.call(this,e,t,r);var n=SW.getPointerArray(this.capacity);this.deleted=new n(this.capacity),this.deletedSize=0}for(i0 in zo.prototype)Nn.prototype[i0]=zo.prototype[i0];var i0;typeof Symbol<"u"&&(Nn.prototype[Symbol.iterator]=zo.prototype[Symbol.iterator]);Nn.prototype.clear=function(){zo.prototype.clear.call(this),this.deletedSize=0};Nn.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?(this.deletedSize>0?r=this.deleted[--this.deletedSize]:r=this.size,this.size++):(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Nn.prototype.setpop=function(e,t){var r=null,n=null,i=this.items[e];return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?(this.deletedSize>0?i=this.deleted[--this.deletedSize]:i=this.size,this.size++):(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],delete this.items[this.K[i]]),this.items[e]=i,this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};Nn.prototype.delete=function(e){var t=this.items[e];if(typeof t>"u")return!1;if(delete this.items[e],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var r=this.backward[t],n=this.forward[t];return this.head===t&&(this.head=n),this.tail===t&&(this.tail=r),this.forward[r]=n,this.backward[n]=r,this.size--,this.deleted[this.deletedSize++]=t,!0};Nn.prototype.remove=function(e,t=void 0){var r=this.items[e];if(typeof r>"u")return t;var n=this.V[r];if(delete this.items[e],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,n;var i=this.backward[r],s=this.forward[r];return this.head===r&&(this.head=s),this.tail===r&&(this.tail=i),this.forward[i]=s,this.backward[s]=i,this.size--,this.deleted[this.deletedSize++]=r,n};Nn.from=function(e,t,r,n){if(arguments.length<2){if(n=PW.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new Nn(t,r,n);return _W(e,function(s,o){i.set(o,s)}),i};NC.exports=Nn});var s0=w((Toe,jC)=>{var Ho=Ec(),RW=ze(),TW=tr(),AW=pr();function Ft(e,t,r){if(arguments.length<2&&(r=e,e=null,t=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var n=TW.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof e=="function"?new e(r):new Array(r),this.V=typeof t=="function"?new t(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items=new Map}Ft.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()};Ft.prototype.set=function(e,t){var r=this.items.get(e);if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],this.items.delete(this.K[r])),this.items.set(e,r),this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Ft.prototype.setpop=function(e,t){var r=null,n=null,i=this.items.get(e);return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],this.items.delete(this.K[i])),this.items.set(e,i),this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};Ft.prototype.has=function(e){return this.items.has(e)};Ft.prototype.get=function(e){var t=this.items.get(e);if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};Ft.prototype.peek=function(e){var t=this.items.get(e);if(!(typeof t>"u"))return this.V[t]};Ft.prototype.splayOnTop=Ho.prototype.splayOnTop;Ft.prototype.forEach=Ho.prototype.forEach;Ft.prototype.keys=Ho.prototype.keys;Ft.prototype.values=Ho.prototype.values;Ft.prototype.entries=Ho.prototype.entries;typeof Symbol<"u"&&(Ft.prototype[Symbol.iterator]=Ft.prototype.entries);Ft.prototype.inspect=Ho.prototype.inspect;Ft.from=function(e,t,r,n){if(arguments.length<2){if(n=AW.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new Ft(t,r,n);return RW(e,function(s,o){i.set(o,s)}),i};jC.exports=Ft});var FC=w((Aoe,LC)=>{var Uo=s0(),$W=ze(),IW=tr(),OW=pr();function Dn(e,t,r){arguments.length<2?Uo.call(this,e):Uo.call(this,e,t,r);var n=IW.getPointerArray(this.capacity);this.deleted=new n(this.capacity),this.deletedSize=0}for(o0 in Uo.prototype)Dn.prototype[o0]=Uo.prototype[o0];var o0;typeof Symbol<"u"&&(Dn.prototype[Symbol.iterator]=Uo.prototype[Symbol.iterator]);Dn.prototype.clear=function(){Uo.prototype.clear.call(this),this.deletedSize=0};Dn.prototype.set=function(e,t){var r=this.items.get(e);if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?(this.deletedSize>0?r=this.deleted[--this.deletedSize]:r=this.size,this.size++):(r=this.tail,this.tail=this.backward[r],this.items.delete(this.K[r])),this.items.set(e,r),this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Dn.prototype.setpop=function(e,t){var r=null,n=null,i=this.items.get(e);return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?(this.deletedSize>0?i=this.deleted[--this.deletedSize]:i=this.size,this.size++):(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],this.items.delete(this.K[i])),this.items.set(e,i),this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)};Dn.prototype.delete=function(e){var t=this.items.get(e);if(typeof t>"u")return!1;if(this.items.delete(e),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var r=this.backward[t],n=this.forward[t];return this.head===t&&(this.head=n),this.tail===t&&(this.tail=r),this.forward[r]=n,this.backward[n]=r,this.size--,this.deleted[this.deletedSize++]=t,!0};Dn.prototype.remove=function(e,t=void 0){var r=this.items.get(e);if(typeof r>"u")return t;var n=this.V[r];if(this.items.delete(e),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,n;var i=this.backward[r],s=this.forward[r];return this.head===r&&(this.head=s),this.tail===r&&(this.tail=i),this.forward[i]=s,this.backward[s]=i,this.size--,this.deleted[this.deletedSize++]=r,n};Dn.from=function(e,t,r,n){if(arguments.length<2){if(n=OW.guessLength(e),typeof n!="number")throw new Error("mnemonist/lru-map.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=t,t=null,r=null);var i=new Dn(t,r,n);return $W(e,function(s,o){i.set(o,s)}),i};LC.exports=Dn});var zC=w(($oe,MC)=>{var CW=At(),kW=ze(),xW=vc(),qW=function(e,t){return e[1]>t[1]?-1:e[1]<t[1]?1:0};function Se(){this.items=new Map,Object.defineProperty(this.items,"constructor",{value:Se,enumerable:!1}),this.clear()}Se.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};Se.prototype.add=function(e,t){if(t===0)return this;if(t<0)return this.remove(e,-t);if(t=t||1,typeof t!="number")throw new Error("mnemonist/multi-set.add: given count should be a number.");this.size+=t;let r=this.items.get(e);return r===void 0?this.dimension++:t+=r,this.items.set(e,t),this};Se.prototype.set=function(e,t){var r;if(typeof t!="number")throw new Error("mnemonist/multi-set.set: given count should be a number.");return t<=0?(r=this.items.get(e),typeof r<"u"&&(this.size-=r,this.dimension--),this.items.delete(e),this):(t=t||1,r=this.items.get(e),typeof r=="number"?this.items.set(e,r+t):(this.dimension++,this.items.set(e,t)),this.size+=t,this)};Se.prototype.has=function(e){return this.items.has(e)};Se.prototype.delete=function(e){var t=this.items.get(e);return t===0?!1:(this.size-=t,this.dimension--,this.items.delete(e),!0)};Se.prototype.remove=function(e,t){if(t!==0){if(t<0)return this.add(e,-t);if(t=t||1,typeof t!="number")throw new Error("mnemonist/multi-set.remove: given count should be a number.");var r=this.multiplicity(e),n=Math.max(0,r-t);n===0?this.delete(e):(this.items.set(e,n),this.size-=r-n)}};Se.prototype.edit=function(e,t){var r=this.multiplicity(e);if(r!==0){var n=this.multiplicity(t);return this.items.set(t,r+n),this.items.delete(e),this}};Se.prototype.multiplicity=function(e){var t=this.items.get(e);return typeof t>"u"?0:t};Se.prototype.get=Se.prototype.multiplicity;Se.prototype.count=Se.prototype.multiplicity;Se.prototype.frequency=function(e){if(this.size===0)return 0;var t=this.multiplicity(e);return t/this.size};Se.prototype.top=function(e){if(typeof e!="number"||e<=0)throw new Error("mnemonist/multi-set.top: n must be a number > 0.");for(var t=new xW(Array,qW,e),r=this.items.entries(),n;n=r.next(),!n.done;)t.push(n.value);return t.consume()};Se.prototype.forEach=function(e,t){t=arguments.length>1?t:this;var r;this.items.forEach(function(n,i){for(r=0;r<n;r++)e.call(t,i,i)})};Se.prototype.forEachMultiplicity=function(e,t){t=arguments.length>1?t:this,this.items.forEach(e,t)};Se.prototype.keys=function(){return this.items.keys()};Se.prototype.values=function(){var e=this.items.entries(),t=!1,r,n,i,s;return new CW(function o(){if(!t){if(r=e.next(),r.done)return{done:!0};t=!0,n=r.value[0],i=r.value[1],s=0}return s>=i?(t=!1,o()):(s++,{done:!1,value:n})})};Se.prototype.multiplicities=function(){return this.items.entries()};typeof Symbol<"u"&&(Se.prototype[Symbol.iterator]=Se.prototype.values);Se.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Se.prototype[Symbol.for("nodejs.util.inspect.custom")]=Se.prototype.inspect);Se.prototype.toJSON=function(){return this.items};Se.from=function(e){var t=new Se;return kW(e,function(r){t.add(r)}),t};Se.isSubset=function(e,t){var r=e.multiplicities(),n,i,s;if(e===t)return!0;if(e.dimension>t.dimension)return!1;for(;n=r.next(),!n.done;)if(i=n.value[0],s=n.value[1],t.multiplicity(i)<s)return!1;return!0};Se.isSuperset=function(e,t){return Se.isSubset(t,e)};MC.exports=Se});var KC=w((Ioe,GC)=>{var NW=At(),DW=ze();function jW(e,t,r){return((Math.pow(e,2)-Math.pow(Math.abs(t-r),2))/2|0)+e+1}function LW(e,t){for(var r=0,n=0,i=t+1;n<i;n++)r+=jW(e,t,n);return r}function FW(e,t){return e.length>t.length?-1:e.length<t.length?1:e<t?-1:e>t?1:0}function HC(e,t){var r=e+1,n=t/r|0,i=n+1,s,o,a=t-n*r,u=r-a,l=new Array(e+1);for(s=0;s<u;s++)l[s]=[s*n,n];var f=(s-1)*n+n;for(o=0;o<a;o++)l[s+o]=[f+o*i,i];return l}function UC(e,t){var r=t.length,n=e+1,i=r/n|0,s=i+1,o,a,u,l=r-i*n,f=n-l,c=new Array(e+1);for(a=0;a<f;a++)o=a*i,c[a]=t.slice(o,o+i);var h=(a-1)*i+i;for(u=0;u<l;u++)o=h+u*s,c[a+u]=t.slice(o,o+s);return c}function MW(e,t,r){if(t===0)return 0;var n=r.length,i=e+1,s=n/i|0,o=s+1,a=n-s*i,u=i-a;if(t<=u-1)return t*s;var l=t-u;return u*s+l*o}function VC(e,t,r,n,i,s){var o=i-r,a=i+r,u=e-r,l=i+t-u,f=i+t+u,c=n-s;return[Math.max(0,o,l),Math.min(a,f,c)]}function BC(e,t,r,n,i,s){var o=t.length,a=o-r,u=VC(e,a,n,o,i,s),l=u[0],f=u[1],c="",h=[],d,p,m;for(p=l,m=f+1;p<m;p++)d=t.slice(p,p+s),d!==c&&(h.push(d),c=d);return h}function it(e,t){if(typeof e!="function")throw new Error("mnemonist/passjoin-index: `levenshtein` should be a function returning edit distance between two strings.");if(typeof t!="number"||t<1)throw new Error("mnemonist/passjoin-index: `k` should be a number > 0");this.levenshtein=e,this.k=t,this.clear()}it.prototype.clear=function(){this.size=0,this.strings=[],this.invertedIndices={}};it.prototype.add=function(e){var t=e.length,r=this.size;this.strings.push(e),this.size++;var n=UC(this.k,e),i=this.invertedIndices[t];typeof i>"u"&&(i={},this.invertedIndices[t]=i);var s,o,a,u,l;for(u=0,l=n.length;u<l;u++)s=n[u],a=s+u,o=i[a],typeof o>"u"?(o=[r],i[a]=o):o.push(r);return this};it.prototype.search=function(e){var t=e.length,r=this.k,n=new Set,i,s,o,a,u,l,f,c,h,d,p,m,v,b,P;for(c=Math.max(0,t-r),h=t+r+1;c<h;c++){var g=this.invertedIndices[c];if(!(typeof g>"u")){for(f=HC(r,c),d=0,p=f.length;d<p;d++)for(o=f[d][0],a=f[d][1],l=BC(r,e,c,d,o,a),l.length||(l=[""]),m=0,v=l.length;m<v;m++)if(u=l[m]+d,i=g[u],!(typeof i>"u"))for(b=0,P=i.length;b<P;b++)s=this.strings[i[b]],(t<=r&&c<=r||!n.has(s)&&this.levenshtein(e,s)<=r)&&n.add(s)}}return n};it.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.strings.length;r<n;r++)e.call(t,this.strings[r],r,this)};it.prototype.values=function(){var e=this.strings,t=e.length,r=0;return new NW(function(){if(r>=t)return{done:!0};var n=e[r];return r++,{value:n,done:!1}})};typeof Symbol<"u"&&(it.prototype[Symbol.iterator]=it.prototype.values);it.prototype.inspect=function(){var e=this.strings.slice();return Object.defineProperty(e,"constructor",{value:it,enumerable:!1}),e};typeof Symbol<"u"&&(it.prototype[Symbol.for("nodejs.util.inspect.custom")]=it.prototype.inspect);it.from=function(e,t,r){var n=new it(t,r);return DW(e,function(i){n.add(i)}),n};it.countKeys=LW;it.comparator=FW;it.partition=HC;it.segments=UC;it.segmentPos=MW;it.multiMatchAwareInterval=VC;it.multiMatchAwareSubstrings=BC;GC.exports=it});var JC=w((Ooe,WC)=>{var QC=At(),zW=ze();function st(){this.clear()}st.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};st.prototype.enqueue=function(e){return this.items.push(e),++this.size};st.prototype.dequeue=function(){if(!!this.size){var e=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,e}};st.prototype.peek=function(){if(!!this.size)return this.items[this.offset]};st.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.offset,n=0,i=this.items.length;r<i;r++,n++)e.call(t,this.items[r],n,this)};st.prototype.toArray=function(){return this.items.slice(this.offset)};st.prototype.values=function(){var e=this.items,t=this.offset;return new QC(function(){if(t>=e.length)return{done:!0};var r=e[t];return t++,{value:r,done:!1}})};st.prototype.entries=function(){var e=this.items,t=this.offset,r=0;return new QC(function(){if(t>=e.length)return{done:!0};var n=e[t];return t++,{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=st.prototype.values);st.prototype.toString=function(){return this.toArray().join(",")};st.prototype.toJSON=function(){return this.toArray()};st.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:st,enumerable:!1}),e};typeof Symbol<"u"&&(st.prototype[Symbol.for("nodejs.util.inspect.custom")]=st.prototype.inspect);st.from=function(e){var t=new st;return zW(e,function(r){t.enqueue(r)}),t};st.of=function(){return st.from(arguments)};WC.exports=st});var ZC=w((Coe,XC)=>{var YC=At(),HW=ze();function ot(){this.clear()}ot.prototype.clear=function(){this.items=[],this.size=0};ot.prototype.push=function(e){return this.items.push(e),++this.size};ot.prototype.pop=function(){if(this.size!==0)return this.size--,this.items.pop()};ot.prototype.peek=function(){return this.items[this.size-1]};ot.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0,n=this.items.length;r<n;r++)e.call(t,this.items[n-r-1],r,this)};ot.prototype.toArray=function(){for(var e=new Array(this.size),t=this.size-1,r=this.size;r--;)e[r]=this.items[t-r];return e};ot.prototype.values=function(){var e=this.items,t=e.length,r=0;return new YC(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return r++,{value:n,done:!1}})};ot.prototype.entries=function(){var e=this.items,t=e.length,r=0;return new YC(function(){if(r>=t)return{done:!0};var n=e[t-r-1];return{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(ot.prototype[Symbol.iterator]=ot.prototype.values);ot.prototype.toString=function(){return this.toArray().join(",")};ot.prototype.toJSON=function(){return this.toArray()};ot.prototype.inspect=function(){var e=this.toArray();return Object.defineProperty(e,"constructor",{value:ot,enumerable:!1}),e};typeof Symbol<"u"&&(ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=ot.prototype.inspect);ot.from=function(e){var t=new ot;return HW(e,function(r){t.push(r)}),t};ot.of=function(){return ot.from(arguments)};XC.exports=ot});var ek=w(wt=>{wt.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var e=new Set,t=1/0,r=null,n,i,s=arguments.length;for(i=0;i<s;i++){if(n=arguments[i],n.size===0)return e;n.size<t&&(t=n.size,r=n)}for(var o=r.values(),a,u,l,f;a=o.next(),!a.done;){for(u=a.value,l=!0,i=0;i<s;i++)if(f=arguments[i],f!==r&&!f.has(u)){l=!1;break}l&&e.add(u)}return e};wt.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var e=new Set,t,r=arguments.length,n,i;for(t=0;t<r;t++)for(n=arguments[t].values();i=n.next(),!i.done;)e.add(i.value);return e};wt.difference=function(e,t){if(!e.size)return new Set;if(!t.size)return new Set(e);for(var r=new Set,n=e.values(),i;i=n.next(),!i.done;)t.has(i.value)||r.add(i.value);return r};wt.symmetricDifference=function(e,t){for(var r=new Set,n=e.values(),i;i=n.next(),!i.done;)t.has(i.value)||r.add(i.value);for(n=t.values();i=n.next(),!i.done;)e.has(i.value)||r.add(i.value);return r};wt.isSubset=function(e,t){var r=e.values(),n;if(e===t)return!0;if(e.size>t.size)return!1;for(;n=r.next(),!n.done;)if(!t.has(n.value))return!1;return!0};wt.isSuperset=function(e,t){return wt.isSubset(t,e)};wt.add=function(e,t){for(var r=t.values(),n;n=r.next(),!n.done;)e.add(n.value)};wt.subtract=function(e,t){for(var r=t.values(),n;n=r.next(),!n.done;)e.delete(n.value)};wt.intersect=function(e,t){for(var r=e.values(),n;n=r.next(),!n.done;)t.has(n.value)||e.delete(n.value)};wt.disjunct=function(e,t){for(var r=e.values(),n,i=[];n=r.next(),!n.done;)t.has(n.value)&&i.push(n.value);for(r=t.values();n=r.next(),!n.done;)e.has(n.value)||e.add(n.value);for(var s=0,o=i.length;s<o;s++)e.delete(i[s])};wt.intersectionSize=function(e,t){var r;if(e.size>t.size&&(r=e,e=t,t=r),e.size===0)return 0;if(e===t)return e.size;for(var n=e.values(),i,s=0;i=n.next(),!i.done;)t.has(i.value)&&s++;return s};wt.unionSize=function(e,t){var r=wt.intersectionSize(e,t);return e.size+t.size-r};wt.jaccard=function(e,t){var r=wt.intersectionSize(e,t);if(r===0)return 0;var n=e.size+t.size-r;return r/n};wt.overlap=function(e,t){var r=wt.intersectionSize(e,t);return r===0?0:r/Math.min(e.size,t.size)}});var rk=w((xoe,tk)=>{var UW=At(),VW=tr().getPointerArray;function Ir(e){var t=VW(e);this.start=0,this.size=0,this.capacity=e,this.dense=new t(e),this.sparse=new t(e)}Ir.prototype.clear=function(){this.start=0,this.size=0};Ir.prototype.has=function(e){if(this.size===0)return!1;var t=this.sparse[e],r=t<this.capacity&&t>=this.start&&t<this.start+this.size||t<(this.start+this.size)%this.capacity;return r&&this.dense[t]===e};Ir.prototype.enqueue=function(e){var t=this.sparse[e];if(this.size!==0){var r=t<this.capacity&&t>=this.start&&t<this.start+this.size||t<(this.start+this.size)%this.capacity;if(r&&this.dense[t]===e)return this}return t=(this.start+this.size)%this.capacity,this.dense[t]=e,this.sparse[e]=t,this.size++,this};Ir.prototype.dequeue=function(){if(this.size!==0){var e=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var t=this.dense[e];return this.sparse[t]=this.capacity,t}};Ir.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=this.capacity,n=this.size,i=this.start,s=0;s<n;)e.call(t,this.dense[i],s,this),i++,s++,i===r&&(i=0)};Ir.prototype.values=function(){var e=this.dense,t=this.capacity,r=this.size,n=this.start,i=0;return new UW(function(){if(i>=r)return{done:!0};var s=e[n];return n++,i++,n===t&&(n=0),{value:s,done:!1}})};typeof Symbol<"u"&&(Ir.prototype[Symbol.iterator]=Ir.prototype.values);Ir.prototype.inspect=function(){var e=[];return this.forEach(function(t){e.push(t)}),Object.defineProperty(e,"constructor",{value:Ir,enumerable:!1}),e.capacity=this.capacity,e};typeof Symbol<"u"&&(Ir.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ir.prototype.inspect);tk.exports=Ir});var ik=w((qoe,nk)=>{var a0=At(),BW=tr().getPointerArray;function Gt(e,t){arguments.length<2&&(t=e,e=Array);var r=BW(t);this.size=0,this.length=t,this.dense=new r(t),this.sparse=new r(t),this.vals=new e(t)}Gt.prototype.clear=function(){this.size=0};Gt.prototype.has=function(e){var t=this.sparse[e];return t<this.size&&this.dense[t]===e};Gt.prototype.get=function(e){var t=this.sparse[e];if(t<this.size&&this.dense[t]===e)return this.vals[t]};Gt.prototype.set=function(e,t){var r=this.sparse[e];return r<this.size&&this.dense[r]===e?(this.vals[r]=t,this):(this.dense[this.size]=e,this.sparse[e]=this.size,this.vals[this.size]=t,this.size++,this)};Gt.prototype.delete=function(e){var t=this.sparse[e];return t>=this.size||this.dense[t]!==e?!1:(t=this.dense[this.size-1],this.dense[this.sparse[e]]=t,this.sparse[t]=this.sparse[e],this.size--,!0)};Gt.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r=0;r<this.size;r++)e.call(t,this.vals[r],this.dense[r])};Gt.prototype.keys=function(){var e=this.size,t=this.dense,r=0;return new a0(function(){if(r<e){var n=t[r];return r++,{value:n}}return{done:!0}})};Gt.prototype.values=function(){var e=this.size,t=this.vals,r=0;return new a0(function(){if(r<e){var n=t[r];return r++,{value:n}}return{done:!0}})};Gt.prototype.entries=function(){var e=this.size,t=this.dense,r=this.vals,n=0;return new a0(function(){if(n<e){var i=[t[n],r[n]];return n++,{value:i}}return{done:!0}})};typeof Symbol<"u"&&(Gt.prototype[Symbol.iterator]=Gt.prototype.entries);Gt.prototype.inspect=function(){for(var e=new Map,t=0;t<this.size;t++)e.set(this.dense[t],this.vals[t]);return Object.defineProperty(e,"constructor",{value:Gt,enumerable:!1}),e.length=this.length,this.vals.constructor!==Array&&(e.type=this.vals.constructor.name),e};typeof Symbol<"u"&&(Gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Gt.prototype.inspect);nk.exports=Gt});var ok=w((Noe,sk)=>{var GW=At(),KW=tr().getPointerArray;function Or(e){var t=KW(e);this.size=0,this.length=e,this.dense=new t(e),this.sparse=new t(e)}Or.prototype.clear=function(){this.size=0};Or.prototype.has=function(e){var t=this.sparse[e];return t<this.size&&this.dense[t]===e};Or.prototype.add=function(e){var t=this.sparse[e];return t<this.size&&this.dense[t]===e?this:(this.dense[this.size]=e,this.sparse[e]=this.size,this.size++,this)};Or.prototype.delete=function(e){var t=this.sparse[e];return t>=this.size||this.dense[t]!==e?!1:(t=this.dense[this.size-1],this.dense[this.sparse[e]]=t,this.sparse[t]=this.sparse[e],this.size--,!0)};Or.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var r,n=0;n<this.size;n++)r=this.dense[n],e.call(t,r,r)};Or.prototype.values=function(){var e=this.size,t=this.dense,r=0;return new GW(function(){if(r<e){var n=t[r];return r++,{value:n}}return{done:!0}})};typeof Symbol<"u"&&(Or.prototype[Symbol.iterator]=Or.prototype.values);Or.prototype.inspect=function(){for(var e=new Set,t=0;t<this.size;t++)e.add(this.dense[t]);return Object.defineProperty(e,"constructor",{value:Or,enumerable:!1}),e.length=this.length,e};typeof Symbol<"u"&&(Or.prototype[Symbol.for("nodejs.util.inspect.custom")]=Or.prototype.inspect);sk.exports=Or});var ck=w((Doe,fk)=>{var QW=ze(),WW=2,JW=2,YW=new Set([0,1,2]),XW={0:"Returns only the top suggestion",1:"Returns suggestions with the smallest edit distance",2:"Returns every suggestion (no early termination)"};function _c(e){var t=new Set;return typeof e=="number"&&t.add(e),{suggestions:t,count:0}}function ak(e,t,r){return{term:e||"",distance:t||0,count:r||0}}function lk(e,t,r,n){n=n||new Set,t++;var i,s=e.length,o;if(s>1)for(o=0;o<s;o++)i=e.substring(0,o)+e.substring(o+1),n.has(i)||(n.add(i),t<r&&lk(i,t,r,n));return n}function ZW(e,t,r,n,i,s){var o=r.suggestions.values().next().value;t<2&&r.suggestions.size>0&&e[o].length-s.length>n.length-s.length&&(r.suggestions=new Set,r.count=0),(t===2||!r.suggestions.size||e[o].length-s.length>=n.length-s.length)&&r.suggestions.add(i)}function uk(e,t){var r=e.length,n=t.length,i=[[]],s=r+n,o=new Map,a,u,l;for(i[0][0]=s,a=0;a<=r;a++)i[a+1]||(i[a+1]=[]),i[a+1][1]=a,i[a+1][0]=s;for(l=0;l<=n;l++)i[1][l+1]=l,i[0][l+1]=s;var f=e+t,c;for(a=0,u=f.length;a<u;a++)c=f[a],o.has(c)||o.set(c,0);for(a=1;a<=r;a++){var h=0;for(l=1;l<=n;l++){var d=o.get(t[l-1]),p=h;e[a-1]===t[l-1]?(i[a+1][l+1]=i[a][l],h=l):i[a+1][l+1]=Math.min(i[a][l],i[a+1][l],i[a][l+1])+1,i[a+1][l+1]=Math.min(i[a+1][l+1],i[d][p]+(a-d-1)+1+(l-p-1))}o.set(e[a-1],a)}return i[r+1][n+1]}function eJ(e,t,r,n,i,s){var o=s.length;if(o-n>i)return[];for(var a=[s],u=new Set,l=new Set,f=[],c,h;a.length>0&&(c=a.shift(),!(r<2&&f.length>0&&o-c.length>f[0].distance));){if(h=e[c],h!==void 0){if(typeof h=="number"&&(h=_c(h)),h.count>0&&!l.has(c)){l.add(c);var d=ak(c,o-c.length,h.count);if(f.push(d),r<2&&o-c.length===0)break}h.suggestions.forEach(b=>{var P=t[b];if(!l.has(P)){l.add(P);var g=0;if(s!==P)if(P.length===c.length)g=o-c.length;else if(o===c.length)g=P.length-c.length;else{for(var y=0,R=0,$=P.length;y<$&&y<o&&P[y]===s[y];)y++;for(;R<$-y&&R<o&&P[$-R-1]===s[o-R-1];)R++;y>0||R>0?g=uk(P.substr(y,$-y-R),s.substr(y,o-y-R)):g=uk(P,s)}if(r<2&&f.length>0&&f[0].distance>g&&(f=[]),!(r<2&&f.length>0&&g>f[0].distance)&&g<=n){var _=e[P];_!==void 0&&f.push(ak(P,g,_.count))}}})}if(o-c.length<n){if(r<2&&f.length>0&&o-c.length>=f[0].distance)continue;for(var p=0,m=c.length;p<m;p++){var v=c.substring(0,p)+c.substring(p+1);u.has(v)||(u.add(v),a.push(v))}}}return r===0?f.slice(0,1):f}function jn(e){if(e=e||{},this.clear(),this.maxDistance=typeof e.maxDistance=="number"?e.maxDistance:WW,this.verbosity=typeof e.verbosity=="number"?e.verbosity:JW,typeof this.maxDistance!="number"||this.maxDistance<=0)throw Error("mnemonist/SymSpell.constructor: invalid `maxDistance` option. Should be a integer greater than 0.");if(!YW.has(this.verbosity))throw Error("mnemonist/SymSpell.constructor: invalid `verbosity` option. Should be either 0, 1 or 2.")}jn.prototype.clear=function(){this.size=0,this.dictionary=Object.create(null),this.maxLength=0,this.words=[]};jn.prototype.add=function(e){var t=this.dictionary[e];if(t!==void 0?(typeof t=="number"&&(t=_c(t),this.dictionary[e]=t),t.count++):(t=_c(),t.count++,this.dictionary[e]=t,e.length>this.maxLength&&(this.maxLength=e.length)),t.count===1){var r=this.words.length;this.words.push(e);var n=lk(e,0,this.maxDistance);n.forEach(i=>{var s=this.dictionary[i];s!==void 0?(typeof s=="number"&&(s=_c(s),this.dictionary[i]=s),s.suggestions.has(r)||ZW(this.words,this.verbosity,s,e,r,i)):this.dictionary[i]=r})}return this.size++,this};jn.prototype.search=function(e){return eJ(this.dictionary,this.words,this.verbosity,this.maxDistance,this.maxLength,e)};jn.prototype.inspect=function(){var e=[];e.size=this.size,e.maxDistance=this.maxDistance,e.verbosity=this.verbosity,e.behavior=XW[this.verbosity];for(var t in this.dictionary)typeof this.dictionary[t]=="object"&&this.dictionary[t].count&&e.push([t,this.dictionary[t].count]);return Object.defineProperty(e,"constructor",{value:jn,enumerable:!1}),e};typeof Symbol<"u"&&(jn.prototype[Symbol.for("nodejs.util.inspect.custom")]=jn.prototype.inspect);jn.from=function(e,t){var r=new jn(t);return QW(e,function(n){r.add(n)}),r};fk.exports=jn});var u0=w((joe,hk)=>{var tJ=ze(),Vo=At(),It=String.fromCharCode(0);function Ke(e){this.mode=e===Array?"array":"string",this.clear()}Ke.prototype.clear=function(){this.root={},this.size=0};Ke.prototype.set=function(e,t){for(var r=this.root,n,i=0,s=e.length;i<s;i++)n=e[i],r=r[n]||(r[n]={});return It in r||this.size++,r[It]=t,this};Ke.prototype.update=function(e,t){for(var r=this.root,n,i=0,s=e.length;i<s;i++)n=e[i],r=r[n]||(r[n]={});return It in r||this.size++,r[It]=t(r[It]),this};Ke.prototype.get=function(e){var t=this.root,r,n,i;for(n=0,i=e.length;n<i;n++)if(r=e[n],t=t[r],typeof t>"u")return;if(It in t)return t[It]};Ke.prototype.delete=function(e){var t=this.root,r=null,n=null,i,s,o,a;for(o=0,a=e.length;o<a;o++){if(s=e[o],i=t,t=t[s],typeof t>"u")return!1;r!==null?Object.keys(t).length>1&&(r=null,n=null):Object.keys(t).length<2&&(r=i,n=s)}return It in t?(this.size--,r?delete r[n]:delete t[It],!0):!1};Ke.prototype.has=function(e){for(var t=this.root,r,n=0,i=e.length;n<i;n++)if(r=e[n],t=t[r],typeof t>"u")return!1;return It in t};Ke.prototype.find=function(e){var t=typeof e=="string",r=this.root,n=[],i,s,o;for(s=0,o=e.length;s<o;s++)if(i=e[s],r=r[i],typeof r>"u")return n;for(var a=[r],u=[e],l;a.length;){e=u.pop(),r=a.pop();for(l in r){if(l===It){n.push([e,r[It]]);continue}a.push(r[l]),u.push(t?e+l:e.concat(l))}}return n};Ke.prototype.values=function(e){var t=this.root,r=[],n,i,s;if(e){for(i=0,s=e.length;i<s;i++)if(n=e[i],t=t[n],typeof t>"u")return Vo.empty()}return r.push(t),new Vo(function(){for(var o,a=!1,u;r.length;){o=r.pop();for(u in o){if(u===It){a=!0;continue}r.push(o[u])}if(a)return{done:!1,value:o[It]}}return{done:!0}})};Ke.prototype.prefixes=function(e){var t=this.root,r=[],n=[],i,s,o,a=this.mode==="string";if(e){for(s=0,o=e.length;s<o;s++)if(i=e[s],t=t[i],typeof t>"u")return Vo.empty()}else e=a?"":[];return r.push(t),n.push(e),new Vo(function(){for(var u,l,f=!1,c;r.length;){u=r.pop(),l=n.pop();for(c in u){if(c===It){f=!0;continue}r.push(u[c]),n.push(a?l+c:l.concat(c))}if(f)return{done:!1,value:l}}return{done:!0}})};Ke.prototype.keys=Ke.prototype.prefixes;Ke.prototype.entries=function(e){var t=this.root,r=[],n=[],i,s,o,a=this.mode==="string";if(e){for(s=0,o=e.length;s<o;s++)if(i=e[s],t=t[i],typeof t>"u")return Vo.empty()}else e=a?"":[];return r.push(t),n.push(e),new Vo(function(){for(var u,l,f=!1,c;r.length;){u=r.pop(),l=n.pop();for(c in u){if(c===It){f=!0;continue}r.push(u[c]),n.push(a?l+c:l.concat(c))}if(f)return{done:!1,value:[l,u[It]]}}return{done:!0}})};typeof Symbol<"u"&&(Ke.prototype[Symbol.iterator]=Ke.prototype.entries);Ke.prototype.inspect=function(){for(var e=new Array(this.size),t=this.entries(),r,n=0;r=t.next(),!r.done;)e[n++]=r.value;return Object.defineProperty(e,"constructor",{value:Ke,enumerable:!1}),e};typeof Symbol<"u"&&(Ke.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ke.prototype.inspect);Ke.prototype.toJSON=function(){return this.root};Ke.from=function(e){var t=new Ke;return tJ(e,function(r,n){t.set(n,r)}),t};Ke.SENTINEL=It;hk.exports=Ke});var mk=w((Loe,pk)=>{var rJ=ze(),dk=u0(),Sc=String.fromCharCode(0);function Ot(e){this.mode=e===Array?"array":"string",this.clear()}for(l0 in dk.prototype)Ot.prototype[l0]=dk.prototype[l0];var l0;delete Ot.prototype.set;delete Ot.prototype.get;delete Ot.prototype.values;delete Ot.prototype.entries;Ot.prototype.add=function(e){for(var t=this.root,r,n=0,i=e.length;n<i;n++)r=e[n],t=t[r]||(t[r]={});return Sc in t||this.size++,t[Sc]=!0,this};Ot.prototype.find=function(e){var t=typeof e=="string",r=this.root,n=[],i,s,o;for(s=0,o=e.length;s<o;s++)if(i=e[s],r=r[i],typeof r>"u")return n;for(var a=[r],u=[e],l;a.length;){e=u.pop(),r=a.pop();for(l in r){if(l===Sc){n.push(e);continue}a.push(r[l]),u.push(t?e+l:e.concat(l))}}return n};typeof Symbol<"u"&&(Ot.prototype[Symbol.iterator]=Ot.prototype.keys);Ot.prototype.inspect=function(){for(var e=new Set,t=this.keys(),r;r=t.next(),!r.done;)e.add(r.value);return Object.defineProperty(e,"constructor",{value:Ot,enumerable:!1}),e};typeof Symbol<"u"&&(Ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ot.prototype.inspect);Ot.prototype.toJSON=function(){return this.root};Ot.from=function(e){var t=new Ot;return rJ(e,function(r){t.add(r)}),t};Ot.SENTINEL=Sc;pk.exports=Ot});var wk=w((Foe,vk)=>{var yk=At(),nJ=ze(),iJ=pr(),gk=tr(),sJ=function(e){return Math.max(1,Math.ceil(e*1.5))},oJ=function(e){var t=gk.getPointerArray(e);return new t(e)};function ge(e,t){if(arguments.length<1)throw new Error("mnemonist/vector: expecting at least a byte array constructor.");var r=t||0,n=sJ,i=0,s=!1;typeof t=="object"&&(r=t.initialCapacity||0,i=t.initialLength||0,n=t.policy||n,s=t.factory===!0),this.factory=s?e:null,this.ArrayClass=e,this.length=i,this.capacity=Math.max(i,r),this.policy=n,this.array=new e(this.capacity)}ge.prototype.set=function(e,t){if(this.length<e)throw new Error("Vector("+this.ArrayClass.name+").set: index out of bounds.");return this.array[e]=t,this};ge.prototype.get=function(e){if(!(this.length<e))return this.array[e]};ge.prototype.applyPolicy=function(e){var t=this.policy(e||this.capacity);if(typeof t!="number"||t<0)throw new Error("mnemonist/vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(t<=this.capacity)throw new Error("mnemonist/vector.applyPolicy: policy returned a less or equal capacity to allocate.");return t};ge.prototype.reallocate=function(e){if(e===this.capacity)return this;var t=this.array;if(e<this.length&&(this.length=e),e>this.capacity)if(this.factory===null?this.array=new this.ArrayClass(e):this.array=this.factory(e),gk.isTypedArray(this.array))this.array.set(t,0);else for(var r=0,n=this.length;r<n;r++)this.array[r]=t[r];else this.array=t.slice(0,e);return this.capacity=e,this};ge.prototype.grow=function(e){var t;if(typeof e=="number"){if(this.capacity>=e)return this;for(t=this.capacity;t<e;)t=this.applyPolicy(t);return this.reallocate(t),this}return t=this.applyPolicy(),this.reallocate(t),this};ge.prototype.resize=function(e){return e===this.length?this:e<this.length?(this.length=e,this):(this.length=e,this.reallocate(e),this)};ge.prototype.push=function(e){return this.capacity===this.length&&this.grow(),this.array[this.length++]=e,this.length};ge.prototype.pop=function(){if(this.length!==0)return this.array[--this.length]};ge.prototype.values=function(){var e=this.array,t=this.length,r=0;return new yk(function(){if(r>=t)return{done:!0};var n=e[r];return r++,{value:n,done:!1}})};ge.prototype.entries=function(){var e=this.array,t=this.length,r=0;return new yk(function(){if(r>=t)return{done:!0};var n=e[r];return{value:[r++,n],done:!1}})};typeof Symbol<"u"&&(ge.prototype[Symbol.iterator]=ge.prototype.values);ge.prototype.inspect=function(){var e=this.array.slice(0,this.length);return e.type=this.array.constructor.name,e.items=this.length,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:ge,enumerable:!1}),e};typeof Symbol<"u"&&(ge.prototype[Symbol.for("nodejs.util.inspect.custom")]=ge.prototype.inspect);ge.from=function(e,t,r){if(arguments.length<3&&(r=iJ.guessLength(e),typeof r!="number"))throw new Error("mnemonist/vector.from: could not guess iterable length. Please provide desired capacity as last argument.");var n=new ge(t,r);return nJ(e,function(i){n.push(i)}),n};function Ln(e){var t=function(n){ge.call(this,e,n)};for(var r in ge.prototype)ge.prototype.hasOwnProperty(r)&&(t.prototype[r]=ge.prototype[r]);return t.from=function(n,i){return ge.from(n,e,i)},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t}ge.Int8Vector=Ln(Int8Array);ge.Uint8Vector=Ln(Uint8Array);ge.Uint8ClampedVector=Ln(Uint8ClampedArray);ge.Int16Vector=Ln(Int16Array);ge.Uint16Vector=Ln(Uint16Array);ge.Int32Vector=Ln(Int32Array);ge.Uint32Vector=Ln(Uint32Array);ge.Float32Vector=Ln(Float32Array);ge.Float64Vector=Ln(Float64Array);ge.PointerVector=Ln(oJ);vk.exports=ge});var Ek=w((Moe,bk)=>{var aJ=pr(),uJ=tr(),lJ=t0().inplaceQuickSortIndices,fJ=Zg().lowerBoundIndices,cJ=yc(),hJ=uJ.getPointerArray;function dJ(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0}function pJ(e,t,r){for(var n=r.length,i=hJ(n),s=0,o=new i(n),a=new i(n),u=new i(n),l=new Float64Array(n),f=[0,0,n],c=new Float64Array(n),h,d,p,m,v,b,P,g,y;f.length;)if(v=f.pop(),m=f.pop(),h=f.pop(),d=r[v-1],v--,y=v-m,o[h]=d,y!==0){if(y===1){P=e(t[d],t[r[m]]),l[h]=P,s++,u[h]=s,o[s]=r[m];continue}for(g=m;g<v;g++)c[r[g]]=e(t[d],t[r[g]]);lJ(c,r,m,v),p=m+y/2-1,p===(p|0)?P=(c[r[p]]+c[r[p+1]])/2:P=c[r[Math.ceil(p)]],l[h]=P,b=fJ(c,r,P,m,v),v-b>0&&(s++,u[h]=s,f.push(s,b,v)),b-m>0&&(s++,a[h]=s,f.push(s,m,b))}return{nodes:o,lefts:a,rights:u,mus:l}}function ai(e,t){if(typeof e!="function")throw new Error("mnemonist/VPTree.constructor: given `distance` must be a function.");if(!t)throw new Error("mnemonist/VPTree.constructor: you must provide items to the tree. A VPTree cannot be updated after its creation.");this.distance=e,this.heap=new cJ(dJ),this.D=0;var r=aJ.toArrayWithIndices(t);this.items=r[0];var n=r[1];this.size=n.length;var i=pJ(e,this.items,n);this.nodes=i.nodes,this.lefts=i.lefts,this.rights=i.rights,this.mus=i.mus}ai.prototype.nearestNeighbors=function(e,t){var r=this.heap,n=[0],i=1/0,s,o,a,u,l,f,c;for(this.D=0;n.length;)s=n.pop(),o=this.nodes[s],a=this.items[o],c=this.distance(a,t),this.D++,c<i&&(r.push({distance:c,item:a}),r.size>e&&r.pop(),r.size>=e&&(i=r.peek().distance)),u=this.lefts[s],l=this.rights[s],!(!u&&!l)&&(f=this.mus[s],c<f?(u&&c<f+i&&n.push(u),l&&c>=f-i&&n.push(l)):(l&&c>=f-i&&n.push(l),u&&c<f+i&&n.push(u)));for(var h=new Array(r.size),d=r.size-1;d>=0;d--)h[d]=r.pop();return h};ai.prototype.neighbors=function(e,t){var r=[],n=[0],i,s,o,a,u,l,f;for(this.D=0;n.length;)i=n.pop(),s=this.nodes[i],o=this.items[s],f=this.distance(o,t),this.D++,f<=e&&r.push({distance:f,item:o}),a=this.lefts[i],u=this.rights[i],!(!a&&!u)&&(l=this.mus[i],f<l?(a&&f<l+e&&n.push(a),u&&f>=l-e&&n.push(u)):(u&&f>=l-e&&n.push(u),a&&f<l+e&&n.push(a)));return r};ai.prototype.inspect=function(){var e=this.items.slice();return Object.defineProperty(e,"constructor",{value:ai,enumerable:!1}),e};typeof Symbol<"u"&&(ai.prototype[Symbol.for("nodejs.util.inspect.custom")]=ai.prototype.inspect);ai.from=function(e,t){return new ai(t,e)};bk.exports=ai});var Pk=w((zoe,Sk)=>{var f0=yc(),c0=Lg(),_k=bO();Sk.exports={BiMap:RO(),BitSet:kO(),BitVector:DO(),BloomFilter:HO(),BKTree:VO(),CircularBuffer:WO(),DefaultMap:YO(),DefaultWeakMap:ZO(),FixedDeque:Vg(),StaticDisjointSet:tC(),FibonacciHeap:c0,MinFibonacciHeap:c0.MinFibonacciHeap,MaxFibonacciHeap:c0.MaxFibonacciHeap,FixedReverseHeap:vc(),FuzzyMap:aC(),FuzzyMultiMap:cC(),HashedArrayTree:pC(),Heap:f0,MinHeap:f0.MinHeap,MaxHeap:f0.MaxHeap,StaticIntervalTree:vC(),InvertedIndex:RC(),KDTree:OC(),LinkedList:xC(),LRUCache:Ec(),LRUCacheWithDelete:DC(),LRUMap:s0(),LRUMapWithDelete:FC(),MultiMap:Wg(),MultiSet:zC(),PassjoinIndex:KC(),Queue:JC(),FixedStack:Yg(),Stack:ZC(),SuffixArray:_k,GeneralizedSuffixArray:_k.GeneralizedSuffixArray,Set:ek(),SparseQueueSet:rk(),SparseMap:ik(),SparseSet:ok(),SymSpell:ck(),Trie:mk(),TrieMap:u0(),Vector:wk(),VPTree:Ek()}});var Tk=w((Hoe,xu)=>{"use strict";var mJ=Pk().LRUCache,yJ=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function gJ(e){if(yJ.test(e)===!1)throw new TypeError("Fieldname contains invalid characters.")}function Rk(e){e=e.trim().toLowerCase();let t=[];if(e.length!==0)if(e.indexOf(",")===-1)t.push(e);else{let r=e.length,n=0,i=0,s;for(n=0;n<r;++n)s=e[n],s===" "?i=n+1:s===","&&(i!==n&&t.push(e.slice(i,n)),i=n+1);i!==n&&t.push(e.slice(i,n))}return t}function h0(e){let t=new mJ(1e3);return gJ(e),function(r){let n=r.getHeader("Vary");if(!n){r.header("Vary",e);return}if(n==="*")return;if(e==="*"){r.header("Vary","*");return}if(Array.isArray(n)&&(n=n.join(", ")),!t.has(n)){let s=Rk(n);s.indexOf("*")!==-1?t.set(n,"*"):s.indexOf(e.toLowerCase())===-1?t.set(n,n+", "+e):t.set(n,null)}let i=t.get(n);i!==null&&r.header("Vary",i)}}xu.exports.createAddFieldnameToVary=h0;xu.exports.addOriginToVaryHeader=h0("Origin");xu.exports.addAccessControlRequestHeadersToVaryHeader=h0("Access-Control-Request-Headers");xu.exports.parse=Rk});var Ik=w((Uoe,$k)=>{"use strict";var vJ=No(),{addAccessControlRequestHeadersToVaryHeader:wJ,addOriginToVaryHeader:bJ}=Tk(),d0={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204,credentials:!1,exposedHeaders:null,allowedHeaders:null,maxAge:null,preflight:!0,strictPreflight:!0};function EJ(e,t,r){e.decorateRequest("corsPreflightEnabled",!1);let n=!0;if(typeof t=="function")_J(t,e);else{t.hideOptionsRoute!==void 0&&(n=t.hideOptionsRoute);let i=Object.assign({},d0,t);e.addHook("onRequest",function(o,a,u){p0(e,i,o,a,u)})}e.options("*",{schema:{hide:n}},(i,s)=>{if(!i.corsPreflightEnabled){s.callNotFound();return}s.send()}),r()}function _J(e,t){t.addHook("onRequest",function(n,i,s){if(e.length===2){SJ(e,t,n,i,s);return}else{let o=e(n);if(o&&typeof o.then=="function"){o.then(a=>Object.assign({},d0,a)).then(a=>p0(t,a,n,i,s)).catch(s);return}}s(new Error("Invalid CORS origin option"))})}function SJ(e,t,r,n,i){e(r,(s,o)=>{if(s)i(s);else{let a=Object.assign({},d0,o);p0(t,a,r,n,i)}})}function p0(e,t,r,n,i){bJ(n),(typeof t.origin=="function"?TJ(e,t.origin):(o,a)=>a(null,t.origin))(r,(o,a)=>{if(o!==null)return i(o);if(a===!1)return i();if(!a)return i(new Error("Invalid CORS origin option"));if(PJ(r,n,a,t),r.raw.method==="OPTIONS"&&t.preflight===!0){if(t.strictPreflight===!0&&(!r.headers.origin||!r.headers["access-control-request-method"])){n.status(400).type("text/plain").send("Invalid Preflight Request");return}if(r.corsPreflightEnabled=!0,RJ(r,n,t),!t.preflightContinue){n.code(t.optionsSuccessStatus).header("Content-Length","0").send();return}}return i()})}function PJ(e,t,r,n){let i=AJ(e.headers.origin,r);i&&t.header("Access-Control-Allow-Origin",i),n.credentials&&t.header("Access-Control-Allow-Credentials","true"),n.exposedHeaders!==null&&t.header("Access-Control-Expose-Headers",Array.isArray(n.exposedHeaders)?n.exposedHeaders.join(", "):n.exposedHeaders)}function RJ(e,t,r){if(t.header("Access-Control-Allow-Methods",Array.isArray(r.methods)?r.methods.join(", "):r.methods),r.allowedHeaders===null){wJ(t);let n=e.headers["access-control-request-headers"];n!==void 0&&t.header("Access-Control-Allow-Headers",n)}else t.header("Access-Control-Allow-Headers",Array.isArray(r.allowedHeaders)?r.allowedHeaders.join(", "):r.allowedHeaders);r.maxAge!==null&&t.header("Access-Control-Max-Age",String(r.maxAge))}function TJ(e,t){return function(r,n){let i=t.call(e,r.headers.origin,n);i&&typeof i.then=="function"&&i.then(s=>n(null,s),n)}}function AJ(e,t){return t==="*"?"*":typeof t=="string"?t:Ak(e,t)?e:!1}function Ak(e,t){if(Array.isArray(t)){for(let r=0;r<t.length;++r)if(Ak(e,t[r]))return!0;return!1}else return typeof t=="string"?e===t:t instanceof RegExp?(t.lastIndex=0,t.test(e)):!!t}$k.exports=vJ(EJ,{fastify:"4.x",name:"@fastify/cors"})});var y0=w(kk=>{"use strict";kk.parse=function(e,t){return new qu(e,t).parse()};var qu=class{constructor(t,r){this.source=t,this.transform=r||$J,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var t=this.source[this.position++];return t==="\\"?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}}record(t){this.recorded.push(t)}newEntry(t){var r;(this.recorded.length>0||t)&&(r=this.recorded.join(""),r==="NULL"&&!t&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var t=this.nextCharacter();if(t.value==="=")break}}parse(t){var r,n,i;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!i)this.dimension++,this.dimension>1&&(n=new qu(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else r.value==='"'&&!r.escaped?(i&&this.newEntry(!0),i=!i):r.value===","&&!i?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function $J(e){return e}});var g0=w((Koe,xk)=>{var IJ=y0();xk.exports={create:function(e,t){return{parse:function(){return IJ.parse(e,t)}}}}});var Dk=w((Qoe,Nk)=>{"use strict";var OJ=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,CJ=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,kJ=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,xJ=/^-?infinity$/;Nk.exports=function(t){if(xJ.test(t))return Number(t.replace("i","I"));var r=OJ.exec(t);if(!r)return qJ(t)||null;var n=!!r[8],i=parseInt(r[1],10);n&&(i=qk(i));var s=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),u=parseInt(r[5],10),l=parseInt(r[6],10),f=r[7];f=f?1e3*parseFloat(f):0;var c,h=NJ(t);return h!=null?(c=new Date(Date.UTC(i,s,o,a,u,l,f)),v0(i)&&c.setUTCFullYear(i),h!==0&&c.setTime(c.getTime()-h)):(c=new Date(i,s,o,a,u,l,f),v0(i)&&c.setFullYear(i)),c};function qJ(e){var t=CJ.exec(e);if(!!t){var r=parseInt(t[1],10),n=!!t[4];n&&(r=qk(r));var i=parseInt(t[2],10)-1,s=t[3],o=new Date(r,i,s);return v0(r)&&o.setFullYear(r),o}}function NJ(e){if(e.endsWith("+00"))return 0;var t=kJ.exec(e.split(" ")[1]);if(!!t){var r=t[1];if(r==="Z")return 0;var n=r==="-"?-1:1,i=parseInt(t[2],10)*3600+parseInt(t[3]||0,10)*60+parseInt(t[4]||0,10);return i*n*1e3}}function qk(e){return-(e-1)}function v0(e){return e>=0&&e<100}});var Lk=w((Woe,jk)=>{jk.exports=jJ;var DJ=Object.prototype.hasOwnProperty;function jJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)DJ.call(r,n)&&(e[n]=r[n])}return e}});var zk=w((Joe,Mk)=>{"use strict";var LJ=Lk();Mk.exports=Bo;function Bo(e){if(!(this instanceof Bo))return new Bo(e);LJ(this,JJ(e))}var FJ=["seconds","minutes","hours","days","months","years"];Bo.prototype.toPostgres=function(){var e=FJ.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),e.length===0?"0":e.map(function(t){var r=this[t]||0;return t==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+t},this).join(" ")};var MJ={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},zJ=["years","months","days"],HJ=["hours","minutes","seconds"];Bo.prototype.toISOString=Bo.prototype.toISO=function(){var e=zJ.map(r,this).join(""),t=HJ.map(r,this).join("");return"P"+e+"T"+t;function r(n){var i=this[n]||0;return n==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+MJ[n]}};var w0="([+-]?\\d+)",UJ=w0+"\\s+years?",VJ=w0+"\\s+mons?",BJ=w0+"\\s+days?",GJ="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",KJ=new RegExp([UJ,VJ,BJ,GJ].map(function(e){return"("+e+")?"}).join("\\s*")),Fk={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},QJ=["hours","minutes","seconds","milliseconds"];function WJ(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function JJ(e){if(!e)return{};var t=KJ.exec(e),r=t[8]==="-";return Object.keys(Fk).reduce(function(n,i){var s=Fk[i],o=t[s];return!o||(o=i==="milliseconds"?WJ(o):parseInt(o,10),!o)||(r&&~QJ.indexOf(i)&&(o*=-1),n[i]=o),n},{})}});var Uk=w((Yoe,Hk)=>{"use strict";Hk.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),"hex");for(var r="",n=0;n<t.length;)if(t[n]!=="\\")r+=t[n],++n;else if(/[0-7]{3}/.test(t.substr(n+1,3)))r+=String.fromCharCode(parseInt(t.substr(n+1,3),8)),n+=4;else{for(var i=1;n+i<t.length&&t[n+i]==="\\";)i++;for(var s=0;s<Math.floor(i/2);++s)r+="\\";n+=Math.floor(i/2)*2}return new Buffer(r,"binary")}});var Jk=w((Xoe,Wk)=>{var Nu=y0(),Du=g0(),Pc=Dk(),Bk=zk(),Gk=Uk();function Rc(e){return function(r){return r===null?r:e(r)}}function Kk(e){return e===null?e:e==="TRUE"||e==="t"||e==="true"||e==="y"||e==="yes"||e==="on"||e==="1"}function YJ(e){return e?Nu.parse(e,Kk):null}function XJ(e){return parseInt(e,10)}function b0(e){return e?Nu.parse(e,Rc(XJ)):null}function ZJ(e){return e?Nu.parse(e,Rc(function(t){return Qk(t).trim()})):null}var eY=function(e){if(!e)return null;var t=Du.create(e,function(r){return r!==null&&(r=P0(r)),r});return t.parse()},E0=function(e){if(!e)return null;var t=Du.create(e,function(r){return r!==null&&(r=parseFloat(r)),r});return t.parse()},Gr=function(e){if(!e)return null;var t=Du.create(e);return t.parse()},_0=function(e){if(!e)return null;var t=Du.create(e,function(r){return r!==null&&(r=Pc(r)),r});return t.parse()},tY=function(e){if(!e)return null;var t=Du.create(e,function(r){return r!==null&&(r=Bk(r)),r});return t.parse()},rY=function(e){return e?Nu.parse(e,Rc(Gk)):null},S0=function(e){return parseInt(e,10)},Qk=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},Vk=function(e){return e?Nu.parse(e,Rc(JSON.parse)):null},P0=function(e){return e[0]!=="("?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},nY=function(e){if(e[0]!=="<"&&e[1]!=="(")return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++){if(n||(t+=e[i]),e[i]===")"){n=!0;continue}else if(!n)continue;e[i]!==","&&(r+=e[i])}var s=P0(t);return s.radius=parseFloat(r),s},iY=function(e){e(20,Qk),e(21,S0),e(23,S0),e(26,S0),e(700,parseFloat),e(701,parseFloat),e(16,Kk),e(1082,Pc),e(1114,Pc),e(1184,Pc),e(600,P0),e(651,Gr),e(718,nY),e(1e3,YJ),e(1001,rY),e(1005,b0),e(1007,b0),e(1028,b0),e(1016,ZJ),e(1017,eY),e(1021,E0),e(1022,E0),e(1231,E0),e(1014,Gr),e(1015,Gr),e(1008,Gr),e(1009,Gr),e(1040,Gr),e(1041,Gr),e(1115,_0),e(1182,_0),e(1185,_0),e(1186,Bk),e(1187,tY),e(17,Gk),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,Vk),e(3807,Vk),e(3907,Gr),e(2951,Gr),e(791,Gr),e(1183,Gr),e(1270,Gr)};Wk.exports={init:iY}});var Xk=w((Zoe,Yk)=>{"use strict";var mr=1e6;function sY(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(r===0),r=~r+1>>>0,n="-");var i="",s,o,a,u,l,f;{if(s=t%mr,t=t/mr>>>0,o=4294967296*s+r,r=o/mr>>>0,a=""+(o-mr*r),r===0&&t===0)return n+a+i;for(u="",l=6-a.length,f=0;f<l;f++)u+="0";i=u+a+i}{if(s=t%mr,t=t/mr>>>0,o=4294967296*s+r,r=o/mr>>>0,a=""+(o-mr*r),r===0&&t===0)return n+a+i;for(u="",l=6-a.length,f=0;f<l;f++)u+="0";i=u+a+i}{if(s=t%mr,t=t/mr>>>0,o=4294967296*s+r,r=o/mr>>>0,a=""+(o-mr*r),r===0&&t===0)return n+a+i;for(u="",l=6-a.length,f=0;f<l;f++)u+="0";i=u+a+i}return s=t%mr,o=4294967296*s+r,a=""+o%mr,n+a+i}Yk.exports=sY});var nx=w((eae,rx)=>{var oY=Xk(),Qe=function(e,t,r,n,i){r=r||0,n=n||!1,i=i||function(d,p,m){return d*Math.pow(2,m)+p};var s=r>>3,o=function(d){return n?~d&255:d},a=255,u=8-r%8;t<u&&(a=255<<8-t&255,u=t),r&&(a=a>>r%8);var l=0;r%8+t>=8&&(l=i(0,o(e[s])&a,u));for(var f=t+r>>3,c=s+1;c<f;c++)l=i(l,o(e[c]),8);var h=(t+r)%8;return h>0&&(l=i(l,o(e[f])>>8-h,h)),l},tx=function(e,t,r){var n=Math.pow(2,r-1)-1,i=Qe(e,1),s=Qe(e,r,1);if(s===0)return 0;var o=1,a=function(l,f,c){l===0&&(l=1);for(var h=1;h<=c;h++)o/=2,(f&1<<c-h)>0&&(l+=o);return l},u=Qe(e,t,r+1,!1,a);return s==Math.pow(2,r+1)-1?u===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,s-n)*u},aY=function(e){return Qe(e,1)==1?-1*(Qe(e,15,1,!0)+1):Qe(e,15,1)},Zk=function(e){return Qe(e,1)==1?-1*(Qe(e,31,1,!0)+1):Qe(e,31,1)},uY=function(e){return tx(e,23,8)},lY=function(e){return tx(e,52,11)},fY=function(e){var t=Qe(e,16,32);if(t==49152)return NaN;for(var r=Math.pow(1e4,Qe(e,16,16)),n=0,i=[],s=Qe(e,16),o=0;o<s;o++)n+=Qe(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,Qe(e,16,48));return(t===0?1:-1)*Math.round(n*a)/a},ex=function(e,t){var r=Qe(t,1),n=Qe(t,63,1),i=new Date((r===0?1:-1)*n/1e3+9466848e5);return e||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(s){this.usec=s},i.getUTCMicroSeconds=function(){return this.usec},i},ju=function(e){for(var t=Qe(e,32),r=Qe(e,32,32),n=Qe(e,32,64),i=96,s=[],o=0;o<t;o++)s[o]=Qe(e,32,i),i+=32,i+=32;var a=function(l){var f=Qe(e,32,i);if(i+=32,f==4294967295)return null;var c;if(l==23||l==20)return c=Qe(e,f*8,i),i+=f*8,c;if(l==25)return c=e.toString(this.encoding,i>>3,(i+=f<<3)>>3),c;console.log("ERROR: ElementType not implemented: "+l)},u=function(l,f){var c=[],h;if(l.length>1){var d=l.shift();for(h=0;h<d;h++)c[h]=u(l,f);l.unshift(d)}else for(h=0;h<l[0];h++)c[h]=a(f);return c};return u(s,n)},cY=function(e){return e.toString("utf8")},hY=function(e){return e===null?null:Qe(e,8)>0},dY=function(e){e(20,oY),e(21,aY),e(23,Zk),e(26,Zk),e(1700,fY),e(700,uY),e(701,lY),e(16,hY),e(1114,ex.bind(null,!1)),e(1184,ex.bind(null,!0)),e(1e3,ju),e(1007,ju),e(1016,ju),e(1008,ju),e(1009,ju),e(25,cY)};rx.exports={init:dY}});var sx=w((tae,ix)=>{ix.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Mu=w(Fu=>{var pY=Jk(),mY=nx(),yY=g0(),gY=sx();Fu.getTypeParser=vY;Fu.setTypeParser=wY;Fu.arrayParser=yY;Fu.builtins=gY;var Lu={text:{},binary:{}};function ox(e){return String(e)}function vY(e,t){return t=t||"text",Lu[t]&&Lu[t][e]||ox}function wY(e,t,r){typeof t=="function"&&(r=t,t="text"),Lu[t][e]=r}pY.init(function(e,t){Lu.text[e]=t});mY.init(function(e,t){Lu.binary[e]=t})});var zu=w((nae,R0)=>{"use strict";R0.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Go=Mu(),bY=Go.getTypeParser(20,"text"),EY=Go.getTypeParser(1016,"text");R0.exports.__defineSetter__("parseInt8",function(e){Go.setTypeParser(20,"text",e?Go.getTypeParser(23,"text"):bY),Go.setTypeParser(1016,"text",e?Go.getTypeParser(1007,"text"):EY)})});var Ac=w((iae,ux)=>{"use strict";var _Y=require("crypto"),SY=zu();function PY(e){var t=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+t+'"'}function ax(e){for(var t="{",r=0;r<e.length;r++)r>0&&(t=t+","),e[r]===null||typeof e[r]>"u"?t=t+"NULL":Array.isArray(e[r])?t=t+ax(e[r]):e[r]instanceof Buffer?t+="\\\\x"+e[r].toString("hex"):t+=PY(Tc(e[r]));return t=t+"}",t}var Tc=function(e,t){if(e==null)return null;if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){var r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?SY.parseInputDatesAsUTC?AY(e):TY(e):Array.isArray(e)?ax(e):typeof e=="object"?RY(e,t):e.toString()};function RY(e,t){if(e&&typeof e.toPostgres=="function"){if(t=t||[],t.indexOf(e)!==-1)throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),Tc(e.toPostgres(Tc),t)}return JSON.stringify(e)}function Kt(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function TY(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var i=Kt(r,4)+"-"+Kt(e.getMonth()+1,2)+"-"+Kt(e.getDate(),2)+"T"+Kt(e.getHours(),2)+":"+Kt(e.getMinutes(),2)+":"+Kt(e.getSeconds(),2)+"."+Kt(e.getMilliseconds(),3);return t<0?(i+="-",t*=-1):i+="+",i+=Kt(Math.floor(t/60),2)+":"+Kt(t%60,2),n&&(i+=" BC"),i}function AY(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var n=Kt(t,4)+"-"+Kt(e.getUTCMonth()+1,2)+"-"+Kt(e.getUTCDate(),2)+"T"+Kt(e.getUTCHours(),2)+":"+Kt(e.getUTCMinutes(),2)+":"+Kt(e.getUTCSeconds(),2)+"."+Kt(e.getUTCMilliseconds(),3);return n+="+00:00",r&&(n+=" BC"),n}function $Y(e,t,r){return e=typeof e=="string"?{text:e}:e,t&&(typeof t=="function"?e.callback=t:e.values=t),r&&(e.callback=r),e}var T0=function(e){return _Y.createHash("md5").update(e,"utf-8").digest("hex")},IY=function(e,t,r){var n=T0(t+e),i=T0(Buffer.concat([Buffer.from(n),r]));return"md5"+i};ux.exports={prepareValue:function(t){return Tc(t)},normalizeQueryConfig:$Y,postgresMd5PasswordHash:IY,md5:T0}});var dx=w((sae,hx)=>{"use strict";var A0=require("crypto");function OY(e){if(e.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let t=A0.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}}function CY(e,t,r){if(e.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=qY(r);if(n.nonce.startsWith(e.clientNonce)){if(n.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var i=Buffer.from(n.salt,"base64"),s=jY(t,i,n.iteration),o=Ko(s,"Client Key"),a=DY(o),u="n=*,r="+e.clientNonce,l="r="+n.nonce+",s="+n.salt+",i="+n.iteration,f="c=biws,r="+n.nonce,c=u+","+l+","+f,h=Ko(a,c),d=cx(o,h),p=d.toString("base64"),m=Ko(s,"Server Key"),v=Ko(m,c);e.message="SASLResponse",e.serverSignature=v.toString("base64"),e.response=f+",p="+p}function kY(e,t){if(e.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=NY(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function xY(e){if(typeof e!="string")throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(t=>t>=33&&t<=43||t>=45&&t<=126)}function lx(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function fx(e){if(typeof e!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(t=>{if(!/^.=/.test(t))throw new Error("SASL: Invalid attribute pair entry");let r=t[0],n=t.substring(2);return[r,n]}))}function qY(e){let t=fx(e),r=t.get("r");if(r){if(!xY(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=t.get("s");if(n){if(!lx(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=t.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let s=parseInt(i,10);return{nonce:r,salt:n,iteration:s}}function NY(e){let r=fx(e).get("v");if(r){if(!lx(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function cx(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(e.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,n)=>e[n]^t[n]))}function DY(e){return A0.createHash("sha256").update(e).digest()}function Ko(e,t){return A0.createHmac("sha256",e).update(t).digest()}function jY(e,t,r){for(var n=Ko(e,Buffer.concat([t,Buffer.from([0,0,0,1])])),i=n,s=0;s<r-1;s++)n=Ko(e,n),i=cx(i,n);return i}hx.exports={startSession:OY,continueSession:CY,finalizeSession:kY}});var gx=w((oae,yx)=>{"use strict";var{Transform:LY}=require("stream"),{StringDecoder:FY}=require("string_decoder"),Ui=Symbol("last"),$c=Symbol("decoder");function MY(e,t,r){let n;if(this.overflow){if(n=this[$c].write(e).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[Ui]+=this[$c].write(e),n=this[Ui].split(this.matcher);this[Ui]=n.pop();for(let i=0;i<n.length;i++)try{mx(this,this.mapper(n[i]))}catch(s){return r(s)}if(this.overflow=this[Ui].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function zY(e){if(this[Ui]+=this[$c].end(),this[Ui])try{mx(this,this.mapper(this[Ui]))}catch(t){return e(t)}e()}function mx(e,t){t!==void 0&&e.push(t)}function px(e){return e}function HY(e,t,r){switch(e=e||/\r?\n/,t=t||px,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=px)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=MY,r.flush=zY,r.readableObjectMode=!0;let n=new LY(r);return n[Ui]="",n[$c]=new FY("utf8"),n.matcher=e,n.mapper=t,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,s){this._writableState.errorEmitted=!1,s(i)},n}yx.exports=HY});var bx=w((aae,ui)=>{"use strict";var vx=require("path"),UY=require("stream").Stream,VY=gx(),wx=require("util"),BY=5432,Ic=process.platform==="win32",Hu=process.stderr,GY=56,KY=7,QY=61440,WY=32768;function JY(e){return(e&QY)==WY}var Qo=["host","port","database","user","password"],$0=Qo.length,YY=Qo[$0-1];function I0(){var e=Hu instanceof UY&&Hu.writable===!0;if(e){var t=Array.prototype.slice.call(arguments).concat(`
`);Hu.write(wx.format.apply(wx,t))}}Object.defineProperty(ui.exports,"isWin",{get:function(){return Ic},set:function(e){Ic=e}});ui.exports.warnTo=function(e){var t=Hu;return Hu=e,t};ui.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||(Ic?vx.join(t.APPDATA||"./","postgresql","pgpass.conf"):vx.join(t.HOME||"./",".pgpass"));return r};ui.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Ic?!0:(t=t||"<unkn>",JY(e.mode)?e.mode&(GY|KY)?(I0('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(I0('WARNING: password file "%s" is not a plain file',t),!1))};var XY=ui.exports.match=function(e,t){return Qo.slice(0,-1).reduce(function(r,n,i){return i==1&&Number(e[n]||BY)===Number(t[n])?r&&!0:r&&(t[n]==="*"||t[n]===e[n])},!0)};ui.exports.getPassword=function(e,t,r){var n,i=t.pipe(VY());function s(u){var l=ZY(u);l&&eX(l)&&XY(e,l)&&(n=l[YY],i.end())}var o=function(){t.destroy(),r(n)},a=function(u){t.destroy(),I0("WARNING: error on reading file: %s",u),r(void 0)};t.on("error",a),i.on("data",s).on("end",o).on("error",a)};var ZY=ui.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,s=0,o={},a=!1,u=function(f,c,h){var d=e.substring(c,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(d=d.replace(/\\([:\\])/g,"$1")),o[Qo[f]]=d},l=0;l<e.length-1;l+=1){if(t=e.charAt(l+1),r=e.charAt(l),a=n==$0-1,a){u(n,i);break}l>=0&&t==":"&&r!=="\\"&&(u(n,i,l+1),i=l+2,n+=1)}return o=Object.keys(o).length===$0?o:null,o},eX=ui.exports.isValidEntry=function(e){for(var t={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<Qo.length;r+=1){var n=t[r],i=e[Qo[r]]||"",s=n(i);if(!s)return!1}return!0}});var _x=w((lae,O0)=>{"use strict";var uae=require("path"),Ex=require("fs"),Oc=bx();O0.exports=function(e,t){var r=Oc.getFileName();Ex.stat(r,function(n,i){if(n||!Oc.usePgPass(i,r))return t(void 0);var s=Ex.createReadStream(r);Oc.getPassword(e,s,t)})};O0.exports.warnTo=Oc.warnTo});var C0=w((fae,Sx)=>{"use strict";var tX=Mu();function Cc(e){this._types=e||tX,this.text={},this.binary={}}Cc.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}};Cc.prototype.setTypeParser=function(e,t,r){typeof t=="function"&&(r=t,t="text"),this.getOverrides(t)[e]=r};Cc.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};Sx.exports=Cc});var Rx=w((cae,Px)=>{"use strict";var rX=require("url"),k0=require("fs");function x0(e){if(e.charAt(0)==="/"){var r=e.split(" ");return{host:r[0],database:r[1]}}var t=rX.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=t.query;for(var n in r)Array.isArray(r[n])&&(r[n]=r[n][r[n].length-1]);var i=(t.auth||":").split(":");if(r.user=i[0],r.password=i.splice(1).join(":"),r.port=t.port,t.protocol=="socket:")return r.host=decodeURI(t.pathname),r.database=t.query.db,r.client_encoding=t.query.encoding,r;r.host||(r.host=t.hostname);var s=t.pathname;if(!r.host&&s&&/^%2f/i.test(s)){var o=s.split("/");r.host=decodeURIComponent(o[0]),s=o.splice(1).join("/")}switch(s&&s.charAt(0)==="/"&&(s=s.slice(1)||null),r.database=s&&decodeURI(s),(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=k0.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=k0.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=k0.readFileSync(r.sslrootcert).toString()),r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}Px.exports=x0;x0.parse=x0});var N0=w((hae,$x)=>{"use strict";var nX=require("dns"),Ax=zu(),Tx=Rx().parse,yr=function(e,t,r){return r===void 0?r=process.env["PG"+e.toUpperCase()]:r===!1||(r=process.env[r]),t[e]||r||Ax[e]},iX=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Ax.ssl},Wo=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Kr=function(e,t,r){var n=t[r];n!=null&&e.push(r+"="+Wo(n))},q0=class{constructor(t){t=typeof t=="string"?Tx(t):t||{},t.connectionString&&(t=Object.assign({},t,Tx(t.connectionString))),this.user=yr("user",t),this.database=yr("database",t),this.database===void 0&&(this.database=this.user),this.port=parseInt(yr("port",t),10),this.host=yr("host",t),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:yr("password",t)}),this.binary=yr("binary",t),this.options=yr("options",t),this.ssl=typeof t.ssl>"u"?iX():t.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=yr("client_encoding",t),this.replication=yr("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=yr("application_name",t,"PGAPPNAME"),this.fallback_application_name=yr("fallback_application_name",t,!1),this.statement_timeout=yr("statement_timeout",t,!1),this.idle_in_transaction_session_timeout=yr("idle_in_transaction_session_timeout",t,!1),this.query_timeout=yr("query_timeout",t,!1),t.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),t.keepAlive===!1?this.keepalives=0:t.keepAlive===!0&&(this.keepalives=1),typeof t.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(t){var r=[];Kr(r,this,"user"),Kr(r,this,"password"),Kr(r,this,"port"),Kr(r,this,"application_name"),Kr(r,this,"fallback_application_name"),Kr(r,this,"connect_timeout"),Kr(r,this,"options");var n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Kr(r,n,"sslmode"),Kr(r,n,"sslca"),Kr(r,n,"sslkey"),Kr(r,n,"sslcert"),Kr(r,n,"sslrootcert"),this.database&&r.push("dbname="+Wo(this.database)),this.replication&&r.push("replication="+Wo(this.replication)),this.host&&r.push("host="+Wo(this.host)),this.isDomainSocket)return t(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Wo(this.client_encoding)),nX.lookup(this.host,function(i,s){return i?t(i,null):(r.push("hostaddr="+Wo(s)),t(null,r.join(" ")))})}};$x.exports=q0});var Cx=w((dae,Ox)=>{"use strict";var sX=Mu(),Ix=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,D0=class{constructor(t,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=t==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(t){var r;t.text?r=Ix.exec(t.text):r=Ix.exec(t.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(t){for(var r=new Array(t.length),n=0,i=t.length;n<i;n++){var s=t[n];s!==null?r[n]=this._parsers[n](s):r[n]=null}return r}parseRow(t){for(var r={},n=0,i=t.length;n<i;n++){var s=t[n],o=this.fields[n].name;s!==null?r[o]=this._parsers[n](s):r[o]=null}return r}addRow(t){this.rows.push(t)}addFields(t){this.fields=t,this.fields.length&&(this._parsers=new Array(t.length));for(var r=0;r<t.length;r++){var n=t[r];this._types?this._parsers[r]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[r]=sX.getTypeParser(n.dataTypeID,n.format||"text")}}};Ox.exports=D0});var Nx=w((pae,qx)=>{"use strict";var{EventEmitter:oX}=require("events"),kx=Cx(),xx=Ac(),j0=class extends oX{constructor(t,r,n){super(),t=xx.normalizeQueryConfig(t,r,n),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.binary=t.binary,this.portal=t.portal||"",this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new kx(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new kx(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(t){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(t.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(t,r){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&r.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,r){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);this.callback&&this.callback(null,this._results),this.emit("end",this._results)}submit(t){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=t.parsedStatements[this.name];return this.text&&r&&this.text!==r?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(t):t.query(this.text),null)}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,r){t.execute({portal:this.portal,rows:r}),r?t.flush():t.sync()}prepare(t){this.isPreparedStatement=!0,this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:xx.prepareValue})}catch(r){this.handleError(r,t);return}t.describe({type:"P",name:this.portal||""}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail("No source stream defined")}handleCopyData(t,r){}};qx.exports=j0});var X0=w(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.NoticeMessage=ne.DataRowMessage=ne.CommandCompleteMessage=ne.ReadyForQueryMessage=ne.NotificationResponseMessage=ne.BackendKeyDataMessage=ne.AuthenticationMD5Password=ne.ParameterStatusMessage=ne.ParameterDescriptionMessage=ne.RowDescriptionMessage=ne.Field=ne.CopyResponse=ne.CopyDataMessage=ne.DatabaseError=ne.copyDone=ne.emptyQuery=ne.replicationStart=ne.portalSuspended=ne.noData=ne.closeComplete=ne.bindComplete=ne.parseComplete=void 0;ne.parseComplete={name:"parseComplete",length:5};ne.bindComplete={name:"bindComplete",length:5};ne.closeComplete={name:"closeComplete",length:5};ne.noData={name:"noData",length:5};ne.portalSuspended={name:"portalSuspended",length:5};ne.replicationStart={name:"replicationStart",length:4};ne.emptyQuery={name:"emptyQuery",length:4};ne.copyDone={name:"copyDone",length:4};var L0=class extends Error{constructor(t,r,n){super(t),this.length=r,this.name=n}};ne.DatabaseError=L0;var F0=class{constructor(t,r){this.length=t,this.chunk=r,this.name="copyData"}};ne.CopyDataMessage=F0;var M0=class{constructor(t,r,n,i){this.length=t,this.name=r,this.binary=n,this.columnTypes=new Array(i)}};ne.CopyResponse=M0;var z0=class{constructor(t,r,n,i,s,o,a){this.name=t,this.tableID=r,this.columnID=n,this.dataTypeID=i,this.dataTypeSize=s,this.dataTypeModifier=o,this.format=a}};ne.Field=z0;var H0=class{constructor(t,r){this.length=t,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};ne.RowDescriptionMessage=H0;var U0=class{constructor(t,r){this.length=t,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};ne.ParameterDescriptionMessage=U0;var V0=class{constructor(t,r,n){this.length=t,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};ne.ParameterStatusMessage=V0;var B0=class{constructor(t,r){this.length=t,this.salt=r,this.name="authenticationMD5Password"}};ne.AuthenticationMD5Password=B0;var G0=class{constructor(t,r,n){this.length=t,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};ne.BackendKeyDataMessage=G0;var K0=class{constructor(t,r,n,i){this.length=t,this.processId=r,this.channel=n,this.payload=i,this.name="notification"}};ne.NotificationResponseMessage=K0;var Q0=class{constructor(t,r){this.length=t,this.status=r,this.name="readyForQuery"}};ne.ReadyForQueryMessage=Q0;var W0=class{constructor(t,r){this.length=t,this.text=r,this.name="commandComplete"}};ne.CommandCompleteMessage=W0;var J0=class{constructor(t,r){this.length=t,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};ne.DataRowMessage=J0;var Y0=class{constructor(t,r){this.length=t,this.message=r,this.name="notice"}};ne.NoticeMessage=Y0});var Dx=w(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.Writer=void 0;var Z0=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){var r=this.buffer.length-this.offset;if(r<t){var n=this.buffer,i=n.length+(n.length>>1)+t;this.buffer=Buffer.allocUnsafe(i),n.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(!t)this.ensure(1);else{var r=Buffer.byteLength(t);this.ensure(r+1),this.buffer.write(t,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(t=""){var r=Buffer.byteLength(t);return this.ensure(r),this.buffer.write(t,this.offset),this.offset+=r,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){var r=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};kc.Writer=Z0});var Lx=w(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.serialize=void 0;var ev=Dx(),We=new ev.Writer,aX=e=>{We.addInt16(3).addInt16(0);for(let n of Object.keys(e))We.addCString(n).addCString(e[n]);We.addCString("client_encoding").addCString("UTF8");var t=We.addCString("").flush(),r=t.length+4;return new ev.Writer().addInt32(r).add(t).flush()},uX=()=>{let e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},lX=e=>We.addCString(e).flush(112),fX=function(e,t){return We.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),We.flush(112)},cX=function(e){return We.addString(e).flush(112)},hX=e=>We.addCString(e).flush(81),jx=[],dX=e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||jx;for(var n=r.length,i=We.addCString(t).addCString(e.text).addInt16(n),s=0;s<n;s++)i.addInt32(r[s]);return We.flush(80)},Jo=new ev.Writer,pX=function(e,t){for(let r=0;r<e.length;r++){let n=t?t(e[r],r):e[r];n==null?(We.addInt16(0),Jo.addInt32(-1)):n instanceof Buffer?(We.addInt16(1),Jo.addInt32(n.length),Jo.add(n)):(We.addInt16(0),Jo.addInt32(Buffer.byteLength(n)),Jo.addString(n))}},mX=(e={})=>{let t=e.portal||"",r=e.statement||"",n=e.binary||!1,i=e.values||jx,s=i.length;return We.addCString(t).addCString(r),We.addInt16(s),pX(i,e.valueMapper),We.addInt16(s),We.add(Jo.flush()),We.addInt16(n?1:0),We.flush(66)},yX=Buffer.from([69,0,0,0,9,0,0,0,0,0]),gX=e=>{if(!e||!e.portal&&!e.rows)return yX;let t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),i=4+n+1+4,s=Buffer.allocUnsafe(1+i);return s[0]=69,s.writeInt32BE(i,1),s.write(t,5,"utf-8"),s[n+5]=0,s.writeUInt32BE(r,s.length-4),s},vX=(e,t)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},tv=(e,t)=>{let r=Buffer.byteLength(t),n=4+r+1,i=Buffer.allocUnsafe(1+n);return i[0]=e,i.writeInt32BE(n,1),i.write(t,5,"utf-8"),i[n]=0,i},wX=We.addCString("P").flush(68),bX=We.addCString("S").flush(68),EX=e=>e.name?tv(68,`${e.type}${e.name||""}`):e.type==="P"?wX:bX,_X=e=>{let t=`${e.type}${e.name||""}`;return tv(67,t)},SX=e=>We.add(e).flush(100),PX=e=>tv(102,e),xc=e=>Buffer.from([e,0,0,0,4]),RX=xc(72),TX=xc(83),AX=xc(88),$X=xc(99),IX={startup:aX,password:lX,requestSsl:uX,sendSASLInitialResponseMessage:fX,sendSCRAMClientFinalMessage:cX,query:hX,parse:dX,bind:mX,execute:gX,describe:EX,close:_X,flush:()=>RX,sync:()=>TX,end:()=>AX,copyData:SX,copyDone:()=>$X,copyFail:PX,cancel:vX};qc.serialize=IX});var Fx=w(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.BufferReader=void 0;var OX=Buffer.allocUnsafe(0),rv=class{constructor(t=0){this.offset=t,this.buffer=OX,this.encoding="utf-8"}setBuffer(t,r){this.offset=t,this.buffer=r}int16(){let t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){let t=this.buffer[this.offset];return this.offset++,t}int32(){let t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}string(t){let r=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,r}cstring(){let t=this.offset,r=t;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,t,r-1)}bytes(t){let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}};Nc.BufferReader=rv});var Hx=w(Yo=>{"use strict";var CX=Yo&&Yo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.Parser=void 0;var Ze=X0(),kX=Fx(),xX=CX(require("assert")),nv=1,qX=4,Mx=nv+qX,zx=Buffer.allocUnsafe(0),iv=class{constructor(t){if(this.buffer=zx,this.bufferLength=0,this.bufferOffset=0,this.reader=new kX.BufferReader,t?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=t?.mode||"text"}parse(t,r){this.mergeBuffer(t);let n=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+Mx<=n;){let s=this.buffer[i],o=this.buffer.readUInt32BE(i+nv),a=nv+o;if(a+i<=n){let u=this.handlePacket(i+Mx,s,o,this.buffer);r(u),i+=a}else break}i===n?(this.buffer=zx,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-i,this.bufferOffset=i)}mergeBuffer(t){if(this.bufferLength>0){let r=this.bufferLength+t.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let i;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let s=this.buffer.byteLength*2;for(;r>=s;)s*=2;i=Buffer.allocUnsafe(s)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(t,r,n,i){switch(r){case 50:return Ze.bindComplete;case 49:return Ze.parseComplete;case 51:return Ze.closeComplete;case 110:return Ze.noData;case 115:return Ze.portalSuspended;case 99:return Ze.copyDone;case 87:return Ze.replicationStart;case 73:return Ze.emptyQuery;case 68:return this.parseDataRowMessage(t,n,i);case 67:return this.parseCommandCompleteMessage(t,n,i);case 90:return this.parseReadyForQueryMessage(t,n,i);case 65:return this.parseNotificationMessage(t,n,i);case 82:return this.parseAuthenticationResponse(t,n,i);case 83:return this.parseParameterStatusMessage(t,n,i);case 75:return this.parseBackendKeyData(t,n,i);case 69:return this.parseErrorMessage(t,n,i,"error");case 78:return this.parseErrorMessage(t,n,i,"notice");case 84:return this.parseRowDescriptionMessage(t,n,i);case 116:return this.parseParameterDescriptionMessage(t,n,i);case 71:return this.parseCopyInMessage(t,n,i);case 72:return this.parseCopyOutMessage(t,n,i);case 100:return this.parseCopyData(t,n,i);default:xX.default.fail(`unknown message code: ${r.toString(16)}`)}}parseReadyForQueryMessage(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.string(1);return new Ze.ReadyForQueryMessage(r,i)}parseCommandCompleteMessage(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.cstring();return new Ze.CommandCompleteMessage(r,i)}parseCopyData(t,r,n){let i=n.slice(t,t+(r-4));return new Ze.CopyDataMessage(r,i)}parseCopyInMessage(t,r,n){return this.parseCopyMessage(t,r,n,"copyInResponse")}parseCopyOutMessage(t,r,n){return this.parseCopyMessage(t,r,n,"copyOutResponse")}parseCopyMessage(t,r,n,i){this.reader.setBuffer(t,n);let s=this.reader.byte()!==0,o=this.reader.int16(),a=new Ze.CopyResponse(r,i,s,o);for(let u=0;u<o;u++)a.columnTypes[u]=this.reader.int16();return a}parseNotificationMessage(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.int32(),s=this.reader.cstring(),o=this.reader.cstring();return new Ze.NotificationResponseMessage(r,i,s,o)}parseRowDescriptionMessage(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.int16(),s=new Ze.RowDescriptionMessage(r,i);for(let o=0;o<i;o++)s.fields[o]=this.parseField();return s}parseField(){let t=this.reader.cstring(),r=this.reader.int32(),n=this.reader.int16(),i=this.reader.int32(),s=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Ze.Field(t,r,n,i,s,o,a)}parseParameterDescriptionMessage(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.int16(),s=new Ze.ParameterDescriptionMessage(r,i);for(let o=0;o<i;o++)s.dataTypeIDs[o]=this.reader.int32();return s}parseDataRowMessage(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.int16(),s=new Array(i);for(let o=0;o<i;o++){let a=this.reader.int32();s[o]=a===-1?null:this.reader.string(a)}return new Ze.DataRowMessage(r,s)}parseParameterStatusMessage(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.cstring(),s=this.reader.cstring();return new Ze.ParameterStatusMessage(r,i,s)}parseBackendKeyData(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.int32(),s=this.reader.int32();return new Ze.BackendKeyDataMessage(r,i,s)}parseAuthenticationResponse(t,r,n){this.reader.setBuffer(t,n);let i=this.reader.int32(),s={name:"authenticationOk",length:r};switch(i){case 0:break;case 3:s.length===8&&(s.name="authenticationCleartextPassword");break;case 5:if(s.length===12){s.name="authenticationMD5Password";let a=this.reader.bytes(4);return new Ze.AuthenticationMD5Password(r,a)}break;case 10:s.name="authenticationSASL",s.mechanisms=[];let o;do o=this.reader.cstring(),o&&s.mechanisms.push(o);while(o);break;case 11:s.name="authenticationSASLContinue",s.data=this.reader.string(r-8);break;case 12:s.name="authenticationSASLFinal",s.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return s}parseErrorMessage(t,r,n,i){this.reader.setBuffer(t,n);let s={},o=this.reader.string(1);for(;o!=="\0";)s[o]=this.reader.cstring(),o=this.reader.string(1);let a=s.M,u=i==="notice"?new Ze.NoticeMessage(r,a):new Ze.DatabaseError(a,r,i);return u.severity=s.S,u.code=s.C,u.detail=s.D,u.hint=s.H,u.position=s.P,u.internalPosition=s.p,u.internalQuery=s.q,u.where=s.W,u.schema=s.s,u.table=s.t,u.column=s.c,u.dataType=s.d,u.constraint=s.n,u.file=s.F,u.line=s.L,u.routine=s.R,u}};Yo.Parser=iv});var sv=w(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.DatabaseError=Vi.serialize=Vi.parse=void 0;var NX=X0();Object.defineProperty(Vi,"DatabaseError",{enumerable:!0,get:function(){return NX.DatabaseError}});var DX=Lx();Object.defineProperty(Vi,"serialize",{enumerable:!0,get:function(){return DX.serialize}});var jX=Hx();function LX(e,t){let r=new jX.Parser;return e.on("data",n=>r.parse(n,t)),new Promise(n=>e.on("end",()=>n()))}Vi.parse=LX});var av=w((Eae,Bx)=>{"use strict";var Ux=require("net"),FX=require("events").EventEmitter,{parse:MX,serialize:Ct}=sv(),Vx=Ct.flush(),zX=Ct.sync(),HX=Ct.end(),ov=class extends FX{constructor(t){super(),t=t||{},this.stream=t.stream||new Ux.Socket,this._keepAlive=t.keepAlive,this._keepAliveInitialDelayMillis=t.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=t.ssl||!1,this._ending=!1,this._emitMessage=!1;var r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(t,r){var n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(t,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let i=function(s){n._ending&&(s.code==="ECONNRESET"||s.code==="EPIPE")||n.emit("error",s)};if(this.stream.on("error",i),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(s){var o=s.toString("utf8");switch(o){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}var a=require("tls");let u={socket:n.stream};n.ssl!==!0&&(Object.assign(u,n.ssl),"key"in n.ssl&&(u.key=n.ssl.key)),Ux.isIP(r)===0&&(u.servername=r);try{n.stream=a.connect(u)}catch(l){return n.emit("error",l)}n.attachListeners(n.stream),n.stream.on("error",i),n.emit("sslconnect")})}attachListeners(t){t.on("end",()=>{this.emit("end")}),MX(t,r=>{var n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(Ct.requestSsl())}startup(t){this.stream.write(Ct.startup(t))}cancel(t,r){this._send(Ct.cancel(t,r))}password(t){this._send(Ct.password(t))}sendSASLInitialResponseMessage(t,r){this._send(Ct.sendSASLInitialResponseMessage(t,r))}sendSCRAMClientFinalMessage(t){this._send(Ct.sendSCRAMClientFinalMessage(t))}_send(t){return this.stream.writable?this.stream.write(t):!1}query(t){this._send(Ct.query(t))}parse(t){this._send(Ct.parse(t))}bind(t){this._send(Ct.bind(t))}execute(t){this._send(Ct.execute(t))}flush(){this.stream.writable&&this.stream.write(Vx)}sync(){this._ending=!0,this._send(Vx),this._send(zX)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(HX,()=>{this.stream.end()})}close(t){this._send(Ct.close(t))}describe(t){this._send(Ct.describe(t))}sendCopyFromChunk(t){this._send(Ct.copyData(t))}endCopyFrom(){this._send(Ct.copyDone())}sendCopyFail(t){this._send(Ct.copyFail(t))}};Bx.exports=ov});var Qx=w((Sae,Kx)=>{"use strict";var UX=require("events").EventEmitter,_ae=require("util"),VX=Ac(),uv=dx(),BX=_x(),GX=C0(),KX=N0(),Gx=Nx(),QX=zu(),WX=av(),Dc=class extends UX{constructor(t){super(),this.connectionParameters=new KX(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var r=t||{};this._Promise=r.Promise||global.Promise,this._types=new GX(r.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=r.connection||new WX({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||QX.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(t){let r=n=>{process.nextTick(()=>{n.handleError(t,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(t){var r=this,n=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let i=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(i)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(i),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(i):this._handleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,n)=>{this._connect(i=>{i?n(i):r()})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_checkPgPass(t){let r=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;t()}).catch(n=>{r.emit("error",n)}):this.password!==null?t():BX(this.connectionParameters,n=>{n!==void 0&&(this.connectionParameters.password=this.password=n),t()})}_handleAuthCleartextPassword(t){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._checkPgPass(()=>{let r=VX.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)})}_handleAuthSASL(t){this._checkPgPass(()=>{this.saslSession=uv.startSession(t.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(t){uv.continueSession(this.saslSession,this.password,t.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(t){uv.finalizeSession(this.saslSession,t.data),this.saslSession=null}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this.activeQuery;if(!r){this._handleErrorEvent(t);return}this.activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){this.activeQuery.handleRowDescription(t)}_handleDataRow(t){this.activeQuery.handleDataRow(t)}_handlePortalSuspended(t){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(t){this.activeQuery.handleCommandComplete(t,this.connection)}_handleParseComplete(t){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(t){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(t){this.activeQuery.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){var t=this.connectionParameters,r={user:t.user,database:t.database},n=t.application_name||t.fallback_application_name;return n&&(r.application_name=n),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){var n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(t.processID,t.secretKey)})}else t.queryQueue.indexOf(r)!==-1&&t.queryQueue.splice(t.queryQueue.indexOf(r),1)}setTypeParser(t,r,n){return this._types.setTypeParser(t,r,n)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return'"'+t.replace(/"/g,'""')+'"'}escapeLiteral(t){for(var r=!1,n="'",i=0;i<t.length;i++){var s=t[i];s==="'"?n+=s+s:s==="\\"?(n+=s+s,r=!0):n+=s}return n+="'",r===!0&&(n=" E"+n),n}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let t=this.activeQuery.submit(this.connection);t&&process.nextTick(()=>{this.activeQuery.handleError(t,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(t,r,n){var i,s,o,a,u;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(o=t.query_timeout||this.connectionParameters.query_timeout,s=i=t,typeof r=="function"&&(i.callback=i.callback||r)):(o=this.connectionParameters.query_timeout,i=new Gx(t,r,n),i.callback||(s=new this._Promise((l,f)=>{i.callback=(c,h)=>c?f(c):l(h)}))),o&&(u=i.callback,a=setTimeout(()=>{var l=new Error("Query read timeout");process.nextTick(()=>{i.handleError(l,this.connection)}),u(l),i.callback=()=>{};var f=this.queryQueue.indexOf(i);f>-1&&this.queryQueue.splice(f,1),this._pulseQueryQueue()},o),i.callback=(l,f)=>{clearTimeout(a),u(l,f)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"),this.connection)}),s):(this.queryQueue.push(i),this._pulseQueryQueue(),s):(process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),s)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting)if(t)t();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}};Dc.Query=Gx;Kx.exports=Dc});var Xx=w((Pae,Yx)=>{"use strict";var JX=require("events").EventEmitter,Wx=function(){},Jx=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},lv=class{constructor(t,r,n){this.client=t,this.idleListener=r,this.timeoutId=n}},Xo=class{constructor(t){this.callback=t}};function YX(){throw new Error("Release called on client which has already been released to the pool.")}function jc(e,t){if(t)return{callback:t,result:void 0};let r,n,i=function(o,a){o?r(o):n(a)},s=new e(function(o,a){n=o,r=a});return{callback:i,result:s}}function XX(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}var fv=class extends JX{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||cv().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let i=r.idleListener;return this._acquireClient(n,t,i,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t){let r=Jx(this._idle,n=>n.client===t);r!==void 0&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(n=>n!==t),t.end(),this.emit("remove",t)}connect(t){if(this.ending){let i=new Error("Cannot use a pool after calling end on the pool");return t?t(i):this.Promise.reject(i)}let r=jc(this.Promise,t),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Xo(r.callback)),n;let i=(a,u,l)=>{clearTimeout(o),r.callback(a,u,l)},s=new Xo(i),o=setTimeout(()=>{Jx(this._pendingQueue,a=>a.callback===i),s.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(s),n}return this.newClient(new Xo(r.callback)),n}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let n=XX(this,r);this.log("checking client timeout");let i,s=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),s=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(i&&clearTimeout(i),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),s&&(o.message="Connection terminated due to connection timeout"),this._pulseQueue(),t.timedOut||t.callback(o,void 0,Wx);else return this.log("new client connected"),this.options.maxLifetimeSeconds!==0&&setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new Xo((u,l,f)=>f()),n,!1)},this.options.maxLifetimeSeconds*1e3),this._acquireClient(r,t,n,!0)})}_acquireClient(t,r,n,i){i&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,n),t.removeListener("error",n),r.timedOut?i&&this.options.verify?this.options.verify(t,t.release):t.release():i&&this.options.verify?this.options.verify(t,s=>{if(s)return t.release(s),r.callback(s,void 0,Wx);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let n=!1;return i=>{n&&YX(),n=!0,this._release(t,r,i)}}_release(t,r,n){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,n||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses){t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t),this._pulseQueue();return}if(this._expired.has(t)){this.log("remove expired client"),this._expired.delete(t),this._remove(t),this._pulseQueue();return}let s;this.options.idleTimeoutMillis&&(s=setTimeout(()=>{this.log("remove idle client"),this._remove(t)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&s.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new lv(t,r,s)),this._pulseQueue()}query(t,r,n){if(typeof t=="function"){let s=jc(this.Promise,t);return setImmediate(function(){return s.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),s.result}typeof r=="function"&&(n=r,r=void 0);let i=jc(this.Promise,n);return n=i.callback,this.connect((s,o)=>{if(s)return n(s);let a=!1,u=l=>{a||(a=!0,o.release(l),n(l))};o.once("error",u),this.log("dispatching query"),o.query(t,r,(l,f)=>{if(this.log("query dispatched"),o.removeListener("error",u),!a)return a=!0,o.release(l),l?n(l):n(void 0,f)})}),i.result}end(t){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return t?t(n):this.Promise.reject(n)}this.ending=!0;let r=jc(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};Yx.exports=fv});var Zx=w((Rae,ZX)=>{ZX.exports={name:"pg",version:"8.7.3",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.1","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"0.9.0",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=2.0.0"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"4fa7ee891a456168a75695ac026792136f16577f"}});var rq=w((Tae,tq)=>{"use strict";var eq=require("events").EventEmitter,eZ=require("util"),hv=Ac(),Zo=tq.exports=function(e,t,r){eq.call(this),e=hv.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};eZ.inherits(Zo,eq);var tZ={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Zo.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t){var n=tZ[r]||r;e[n]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};Zo.prototype.then=function(e,t){return this._getPromise().then(e,t)};Zo.prototype.catch=function(e){return this._getPromise().catch(e)};Zo.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};Zo.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var r=function(s,o,a){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),s)return t.handleError(s);t._emitRowEvents&&(a.length>1?o.forEach((u,l)=>{u.forEach(f=>{t.emit("row",f,a[l])})}):o.forEach(function(u){t.emit("row",u,a)})),t.state="end",t.emit("end",a),t.callback&&t.callback(null,a)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(hv.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}var i=this.values.map(hv.prepareValue);e.native.query(this.text,i,r)}else e.native.query(this.text,r)}});var oq=w(($ae,sq)=>{"use strict";var rZ=require("pg-native"),nZ=C0(),Aae=Zx(),nq=require("events").EventEmitter,iZ=require("util"),sZ=N0(),iq=rq(),gr=sq.exports=function(e){nq.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new nZ(e.types),this.native=new rZ({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new sZ(e);this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};gr.Query=iq;iZ.inherits(gr,nq);gr.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};gr.prototype._connect=function(e){var t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(r)return e(r);t.native.connect(n,function(i){if(i)return t.native.end(),e(i);t._connected=!0,t.native.on("error",function(s){t._queryable=!1,t._errorAllQueries(s),t.emit("error",s)}),t.native.on("notification",function(s){t.emit("notification",{channel:s.relname,payload:s.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})};gr.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(n=>{n?r(n):t()})})};gr.prototype.query=function(e,t,r){var n,i,s,o,a;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")s=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,typeof t=="function"&&(e.callback=t);else if(s=this.connectionParameters.query_timeout,n=new iq(e,t,r),!n.callback){let u,l;i=new this._Promise((f,c)=>{u=f,l=c}),n.callback=(f,c)=>f?l(f):u(c)}return s&&(a=n.callback,o=setTimeout(()=>{var u=new Error("Query read timeout");process.nextTick(()=>{n.handleError(u,this.connection)}),a(u),n.callback=()=>{};var l=this._queryQueue.indexOf(n);l>-1&&this._queryQueue.splice(l,1),this._pulseQueryQueue()},s),n.callback=(u,l)=>{clearTimeout(o),a(u,l)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)};gr.prototype.end=function(e){var t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));var r;return e||(r=new this._Promise(function(n,i){e=s=>s?i(s):n()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};gr.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};gr.prototype._pulseQueryQueue=function(e){if(!!this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);var r=this;t.once("_done",function(){r._pulseQueryQueue()})}};gr.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};gr.prototype.ref=function(){};gr.prototype.unref=function(){};gr.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};gr.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var dv=w((Iae,aq)=>{"use strict";aq.exports=oq()});var cv=w((Cae,Uu)=>{"use strict";var oZ=Qx(),aZ=zu(),uZ=av(),lZ=Xx(),{DatabaseError:fZ}=sv(),cZ=e=>class extends lZ{constructor(r){super(r,e)}},pv=function(e){this.defaults=aZ,this.Client=e,this.Query=this.Client.Query,this.Pool=cZ(this.Client),this._pools=[],this.Connection=uZ,this.types=Mu(),this.DatabaseError=fZ};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Uu.exports=new pv(dv()):(Uu.exports=new pv(oZ),Object.defineProperty(Uu.exports,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new pv(dv())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(Uu.exports,"native",{value:e}),e}}))});var lq=w((kae,uq)=>{"use strict";var hZ=/at\s{1}(?:.*\.)?plugin\s{1}.*\n\s*(.*)/,dZ=/(\w*(\.\w*)*)\..*/;uq.exports=function(t){let r=t.match(hZ);return r?r[1].split(/[/\\]/).slice(-1)[0].match(dZ)[1]:"anonymous"}});var cq=w((xae,fq)=>{"use strict";var pZ=lq(),mZ=0;function mv(e,t={}){let r=!1;if(typeof e.default<"u"&&(e=e.default),typeof e!="function")throw new TypeError(`fastify-plugin expects a function, instead got a '${typeof e}'`);e[Symbol.for("skip-override")]=!0;let n=t&&t.name||yZ(e);if(typeof t=="string"&&(t={fastify:t}),typeof t!="object"||Array.isArray(t)||t===null)throw new TypeError("The options object should be an object");if(t.fastify!==void 0&&typeof t.fastify!="string")throw new TypeError(`fastify-plugin expects a version string, instead got '${typeof t.fastify}'`);t.name||(r=!0,t.name=n+"-auto-"+mZ++),e[Symbol.for("fastify.display-name")]=t.name,e[Symbol.for("plugin-meta")]=t,e.default||(e.default=e);let i=gZ(t.name);return!r&&!e[i]&&(e[i]=e),e}function yZ(e){if(e.name.length>0)return e.name;try{throw new Error("anonymous function")}catch(t){return pZ(t.stack)}}function gZ(e){return e.replace(/-(.)/g,function(r,n){return n.toUpperCase()})}mv.default=mv;fq.exports=mv});var dq=w((qae,hq)=>{"use strict";hq.exports=function(t,r){return Array.isArray(t)?[...t,r]:typeof t=="function"?[t,r]:[r]}});var vq=w((Nae,gq)=>{"use strict";var vZ=cv(),wZ=cq(),yv=dq(),pq=Symbol("transactionFailed");function mq(e,t,r){e.connect((n,i,s)=>{if(n)return r(n);let o=u=>(u&&i.query("ROLLBACK",s),!!u),a=(u,l)=>{if(o(u))return r(u);i.query("COMMIT",f=>(s(),f?r(f):r(null,l)))};i.query("BEGIN",u=>{if(o(u))return r(u);let l=t(i,a);l&&typeof l.then=="function"&&l.then(f=>a(null,f),f=>a(f))})})}function bZ(e,t){return t&&typeof t=="function"?mq(this,e,t):new Promise((r,n)=>{mq(this,e,function(i,s){return i?n(i):r(s)})})}function yq(e,t){if(typeof t!="string")return e.pg;let r=e.pg[t];if(!r)throw new Error(`request client '${t}' does not exist`);return r}function EZ(e,t,r){let n=vZ;t.pg&&(n=t.pg),t.native&&(delete t.native,n.native?n=n.native:console.warn("pg-native not installed, can't use native option - fallback to pg module"));let i=t.name;delete t.name;let s=new n.Pool(t),o={connect:s.connect.bind(s),pool:s,Client:n.Client,query:s.query.bind(s),transact:bZ.bind(s)};if(e.addHook("onClose",(a,u)=>s.end(u)),i){if(o[i])return r(new Error(`fastify-postgres '${i}' is a reserved keyword`));if(!e.pg)e.decorate("pg",Object.create(null));else if(e.pg[i])return r(new Error(`fastify-postgres '${i}' instance name has already been registered`));e.pg[i]=o}else if(e.pg){if(e.pg.pool)return r(new Error("fastify-postgres has already been registered"));Object.assign(e.pg,o)}else e.decorate("pg",o);e.hasRequestDecorator("pg")||e.decorateRequest("pg",null),e.addHook("onRoute",a=>{let u=a&&a.pg&&a.pg.transact;if(!u||typeof u=="string"&&u!==i||i&&u===!0)return;let l=async(h,d)=>{let p=await s.connect();if(i){if(h.pg||(h.pg=Object.create(null)),p[i])throw p.release(),new Error(`pg client '${i}' is a reserved keyword`);if(h.pg[i])throw p.release(),new Error(`request client '${i}' has already been registered`);h.pg[i]=p}else{if(h.pg)throw p.release(),new Error("request client has already been registered");h.pg=p}p.query("BEGIN")},f=(h,d,p,m)=>{h[pq]=!0,yq(h,u).query("ROLLBACK",m)},c=async h=>{let d=yq(h,u);try{h[pq]||await d.query("COMMIT")}finally{d.release()}};a.preHandler=yv(a.preHandler,l),a.onError=yv(a.onError,f),a.onSend=yv(a.onSend,c)}),r()}gq.exports=wZ(EZ,{fastify:"4.x",name:"@fastify/postgres"})});var Pq=w((Lae,Sq)=>{"use strict";var Eq=12,_Z=0,vv=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function SZ(e){var t=e.indexOf("%");if(t===-1)return e;for(var r=e.length,n="",i=0,s=0,o=t,a=Eq;t>-1&&t<r;){var u=_q(e[t+1],4),l=_q(e[t+2],0),f=u|l,c=vv[f];if(a=vv[256+a+c],s=s<<6|f&vv[364+c],a===Eq)n+=e.slice(i,o),n+=s<=65535?String.fromCharCode(s):String.fromCharCode(55232+(s>>10),56320+(s&1023)),s=0,i=t+3,t=o=e.indexOf("%",i);else{if(a===_Z)return null;if(t+=3,t<r&&e.charCodeAt(t)===37)continue;return null}}return n+e.slice(i)}var PZ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function _q(e,t){var r=PZ[e];return r===void 0?255:r<<t}Sq.exports=SZ});var Iq=w((Fae,$q)=>{"use strict";var Rq=Pq(),Tq=/\+/g,Aq=function(){};Aq.prototype=Object.create(null);function RZ(e){let t=new Aq;if(typeof e!="string")return t;let r=e.length,n="",i="",s=-1,o=-1,a=!1,u=!1,l=!1,f=!1,c=!1,h=0;for(let d=0;d<r+1;d++)if(h=d!==r?e.charCodeAt(d):38,h===38){if(c=o>s,c||(o=d),n=e.slice(s+1,o),c||n.length>0){l&&(n=n.replace(Tq," ")),a&&(n=Rq(n)||n),c&&(i=e.slice(o+1,d),f&&(i=i.replace(Tq," ")),u&&(i=Rq(i)||i));let p=t[n];p===void 0?t[n]=i:p.pop?p.push(i):t[n]=[p,i]}i="",s=d,o=d,a=!1,u=!1,l=!1,f=!1}else h===61?o<=s?o=d:u=!0:h===43?o>s?f=!0:l=!0:h===37&&(o>s?u=!0:a=!0);return t}$q.exports=RZ});var Cq=w((Mae,Oq)=>{var Fn=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),TZ=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function AZ(e){let t=e.length;if(t===0)return"";let r="",n=0,i=0;e:for(;i<t;i++){let s=e.charCodeAt(i);for(;s<128;){if(TZ[s]!==1&&(n<i&&(r+=e.slice(n,i)),n=i+1,r+=Fn[s]),++i===t)break e;s=e.charCodeAt(i)}if(n<i&&(r+=e.slice(n,i)),s<2048){n=i+1,r+=Fn[192|s>>6]+Fn[128|s&63];continue}if(s<55296||s>=57344){n=i+1,r+=Fn[224|s>>12]+Fn[128|s>>6&63]+Fn[128|s&63];continue}if(++i,i>=t)throw new Error("URI malformed");let o=e.charCodeAt(i)&1023;n=i+1,s=65536+((s&1023)<<10|o),r+=Fn[240|s>>18]+Fn[128|s>>12&63]+Fn[128|s>>6&63]+Fn[128|s&63]}return n===0?e:n<t?r+e.slice(n):r}Oq.exports={encodeString:AZ}});var qq=w((zae,xq)=>{"use strict";var{encodeString:wv}=Cq();function kq(e){let t=typeof e;return t==="string"?wv(e):t==="bigint"?e.toString():t==="boolean"?e?"true":"false":t==="number"&&Number.isFinite(e)?Math.abs(e)<1e21?e.toString():wv(e.toString()):""}function $Z(e){let t="";if(e===null||typeof e!="object")return t;let r="&",n=Object.keys(e),i=n.length,s=0;for(let o=0;o<i;o++){let a=n[o],u=e[a],l=wv(a)+"=";if(o&&(t+=r),Array.isArray(u)){s=u.length;for(let f=0;f<s;f++)f&&(t+=r),t+=l,t+=kq(u[f])}else t+=l,t+=kq(u)}return t}xq.exports=$Z});var Dq=w((Hae,bv)=>{"use strict";var IZ=Iq(),OZ=qq(),Nq={parse:IZ,stringify:OZ};bv.exports=Nq;bv.exports.default=Nq});var Lq=w((Uae,jq)=>{"use strict";var CZ=No(),{parse:kZ}=Dq();function xZ(e){return kZ(e)}function qZ(e,t,r){let n=Object.assign({parser:xZ},t);if(typeof n.parser!="function"){r(new Error("parser must be a function"));return}function i(s,o,a){a(null,n.parser(o.toString()))}e.addContentTypeParser("application/x-www-form-urlencoded",{parseAs:"buffer",bodyLimit:n.bodyLimit},i),r()}jq.exports=CZ(qZ,{fastify:"4.x",name:"@fastify/formbody"})});var zq=Wi(WI());function wg(e,t){return z(this,null,function*(){let r={};r["/"]={schema:{response:{200:{type:"object",properties:{greeting:{type:"string"}}}}}},e.get("/",r["/"],(n,i)=>z(this,null,function*(){return{greeting:"Hi! It works!"}})),e.get("/postgres",r["/"],(n,i)=>z(this,null,function*(){let{rowCount:s}=yield e.pg.query("SELECT * from users");return e.log.info(`Rows in users table: ${s}`),{greeting:"Postgres works!"}}))})}var lc=class{constructor(){this.DEFAULT_LIMIT=20;this.DEFAULT_OFFSET=0}findById(t){return z(this,null,function*(){var n;let{rows:r}=yield G.pg.query("SELECT content FROM informations WHERE id = $1",[t]);return G.log.info({content:(n=r[0])==null?void 0:n.content}),r[0]})}create(n){return z(this,arguments,function*({title:t,content:r}){var a;let{rows:i,rowCount:s}=yield G.pg.query("INSERT INTO informations (title, content) VALUES ($1, $2) RETURNING id",[t,r]);return G.log.info(`question-create: ${s?"created":"not-created"}, ${t}`),{isCreated:s===1,id:(a=i[0])==null?void 0:a.id}})}findAll(){return z(this,arguments,function*(t=this.DEFAULT_LIMIT,r=this.DEFAULT_OFFSET){let{rows:n}=yield G.pg.query("SELECT id, title, content FROM informations LIMIT $1 OFFSET $2",[t,r]);return n})}update(n){return z(this,arguments,function*({id:t,content:r}){let{rowCount:i}=yield G.pg.query("UPDATE informations SET content = $1 WHERE id = $2",[r,t]);return G.log.info(`question-update: ${i?"updated":"not-updated"}, ${t}`),{isUpdated:i===1}})}deleteById(t){return z(this,null,function*(){let{rowCount:r}=yield G.pg.query("DELETE FROM tickets WHERE id = $1",[t]);return G.log.info(`ticket-delete: ${r?"deleted":"not-deleted"}, ${t}`),{isDeleted:r===1}})}},si=new lc;var fc=class{constructor(){this.DEFAULT_LIMIT=20;this.DEFAULT_OFFSET=0}findById(t){return z(this,null,function*(){let{rows:r}=yield G.pg.query("SELECT title, content, photos FROM informations WHERE id = $1",[t]);return r[0]})}findByTitle(t){return z(this,null,function*(){let{rows:r}=yield G.pg.query("SELECT content, photos FROM informations WHERE title = $1",[t]);return r[0]})}create(i){return z(this,arguments,function*({title:t,content:r,photos:n}){var u;let{rows:s,rowCount:o}=yield G.pg.query("INSERT INTO informations (title, content, photos) VALUES ($1, $2, $3) RETURNING id",[t,r,n]);return G.log.info(`question-create: ${o?"created":"not-created"}, ${t}`),{isCreated:o===1,id:(u=s[0])==null?void 0:u.id}})}findAll(){return z(this,arguments,function*(t=this.DEFAULT_LIMIT,r=this.DEFAULT_OFFSET){let{rows:n}=yield G.pg.query("SELECT id, title, content, photos FROM informations LIMIT $1 OFFSET $2",[t,r]);return n})}update(i){return z(this,arguments,function*({title:t,content:r,photos:n}){let s="",o=[];r&&n&&(s="UPDATE informations SET content = $1, photos = $2 WHERE title = $3",o=[r,n,t]),r&&!n&&(s="UPDATE informations SET content = $1 WHERE title = $2",o=[r,t]),!r&&n&&(s="UPDATE informations SET photos = $1 WHERE title = $2",o=[n,t]);let{rowCount:a}=yield G.pg.query(s,o);return{isUpdated:a===1}})}deleteById(t){return z(this,null,function*(){let{rowCount:r}=yield G.pg.query("DELETE FROM informations WHERE id = $1",[t]);return{isDeleted:r===1}})}deleteByTitle(t){return z(this,null,function*(){let{rowCount:r}=yield G.pg.query("DELETE FROM informations WHERE title = $1",[t]);return{isDeleted:r===1}})}},Ar=new fc;var cc=class{constructor(){this.DEFAULT_LIMIT=20;this.DEFAULT_OFFSET=0}findById(t){return z(this,null,function*(){let{rows:r}=yield G.pg.query("SELECT title, content, photos FROM portfolios WHERE id = $1",[t]);return r[0]})}findByTitle(t){return z(this,null,function*(){let{rows:r}=yield G.pg.query("SELECT content, photos FROM portfolios WHERE title = $1",[t]);return r[0]})}create(s){return z(this,arguments,function*({title:t,content:r,photos:n,techStack:i}){var l;let{rows:o,rowCount:a}=yield G.pg.query("INSERT INTO portfolios (title, content, photos, tech_stack) VALUES ($1, $2, $3, $4) RETURNING id",[t,r,n,i]);return G.log.info(`question-create: ${a?"created":"not-created"}, ${t}`),{isCreated:a===1,id:(l=o[0])==null?void 0:l.id}})}findAll(){return z(this,arguments,function*(t=this.DEFAULT_LIMIT,r=this.DEFAULT_OFFSET){let{rows:n}=yield G.pg.query('SELECT id, title, content, photosm tech_stack AS "techStack" FROM portfolios LIMIT $1 OFFSET $2',[t,r]);return n})}update(s){return z(this,arguments,function*({title:t,content:r,photos:n,techStack:i}){let o=0;return r&&(yield G.pg.query("UPDATE portfolios SET content = $1 WHERE title = $2",[r,t]),o=1),n&&(yield G.pg.query("UPDATE portfolios SET photos = $1 WHERE title = $2",[n,t]),o=1),i&&(yield G.pg.query("UPDATE portfolios SET tech_stack = $1 WHERE title = $2",[i,t]),o=1),{isUpdated:o===1}})}deleteById(t){return z(this,null,function*(){let{rowCount:r}=yield G.pg.query("DELETE FROM portfolios WHERE id = $1",[t]);return{isDeleted:r===1}})}deleteByTitle(t){return z(this,null,function*(){let{rowCount:r}=yield G.pg.query("DELETE FROM portfolios WHERE title = $1",[t]);return{isDeleted:r===1}})}},oi=new cc;var hc=class{constructor(){this.DEFAULT_LIMIT=20;this.DEFAULT_OFFSET=0}findById(t){return z(this,null,function*(){let{rows:r}=yield G.pg.query("SELECT title, content FROM participates WHERE id = $1",[t]);return r[0]})}findByTitle(t){return z(this,null,function*(){let{rows:r}=yield G.pg.query("SELECT content FROM participates WHERE title = $1",[t]);return r[0]})}create(n){return z(this,arguments,function*({title:t,content:r}){var a;let{rows:i,rowCount:s}=yield G.pg.query("INSERT INTO participates (title, content) VALUES ($1, $2) RETURNING id",[t,r]);return G.log.info(`question-create: ${s?"created":"not-created"}, ${t}`),{isCreated:s===1,id:(a=i[0])==null?void 0:a.id}})}findAll(){return z(this,arguments,function*(t=this.DEFAULT_LIMIT,r=this.DEFAULT_OFFSET){let{rows:n}=yield G.pg.query("SELECT id, title, content FROM participates LIMIT $1 OFFSET $2",[t,r]);return n})}update(n){return z(this,arguments,function*({title:t,content:r}){let i="",s=[];i="UPDATE participates SET content = $1 WHERE title = $2",s=[r,t];let{rowCount:o}=yield G.pg.query(i,s);return{isUpdated:o===1}})}deleteById(t){return z(this,null,function*(){let{rowCount:r}=yield G.pg.query("DELETE FROM participates WHERE id = $1",[t]);return{isDeleted:r===1}})}deleteByTitle(t){return z(this,null,function*(){let{rowCount:r}=yield G.pg.query("DELETE FROM participates WHERE title = $1",[t]);return{isDeleted:r===1}})}},bg=new hc;var Eg=`
  CREATE TABLE IF NOT EXISTS informations (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL UNIQUE,
    content TEXT NOT NULL,
    photos text[],
    count INTEGER DEFAULT 0, 
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
  );

  CREATE TABLE IF NOT EXISTS portfolios (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL UNIQUE,
    content TEXT NOT NULL,
    github_link VARCHAR(200),
    tech_stack text[],
    photos text[],
    count INTEGER DEFAULT 0, 
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
  );

  CREATE TABLE IF NOT EXISTS participates (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    count INTEGER DEFAULT 0, 
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
  );
`;function _g(e,t){return z(this,null,function*(){let r={schema:{body:{type:"object",properties:{title:{type:"string"},content:{type:"string"}},required:["title","content"],additionalProperties:!1},response:{201:{type:"object",properties:{id:{type:"number"},title:{type:"string"},content:{type:"string"}}}}}};e.post("/question",r,(n,i)=>z(this,null,function*(){let{title:s,content:o}=n.body,{id:a}=yield si.create({title:s,content:o});return i.status(201),{title:s,content:o,id:a}}))})}function Sg(e,t){return z(this,null,function*(){let r={schema:{querystring:{type:"object",properties:{id:{type:"string"}},required:["id"]},response:{200:{type:"object",properties:{content:{type:"string"}}}}}};e.get("/question",r,(n,i)=>z(this,null,function*(){let{id:s}=n.query,o=yield si.findById(s);return i.status(200),o}))})}function Pg(e,t){return z(this,null,function*(){let r={schema:{body:{type:"object",properties:{id:{type:"number"},content:{type:"string"}},anyOf:[{required:["id","content"]}]},response:{200:{type:"object",properties:{isUpdated:{type:"boolean"}}}}}};e.put("/question",r,(n,i)=>z(this,null,function*(){let{id:s,content:o}=n.body,{isUpdated:a}=yield si.update({id:s,content:o});return{isUpdated:a}}))})}function Rg(e,t){return z(this,null,function*(){let r={schema:{response:{200:{type:"array",items:{type:"object",properties:{id:{type:"number"},title:{type:"string"},content:{type:"string"}}}}}}};e.get("/questions",r,(n,i)=>z(this,null,function*(){let s=yield si.findAll();return i.status(200),s}))})}function Tg(e,t){return z(this,null,function*(){e.get("/self/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,s=yield Ar.findByTitle(`self_${i.toLowerCase()}`);return n.status(200),s})),e.get("/dev/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,s;return i==="portfolio"?s=yield oi.findAll():s=yield Ar.findByTitle(`dev_${i.toLowerCase()}`),n.status(200),s}))})}var JI=parseInt(process.env.PORT||"5000"),Tu=process.env.POSTGRES_URL||"postgresql://postgres:1234@localhost:5432/portfolio",dse=process.env.DOMAIN||"localhost",Au=process.env.NODE_ENV,As=process.env.MY_PASSWORD;function Ag(e,t){return z(this,null,function*(){e.put("/self/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,{content:s,password:o,photos:a}=r.body;if(o!==As)throw n.status(400),new Error("\uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");e.log.info(s);let{isUpdated:u}=yield Ar.update({title:`self_${i.toLowerCase()}`,content:s,photos:a});return n.status(200),u?{content:"\uC218\uC815\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}:{content:"\uC218\uC815\uC5D0 \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4."}})),e.put("/dev/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,{content:s,password:o,photos:a,techStack:u}=r.body,l;if(o!==As)throw n.status(400),new Error("\uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");let f=`dev_${i.toLowerCase()}`;if(i==="portfolio"){let{isUpdated:c}=yield oi.update({title:f,content:s,photos:a,techStack:u});l=c}else{let{isUpdated:c}=yield Ar.update({title:f,content:s,photos:a});l=c}return n.status(200),l?{content:"\uC218\uC815\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}:{content:"\uC218\uC815\uC5D0 \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4."}}))})}function $g(e,t){return z(this,null,function*(){e.post("/self/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,{content:s,photos:o}=r.body,{isCreated:a}=yield Ar.create({title:`self_${i.toLowerCase()}`,content:s,photos:o});return n.status(200),{isCreated:a}})),e.post("/dev/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,{content:s,photos:o,techStack:a}=r.body,u,l=`dev_${i.toLowerCase()}`;if(i==="portfolio"){let{isCreated:f}=yield oi.create({title:l,content:s,photos:o,techStack:a});u=f}else{let{isCreated:f}=yield Ar.create({title:l,content:s,photos:o});u=f}return n.status(200),{isCreated:u}}))})}function Ig(e,t){return z(this,null,function*(){e.post("/participate/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,{content:s}=r.body,{isCreated:o}=yield bg.create({title:`self_${i.toLowerCase()}`,content:s});return n.status(200),o?{content:"\uB4F1\uB85D\uC774  \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uAC10\uC0AC\uD569\uB2C8\uB2E4:)"}:{content:"\uB4F1\uB85D\uC5D0  \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4."}}))})}function Og(e,t){return z(this,null,function*(){e.delete("/self/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,{password:s}=r.body;if(s!==As)throw e.log.info(s),n.status(400),new Error("\uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");let{isDeleted:o}=yield Ar.deleteByTitle(`self_${i.toLowerCase()}`);return n.status(200),o?{content:"\uC0AD\uC81C\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}:{content:"\uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4."}})),e.delete("/dev/:type",(r,n)=>z(this,null,function*(){let{type:i}=r.params,{password:s}=r.body,o;if(s!==As)throw e.log.info(s,As),n.status(400),new Error("\uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");let a=`dev_${i.toLowerCase()}`;if(i==="portfolio"){let{isDeleted:u}=yield oi.deleteByTitle(a);o=u}else{let{isDeleted:u}=yield Ar.deleteByTitle(`self_${i.toLowerCase()}`);o=u}return n.status(200),o?{content:"\uC0AD\uC81C\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}:{content:"\uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD558\uC600\uC2B5\uB2C8\uB2E4."}}))})}var Ok=Wi(No()),Ck=Wi(Ik());var m0=(0,Ok.default)((e,t)=>z(void 0,null,function*(){let r=Au==="production"?!1:[/localhost/,/postman/],n=Au!=="production";e.register(Ck.default,{origin:r,credentials:n})}));var wq=Wi(No()),bq=Wi(vq());var gv=(0,wq.default)((e,t)=>z(void 0,null,function*(){e.register(bq.default,{connectionString:Tu})}));var Fq=Wi(No()),Mq=Wi(Lq());var NZ=(0,Fq.default)((e,t)=>z(void 0,null,function*(){e.register(Mq.default)}));var G=(0,zq.default)({logger:{transport:Au!=="production"?{target:"pino-pretty",options:{ignore:"pid,hostname"}}:void 0},disableRequestLogging:!0});G.register(m0);G.register(gv);G.register(wg);G.register(_g);G.register(Sg);G.register(Rg);G.register(Pg);G.register(Tg);G.register(Ag);G.register($g);G.register(Ig);G.register(Og);G.listen({port:JI,host:"0.0.0.0"},(e,t)=>{e&&(G.log.error(e),process.exit(1)),G.pg.connect(r=>{r&&(G.log.error(r.message),G.log.error(`Postgres connection ERROR on ${Tu}`),process.exit(1)),G.log.info(`Postgres connected at ${Tu}`),G.pg.query(Eg,n=>{n&&G.log.error(n)})})});
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * forwarded
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * proxy-addr
 * Copyright(c) 2014-2016 Douglas Christopher Wilson
 * MIT Licensed
 */
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
